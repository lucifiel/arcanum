"use strict";(self.webpackChunk_name_=self.webpackChunk_name_||[]).push([[887],{1430:(t,n,e)=>{e.d(n,{Z:()=>o});var s=e(4015),a=e.n(s),i=e(3645),r=e.n(i)()(a());r.push([t.id,"\nlabel[data-v-6d0e0bec] {\n\tmargin-right:var(--md-gap);\n}\n","",{version:3,sources:["webpack://./src/ui/components/filterbox.vue"],names:[],mappings:";AAqEA;CACA,0BAAA;AACA",sourcesContent:["<script>\nexport default {\n\n\t/**\n\t * @property {object[]} items - items to filter.\n\t * @property {prop} [prop='name'] - target prop of filter test.\n\t *\n\t * @property {number} [minItems=0] - minimum number of items before box is visible.\n\t */\n\tprops:['value', 'items', 'prop', 'minItems'],\n\tdata() {\n\t\treturn {\n\t\t\ttext:'',\n\t\t\tpprop:this.prop||'name'\n\t\t}\n\t},\n\twatch:{\n\t\titems(newVal,oldVal){ this.findText = this.findText; }\n\t},\n\tcreated(){\n\t\tthis.findText = this.text;\n\t},\n\tmethods:{\n\t\tclear(){ this.text = ''; }\n\t},\n\tcomputed:{\n\n\t\tfindText:{\n\n\t\t\tget() { return this.text; },\n\t\t\tset(v){\n\n\t\t\t\tthis.text = v;\n\t\t\t\tlet p = this.pprop;\n\n\t\t\t\tif ( !v ) this.$emit( 'input', this.items );\n\n\t\t\t\tvar txt = v.toLowerCase();\n\n\t\t\t\tif ( typeof p === 'function') {\n\n \t\t\t\t\tthis.$emit( 'input', this.items.filter(\n\t\t\t\t\t\tit=>p(it, txt )\n\t\t\t\t\t));\n\n\t\t\t\t} else this.$emit( 'input', this.items.filter(\n\t\t\t\t\tit=>(typeof it === 'object') &&\n\t\t\t\t\t( (typeof it[p]) === 'string' ) && it[p].toLowerCase().includes( txt )\n\t\t\t\t));\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n\n<template>\n\t<div class=\"filter-box\" v-if=\"!this.minItems||text||(this.items.length>=this.minItems)\">\n\t\t<label :for=\"elmId('filter')\">Find</label>\n\t\t<input :id=\"elmId('filter')\" v-model=\"findText\" type=\"text\">\n\t</div>\n</template>\n\n\n<style scoped>\nlabel {\n\tmargin-right:var(--md-gap);\n}\n</style>"],sourceRoot:""}]);const o=r},2486:(t,n,e)=>{e.d(n,{Z:()=>o});var s=e(4015),a=e.n(s),i=e(3645),r=e.n(i)()(a());r.push([t.id,"\n.enchant-slots span[data-v-142499bd] {\n\tfont-size: 0.9em;\n}\n\n/*.item-name {\n}\n\n.enchant-name {\n\tfont-size: 0.9em;\n}*/\n\n","",{version:3,sources:["webpack://./src/ui/items/enchantslots.vue"],names:[],mappings:";AAsDA;CACA,gBAAA;AAEA;;AAEA;;;;;EAKA",sourcesContent:['<script>\nexport default {\n\n\t/**\n\t * @property {Inventory} eslots - running enchantment slots.\n\t * @property {Inventory} inv - player inventory.\n\t */\n\tprops:[ \'eslots\', \'inv\'],\n\tcomputed:{\n\n\t},\n\tmethods:{\n\n\t\tcanTake(it){\n\t\t\treturn it.target && this.inv.canAdd(it.target);\n\t\t},\n\n\t\tonTake( it ){\n\n\t\t\tif ( !this.inv.canAdd(it.target) ) return;\n\n\t\t\tthis.inv.add(it.target);\n\t\t\tthis.eslots.remove(it);\n\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n<template>\n\n<div class="enchant-slots">\n<span>{{ Math.floor(eslots.used) }} / {{ Math.floor( eslots.max) }} Slot-levels used. </span>\n<div class="enchant-slot" v-for="s in eslots.items" :key="s.id">\n<span class="enchant-desc">\n<span>Level {{ s.item.level }}</span>\n<span class="item-name" @mouseenter.capture.stop="itemOver( $event, s.target )">{{s.target.name.toTitleCase()}}</span>\n<span class="enchant-name" @mouseenter.capture.stop="itemOver( $event, s.item )">{{s.item.name.toTitleCase()}}</span>\n\n</span>\n<span>{{ s.percent() + \'%\'}}</span>\n\n<button class="btn-take" :disabled="!canTake(s)" @click="onTake(s)">{{ s.done ? \'take\' : \'cancel\' }}</button>\n\n</div>\n\n</div>\n\n</template>\n\n<style scoped>\n\n.enchant-slots span {\n\tfont-size: 0.9em;\n\n}\n\n/*.item-name {\n}\n\n.enchant-name {\n\tfont-size: 0.9em;\n}*/\n\n</style>'],sourceRoot:""}]);const o=r},1348:(t,n,e)=>{e.d(n,{Z:()=>o});var s=e(4015),a=e.n(s),i=e(3645),r=e.n(i)()(a());r.push([t.id,"\ndiv.enchants[data-v-ae3a31f0] {\n\tdisplay:flex;\n\tflex-direction: column;\n\tpadding:0 1rem;\n\theight:100%;\n\tmargin-top: var(--sm-gap);\n}\ndiv.enchants .eslots[data-v-ae3a31f0] {\n\tpadding-bottom: var(--sm-gap);\n\tborder-bottom: 1pt solid var(--separator-color);\n}\ndiv.enchants .filtered[data-v-ae3a31f0] {\n\tpadding-top: var(--sm-gap);\n\tdisplay:flex;\n\tflex-flow: column;\n\tmargin-right: var(--md-gap);\n\tborder-right: 1px solid var(--separator-color);\n}\ndiv.enchants .enchant-list[data-v-ae3a31f0] {\n\tdisplay:flex;\n\tflex-flow: column nowrap;\n\tflex:1;\n}\ndiv.enchants .separate[data-v-ae3a31f0] {\n\talign-items:flex-start;\n}\ndiv.enchants .enchant-list > div.enchant[data-v-ae3a31f0] {\n\tdisplay:flex;\n\twidth:100%;\n\tjustify-content: space-between;\n\tflex-direction: row;\n}\ndiv.enchants .enchant-list  .ench-name[data-v-ae3a31f0] {\n\tmin-width: 5rem;\n}\n\n\n","",{version:3,sources:["webpack://./src/ui/sections/enchanting.vue"],names:[],mappings:";AAiIA;CACA,YAAA;CACA,sBAAA;CACA,cAAA;CACA,WAAA;CACA,yBAAA;AACA;AAEA;CACA,6BAAA;CACA,+CAAA;AACA;AAEA;CACA,0BAAA;CACA,YAAA;CACA,iBAAA;CACA,2BAAA;CACA,8CAAA;AACA;AAGA;CACA,YAAA;CACA,wBAAA;CACA,MAAA;AACA;AAEA;CACA,sBAAA;AACA;AAEA;CACA,YAAA;CACA,UAAA;CACA,8BAAA;CACA,mBAAA;AACA;AAEA;CACA,eAAA;AACA",sourcesContent:['<script>\nimport Game from \'game\';\nimport {ENCHANTSLOTS} from \'values/consts\';\nimport EnchantSlots from \'../items/enchantslots.vue\';\nimport FilterBox from \'../components/filterbox.vue\';\nimport ItemsBase from \'../itemsBase\';\n\nexport default {\n\n\tmixins:[ItemsBase],\n\tcomponents:{\n\t\teslots:EnchantSlots,\n\t\tfilterbox:FilterBox,\n\t\tinv:()=>import( /* webpackChunkName: "inv-ui" */ \'./inventory.vue\')\n\t},\n\tdata() {\n\n\t\treturn {\n\t\t\t/**\n\t\t\t * @property {Item[]} filtered - filtered search results.\n\t\t\t */\n\t\t\tfiltered:null,\n\t\t\t/**\n\t\t\t * @property {Item} target - current enchant target.\n\t\t\t */\n\t\t\ttarget:null\n\t\t}\n\t},\n\tbeforeCreate(){\n\t\tthis.game = Game;\n\t\tthis.state = Game.state;\n\t\tthis.runner = this.state.runner;\n\t\tthis.inv = this.state.getData(\'inventory\');\n\t\tthis.enchantSlots = this.state.getData(ENCHANTSLOTS);\n\t},\n\tmethods:{\n\n\t\tbegin(it,target ) {\n\n\t\t\t/** @note test here for successful add to enchants? */\n\t\t\tthis.emit(\'enchant\', it, target )\n\n\t\t\tthis.inv.remove(target);\n\t\t\tthis.target = null;\n\n\t\t},\n\n\t\tclearTarget(){\n\t\t\tthis.target = null;\n\t\t},\n\n\t\tresume(){\n\t\t\tGame.toggleTask(this.enchantSlots);\n\t\t},\n\n\t\tcanAlter( it, targ ) {\n\t\t\treturn targ&&it.canAlter(targ)&& this.enchantSlots.canAdd(it);\n\t\t}\n\n\t},\n\tcomputed:{\n\n\t\tenchants(){\n\t\t\treturn this.state.filterItems( it=>it.type===\'enchant\' && !this.locked(it) );\n\t\t},\n\n\t\t/**\n\t\t * Enchants usable for selected item.\n\t\t */\n\t\tusable(){\n\n\t\t\tlet t = this.target;\n\t\t\tif ( !t ) return this.filtered;\n\n\t\t\treturn this.filtered.filter( it=>!it.owned|| this.canAlter(it, t ) );\n\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n<template>\n\n\t\t<div class="enchants">\n\n\t\t<div class="separate">\n\t\t<div>\n\t\t\t<div @mouseenter.capture.stop="itemOver( $event, target )">Target: {{ target ? target.name.toTitleCase() : \'None\' }}</div>\n\t\t\t<div class="note-text">Enchantment levels on an Item cannot exceed Item\'s enchant slots.</div>\n\t\t</div>\n\n\t\t<span><button :disabled="enchantSlots.count==0" @click="resume">{{ runner.has(enchantSlots) ? \'Pause\' : \'Resume\' }}</button></span>\n\n\t\t</div>\n\n\t\t<eslots class="eslots" :eslots="enchantSlots" :inv="inv" />\n\n\t\t<div class="separate">\n\n\t\t<div class="filtered">\n\t\t<div v-if="target"><button class="stop" @click="clearTarget">X</button>{{ target.name.toTitleCase() }}</div>\n\t\t<filterbox v-model="filtered" :items="enchants" min-items="7" />\n\n\t\t<div class="enchant-list">\n\t\t<div class=\'enchant\' v-for="it in usable" :key="it.id" @mouseenter.capture.stop="itemOver( $event,it)">\n\n\t\t\t<span class="ench-name">{{ it.name.toTitleCase() }}</span>\n\n\n\t\t\t<button v-if="it.buy&&!it.owned" :disabled="!it.canBuy(game)"\n\t\t\t\t@click="emit(\'buy\', it)">ðŸ”’</button>\n\n\t\t\t<button v-else @click="begin(it,target)" :disabled="!it.canUse()">Enchant</button>\n\n\t\t</div>\n\t\t</div>\n\t\t</div>\n\n\t\t<inv selecting=true :inv="state.inventory" v-model="target" :types="[\'armor\',\'weapon\']" hide-space="true" />\n\t\t</div>\n\n\t</div>\n\n</template>\n\n<style scoped>\n\ndiv.enchants {\n\tdisplay:flex;\n\tflex-direction: column;\n\tpadding:0 1rem;\n\theight:100%;\n\tmargin-top: var(--sm-gap);\n}\n\ndiv.enchants .eslots {\n\tpadding-bottom: var(--sm-gap);\n\tborder-bottom: 1pt solid var(--separator-color);\n}\n\ndiv.enchants .filtered {\n\tpadding-top: var(--sm-gap);\n\tdisplay:flex;\n\tflex-flow: column;\n\tmargin-right: var(--md-gap);\n\tborder-right: 1px solid var(--separator-color);\n}\n\n\ndiv.enchants .enchant-list {\n\tdisplay:flex;\n\tflex-flow: column nowrap;\n\tflex:1;\n}\n\ndiv.enchants .separate {\n\talign-items:flex-start;\n}\n\ndiv.enchants .enchant-list > div.enchant {\n\tdisplay:flex;\n\twidth:100%;\n\tjustify-content: space-between;\n\tflex-direction: row;\n}\n\ndiv.enchants .enchant-list  .ench-name {\n\tmin-width: 5rem;\n}\n\n\n</style>'],sourceRoot:""}]);const o=r},4194:(t,n,e)=>{e.d(n,{Z:()=>b});var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return!this.minItems||t.text||this.items.length>=this.minItems?e("div",{staticClass:"filter-box"},[e("label",{attrs:{for:t.elmId("filter")}},[t._v("Find")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.findText,expression:"findText"}],attrs:{id:t.elmId("filter"),type:"text"},domProps:{value:t.findText},on:{input:function(n){n.target.composing||(t.findText=n.target.value)}}})]):t._e()};s._withStripped=!0;const a={props:["value","items","prop","minItems"],data(){return{text:"",pprop:this.prop||"name"}},watch:{items(t,n){this.findText=this.findText}},created(){this.findText=this.text},methods:{clear(){this.text=""}},computed:{findText:{get(){return this.text},set(t){this.text=t;let n=this.pprop;t||this.$emit("input",this.items);var e=t.toLowerCase();"function"==typeof n?this.$emit("input",this.items.filter((t=>n(t,e)))):this.$emit("input",this.items.filter((t=>"object"==typeof t&&"string"==typeof t[n]&&t[n].toLowerCase().includes(e))))}}}};var i=e(3379),r=e.n(i),o=e(7795),l=e.n(o),c=e(569),d=e.n(c),m=e(3565),p=e.n(m),v=e(9216),h=e.n(v),u=e(4589),A=e.n(u),f=e(1430),g={};g.styleTagTransform=A(),g.setAttributes=p(),g.insert=d().bind(null,"head"),g.domAPI=l(),g.insertStyleElement=h(),r()(f.Z,g),f.Z&&f.Z.locals&&f.Z.locals;var C=(0,e(1900).Z)(a,s,[],!1,null,"6d0e0bec",null);C.options.__file="src/ui/components/filterbox.vue";const b=C.exports},4158:(t,n,e)=>{e.r(n),e.d(n,{default:()=>E});var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"enchants"},[e("div",{staticClass:"separate"},[e("div",[e("div",{on:{"!mouseenter":function(n){return n.stopPropagation(),t.itemOver(n,t.target)}}},[t._v("Target: "+t._s(t.target?t.target.name.toTitleCase():"None"))]),t._v(" "),e("div",{staticClass:"note-text"},[t._v("Enchantment levels on an Item cannot exceed Item's enchant slots.")])]),t._v(" "),e("span",[e("button",{attrs:{disabled:0==t.enchantSlots.count},on:{click:t.resume}},[t._v(t._s(t.runner.has(t.enchantSlots)?"Pause":"Resume"))])])]),t._v(" "),e("eslots",{staticClass:"eslots",attrs:{eslots:t.enchantSlots,inv:t.inv}}),t._v(" "),e("div",{staticClass:"separate"},[e("div",{staticClass:"filtered"},[t.target?e("div",[e("button",{staticClass:"stop",on:{click:t.clearTarget}},[t._v("X")]),t._v(t._s(t.target.name.toTitleCase()))]):t._e(),t._v(" "),e("filterbox",{attrs:{items:t.enchants,"min-items":"7"},model:{value:t.filtered,callback:function(n){t.filtered=n},expression:"filtered"}}),t._v(" "),e("div",{staticClass:"enchant-list"},t._l(t.usable,(function(n){return e("div",{key:n.id,staticClass:"enchant",on:{"!mouseenter":function(e){return e.stopPropagation(),t.itemOver(e,n)}}},[e("span",{staticClass:"ench-name"},[t._v(t._s(n.name.toTitleCase()))]),t._v(" "),n.buy&&!n.owned?e("button",{attrs:{disabled:!n.canBuy(t.game)},on:{click:function(e){return t.emit("buy",n)}}},[t._v("ðŸ”’")]):e("button",{attrs:{disabled:!n.canUse()},on:{click:function(e){return t.begin(n,t.target)}}},[t._v("Enchant")])])})),0)],1),t._v(" "),e("inv",{attrs:{selecting:"true",inv:t.state.inventory,types:["armor","weapon"],"hide-space":"true"},model:{value:t.target,callback:function(n){t.target=n},expression:"target"}})],1)],1)};s._withStripped=!0;var a=e(7112),i=e(9188),r=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"enchant-slots"},[e("span",[t._v(t._s(Math.floor(t.eslots.used))+" / "+t._s(Math.floor(t.eslots.max))+" Slot-levels used. ")]),t._v(" "),t._l(t.eslots.items,(function(n){return e("div",{key:n.id,staticClass:"enchant-slot"},[e("span",{staticClass:"enchant-desc"},[e("span",[t._v("Level "+t._s(n.item.level))]),t._v(" "),e("span",{staticClass:"item-name",on:{"!mouseenter":function(e){return e.stopPropagation(),t.itemOver(e,n.target)}}},[t._v(t._s(n.target.name.toTitleCase()))]),t._v(" "),e("span",{staticClass:"enchant-name",on:{"!mouseenter":function(e){return e.stopPropagation(),t.itemOver(e,n.item)}}},[t._v(t._s(n.item.name.toTitleCase()))])]),t._v(" "),e("span",[t._v(t._s(n.percent()+"%"))]),t._v(" "),e("button",{staticClass:"btn-take",attrs:{disabled:!t.canTake(n)},on:{click:function(e){return t.onTake(n)}}},[t._v(t._s(n.done?"take":"cancel"))])])}))],2)};r._withStripped=!0;const o={props:["eslots","inv"],computed:{},methods:{canTake(t){return t.target&&this.inv.canAdd(t.target)},onTake(t){this.inv.canAdd(t.target)&&(this.inv.add(t.target),this.eslots.remove(t))}}};var l=e(3379),c=e.n(l),d=e(7795),m=e.n(d),p=e(569),v=e.n(p),h=e(3565),u=e.n(h),A=e(9216),f=e.n(A),g=e(4589),C=e.n(g),b=e(2486),x={};x.styleTagTransform=C(),x.setAttributes=u(),x.insert=v().bind(null,"head"),x.domAPI=m(),x.insertStyleElement=f(),c()(b.Z,x),b.Z&&b.Z.locals&&b.Z.locals;var _=e(1900),y=(0,_.Z)(o,r,[],!1,null,"142499bd",null);y.options.__file="src/ui/items/enchantslots.vue";const T=y.exports;var k=e(4194);const w={mixins:[e(9736).Z],components:{eslots:T,filterbox:k.Z,inv:()=>e.e(767).then(e.bind(e,6962))},data:()=>({filtered:null,target:null}),beforeCreate(){this.game=a.ZP,this.state=a.ZP.state,this.runner=this.state.runner,this.inv=this.state.getData("inventory"),this.enchantSlots=this.state.getData(i.ZG)},methods:{begin(t,n){this.emit("enchant",t,n),this.inv.remove(n),this.target=null},clearTarget(){this.target=null},resume(){a.ZP.toggleTask(this.enchantSlots)},canAlter(t,n){return n&&t.canAlter(n)&&this.enchantSlots.canAdd(t)}},computed:{enchants(){return this.state.filterItems((t=>"enchant"===t.type&&!this.locked(t)))},usable(){let t=this.target;return t?this.filtered.filter((n=>!n.owned||this.canAlter(n,t))):this.filtered}}};var I=e(1348),S={};S.styleTagTransform=C(),S.setAttributes=u(),S.insert=v().bind(null,"head"),S.domAPI=m(),S.insertStyleElement=f(),c()(I.Z,S),I.Z&&I.Z.locals&&I.Z.locals;var Z=(0,_.Z)(w,s,[],!1,null,"ae3a31f0",null);Z.options.__file="src/ui/sections/enchanting.vue";const E=Z.exports}}]);
//# sourceMappingURL=enchant-ui.bundle.js.map