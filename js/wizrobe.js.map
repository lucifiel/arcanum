{"version":3,"file":"wizrobe.js","mappings":"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","sources":["webpack://[name]/webpack/runtime/load script","webpack://[name]/./src/ui/components/confirm.vue?f97f","webpack://[name]/./src/ui/components/menu.vue?3212","webpack://[name]/./src/ui/components/progbar.vue?a2be","webpack://[name]/./src/ui/items/dotView.vue?cd3f","webpack://[name]/./src/ui/items/gdata.vue?86dc","webpack://[name]/./src/ui/items/info-block.vue?5040","webpack://[name]/./src/ui/main.vue?26b1","webpack://[name]/./src/ui/outlog.vue?35b9","webpack://[name]/./src/ui/panes/itemGroup.vue?4c1a","webpack://[name]/./src/ui/panes/resources.vue?c54a","webpack://[name]/./src/ui/panes/running.vue?5a2c","webpack://[name]/./src/ui/panes/vitals.vue?94da","webpack://[name]/./src/ui/popups/itemPopup.vue?a27e","webpack://[name]/./src/ui/popups/settings.vue?1cd9","webpack://[name]/./src/ui/popups/warn.vue?87ed","webpack://[name]/./src/ui/quickbar.vue?67c2","webpack://[name]/./src/ui/sections/tasks.vue?94da","webpack://[name]/./src/ui/top-bar.vue?03db","webpack://[name]/./node_modules/css-loader/dist/runtime/api.js","webpack://[name]/./node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack://[name]/./node_modules/eventemitter3/index.js","webpack://[name]/./node_modules/objecty/index.js","webpack://[name]/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://[name]/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://[name]/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://[name]/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://[name]/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://[name]/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://[name]/./src/ui/components/progbar.vue?4e64","webpack://[name]/src/ui/components/progbar.vue","webpack://[name]/./src/ui/components/progbar.vue?af62","webpack://[name]/./src/ui/components/progbar.vue?1fb8","webpack://[name]/./src/ui/components/progbar.vue","webpack://[name]/./src/ui/items/dotView.vue?04c3","webpack://[name]/src/ui/items/dotView.vue","webpack://[name]/./src/ui/items/dotView.vue?6fa2","webpack://[name]/./src/ui/items/dotView.vue?88a9","webpack://[name]/./src/ui/items/dotView.vue","webpack://[name]/./src/ui/items/gdata.vue?35e7","webpack://[name]/./src/ui/items/info-block.vue?c95b","webpack://[name]/./src/ui/items/displayItem.js","webpack://[name]/./src/ui/items/infoBlock.js","webpack://[name]/src/ui/items/info-block.vue","webpack://[name]/./src/ui/items/info-block.vue?63e0","webpack://[name]/./src/ui/items/info-block.vue?c2bc","webpack://[name]/./src/ui/items/info-block.vue","webpack://[name]/./src/ui/items/attack.vue?2707","webpack://[name]/./src/ui/items/dot-info.vue?fc12","webpack://[name]/src/ui/items/dot-info.vue","webpack://[name]/./src/ui/items/dot-info.vue?dfae","webpack://[name]/./src/ui/items/dot-info.vue","webpack://[name]/./src/ui/items/attack.vue?2fb3","webpack://[name]/src/ui/items/attack.vue","webpack://[name]/./src/ui/items/attack.vue","webpack://[name]/./src/ui/items/gdata.vue?fab6","webpack://[name]/src/ui/items/gdata.vue","webpack://[name]/./src/ui/items/gdata.vue?fef9","webpack://[name]/./src/ui/items/gdata.vue","webpack://[name]/./src/ui/panes/upgrades.vue?4f33","webpack://[name]/src/ui/panes/upgrades.vue","webpack://[name]/./src/ui/panes/upgrades.vue?dd0d","webpack://[name]/./src/ui/panes/upgrades.vue","webpack://[name]/./src/ui/popups/itemPopup.vue?318d","webpack://[name]/src/ui/popups/itemPopup.vue","webpack://[name]/./src/ui/popups/itemPopup.vue?6062","webpack://[name]/./src/ui/popups/itemPopup.vue?9320","webpack://[name]/./src/ui/popups/itemPopup.vue","webpack://[name]/./node_modules/vue-loader/lib/runtime/componentNormalizer.js","webpack://[name]/./src/chars/attack.js","webpack://[name]/./src/chars/dot.js","webpack://[name]/./src/chars/char.js","webpack://[name]/./src/chars/npcState.js","webpack://[name]/./src/chars/context.js","webpack://[name]/./src/chars/npc.js","webpack://[name]/./src/chars/states.js","webpack://[name]/./src/chars/wearable.js","webpack://[name]/./src/composites/enchanting.js","webpack://[name]/./src/composites/proxy.js","webpack://[name]/./src/composites/tagset.js","webpack://[name]/./src/items/statData.js","webpack://[name]/./src/items/spell.js","webpack://[name]/./src/chars/alter.js","webpack://[name]/./src/items/enchant.js","webpack://[name]/./src/items/potion.js","webpack://[name]/./src/items/gevent.js","webpack://[name]/./src/chars/player.js","webpack://[name]/./src/items/charupgrade.js","webpack://[name]/./src/items/gclass.js","webpack://[name]/./src/chars/state.js","webpack://[name]/./src/dataLoader.js","webpack://[name]/./src/events.js","webpack://[name]/./src/log.js","webpack://[name]/./src/game.js","webpack://[name]/./src/chars/slot.js","webpack://[name]/./src/chars/slotgroup.js","webpack://[name]/./src/chars/equip.js","webpack://[name]/./src/inventories/minions.js","webpack://[name]/./src/composites/runnable.js","webpack://[name]/./src/values/arrayset.js","webpack://[name]/./src/modules/runner.js","webpack://[name]/./src/composites/explore.js","webpack://[name]/./src/composites/group.js","webpack://[name]/./src/inventories/userSpells.js","webpack://[name]/./src/composites/quickslot.js","webpack://[name]/./src/composites/quickbar.js","webpack://[name]/./src/composites/quickbars.js","webpack://[name]/./src/inventories/enchantslots.js","webpack://[name]/./src/composites/combat.js","webpack://[name]/./src/gameState.js","webpack://[name]/./src/inventories/dataList.js","webpack://[name]/./src/inventories/inventory.js","webpack://[name]/./src/items/base.js","webpack://[name]/./src/items/encounter.js","webpack://[name]/./src/items/gdata.js","webpack://[name]/./src/items/instance.js","webpack://[name]/./src/items/item.js","webpack://[name]/./src/classes/spawngroup.js","webpack://[name]/./src/classes/spawnparams.js","webpack://[name]/./src/classes/spawns.js","webpack://[name]/./src/items/locale.js","webpack://[name]/./src/items/monster.js","webpack://[name]/./src/items/resource.js","webpack://[name]/./src/items/revStat.js","webpack://[name]/./src/items/skill.js","webpack://[name]/./src/items/task.js","webpack://[name]/./src/genGroup.js","webpack://[name]/./src/modules/itemgen.js","webpack://[name]/./src/modules/module.js","webpack://[name]/./src/values/mods/permod.js","webpack://[name]/./src/values/mods/atmod.js","webpack://[name]/./src/modules/parsing.js","webpack://[name]/./src/modules/charinfo.js","webpack://[name]/./src/modules/hall.js","webpack://[name]/./src/modules/persist/persistLocal.js","webpack://[name]/./src/modules/persist/persist.js","webpack://[name]/./src/modules/profile.js","webpack://[name]/./src/modules/settings.js","webpack://[name]/./src/protos/protoItem.js","webpack://[name]/./src/techTree.js","webpack://[name]/./src/ui/itemsBase.js","webpack://[name]/./src/ui/popups/popups.js","webpack://[name]/./src/ui/uiMixin.js","webpack://[name]/./src/util/array.js","webpack://[name]/./src/util/dataUtil.js","webpack://[name]/./src/util/format.js","webpack://[name]/./src/util/jsonLoader.js","webpack://[name]/./src/util/util.js","webpack://[name]/./src/values/rvals/fvalue.js","webpack://[name]/./src/values/combatVars.js","webpack://[name]/./src/values/consts.js","webpack://[name]/./src/values/craftVars.js","webpack://[name]/./src/values/maxStat.js","webpack://[name]/./src/values/mods/mod.js","webpack://[name]/./src/values/percent.js","webpack://[name]/./src/values/range.js","webpack://[name]/./src/values/rvals/rvalue.js","webpack://[name]/./src/values/rvals/scaler.js","webpack://[name]/./src/values/rvals/stat.js","webpack://[name]/webpack/bootstrap","webpack://[name]/webpack/runtime/compat get default export","webpack://[name]/webpack/runtime/define property getters","webpack://[name]/webpack/runtime/ensure chunk","webpack://[name]/webpack/runtime/get javascript chunk filename","webpack://[name]/webpack/runtime/global","webpack://[name]/webpack/runtime/hasOwnProperty shorthand","webpack://[name]/webpack/runtime/make namespace object","webpack://[name]/webpack/runtime/publicPath","webpack://[name]/webpack/runtime/jsonp chunk loading","webpack://[name]/./node_modules/vue/dist/vue.runtime.esm.js","webpack://[name]/./src/ui/main.vue?06ff","webpack://[name]/./src/ui/components/menu.vue?2ff1","webpack://[name]/src/ui/components/menu.vue","webpack://[name]/./src/ui/components/menu.vue?05bf","webpack://[name]/./src/ui/components/menu.vue?eec2","webpack://[name]/./src/ui/components/menu.vue","webpack://[name]/./src/ui/panes/resources.vue?a8a7","webpack://[name]/./src/ui/panes/itemGroup.vue?beea","webpack://[name]/src/ui/panes/itemGroup.vue","webpack://[name]/./src/ui/panes/itemGroup.vue?e2fa","webpack://[name]/./src/ui/panes/itemGroup.vue?35ff","webpack://[name]/./src/ui/panes/itemGroup.vue","webpack://[name]/./src/ui/panes/resources.vue?91cd","webpack://[name]/src/ui/panes/resources.vue","webpack://[name]/./src/ui/panes/resources.vue?53b0","webpack://[name]/./src/ui/panes/resources.vue","webpack://[name]/./src/ui/sections/tasks.vue?f24d","webpack://[name]/src/ui/sections/tasks.vue","webpack://[name]/./src/ui/sections/tasks.vue?31e5","webpack://[name]/./src/ui/sections/tasks.vue?f2d5","webpack://[name]/./src/ui/sections/tasks.vue","webpack://[name]/./src/ui/quickbar.vue?6522","webpack://[name]/src/ui/quickbar.vue","webpack://[name]/./src/ui/quickbar.vue?b520","webpack://[name]/./src/ui/quickbar.vue?0f77","webpack://[name]/./src/ui/quickbar.vue","webpack://[name]/./src/ui/panes/vitals.vue?c79e","webpack://[name]/./src/ui/panes/running.vue?6265","webpack://[name]/src/ui/panes/running.vue","webpack://[name]/./src/ui/panes/running.vue?96d3","webpack://[name]/./src/ui/panes/running.vue?fbb6","webpack://[name]/./src/ui/panes/running.vue","webpack://[name]/./src/ui/panes/vitals.vue?3c67","webpack://[name]/src/ui/panes/vitals.vue","webpack://[name]/./src/ui/panes/vitals.vue?9709","webpack://[name]/./src/ui/panes/vitals.vue","webpack://[name]/./src/ui/top-bar.vue?2c1c","webpack://[name]/./src/ui/components/loginStatus.vue?2a74","webpack://[name]/src/ui/components/loginStatus.vue","webpack://[name]/./src/ui/components/loginStatus.vue?c8b8","webpack://[name]/./src/ui/components/loginStatus.vue","webpack://[name]/./src/ui/top-bar.vue?44c9","webpack://[name]/src/ui/top-bar.vue","webpack://[name]/./src/ui/top-bar.vue?5d7f","webpack://[name]/./src/ui/top-bar.vue","webpack://[name]/./src/ui/popups/warn.vue?13b4","webpack://[name]/src/ui/popups/warn.vue","webpack://[name]/./src/ui/popups/warn.vue?34a3","webpack://[name]/./src/ui/popups/warn.vue?a23c","webpack://[name]/./src/ui/popups/warn.vue","webpack://[name]/./src/ui/popups/settings.vue?d043","webpack://[name]/src/ui/popups/settings.vue","webpack://[name]/./src/ui/popups/settings.vue?3d54","webpack://[name]/./src/ui/popups/settings.vue?364e","webpack://[name]/./src/ui/popups/settings.vue","webpack://[name]/./src/ui/outlog.vue?fac9","webpack://[name]/src/ui/outlog.vue","webpack://[name]/./src/ui/outlog.vue?fef0","webpack://[name]/./src/ui/outlog.vue?252c","webpack://[name]/./src/ui/outlog.vue","webpack://[name]/./src/debug/debug.js","webpack://[name]/./src/debug/cheats.js","webpack://[name]/./src/debug/devconsole.vue?368e","webpack://[name]/./src/debug/cmdline.js","webpack://[name]/src/debug/devconsole.vue","webpack://[name]/./src/debug/devconsole.vue?46aa","webpack://[name]/./src/debug/devconsole.vue","webpack://[name]/src/ui/main.vue","webpack://[name]/./src/ui/main.vue?5c4f","webpack://[name]/./src/ui/main.vue?8316","webpack://[name]/./src/ui/main.vue","webpack://[name]/./src/ui/components/confirm.vue?112c","webpack://[name]/src/ui/components/confirm.vue","webpack://[name]/./src/ui/components/confirm.vue?5ec5","webpack://[name]/./src/ui/components/confirm.vue?9a86","webpack://[name]/./src/ui/components/confirm.vue","webpack://[name]/./src/index.js"],"sourcesContent":["var inProgress = {};\nvar dataWebpackPrefix = \"[name]:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\nspan.my-span[data-v-193f0119] {\\n\\tdisplay:contents;\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/components/confirm.vue\"],\"names\":[],\"mappings\":\";AAyDA;CACA,gBAAA;AACA\",\"sourcesContent\":[\"<script>\\nexport default {\\n\\n\\t/**\\n\\t * @property {string} confirm - confirm display text.\\n\\t * @property {string} cancel - cancel display text.\\n\\t */\\n\\tprops:['confirm','cancel'],\\n\\tdata(){\\n\\t\\treturn {\\n\\t\\t\\tbtnConfirm:this.confirm||'Confirm',\\n\\t\\t\\tbtnCancel:this.cancel||'Cancel',\\n\\t\\t\\tconfirming:false\\n\\t\\t};\\n\\t},\\n\\tmethods:{\\n\\n\\t\\t/**\\n\\t\\t * @public\\n\\t\\t * Resets the confirm dialog when the Confirm prompt\\n\\t\\t * is no longer applicable.\\n\\t\\t */\\n\\t\\treset() {\\n\\t\\t\\tthis.confirming = false;\\n\\t\\t},\\n\\t\\tmainClick(){\\n\\t\\t\\tthis.confirming=true;\\n\\t\\t\\tthis.$emit( 'click' );\\n\\t\\t},\\n\\t\\tconfirmClick(){\\n\\t\\t\\tthis.confirming = false;\\n\\t\\t\\tthis.$emit( 'confirm' );\\n\\t\\t},\\n\\t\\tcancelClick(){\\n\\t\\t\\tthis.confirming=false;\\n\\t\\t\\tthis.$emit( 'cancel' );\\n\\t\\t}\\n\\n\\t}\\n\\n}\\n</script>\\n\\n\\n<template>\\n\\t<span class=\\\"my-span\\\" v-if=\\\"confirming\\\">\\n\\t\\t<button type=\\\"button\\\" @click=\\\"confirmClick\\\">{{btnConfirm}}</button>\\n\\t\\t<button type=\\\"button\\\" @click=\\\"cancelClick\\\">{{btnCancel}}</button>\\n\\t</span>\\n\\t<span v-else class=\\\"my-span\\\">\\n\\t\\t<button type=\\\"button\\\" @click=\\\"mainClick\\\"><slot>Delete</slot></button>\\n\\t</span>\\n\\n</template>\\n\\n<style scoped>\\n\\nspan.my-span {\\n\\tdisplay:contents;\\n}\\n\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.menu-items .menu-item[data-v-636f3856] { color: #000;\\n}\\nbody.darkmode .menu-items .menu-item[data-v-636f3856] { color: #FFF;\\n}\\n.menu-items .menu-item u[data-v-636f3856] { color: #999;\\n}\\n.menu-items .menu-item[data-v-636f3856]:hover, .menu-items .menu-item u[data-v-636f3856]:hover { color: #33F;\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/components/menu.vue\"],\"names\":[],\"mappings\":\";AAyDA,0CAAA,WAAA;AAAA;AACA,wDAAA,WAAA;AAAA;AACA,4CAAA,WAAA;AAAA;AACA,iGAAA,WAAA;AAAA\",\"sourcesContent\":[\"<script>\\n\\nexport default {\\n\\n\\tprops:['value', 'items'],\\n\\tmethods:{\\n\\n\\t\\titemTitle(it) {\\n\\n\\t\\t\\tif ( it instanceof Object ) {\\n\\t\\t\\t\\treturn it.name || it.desc || it.id;\\n\\t\\t\\t} return it;\\n\\n\\t\\t},\\n\\n\\t\\titemId(it){\\n\\t\\t\\tif ( it instanceof Object ) {\\n\\t\\t\\t\\treturn it.id;\\n\\t\\t\\t}\\n\\t\\t\\treturn it;\\n\\t\\t},\\n\\n\\t\\tsetActive( it ) {\\n\\n\\t\\t\\tthis.$emit( 'input', it );\\n\\t\\t\\tthis.$emit( 'changed', it );\\n\\n\\t\\t}\\n\\n\\t}\\n\\n}\\n\\n</script>\\n\\n<template>\\n\\t<div class=\\\"menu\\\">\\n\\n\\t\\t<div class=\\\"menu-items\\\">\\n\\n\\t\\t<div class=\\\"menu-item\\\" v-for=\\\"(it) in items\\\" :key=\\\"it.id\\\">\\n\\n\\t\\t\\t<span v-if=\\\"it != value\\\" @click=\\\"setActive(it)\\\" :key=\\\"itemTitle(it)\\\"> <u> {{ itemTitle(it) }} </u></span>\\n\\t\\t\\t<span v-else :key=\\\"itemTitle(it)\\\"> {{ itemTitle(it) }} </span>\\n\\n\\t\\t</div>\\n\\n\\t\\t</div>\\n\\n\\n\\t\\t<!-- NOTE: slot css-class ignored -->\\n\\t\\t<span class=\\\"menu-content\\\"><slot :name=\\\"itemId(value)\\\"></slot></span>\\n\\n\\t</div>\\n</template>\\n\\n<style scoped>\\n    .menu-items .menu-item { color: #000; }\\n    body.darkmode .menu-items .menu-item { color: #FFF; }\\n    .menu-items .menu-item u { color: #999; }\\n\\t.menu-items .menu-item:hover, .menu-items .menu-item u:hover { color: #33F; }\\n\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\ndiv.container {\\n\\tdisplay:flex;\\n\\theight:100%;\\n\\twidth: 100%;\\n}\\ndiv.bar .fill {\\n\\t  height:100%;\\n\\t  padding:0;\\n\\t  margin:0;\\n}\\ndiv.bar .bar-text {\\n\\tcolor: var( --progbar-text-color );\\n}\\ndiv.bar {\\n\\n\\tdisplay:inline-block;\\n\\tbackground: #333;\\n\\toverflow:hidden;\\n\\tpadding:0;\\n\\tmin-height:1.5rem;\\n\\twidth:-webkit-fill-available;\\n\\twidth:-moz-available;\\n\\tborder-radius: var(--lg-radius);\\n}\\n\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/components/progbar.vue\"],\"names\":[],\"mappings\":\";AA0CA;CACA,YAAA;CACA,WAAA;CACA,WAAA;AACA;AAEA;GACA,WAAA;GACA,SAAA;GACA,QAAA;AACA;AAEA;CACA,kCAAA;AACA;AAGA;;CAEA,oBAAA;CACA,gBAAA;CACA,eAAA;CACA,SAAA;CACA,iBAAA;CACA,4BAAA;CACA,oBAAA;CACA,+BAAA;AACA\",\"sourcesContent\":[\"<script>\\nexport default {\\n\\n\\tprops:['value', 'max', 'label', 'hideStats', 'color'],\\n\\tcomputed:{\\n\\n\\t\\tstyle(){\\n\\n\\t\\t\\tlet s = 'width:' + this.width;\\n\\t\\t\\tif ( this.color ) s += ';background:' + this.color;\\n\\n\\t\\t\\treturn s;\\n\\n\\t\\t},\\n\\n\\t\\twidth(){\\n\\t\\t\\tlet val = Math.floor( 100*(this.value/this.max) );\\n\\t\\t\\tif ( val > 100 ) val = 100;\\n\\t\\t\\telse if ( val < 0 ) val = 0;\\n\\t\\t\\treturn val + '%;'\\n\\t\\t}\\n\\t}\\n\\n}\\n</script>\\n\\n\\n<template>\\n\\n<div class=\\\"container\\\">\\n\\t<label v-if=\\\"label\\\" :for=\\\"elmId('bar')\\\">{{label}}</label>\\n\\t<div class=\\\"bar\\\" :id=\\\"elmId('bar')\\\">\\n\\t\\t<div class=\\\"fill\\\" :style=\\\"style\\\">\\n\\t\\t\\t<span class=\\\"bar-text\\\" v-if=\\\"!hideStats\\\">{{ value.toFixed(1) + '/' + max.toFixed(1) }}</span>\\n\\t\\t\\t<span v-else>&nbsp;</span>\\n\\t\\t</div>\\n\\t</div>\\n</div>\\n\\n</template>\\n\\n<style>\\ndiv.container {\\n\\tdisplay:flex;\\n\\theight:100%;\\n\\twidth: 100%;\\n}\\n\\n    div.bar .fill {\\n\\t  height:100%;\\n\\t  padding:0;\\n\\t  margin:0;\\n    }\\n\\ndiv.bar .bar-text {\\n\\tcolor: var( --progbar-text-color );\\n}\\n\\n\\ndiv.bar {\\n\\n\\tdisplay:inline-block;\\n\\tbackground: #333;\\n\\toverflow:hidden;\\n\\tpadding:0;\\n\\tmin-height:1.5rem;\\n\\twidth:-webkit-fill-available;\\n\\twidth:-moz-available;\\n\\tborder-radius: var(--lg-radius);\\n}\\n\\n\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\ndiv.dot-view[data-v-54d5dc46] {\\n\\tdisplay:flex;\\n\\tposition:relative;\\n\\tflex-flow: row nowrap;\\n\\talign-items: center;\\n\\tjustify-content: space-around;\\n\\tborder: 1px solid var(--very-quiet-text-color);\\n\\toverflow-x: hidden;\\n\\toverflow-y: visible;\\n\\theight:100%;\\n}\\ndiv.dot-view .dot[data-v-54d5dc46] {\\n\\tflex: 1; margin: 0; font-size: 0.75em; text-overflow: ellipsis; white-space: nowrap;\\n\\tborder: none;\\n\\toutline: 1px solid var(--very-quiet-text-color);\\n\\tposition: relative;\\n\\ttext-align: center;\\n\\tpadding:var(--sm-gap);\\n\\tbackground: unset;\\n}\\ndiv.dot-view span.mini[data-v-54d5dc46] {\\n\\t\\tdisplay:flex;\\n\\t\\tflex-direction: row;\\n\\t\\tjustify-content: space-around;\\n\\t\\talign-items: center;\\n}\\ndiv.mini[data-v-54d5dc46] {\\n\\t\\twidth:auto;\\n\\t\\tfont-size: 0.7em;\\n\\t\\tpadding:0;\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/items/dotView.vue\"],\"names\":[],\"mappings\":\";AAsCA;CACA,YAAA;CACA,iBAAA;CACA,qBAAA;CACA,mBAAA;CACA,6BAAA;CACA,8CAAA;CACA,kBAAA;CACA,mBAAA;CACA,WAAA;AACA;AACA;CACA,OAAA,EAAA,SAAA,EAAA,iBAAA,EAAA,uBAAA,EAAA,mBAAA;CACA,YAAA;CACA,+CAAA;CACA,kBAAA;CACA,kBAAA;CACA,qBAAA;CACA,iBAAA;AACA;AAEA;EACA,YAAA;EACA,mBAAA;EACA,6BAAA;EACA,mBAAA;AACA;AAEA;EACA,UAAA;EACA,gBAAA;EACA,SAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport { abbr } from 'util/format.js';\\nimport ItemBase from 'ui/itemsBase';\\n\\n/**\\n * Actual dot display in combat/hud.\\n */\\nexport default {\\n\\n\\tprops:['dots', 'mini', 'char'],\\n\\tmixins:[ItemBase],\\n\\tbeforeCreate(){\\n\\t\\tthis.abbr = abbr;\\n\\t}\\n\\n}\\n</script>\\n\\n<template>\\n\\n\\t<div class=\\\"dot-view\\\" v-if=\\\"dots.length>0\\\">\\n\\n\\t\\t<div :class=\\\"['dot',d.kind, d.school, mini ? 'mini':'']\\\" v-for=\\\"d in dots\\\" :key=\\\"d.id\\\"\\n\\t\\t@mouseenter.capture.stop=\\\"itemOver( $event, d, char )\\\">\\n\\n\\t\\t\\t<span v-if=\\\"!d.perm\\\">{{ Math.ceil( d.duration ) }}</span>\\n\\t\\t\\t<span v-if=\\\"!mini\\\"><br>{{ mini ? abbr( d ) : d.name }}</span>\\n\\n\\t\\t\\t<div v-if=\\\"d.kind||d.school\\\" class=\\\"bgfill\\\" >&nbsp;</div>\\n\\n\\t\\t</div>\\n\\n\\t</div>\\n\\n</template>\\n\\n<style scoped>\\n\\ndiv.dot-view {\\n\\tdisplay:flex;\\n\\tposition:relative;\\n\\tflex-flow: row nowrap;\\n\\talign-items: center;\\n\\tjustify-content: space-around;\\n\\tborder: 1px solid var(--very-quiet-text-color);\\n\\toverflow-x: hidden;\\n\\toverflow-y: visible;\\n\\theight:100%;\\n}\\ndiv.dot-view .dot {\\n\\tflex: 1; margin: 0; font-size: 0.75em; text-overflow: ellipsis; white-space: nowrap;\\n\\tborder: none;\\n\\toutline: 1px solid var(--very-quiet-text-color);\\n\\tposition: relative;\\n\\ttext-align: center;\\n\\tpadding:var(--sm-gap);\\n\\tbackground: unset;\\n}\\n\\n\\tdiv.dot-view span.mini {\\n\\t\\tdisplay:flex;\\n\\t\\tflex-direction: row;\\n\\t\\tjustify-content: space-around;\\n\\t\\talign-items: center;\\n\\t}\\n\\n\\tdiv.mini {\\n\\t\\twidth:auto;\\n\\t\\tfont-size: 0.7em;\\n\\t\\tpadding:0;\\n\\t}\\n\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.tight[data-v-2d591720] {\\n\\tmargin:0;\\n\\tpadding:0;\\n}\\ndiv.item-desc[data-v-2d591720] {\\n\\tmargin: 0.6em 0 0.9em;\\n\\tfont-size: 0.96em;\\n}\\n.item-name[data-v-2d591720] {\\n\\tfont-weight: bold;\\n}\\n.separate > span[data-v-2d591720] {\\n\\tmargin-left:var(--small-gap);\\n}\\n.flavor[data-v-2d591720] {\\n\\tfont-style: italic;\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/items/gdata.vue\"],\"names\":[],\"mappings\":\";AA+MA;CACA,QAAA;CACA,SAAA;AACA;AAEA;CACA,qBAAA;CACA,iBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,4BAAA;AACA;AACA;CACA,kBAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport Game from '../../game';\\n\\nimport ItemsBase from '../itemsBase.js';\\nimport InfoBlock from './info-block.vue';\\nimport Attack from './attack.vue';\\nimport Dot from './dot-info.vue';\\n\\nimport {precise} from '../../util/format';\\n\\nexport default {\\n\\tprops:['item'],\\n\\tname:\\\"gdata\\\",\\n\\tmixins:[ItemsBase],\\n\\tcomponents:{\\n\\t\\tinfo:InfoBlock,\\n\\t\\tattack:Attack,\\n\\t\\tdot:Dot\\n\\t},\\n\\tmethods:{\\n\\t\\tprecise:precise,\\n\\n\\t\\t/**\\n\\t\\t * Convert tag strings into viewable format.\\n\\t\\t * @param {string|string[]} t\\n\\t\\t * @returns {string|string[]}\\n\\t\\t */\\n\\t\\ttagNames( t ) {\\n\\n\\t\\t\\tif ( Array.isArray(t) ) return t.map( this.tagNames, this );\\n\\n\\t\\t\\tif ( typeof t === 'string' && t.substring(0,2) === 't_' ) return t.slice(2).toTitleCase();\\n\\t\\t\\t\\n\\t\\t\\treturn t.toTitleCase();\\n\\n\\t\\t}\\n\\n\\t},\\n\\tbeforeCreate(){\\n\\t\\tthis.player = Game.state.player;\\n\\t},\\n\\tcomputed:{\\n\\n\\t\\tname(){return this.item.sname || this.item.name.toTitleCase(); },\\n\\t\\tsellPrice(){ return Game.sellPrice(this.item);},\\n\\n\\t\\tnextImprove(){\\n\\t\\t\\treturn this.nextAt > 0 ? this.nextAt : this.nextEvery;\\n\\t\\t},\\n\\n\\t\\t/**\\n\\t\\t * Occurance of next 'every' improvement relative to cur value.\\n\\t\\t */\\n\\t\\tnextEvery() {\\n\\n\\t\\t\\tlet v = Math.floor( this.item.value );\\n\\n\\t\\t\\tvar next = Number.MAX_VALUE;\\n\\n\\t\\t\\tvar f;\\t// save every-divisor for pct computation.\\n\\n\\t\\t\\tfor( let p in this.item.every ) {\\n\\n\\t\\t\\t\\tvar dist = p - ( v % p );\\n\\t\\t\\t\\tif ( dist < next ) {\\n\\t\\t\\t\\t\\tnext = dist;\\n\\t\\t\\t\\t\\tf = p;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn ( next !== Number.MAX_VALUE) ? ( (f-dist) / f ) : -1;\\n\\n\\t\\t},\\n\\n\\t\\tnextAt() {\\n\\n\\t\\t\\tlet v = this.item.value;\\n\\n\\t\\t\\t// least upper bound.\\n\\t\\t\\tvar sup = Number.MAX_VALUE;\\n\\t\\t\\tfor( let p in this.item.at ) {\\n\\t\\t\\t\\tp = Number(p);\\n\\t\\t\\t\\tif ( p > v && p < sup ) sup = p;\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn ( sup > v && sup !== Number.MAX_VALUE ) ? sup : -1;\\n\\n\\t\\t},\\n\\t\\ttags(){\\n\\n\\t\\t\\tlet t = this.item.tags;\\n\\t\\t\\tfor(var i=0; i < this.item.tags.length; i++) {\\n\\t\\t\\t\\tif (this.item.tags[i] == 'gemimbue') {\\n\\t\\t\\t\\t\\tthis.item.tags[i] = 'Imbue Gem'\\n\\t\\t\\t\\t};\\n\\t\\t\\t\\tif (this.item.tags[i] == 'magicgems') {\\n\\t\\t\\t\\t\\tthis.item.tags[i] = 'Magic Gems'\\n\\t\\t\\t\\t};\\n\\t\\t\\t\\tif (this.item.tags[i] == 'prismaticgems') {\\n\\t\\t\\t\\t\\tthis.item.tags[i] = 'Prismatic Gems'\\n\\t\\t\\t\\t};\\n\\t\\t\\t\\tif (this.item.tags[i] == 'elementalgems') {\\n\\t\\t\\t\\t\\tthis.item.tags[i] = 'Elemental Gems'\\n\\t\\t\\t\\t};\\n\\t\\t\\t\\tif (this.item.tags[i] == 'primordialgems') {\\n\\t\\t\\t\\t\\tthis.item.tags[i] = 'Primordial Gems'\\n\\t\\t\\t\\t};\\n\\t\\t\\t\\tif (this.item.tags[i] == 'elementalrunes') {\\n\\t\\t\\t\\t\\tthis.item.tags[i] = 'Elemental Runes'\\n\\t\\t\\t\\t};\\n\\t\\t\\t\\tif (this.item.tags[i] == 'primaticrunes') {\\n\\t\\t\\t\\t\\tthis.item.tags[i] = 'Prismatic Runes'\\n\\t\\t\\t\\t};\\n\\t\\t\\t\\tif (this.item.tags[i] == 'primordialrunes') {\\n\\t\\t\\t\\t\\tthis.item.tags[i] = 'Primordial Runes'\\n\\t\\t\\t\\t};\\n\\t\\t\\t\\tif (this.item.tags[i] == 'manas') {\\n\\t\\t\\t\\t\\tthis.item.tags[i] = 'Mana energies'\\n\\t\\t\\t\\t};\\n \\t\\t\\t\\tthis.item.tags[i] = this.item.tags[i];\\n\\t\\t\\t}\\n\\t\\t\\tif ( typeof t === 'string') return this.tagNames(t);\\n\\t\\t\\telse if ( Array.isArray(t) ) return t.map( this.tagNames, this ).join(', ');\\n\\n\\t\\t}\\n\\n\\t}\\n\\n}\\n</script>\\n\\n\\n<template>\\n\\n<div class=\\\"item-info\\\">\\n\\t<span class=\\\"separate\\\">\\n\\t\\t<span class=\\\"item-name\\\">{{name.toString().toTitleCase()}}</span>\\n\\n\\t\\t\\t<span v-if=\\\"item.type==='resource'||item.type==='stat'\\\">{{ item.current.toFixed(0) + ( item.max ? (' / ' + Math.floor(item.max.value ) ) :'' ) }}</span>\\n\\t\\t\\t<span v-else-if=\\\"item.type==='furniture'\\\">max: {{\\n\\t\\t\\t\\titem.max ? Math.floor(item.max.value ) : ( (item.repeat) ? '&infin;' : 1) }}</span>\\n\\n\\t\\t\\t<span v-if=\\\"item.sym\\\">{{item.sym}}</span>\\n\\n\\n\\t</span>\\n\\t<div class=\\\"tight note-text\\\" v-if=\\\"item.tags||item.hands\\\"><span v-if=\\\"item.hands>1\\\">Two-Handed </span>{{tags}}</div>\\n\\t\\t<span class=\\\"flex-right\\\" v-if=\\\"item.rate&&item.rate.value!=0\\\">{{ precise( item.rate.value ) }}/s</span>\\n\\t\\t<div>\\n\\n\\t\\t<span class=\\\"separate\\\">\\n\\t\\t\\t<span v-if=\\\"item.showLevel\\\">Level: {{item.showLevel()}}</span>\\n\\t\\t\\t<span v-else-if=\\\"item.level\\\">Level: {{item.level}}</span>\\n\\n\\t\\t\\t<span v-if=\\\"item.slot\\\">Slot: {{ item.slot.toString().toTitleCase() }}</span>\\n\\t\\t</span>\\n\\t\\t<span v-if=\\\"item.enchants&&item.enchants.max>0\\\">Enchant Levels: {{item.enchants.value}} / {{ item.enchants.max }}</span>\\n\\n\\t\\t<span v-if=\\\"item.at&&(nextAt>0)\\\" class=\\\"note-text\\\">\\n\\t\\t\\tNext Improvement: {{ Math.round(100*item.value/nextAt)+'%'}}\\n\\t\\t</span>\\n\\t\\t<span v-else-if=\\\"item.every&&(nextEvery>=0)\\\" class=\\\"note-text\\\">\\n\\t\\t\\tNext Improvement: {{ Math.round(100*nextEvery)+'%'}}\\n\\t\\t</span>\\n\\n\\t\\t\\t<div v-if=\\\"item.cd||item.timer>0\\\" class=\\\"note-text\\\">Cooldown: {{ item.timer > 0 ? item.timer.toFixed(2) + ' Left' : item.cd + 's' }}</div>\\n\\n\\t\\t\\t<div v-if=\\\"item.dist\\\">Distance: {{item.dist}}</div>\\n\\t\\t\\t<div v-if=\\\"item.armor\\\">Armor: {{ item.armor }}</div>\\n\\t\\t\\t<div class=\\\"item-desc\\\" v-if=\\\"item.desc\\\">{{ item.desc }}</div>\\n\\n\\t\\t</div>\\n\\n\\t\\t<info v-if=\\\"item.need\\\" :info=\\\"item.need\\\" title=\\\"Need\\\" />\\n\\t\\t<info v-if=\\\"item.buy&&!item.owned\\\" :info=\\\"item.buy\\\" title=\\\"Purchase Cost\\\" />\\n\\t\\t<info v-if=\\\"item.cost&&item.id != 'bloodshot'\\\" :info=\\\"item.cost\\\" title=\\\"Cost\\\" />\\n\\t\\t<info v-if=\\\"item.cost&&item.id == 'bloodshot'\\\" :info=\\\"'Life: ' + (this.player.hp/3).toFixed(2)\\\" title=\\\"Cost\\\" />\\n\\t\\t<info v-if=\\\"item.sell||item.instanced||item.type==='Furniture'\\\" :info=\\\"sellPrice\\\" title=\\\"Sell\\\" />\\n\\t\\t<info v-if=\\\"item.run\\\" :info=\\\"item.run\\\" title=\\\"Progress Cost\\\" rate=\\\"true\\\" />\\n\\n\\t\\t<attack v-if=\\\"item.attack\\\" :item=\\\"item\\\" />\\n\\n\\t\\t<div v-if=\\\"item.effect\\\" class=\\\"info-sect\\\">Effects:</div>\\t\\t\\t\\t\\n\\t\\t<info v-if=\\\"item.effect\\\" :info=\\\"item.effect\\\" :rate=\\\"item.perpetual||item.length>0\\\" />\\n\\t\\t<div v-if=\\\"item.mod||item.alter\\\" class=\\\"info-sect\\\">Modifications:</div>\\t\\t\\t\\t\\n\\t\\t<info v-if=\\\"item.mod\\\" :info=\\\"item.mod\\\" />\\n\\t\\t<info v-if=\\\"item.alter\\\" :info=\\\"item.alter\\\" />\\n\\t\\t<div v-if=\\\"item.result\\\" class=\\\"info-sect\\\">Results:</div>\\n\\t\\t<info v-if=\\\"item.result\\\" :info=\\\"item.result\\\" />\\n\\t\\t<div v-if=\\\"item.use\\\" class=\\\"info-sect\\\">When used:</div>\\n\\t\\t<info v-if=\\\"item.use\\\" :info=\\\"item.use\\\" />\\n\\t\\t<div v-if=\\\"item.dot\\\" class=\\\"info-sect\\\">Buffs:</div>\\n\\t\\t<dot v-if=\\\"item.dot\\\" :dot=\\\"item.dot\\\" :item=\\\"item\\\" />\\n\\t\\t\\n\\t\\t<div v-if=\\\"item.lock||item.disable\\\" class=\\\"info-sect\\\">Locks:</div>\\n\\t\\t<info v-if=\\\"item.lock\\\" :info=\\\"item.lock\\\" />\\n\\t\\t<info v-if=\\\"item.disable\\\" :info=\\\"item.disable\\\" />\\n\\n\\t\\t<div class=\\\"note-text\\\" v-if=\\\"item.flavor\\\">{{item.flavor}}</div>\\n</div>\\n\\n</template>\\n\\n\\n<style scoped>\\n\\n.tight {\\n\\tmargin:0;\\n\\tpadding:0;\\n}\\n\\ndiv.item-desc {\\n\\tmargin: 0.6em 0 0.9em;\\n\\tfont-size: 0.96em;\\n}\\n\\n.item-name {\\n\\tfont-weight: bold;\\n}\\n\\n.separate > span {\\n\\tmargin-left:var(--small-gap);\\n}\\n.flavor {\\n\\tfont-style: italic;\\n}\\n\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\nhr[data-v-408e302f] {\\n\\tmargin-bottom: var(--sm-gap);\\n}\\ndiv.item-desc[data-v-408e302f] {\\n\\tmargin: 0.6em 0 0.9em;\\n\\tfont-size: 0.96em;\\n}\\n.item-name[data-v-408e302f] {\\n\\tfont-weight: bold;\\n}\\n.flavor[data-v-408e302f] {\\n\\tfont-style: italic;\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/items/info-block.vue\"],\"names\":[],\"mappings\":\";AA2IA;CACA,4BAAA;AACA;AAEA;CACA,qBAAA;CACA,iBAAA;AACA;AAEA;CACA,iBAAA;AACA;AACA;CACA,kBAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport ItemsBase from '../itemsBase.js';\\nimport { InfoBlock, DisplayName, ConvertPath } from './infoBlock';\\n\\n/**\\n * Display for a sub-block of gdata, such as item.effect, item.result, item.run, etc.\\n *\\n * @property {boolean} rate - info items are 'rate' per-second items.\\n */\\nexport default {\\n\\tprops:['title', 'info', 'rate'],\\n\\tmixins:[ItemsBase],\\n\\tbeforeCreate(){\\n\\t\\tthis.infos = new InfoBlock();\\n\\t},\\n\\tcomputed:{\\n\\t\\teffects(){\\n\\n\\t\\t\\tthis.infos.clear();\\n\\t\\t\\treturn this.effectItems( this.info, this.rate );\\n\\n\\t\\t}\\n\\n\\t},\\n\\tmethods:{\\n\\t\\t/**\\n\\t\\t *\\n\\t\\t * @param {*} obj\\n\\t\\t * @param {boolean} rate - items represent /sec rates.\\n\\t\\t */\\n\\t\\teffectItems( obj, rate=false) {\\n\\n\\t\\t\\tlet type = typeof obj;\\n\\n\\t\\t\\tif ( type === 'number') {\\n\\n\\t\\t\\t\\t//@todo still happens. mostly for sell cost as gold.\\n\\t\\t\\t\\t//console.warn('effect type is number: ' + obj) ;\\n\\t\\t\\t\\tthis.infos.add( 'gold', obj, this.rate );\\n\\n\\t\\t\\t} else if ( type === 'string') {\\n\\n\\t\\t\\t\\tthis.infos.add( DisplayName(obj), true, false, InfoBlock.GetItem( obj ) );\\n\\n\\t\\t\\t} else if ( Array.isArray(obj) ) obj.forEach( v=>this.effectList(v) );\\n\\t\\t\\telse if ( type === 'function' ) {\\n\\n\\t\\t\\t\\t/*if ( !obj.fText ){\\n\\t\\t\\t\\t\\tobj.fText = funcText( obj, Game );\\n\\t\\t\\t\\t\\tinfos[obj.fText] = true;\\n\\t\\t\\t\\t}*/\\n\\t\\t\\t\\treturn undefined;\\n\\n\\t\\t\\t}\\n\\t\\t\\telse if ( type === 'object') {\\n\\n\\t\\t\\t\\tthis.effectList( obj, '', rate );\\n\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn this.infos.results;\\n\\n\\t\\t},\\n\\n\\t\\t/**\\n\\t\\t * @param {Object} obj - object of effects to enumerate.\\n\\t\\t * @param {string} rootPath - prop path from base.\\n\\t\\t * @param {boolean} rate - whether display is per/s rate.\\n\\t\\t */\\n\\t\\teffectList( obj, rootPath='', rate=false, refItem=null ) {\\n\\n\\t\\t\\tif ( typeof obj === 'string' ) {\\n\\t\\t\\t\\tthis.infos.add( DisplayName(obj), true, rate, InfoBlock.GetItem(obj, refItem) );\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\n\\t\\t\\tfor( let p in obj ) {\\n\\n\\t\\t\\t\\tlet sub = obj[p];\\n\\t\\t\\t\\tif ( sub === null || sub === undefined || p === 'skipLocked' ) {\\n\\t\\t\\t\\t\\tcontinue;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tlet subItem = InfoBlock.GetItem( p, refItem );\\n\\n\\t\\t\\t\\tlet subRate = rate;\\n\\t\\t\\t\\t// displayed path to subitem.\\n\\t\\t\\t\\tlet subPath = ConvertPath( rootPath, p );\\n\\n\\t\\t\\t\\t// path conversion indicated no display.\\n\\t\\t\\t\\tif ( subPath === undefined ) continue;\\n\\n\\t\\t\\t\\tif ( typeof sub !== 'object' ) this.infos.add(subPath, sub, subRate, subItem );\\n\\t\\t\\t\\telse if ( typeof sub !== 'function' ) {\\n\\n\\t\\t\\t\\t\\tif ( sub.skipLocked ) {\\n\\n\\t\\t\\t\\t\\t\\tlet refItem = this.infos.rootItem;\\n\\t\\t\\t\\t\\t\\tif ( refItem && (refItem.locked || refItem.disabled) ) continue;\\n\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tif ( sub.constructor !== Object ) {\\n              this.infos.add(subPath, sub, subRate, subItem);\\n\\t\\t\\t\\t\\t} else {\\n            //special code for DOT subpath, currently unique to potions\\n            if(subPath === 'dot') {\\n              sub = {...sub}\\n              if(sub.id) delete sub.id;\\n              if(sub.name) delete sub.name;\\n              if(sub[undefined]) delete sub[undefined];\\n            }\\n\\t\\t\\t\\t\\t  this.effectList( sub, subPath, subRate, subItem );\\n          }\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n</script>\\n\\n\\n<template>\\n\\n\\t<div v-if=\\\"info&&effects\\\">\\n\\n\\t\\t<div v-if=\\\"title\\\" class=\\\"note-text\\\"><hr>{{ title }}</div>\\n\\t\\t<div v-for=\\\"v in effects\\\" :key=\\\"v.name\\\">\\n      <span>{{ v.toString() }}</span>\\n\\t\\t</div>\\n\\n\\n\\t</div>\\n\\n\\n</template>\\n\\n\\n<style scoped>\\n\\nhr {\\n\\tmargin-bottom: var(--sm-gap);\\n}\\n\\ndiv.item-desc {\\n\\tmargin: 0.6em 0 0.9em;\\n\\tfont-size: 0.96em;\\n}\\n\\n.item-name {\\n\\tfont-weight: bold;\\n}\\n.flavor {\\n\\tfont-style: italic;\\n}\\n\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\ndiv.full[data-v-6f034aea] {\\n\\tdisplay:flex;\\n\\tbackground:inherit;\\n\\tflex-direction: column;\\n\\tmin-width:50vw;\\n\\tmax-height:100vh;\\n\\theight:100vh;\\n}\\ndiv.game-mid div.main-tasks[data-v-6f034aea] {\\n\\toverflow-y: auto;\\n\\theight:100%;\\n}\\ndiv.upgrade-list[data-v-6f034aea] {\\n\\tmin-height:0;\\n\\t/*border-top: 1px solid var( --separator-color );*/\\n\\tmargin-top:var(--sm-gap);\\n}\\ndiv.inv-equip[data-v-6f034aea] {\\n\\theight:100%;\\n\\tpadding: 0; display: grid; grid-template-rows: 50% 50%; grid-auto-columns: 1fr;\\n}\\ndiv.inv-equip > div[data-v-6f034aea]:nth-child(2) {\\n    border-top: 1px solid var(--separator-color);\\n}\\ndiv.bot-bar[data-v-6f034aea] {\\n\\tbackground: inherit;\\n\\tborder-top: 1px solid var(--separator-color); padding: var(--md-gap);\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/main.vue\"],\"names\":[],\"mappings\":\";AAydA;CACA,YAAA;CACA,kBAAA;CACA,sBAAA;CACA,cAAA;CACA,gBAAA;CACA,YAAA;AACA;AAEA;CACA,gBAAA;CACA,WAAA;AACA;AAGA;CACA,YAAA;CACA,kDAAA;CACA,wBAAA;AACA;AAEA;CACA,WAAA;CACA,UAAA,EAAA,aAAA,EAAA,2BAAA,EAAA,sBAAA;AACA;AAEA;IACA,4CAAA;AACA;AAEA;CACA,mBAAA;CACA,4CAAA,EAAA,sBAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport Profile from 'modules/profile';\\nimport Game from 'game';\\nimport Menu from './components/menu.vue';\\nimport ResoucesView from './panes/resources.vue';\\nimport Tasks from './sections/tasks.vue';\\nimport Quickbar from './quickbar.vue';\\nimport ItemsBase from './itemsBase';\\nimport Vitals from './panes/vitals.vue';\\nimport DotView from './items/dotView.vue';\\nimport TopBar from './top-bar.vue';\\n\\nimport Warn from 'ui/popups/warn.vue';\\nimport ItemPopup, { RollOver, ItemOut } from './popups/itemPopup.vue';\\nimport SettingsUI from './popups/settings.vue';\\n\\nimport LogView from './outlog.vue';\\n\\nimport Settings from 'modules/settings';\\nimport Cheats from 'debug/cheats';\\nimport DevConsole from 'debug/devconsole.vue';\\n\\nimport { TRY_BUY, USE, TRY_USE, EVT_STAT } from '../events';\\nimport { TICK_TIME } from '../game';\\nimport { TASK } from '../values/consts';\\nimport Task from '../items/task';\\n\\n/**\\n * @const {number} SAVE_TIME  - time in seconds between auto-saves.\\n */\\nconst SAVE_TIME = 30;\\n\\n/**\\n * @listens [sell]\\n */\\nexport default {\\n\\n\\t//mixins:__DIST ? [ItemsBase] : [ItemsBase,Cheats],\\\\\\n\\tmixins:[ItemsBase,Cheats],\\n\\tcomponents:{\\n\\t\\tdevconsole:DevConsole,\\n\\t\\tresources:ResoucesView,\\n\\t\\ttasks:Tasks,\\n\\t\\titempopup:ItemPopup,\\n\\t\\tvitals:Vitals,\\n\\t\\tlog:LogView,\\n\\t\\tquickbar:Quickbar,\\n\\t\\tdots:DotView,\\n\\t\\twarn:Warn,\\n\\t\\ttopbar:TopBar,\\n\\t\\tsettings:SettingsUI,\\n\\t\\tlogin:()=>import( /* webpackChunkName: \\\"remote\\\" */ './popups/login.vue' ),\\n\\t\\tregister:()=>import( /* webpackChunkName: \\\"remote\\\" */ './components/register.vue' ),\\n\\t\\tactivities:()=>import( /* webpackChunkName: \\\"popups-ui\\\" */ './popups/activities.vue' ),\\n\\t\\tchoice:()=>import( /* webpackChunkName: \\\"popups-ui\\\" */ './popups/choice.vue' ),\\n\\n\\t\\tskills:()=> import( /* webpackChunkName: \\\"skills-ui\\\" */ './sections/skills.vue' ),\\n\\t\\tequip:()=>import( /* webpackChunkName: \\\"equip-ui\\\" */ './sections/equip.vue'),\\n\\t\\tinventory:()=> import( /* webpackChunkName: \\\"inv-ui\\\" */ './sections/inventory.vue' ),\\n\\t\\tpotions:()=> import( /* webpackChunkName: \\\"potions-ui\\\" */ './sections/potions.vue'),\\n\\t\\thome:()=>import( /* webpackChunkName: \\\"home-ui\\\" */ './sections/home.vue'),\\n\\t\\tplayer:()=>import( /* webpackChunkName: \\\"player-ui\\\" */'./sections/player.vue'),\\n\\t\\tbestiary:()=>import(/* webpackChunkName: \\\"bestiary-ui\\\" */ './sections/bestiary.vue' ),\\n\\t\\tspells:()=>import( /* webpackChunkName: \\\"spells-ui\\\" */ './sections/spells.vue'),\\n\\t\\tadventure:()=>import( /* webpackChunkName: \\\"raid-ui\\\" */ './sections/adventure.vue'),\\n\\t\\tenchanting:()=>import( /* webpackChunkName: \\\"enchant-ui\\\" */'./sections/enchanting.vue' ),\\n\\t\\tminions:()=>import( /* webpackChunkName: \\\"minions-ui\\\" */ './sections/minions.vue' ),\\n\\t\\tscraft:()=>import( /* webpackChunkName: \\\"scraft-ui\\\" */ './sections/scraft.vue' ),\\n\\t\\t'vue-menu':Menu\\n\\t},\\n\\tdata(){\\n\\n\\t\\treturn {\\n\\t\\t\\tstate:null,\\n\\t\\t\\tpsection:null,\\n\\t\\t\\ttogRegister:false,\\n\\t\\t\\tshowLogin:false,\\n\\t\\t\\ttogSettings:false,\\n\\t\\t\\t/** toggle activity manager */\\n\\t\\t\\ttogActivities:false\\n\\t\\t};\\n\\n\\t},\\n\\n\\tbeforeCreate(){\\n\\n\\t\\t/**\\n\\t\\t * @property {number} loopId - interval id for game loop.\\n\\t\\t */\\n\\t\\tthis.loopId = 0;\\n\\t\\t/**\\n\\t\\t * @property {number} repeaterId - interval id for auto-repeating click.\\n\\t\\t */\\n\\t\\tthis.repeaterId = 0;\\n\\n\\t\\t/**\\n\\t\\t * @property {(evt)=>null} repeatEndFunc - mouseup func to end repeater.\\n\\t\\t */\\n\\t\\tthis.repeatEndFunc = null;\\n\\n\\t},\\n\\n\\tcreated(){\\n\\n\\t\\tthis.Profile = Profile;\\n\\n\\t\\tthis.listen('game-loaded', this.gameLoaded );\\n\\t\\tthis.listen('setting', this.onSetting );\\n\\n\\t\\tthis.listen('pause', this.pause );\\n\\t\\tthis.listen('unpause', this.unpause );\\n\\n\\t\\tthis.listen('show-register', this.onShowRegister, this);\\n\\t\\tthis.listen('show-login', this.onShowLogin, this);\\n\\n\\n\\t},\\n\\tbeforeDestroy(){\\n\\n\\t\\tItemOut();\\n\\t\\tthis.endRepeater();\\n\\n\\t\\tthis.removeListener('game-loaded', this.gameLoaded );\\n\\t\\tthis.removeListener('setting', this.onSetting );\\n\\t\\tthis.removeListener('pause', this.pause );\\n\\t\\tthis.removeListener('unpause', this.unpause );\\n\\n\\t\\tthis.removeListener( 'show-register', this.onShowRegister );\\n\\t\\tthis.removeListener( 'show-login', this.onShowLogin );\\n\\n\\t},\\n\\tmethods:{\\n\\n\\t\\tgameLoaded() {\\n\\n\\t\\t\\tthis.state = Game.state;\\n\\n\\t\\t\\tlet curview = Settings.get('curview') || 'sect_main';\\n\\t\\t\\t//console.warn('VIEW CHANGE: ' +  curview );\\n\\t\\t\\tthis.section = this.state.sections.find( v=>v.id===curview );\\n\\n\\t\\t\\tthis.initEvents();\\n\\n\\t\\t},\\n\\n\\t\\t/**\\n\\t\\t * Listen non-system events.\\n\\t\\t */\\n\\t\\tinitEvents() {\\n\\n\\t\\t\\tthis.add( 'sell', this.onSell );\\n\\t\\t\\tthis.add( 'take', this.onTake );\\n\\n\\t\\t\\tthis.add( 'upgrade', this.onItem );\\n\\t\\t\\tthis.add( TASK, this.onItem );\\n\\t\\t\\tthis.add( 'spell', this.onItem );\\n\\n\\t\\t\\tthis.add('equip', this.onEquip );\\n\\t\\t\\tthis.add('unequip', this.onUnequip );\\n\\t\\t\\tthis.add('enchant', this.onEnchant );\\n\\t\\t\\tthis.add('craft', this.onCraft );\\n\\t\\t\\t// display warn dialog.\\n\\t\\t\\tthis.add('warn', this.onWarn );\\n\\n\\t\\t\\tthis.add('showActivities', ()=>{this.togActivities=true} )\\n\\n\\t\\t\\tthis.add('repeater', this.makeRepeater, this );\\n\\t\\t\\tthis.add('endrepeater', this.endRepeater, this );\\n\\n\\t\\t\\tthis.add( TRY_USE, this.tryUse )\\n\\t\\t\\tthis.add( USE, this.onUse );\\n\\n\\t\\t\\tthis.add('quickslot', this.doQuickslot);\\n\\n\\t\\t\\tthis.add( TRY_BUY, this.onBuy );\\n\\n\\t\\t\\t// dispatch start stats.\\n\\t\\t\\tthis.dispatch( EVT_STAT, 'titles', this.state.player.titles.length );\\n\\t\\t\\tthis.dispatch( EVT_STAT, 'level', this.state.getData('level').valueOf() );\\n\\t\\t\\tthis.dispatch( EVT_STAT, 'prestige', this.state.getData('prestige').valueOf() );\\n\\n\\t\\t},\\n\\n\\t\\tonSetting( setting, val ) {\\n\\n\\t\\t\\tif ( setting === 'autosave' ) {\\n\\t\\t\\t\\tif ( val ) this.startAutoSave();\\n\\t\\t\\t\\telse this.stopAutoSave();\\n\\t\\t\\t}\\n\\n\\t\\t},\\n\\n\\t\\tonShowLogin(){this.showLogin=true;},\\n\\t\\tonShowRegister(){this.togRegister=true;},\\n\\n\\t\\tstopAutoSave() {\\n\\t\\t\\tif ( this.saver ) {\\n\\t\\t\\t\\t//console.log('STOP AUTOSAVE');\\n\\t\\t\\t\\tlet int = this.saver;\\n\\t\\t\\t\\tthis.saver = null;\\n\\t\\t\\t\\tclearInterval( int );\\n\\t\\t\\t}\\n\\t\\t},\\n\\n\\t\\tstartAutoSave() {\\n\\n\\t\\t\\tif (!this.loopId ) return;\\n\\t\\t\\tvar s = Settings;\\n\\t\\t\\t\\tvar setting = s.get('autosave');\\n\\n\\t\\t\\t//if ( setting && !this.saver ) { //renabled autosaver regardless\\n\\t\\t\\tif (!this.saver ) {\\n\\t\\t\\t\\t//console.log('START AUTOSAVE');\\n\\t\\t\\t\\tthis.saver = setInterval( ()=>this.dispatch('autosave'), 1000*SAVE_TIME );\\n\\t\\t\\t}\\n\\n\\t\\t},\\n\\n\\t\\tpause() {\\n\\n\\t\\t\\tif ( this.loopId ) {\\n\\t\\t\\t\\tlet int = this.loopId;\\n\\t\\t\\t\\tthis.loopId = 0;\\n\\t\\t\\t\\tclearInterval( int );\\n\\t\\t\\t}\\n\\t\\t\\tthis.stopAutoSave();\\n\\t\\t\\tthis.endRepeater();\\n\\n\\t\\t\\tif ( this.keyListen ) window.removeEventListener('keydown', this.keyListen, false );\\n\\n\\n\\t\\t},\\n\\n\\n\\t\\t/**\\n\\t\\t * Item repeats until released.\\n\\t\\t * @param {GData} it - item being used.\\n\\t\\t */\\n\\t\\tmakeRepeater( it ){\\n\\n\\t\\t\\tif ( this.repeaterId ) {\\n\\t\\t\\t\\tclearInterval(this.repeaterId );\\n\\t\\t\\t\\tthis.repeaterId = 0;\\n\\t\\t\\t}\\n\\t\\t\\tthis.repeaterId = setInterval( (t)=>Game.tryItem(t), 50, it );\\n\\n\\t\\t\\tif ( !this.repeatEndFunc ) this.repeatEndFunc = ()=>this.endRepeater();\\n\\t\\t\\tdocument.addEventListener( 'mouseup', this.repeatEndFunc );\\n\\n\\t\\t},\\n\\n\\t\\t/**\\n\\t\\t * Cancel active repeater.\\n\\t\\t */\\n\\t\\tendRepeater(){\\n\\n\\t\\t\\tif ( this.repeaterId ) {\\n\\t\\t\\t\\tclearInterval(this.repeaterId );\\n\\t\\t\\t\\tthis.repeaterId=0;\\n\\t\\t\\t}\\n\\t\\t\\tif ( this.repeatEndFunc ) {\\n\\t\\t\\t\\tdocument.removeEventListener( 'mouseup', this.repeatEndFunc );\\n\\t\\t\\t\\tthis.repeatEndFunc = null;\\n\\t\\t\\t}\\n\\n\\t\\t},\\n\\n\\t\\tunpause() {\\n\\n\\t\\t\\tif ( Game.loaded ) {\\n\\n\\t\\t\\t\\tGame.lastUpdate = Date.now();\\n\\t\\t\\t\\tif ( !this.loopId ) {\\n\\t\\t\\t\\t\\tthis.loopId = setInterval( ()=>Game.update(), TICK_TIME );\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tthis.keyListen = evt=>{\\n\\t\\t\\t\\tif ( evt.repeat) return;\\n\\t\\t\\t\\tthis.keyDown( evt ); evt.stopPropagation(); }\\n\\n\\t\\t\\t\\twindow.addEventListener('keydown', this.keyListen, false );\\n\\t\\t\\t\\tthis.startAutoSave();\\n\\n\\t\\t\\t}\\n\\n\\n\\t\\t},\\n\\n\\t\\tkeyDown( e ){\\n\\n\\t\\t\\tif ( !this.loopId ) return;\\n\\n\\t\\t\\tlet slice = e.code.slice(0,-1);\\n\\t\\t\\tif ( slice === 'Digit' || slice === 'Numpad' ) {\\n\\n\\t\\t\\t\\tlet num = Number( e.code.slice(-1) );\\n\\t\\t\\t\\t//console.log('number: ' + num );\\n\\n\\t\\t\\t\\tif ( e.shiftKey && RollOver.item ) {\\n\\n\\t\\t\\t\\t\\tlet it = RollOver.item;\\n\\t\\t\\t\\t\\tthis.state.setQuickSlot( RollOver.item, num );\\n\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tlet it = this.state.getQuickSlot(num);\\n\\t\\t\\t\\t\\tif ( it) this.doQuickslot(it);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t}\\n\\n\\t\\t},\\n\\n\\t\\tdoQuickslot(it) {\\n\\t\\t\\t Game.tryItem( it.slotTarget( Game ) );\\n\\t\\t},\\n\\n\\t\\tonEquip( it, inv ) { Game.equip( it,inv ); },\\n\\n\\t\\tonUnequip(slot, it){ Game.unequip(slot, it) },\\n\\n\\t\\tonTake(it) { Game.take(it); },\\n\\n\\t\\tonCraft(it) { Game.craft(it); },\\n\\n\\t\\t/**\\n\\t\\t * Use instanced item.\\n\\t\\t */\\n\\t\\tonUse( it, inv ) { Game.use(it, inv); },\\n\\n\\t\\t/**\\n\\t\\t * @param {Enchant} e - enchantment\\n\\t\\t * @param {Item} targ - enchant target.\\n\\t\\t */\\n\\t\\tonEnchant( e, targ ) {\\n\\t\\t\\tGame.tryUseOn( e, targ );\\n\\t\\t},\\n\\n\\t\\tonSell( it, inv, count ) { Game.trySell( it, inv, count ); },\\n\\n\\t\\titemOut:ItemOut,\\n\\n\\t\\t/**\\n\\t\\t * Item clicked.\\n\\t\\t */\\n\\t\\tonItem(item) {\\n\\n\\t\\t\\tif ( item.warn ) { //&& !Settings.getSubVar('nowarn', item.id)) {\\n\\n\\t\\t\\t\\tthis.$refs.warn.show( item );\\n\\n\\t\\t\\t} else Game.tryItem(item);\\n\\n\\t\\t},\\n\\n\\t\\tonConfirmed(it, nowarn) {\\n\\n\\t\\t\\tif ( typeof it !== 'string' ) {\\n\\t\\t\\t\\tit.warn = !nowarn;\\n\\t\\t\\t\\tGame.tryItem(it);\\n\\t\\t\\t}\\n\\n\\t\\t},\\n\\n\\t\\t/**\\n\\t\\t * Warning should trigger.\\n\\t\\t * @param {string} msg - warning message\\n\\t\\t * @param {()=>{}} res - success callback.\\n\\t\\t */\\n\\t\\tonWarn( msg, res ) {\\n\\t\\t\\tthis.$refs.warn.show( msg, res );\\n\\t\\t},\\n\\n\\t\\ttryUse( it ) { Game.tryItem(it ) },\\n\\n\\t\\t/**\\n\\t\\t * Buy a spell or item without casting/using the item or its mods.\\n\\t\\t * @property {Item} item - item to buy.\\n\\t\\t */\\n\\t\\tonBuy(item) { Game.tryBuy( item ); }\\n\\n\\t},\\n\\tcomputed:{\\n\\n\\t\\tsection:{\\n\\n\\t\\t\\tget(){ return this.psection; },\\n\\t\\t\\tset(v){\\n\\n\\t\\t\\t\\tthis.psection=v;\\n\\t\\t\\t\\tif ( v ) Settings.set('curview', v.id );\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tmenuItems(){ return this.state.sections.filter( it=>!this.locked(it) ); }\\n\\n\\t}\\n\\n}\\n</script>\\n\\n<template>\\n\\n\\t<div class=\\\"full\\\" @mouseover.capture.stop=\\\"itemOut\\\">\\n\\n\\t\\t<devconsole />\\n\\t\\t<topbar @open-settings=\\\"togSettings=true\\\">\\n\\t\\t\\t<template slot=\\\"center\\\">\\n\\t\\t\\t<span class=\\\"load-message\\\" v-if=\\\"!state\\\">LOADING DATA...</span>\\n\\t\\t\\t<dots v-if=\\\"state\\\" :dots=\\\"state.player.dots\\\" />\\n\\t\\t\\t</template>\\n\\t\\t</topbar>\\n\\n<!-- popups -->\\n\\t\\t<itempopup />\\n\\t\\t<warn ref=\\\"warn\\\" @confirmed=\\\"onConfirmed\\\" />\\n\\t\\t<choice />\\n\\t\\t<register v-if=\\\"Profile.CLOUD&&togRegister\\\" @close=\\\"togRegister=false\\\" />\\n\\t\\t<login v-if=\\\"Profile.CLOUD&&showLogin\\\" @close=\\\"showLogin=false\\\" />\\n\\t\\t<settings v-if=\\\"togSettings\\\" @close-settings=\\\"togSettings=false\\\" />\\n\\t\\t<activities v-if=\\\"togActivities\\\" @close=\\\"togActivities=false\\\" />\\n\\n<!-- end popups -->\\n\\n\\t\\t<div v-if=\\\"state\\\" class=\\\"game-main\\\">\\n\\n\\t\\t<resources :items=\\\"state.resources\\\"/>\\n\\n\\t\\t<vue-menu class=\\\"game-mid\\\" :items=\\\"menuItems\\\" v-model=\\\"section\\\">\\n\\n\\t\\t<template slot=\\\"sect_main\\\">\\n\\t\\t<tasks class=\\\"main-tasks\\\" />\\n\\t\\t</template>\\n\\n\\t\\t<template slot=\\\"sect_skills\\\"><skills :state=\\\"state\\\"></skills></template>\\n\\n\\t\\t<template slot=\\\"sect_player\\\"><player /></template>\\n\\n\\t\\t<template slot=\\\"sect_home\\\"><home :state=\\\"state\\\" /></template>\\n\\n\\t\\t<template slot=\\\"sect_raid\\\"><adventure :state=\\\"state\\\" /></template>\\n\\n\\t\\t<template slot=\\\"sect_equip\\\">\\n\\n\\t\\t\\t<div class=\\\"inv-equip\\\">\\n\\t\\t\\t\\t<equip :equip=\\\"state.equip\\\" />\\n\\t\\t\\t\\t<inventory :inv=\\\"state.inventory\\\" />\\n\\t\\t\\t</div>\\n\\n\\t\\t</template>\\n\\n\\t\\t<template slot=\\\"sect_spells\\\"><spells /></template>\\n\\t\\t<template slot=\\\"sect_scraft\\\"><scraft /></template>\\n\\n\\t\\t<template slot=\\\"sect_potions\\\"><potions /></template>\\n\\n\\t\\t<template slot=\\\"sect_bestiary\\\"><bestiary /></template>\\n\\t\\t<template slot=\\\"sect_minions\\\"><minions :minions=\\\"state.minions\\\" /></template>\\n\\n\\t\\t<template slot=\\\"sect_enchant\\\"><enchanting /></template>\\n\\t\\t</vue-menu>\\n\\n\\t\\t<vitals :state=\\\"state\\\" />\\n\\n\\t\\t<log />\\n\\n\\t\\t</div>\\n\\n\\t\\t<quickbar v-if=\\\"state\\\" class=\\\"bot-bar\\\" :bars=\\\"state.bars\\\" />\\n\\n\\t</div>\\n</template>\\n\\n<style scoped>\\n\\ndiv.full {\\n\\tdisplay:flex;\\n\\tbackground:inherit;\\n\\tflex-direction: column;\\n\\tmin-width:50vw;\\n\\tmax-height:100vh;\\n\\theight:100vh;\\n}\\n\\ndiv.game-mid div.main-tasks {\\n\\toverflow-y: auto;\\n\\theight:100%;\\n}\\n\\n\\ndiv.upgrade-list {\\n\\tmin-height:0;\\n\\t/*border-top: 1px solid var( --separator-color );*/\\n\\tmargin-top:var(--sm-gap);\\n}\\n\\ndiv.inv-equip {\\n\\theight:100%;\\n\\tpadding: 0; display: grid; grid-template-rows: 50% 50%; grid-auto-columns: 1fr;\\n}\\n\\ndiv.inv-equip > div:nth-child(2) {\\n    border-top: 1px solid var(--separator-color);\\n}\\n\\ndiv.bot-bar {\\n\\tbackground: inherit;\\n\\tborder-top: 1px solid var(--separator-color); padding: var(--md-gap);\\n}\\n\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\ndiv.log-view[data-v-c9d4ddf0] {\\n\\t\\tborder-left:1px solid var(--very-quiet-text-color);\\n\\t\\tdisplay:flex;\\n\\t\\tflex-flow: column nowrap;\\n\\t\\tmargin-left: var(--md-gap);\\n\\t\\tflex-basis:20%;\\n\\t\\tmax-width: 14em;\\n\\t\\tmax-height: inherit;\\n        min-width: 8em;\\n        margin: 0;\\n}\\ndiv.log-view div.top-span[data-v-c9d4ddf0] {\\n\\t\\tmax-height: unset;\\n\\t\\tborder-bottom: 1px solid var(--separator-color);\\n\\t\\tdisplay:flex;\\n\\t\\tflex-flow: row nowrap;\\n\\t\\tmargin: var(--tiny-gap) 0;\\n\\t\\tpadding-bottom: var(--tiny-gap);\\n}\\ndiv.log-view div.top-span .checks[data-v-c9d4ddf0] {\\n        display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr;\\n        height: 4em; align-items: center;\\n\\t\\tfont-size: 0.8em;\\n\\t\\tdisplay:flex;\\n\\t\\tflex-flow: row wrap;\\n\\t\\talign-items: flex-start;\\n}\\ndiv.log-view div.top-span .checks span[data-v-c9d4ddf0] { flex-basis: 50%; overflow: hidden; white-space: nowrap;\\n}\\ndiv.log-view .outlog[data-v-c9d4ddf0] {\\n\\t\\tdisplay:flex;\\n        overflow-y: auto; flex-direction: column;\\n        max-height: unset; flex: 1; font-size: var(--compact-small-font);\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/outlog.vue\"],\"names\":[],\"mappings\":\";AA+GA;EACA,kDAAA;EACA,YAAA;EACA,wBAAA;EACA,0BAAA;EACA,cAAA;EACA,eAAA;EACA,mBAAA;QACA,cAAA;QACA,SAAA;AACA;AAEA;EACA,iBAAA;EACA,+CAAA;EACA,YAAA;EACA,qBAAA;EACA,yBAAA;EACA,+BAAA;AACA;AAEA;QACA,aAAA,EAAA,8BAAA,EAAA,2BAAA;QACA,WAAA,EAAA,mBAAA;EACA,gBAAA;EACA,YAAA;EACA,mBAAA;EACA,uBAAA;AACA;AACA,0DAAA,eAAA,EAAA,gBAAA,EAAA,mBAAA;AAAA;AAEA;EACA,YAAA;QACA,gBAAA,EAAA,sBAAA;QACA,iBAAA,EAAA,OAAA,EAAA,oCAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport { LogTypes} from '../events';\\nimport Game from '../game';\\n\\n/**\\n * Displays event output to user.\\n */\\nexport default {\\n\\n\\tdata() {\\n\\n\\t\\tvar filter = 0;\\n\\t\\tfor( let p in LogTypes) {\\n\\t\\t\\tfilter |= LogTypes[p];\\n\\t\\t}\\n\\n\\t\\treturn {\\n\\t\\t\\tlog:Game.log,\\n\\t\\t\\tLogTypes:LogTypes,\\n\\t\\t\\tfilter:filter,\\n\\t\\t\\tshowOptions:false\\n\\n\\t\\t\\t/**\\n\\t\\t\\t * @property {string[]} exclude - types to exclude.\\n\\t\\t\\t */\\n\\t\\t}\\n\\n\\t},\\n\\tmethods:{\\n\\n\\t\\tchanged( box ) {\\n\\n\\t\\t\\tif ( box.checked ) {\\n\\t\\t\\t\\tthis.filter = this.filter|box.value;\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tthis.filter = (~box.value)&this.filter;\\n\\n\\t\\t\\t}\\n\\n\\t\\t},\\n\\n\\t\\tdoOptions() {\\n\\t\\t\\tthis.showOptions = !this.showOptions;\\n\\t\\t},\\n\\n\\t\\tclearLog(){ this.log.clear(); }\\n\\n\\t},\\n\\tcomputed:{\\n\\n\\t\\tvisItems(){\\n\\n\\t\\t\\tlet all = this.log.items;\\n\\n\\t\\t\\tlet a = [];\\n\\n\\t\\t\\tfor( let i = all.length-1; i>=0; i-- ) {\\n\\n\\t\\t\\t\\tvar it = all[i];\\n\\t\\t\\t\\tif ( !it.type || (this.filter&it.type)>0 ) a.push(it);\\n\\t\\t\\t}\\n\\t\\t\\treturn a;\\n\\n\\t\\t}\\n\\n\\t}\\n\\n}\\n</script>\\n\\n\\n<template>\\n\\n\\t<div class=\\\"log-view\\\">\\n\\n\\t\\t\\t<div class=\\\"top-span\\\">\\n\\t\\t\\t\\t<button type=\\\"button\\\" class=\\\"inline btn-sm\\\" @click=\\\"clearLog\\\">Clear</button>\\n\\t\\t\\t\\t<!--<button class=\\\"text-button\\\" @click=\\\"doOptions\\\">&#9881;</button>-->\\n\\t\\t\\t\\t<span class=\\\"checks\\\">\\n\\n\\t\\t\\t\\t<span v-for=\\\"(p,k) in LogTypes\\\" :key=\\\"k\\\">\\n\\t\\t\\t\\t\\t<input type=\\\"checkbox\\\" :value=\\\"p\\\" :id=\\\"elmId(k)\\\" :checked=\\\"filter&p\\\" @change=\\\"changed( $event.target )\\\" >\\n\\t\\t\\t\\t\\t<label :for=\\\"elmId(k)\\\">{{ k.toString().toTitleCase() }}</label>\\n\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t</span>\\n\\n\\t\\t\\t\\t<div v-if=\\\"showOptions\\\" class=\\\"options\\\">\\n\\t\\t\\t\\t</div>\\n\\n\\t\\t\\t</div>\\n\\n\\n\\t\\t\\t<div class=\\\"outlog\\\">\\n\\t\\t\\t<div class=\\\"log-item\\\" v-for=\\\"(it,i) in visItems\\\" :key=\\\"i\\\">\\n\\n\\t\\t\\t\\t<div>\\n\\t\\t\\t\\t\\t<span v-if=\\\"it.title\\\" class=\\\"log-title item-name\\\">{{it.title}}</span>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<span class=\\\"log-text\\\">{{ it.text }}</span>\\n\\t\\t\\t\\t<span class=\\\"num-align\\\" v-if=\\\"it.count>1\\\">(x{{it.count}})</span>\\n\\n\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\n\\t</div>\\n\\n</template>\\n\\n<style scoped>\\n\\n\\n    div.log-view {\\n\\t\\tborder-left:1px solid var(--very-quiet-text-color);\\n\\t\\tdisplay:flex;\\n\\t\\tflex-flow: column nowrap;\\n\\t\\tmargin-left: var(--md-gap);\\n\\t\\tflex-basis:20%;\\n\\t\\tmax-width: 14em;\\n\\t\\tmax-height: inherit;\\n        min-width: 8em;\\n        margin: 0;\\n\\t}\\n\\n    div.log-view div.top-span {\\n\\t\\tmax-height: unset;\\n\\t\\tborder-bottom: 1px solid var(--separator-color);\\n\\t\\tdisplay:flex;\\n\\t\\tflex-flow: row nowrap;\\n\\t\\tmargin: var(--tiny-gap) 0;\\n\\t\\tpadding-bottom: var(--tiny-gap);\\n\\t}\\n\\n    div.log-view div.top-span .checks {\\n        display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr;\\n        height: 4em; align-items: center;\\n\\t\\tfont-size: 0.8em;\\n\\t\\tdisplay:flex;\\n\\t\\tflex-flow: row wrap;\\n\\t\\talign-items: flex-start;\\n    }\\n    div.log-view div.top-span .checks span { flex-basis: 50%; overflow: hidden; white-space: nowrap; }\\n\\n\\tdiv.log-view .outlog {\\n\\t\\tdisplay:flex;\\n        overflow-y: auto; flex-direction: column;\\n        max-height: unset; flex: 1; font-size: var(--compact-small-font);\\n\\t}\\n\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\ndiv.groupTitle[data-v-05eb1bc6] {\\n\\tcursor: pointer;\\n\\ttext-transform: capitalize;\\n\\tcolor: var( --title-text-color );\\n\\tborder: 1px solid var(--list-header-border);\\n\\tbackground-color: var(--list-header-color);\\n\\tpadding:1px;\\n\\tmargin:-1px 0 0 0px;\\n}\\n.rsrc .item-name[data-v-05eb1bc6] {\\n\\tflex:1;\\n\\tcolor:#999;\\n\\tpadding-right: var(--sm-gap);\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/panes/itemGroup.vue\"],\"names\":[],\"mappings\":\";AA+DA;CACA,eAAA;CACA,0BAAA;CACA,gCAAA;CACA,2CAAA;CACA,0CAAA;CACA,WAAA;CACA,mBAAA;AACA;AAEA;CACA,MAAA;CACA,UAAA;CACA,4BAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport ItemsBase from 'ui/itemsBase';\\nexport default {\\n\\n\\t/**\\n\\t * @property {string} group - displayed group name.\\n\\t * @property {object<string,boolean>} - elements to hide.\\n\\t */\\n\\tprops:[ 'items', 'group', 'hide'],\\n\\tmixins:[ItemsBase],\\n\\tdata(){\\n\\n\\t\\treturn {\\n\\t\\t\\tisOpen:true\\n\\t\\t}\\n\\n\\t},\\n\\tcomputed:{\\n\\n\\t\\tshown(){\\n\\n\\t\\t\\tlet a = [];\\n\\t\\t\\tlet len = this.items.length;\\n\\t\\t\\tfor( let i = 0; i < len; i++ ) {\\n\\n\\t\\t\\t\\tlet it = this.items[i];\\n\\t\\t\\t\\tif ( !this.reslocked( it ) && !this.hide[it.id ] ) a.push(it);\\n\\t\\t\\t}\\n\\n\\t\\t\\treturn a;\\n\\n\\t\\t}\\n\\n\\t}\\n\\n}\\n</script>\\n\\n<template>\\n\\n<div v-if=\\\"shown.length>0\\\">\\n\\n<div class=\\\"groupTitle separate\\\" @click=\\\"isOpen=!isOpen\\\"><span>{{group}}</span><span class=\\\"arrows\\\">{{ isOpen ? '▼' : '▲' }}</span></div>\\n<div v-if=\\\"isOpen\\\">\\n\\n\\t\\t<div class=\\\"rsrc separate hidable\\\" v-for=\\\"it in shown\\\"\\n\\t\\t\\t:data-key=\\\"it.id\\\" :key=\\\"it.id\\\"\\n\\t\\t\\t@mouseenter.capture.stop=\\\"itemOver($event,it)\\\">\\n\\n\\t\\t\\t<span class=\\\"item-name\\\">{{ it.name }}</span>\\n\\t\\t\\t<span class=\\\"num-align\\\">{{ Math.floor( it.value ) + ( it.max && it.max.value>0 ? '/' + Math.floor(it.max.value) : '' )}}</span>\\n\\t\\t\\t<!--<td>{{ it.delta != 0 ? '&nbsp;(' + it.delta.toFixed(2) + '/t )' : ''}}</td>-->\\n\\n\\t</div>\\n\\n</div>\\n\\n</div>\\n\\n</template>\\n\\n<style scoped>\\n\\ndiv.groupTitle {\\n\\tcursor: pointer;\\n\\ttext-transform: capitalize;\\n\\tcolor: var( --title-text-color );\\n\\tborder: 1px solid var(--list-header-border);\\n\\tbackground-color: var(--list-header-color);\\n\\tpadding:1px;\\n\\tmargin:-1px 0 0 0px;\\n}\\n\\n.rsrc .item-name {\\n\\tflex:1;\\n\\tcolor:#999;\\n\\tpadding-right: var(--sm-gap);\\n}\\n\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\ndiv.res-list[data-v-1090363f] {\\n\\toverflow-y:auto;\\n\\toverflow-x:visible;\\n\\twidth: fit-content;\\n\\tmargin: 0; padding: 0;\\n\\tmin-width: 11rem;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/panes/resources.vue\"],\"names\":[],\"mappings\":\";AA4EA;CACA,eAAA;CACA,kBAAA;CACA,kBAAA;CACA,SAAA,EAAA,UAAA;CACA,gBAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport UIMixin from 'ui/uiMixin';\\nimport Settings from 'modules/settings';\\n\\nimport ItemGroup from 'ui/panes/itemGroup.vue';\\n\\nexport default {\\n\\n\\t/**\\n\\t * @property {Resource[]} items\\n\\t */\\n\\tprops:['items'],\\n\\tmixins:[ UIMixin],\\n\\n\\tdata(){\\n\\n\\t\\tlet ops = Settings.getSubVars('resview');\\n\\t\\tif (!ops.hide) ops.hide = {};\\n\\n\\t\\treturn {\\n\\n\\t\\t\\t/**\\n\\t\\t\\t * @property {.<string,GData[]>} groups - maps group name to items array.\\n\\t\\t\\t */\\n\\t\\t\\tgroups:null,\\n\\t\\t\\thide:ops.hide\\n\\t\\t}\\n\\n\\t},\\n\\tcomponents:{\\n\\t\\tgroup:ItemGroup\\n\\t},\\n\\tcreated(){\\n\\n\\t\\t// build item groups.\\n\\t\\tlet items = this.items;\\n\\t\\tlet groups = {\\n\\t\\t\\tother:[]\\n\\t\\t}\\n\\n\\t\\tlet group;\\n\\t\\tlet len = items.length;\\n\\t\\tfor( let i = 0; i < len; i++ ) {\\n\\n\\t\\t\\tlet it = items[i];\\n\\t\\t\\tif ( it.hide ) continue;\\n\\t\\t\\tlet title = it.group || ( it.tags ? it.tags[0] : 'other');\\n\\t\\t\\tif ( title === 'manas' ) continue;\\n\\n\\t\\t\\tgroup = groups[title] || ( groups[title] = [] );\\n\\n\\t\\t\\tgroup.push(it );\\n\\n\\t\\t}\\n\\n\\t\\tthis.groups = groups;\\n\\n\\t}\\n\\n}\\n</script>\\n\\n\\n<template>\\n<div class=\\\"res-list\\\">\\n\\n\\t\\t<div class=\\\"config\\\"><button ref=\\\"btnHides\\\" class=\\\"btnConfig\\\"></button></div>\\n\\n\\t\\t<group class=\\\"res-group\\\" v-for=\\\"(g,p) in groups\\\" :items=\\\"g\\\" :group=\\\"p\\\" :hide=\\\"hide\\\" :key=\\\"p\\\" />\\n\\n</div>\\n</template>\\n\\n<style scoped>\\n\\n\\ndiv.res-list {\\n\\toverflow-y:auto;\\n\\toverflow-x:visible;\\n\\twidth: fit-content;\\n\\tmargin: 0; padding: 0;\\n\\tmin-width: 11rem;\\n}\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\ndiv.running[data-v-d3356d4e] {\\n\\tdisplay:flex;\\n\\tflex-flow: column nowrap;\\n}\\ndiv.running .relative[data-v-d3356d4e] {\\n\\tposition: relative;\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/panes/running.vue\"],\"names\":[],\"mappings\":\";AA2EA;CACA,YAAA;CACA,wBAAA;AACA;AAEA;CACA,kBAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport Game from 'game';\\nimport {HALT_TASK, STOP_ALL} from '../../events';\\nimport { SKILL, DUNGEON, EXPLORE, LOCALE, TYP_RUN, PURSUITS, TASK } from 'values/consts';\\n\\nexport default {\\n\\n\\tprops:['runner'],\\n\\tcreated(){\\n\\t\\tthis.game = Game;\\n\\t\\tthis.STOP_ALL = STOP_ALL;\\n\\t\\tthis.TASK = TASK;\\n\\t},\\n\\tcomputed:{\\n\\n\\t\\tfocus() { return Game.state.getData('focus'); },\\n\\t\\trestAction(){return Game.state.restAction },\\n\\t\\tresting() {\\n\\t\\t\\treturn this.restAction.running;\\n\\t\\t},\\n\\n\\t\\tpursuits(){return Game.state.getData(PURSUITS)}\\n\\n\\t},\\n\\tmethods:{\\n\\n\\t\\ttaskStr( a ){\\n\\n\\t\\t\\treturn (a.verb || a.name.toTitleCase() ) + (a.length ? ( ' ' + Math.floor(a.percent()) + '%' ) : '');\\n\\n\\t\\t},\\n\\t\\tlevelStr(a){\\n\\t\\t\\treturn ' (' + Math.floor( a.valueOf() ) + '/' + Math.floor(a.max.valueOf() ) +')';\\n\\t\\t},\\n\\n\\t\\thalt(a) {\\n\\t\\t\\tthis.emit( HALT_TASK, a);\\n\\t\\t}\\n\\n\\t}\\n\\n}\\n</script>\\n\\n<template>\\n\\n<div>\\n\\t<div class=\\\"separate\\\">\\n\\n\\t\\t<button class=\\\"btn-sm\\\" @click=\\\"emit(STOP_ALL)\\\">Stop All</button>\\n\\n\\t\\t<button class=\\\"btn-sm\\\" @click=\\\"emit(TASK, restAction)\\\" :disabled=\\\"resting\\\"\\n\\t\\t@mouseenter.capture.stop=\\\"itemOver($event, restAction )\\\">{{ restAction.name.toTitleCase() }}</button>\\n\\t\\t<button v-if=\\\"!focus.locked\\\" class=\\\"btn-sm\\\" @mouseenter.capture.stop=\\\"itemOver($event, focus )\\\"\\n\\t\\t\\t:disabled=\\\"!focus.canUse(game)\\\"\\n      @click=\\\"emit(TASK,focus)\\\"\\n\\t\\t\\t@mousedown=\\\"emit('repeater', focus)\\\">Focus</button>\\n\\t\\t<button class=\\\"btnMenu\\\" @click=\\\"emit('showActivities')\\\"></button>\\n\\t</div>\\n\\n\\t<div class='running'>\\n\\n\\t\\t<div class=\\\"relative\\\" v-for=\\\"v of runner.actives\\\" :key=\\\"v.id\\\">\\n\\t\\t\\t<button class=\\\"stop\\\" @click=\\\"halt(v)\\\">&nbsp;X&nbsp;</button><span>{{ taskStr(v) }}</span><span v-if=\\\"v.type==='skill'\\\">{{levelStr(v)}}</span>\\n\\t\\t\\t<button v-if=\\\"runner.canPursuit(v)\\\" :class=\\\"['pursuit', pursuits.includes( runner.baseTask(v) ) ? 'current' : '']\\\"\\n\\t\\t\\t\\t@click=\\\"runner.togglePursuit(v)\\\"> F </button>\\n\\t\\t</div>\\n\\n\\t</div>\\n</div>\\n\\n</template>\\n\\n<style scoped>\\n\\ndiv.running {\\n\\tdisplay:flex;\\n\\tflex-flow: column nowrap;\\n}\\n\\ndiv.running .relative {\\n\\tposition: relative;\\n}\\n\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.vitals[data-v-e232ef86] {\\n    text-transform: capitalize;\\n    margin: 0; padding: 0;\\n    min-width: 15rem; overflow-y :auto; overflow-x: hidden;\\n}\\n\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/panes/vitals.vue\"],\"names\":[],\"mappings\":\";AA8EA;IACA,0BAAA;IACA,SAAA,EAAA,UAAA;IACA,gBAAA,EAAA,gBAAA,EAAA,kBAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport ProgBar from 'ui/components/progbar.vue';\\nimport Running from './running.vue';\\n//import Mood from './items/mood.vue';\\n\\nimport Settings from 'modules/settings';\\n\\nimport Game from 'game';\\nimport UIMixin from '../uiMixin';\\nimport ItemBase from '../itemsBase';\\n\\n\\n/**\\n * Player vital bars.\\n */\\nexport default {\\n\\n\\tprops:['state'],\\n\\tmixins:[ItemBase, UIMixin],\\n\\tcomponents:{\\n\\t\\tprogbar:ProgBar,\\n\\t\\t//mood:Mood,\\n\\t\\trunning:Running\\n\\t},\\n\\tdata(){\\n\\n\\t\\tlet ops = Settings.getSubVars('vitals');\\n\\t\\tif (!ops.hide) ops.hide = {};\\n\\n\\t\\treturn {\\n\\t\\t\\thide:ops.hide\\n\\t\\t}\\n\\n\\t},\\n\\n\\tcomputed:{\\n\\n\\t\\thp(){return this.state.getData('hp');},\\n\\n\\t\\tmanaList() { return this.state.filterItems (it=> (it.hasTag('manas') || it.hasTag('Mana energies') ) && !it.locked)},\\n\\t\\tvisMana(){return this.manaList.filter(v=>this.show(v))},\\n\\n\\t\\tstamina(){ return this.state.getData('stamina'); }\\n\\t}\\n\\n}\\n</script>\\n\\n<template>\\n\\n\\t<div class=\\\"vitals\\\">\\n\\n\\t\\t<running :runner=\\\"state.runner\\\" />\\n\\n\\t\\t<div class=\\\"config\\\"><button ref=\\\"btnHides\\\" class=\\\"btnConfig\\\"></button></div>\\n\\n\\t\\t<!-- anything not a table is a headache -->\\n\\t\\t<div class=\\\"statbars\\\">\\n\\n\\t\\t<div class=\\\"hidable statbar\\\" data-key=\\\"stamina\\\" v-show=\\\"show(stamina)\\\">\\n\\t\\t\\t<span class=\\\"name\\\">stamina</span><span class=\\\"barspan\\\"><progbar class=\\\"stamina\\\" :value=\\\"stamina.valueOf()\\\" :max=\\\"stamina.max.value\\\"\\n\\t\\t\\t@mouseenter.capture.stop.native=\\\"itemOver($event,stamina)\\\"/></span></div>\\n\\n\\t\\t<div class=\\\"hidable statbar\\\" data-key=\\\"hp\\\" v-show=\\\"show(hp)\\\"><span class=\\\"name\\\">life</span><span class=\\\"barspan\\\"><progbar class=\\\"hp\\\" :value=\\\"hp.valueOf()\\\" :max=\\\"hp.max.value\\\"\\n\\t\\t\\t@mouseenter.capture.stop.native=\\\"itemOver($event,hp)\\\"/></span></div>\\n\\n\\t\\t<div class=\\\"hidable statbar\\\" v-for=\\\"it in visMana\\\" :key=\\\"it.key\\\" :data-key=\\\"it.id\\\">\\n\\t\\t\\t<span class=\\\"name\\\">{{it.name}}</span><span class=\\\"barspan\\\"><progbar :value=\\\"it.valueOf()\\\" :class=\\\"it.id\\\" :max=\\\"it.max.value\\\" :color=\\\"it.color\\\"\\n\\t\\t\\t@mouseenter.native.capture.stop=\\\"itemOver($event,it)\\\"/></span></div>\\n\\n\\t\\t<!--<tr><td>mood</td><td><mood :state=\\\"state\\\" /></td></tr>-->\\n\\t\\t</div>\\n\\n\\t</div>\\n</template>\\n\\n<style scoped>\\n\\n    .vitals {\\n        text-transform: capitalize;\\n        margin: 0; padding: 0;\\n        min-width: 15rem; overflow-y :auto; overflow-x: hidden;\\n    }\\n\\n\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\ndiv.pop-title[data-v-8c4acf3a] {\\n\\n\\tfont-weight: bold;\\n\\tborder-bottom: 1px solid black;\\n\\tmargin-bottom: var(--md-gap);\\n}\\n.popup-content[data-v-8c4acf3a] {\\n\\tpadding: var(--md-gap);\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/popups/itemPopup.vue\"],\"names\":[],\"mappings\":\";AAgFA;;CAEA,iBAAA;CACA,8BAAA;CACA,4BAAA;AAEA;AAEA;CACA,sBAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport Game from 'game';\\n\\nimport ItemView from 'ui/items/gdata.vue';\\nimport {positionAt} from './popups.js';\\n\\n/**\\n * Information about current rollover object.\\n */\\nexport const RollOver = {\\n\\n\\titem:null,\\n\\telm:null,\\n\\ttitle:null,\\n\\tsource:null\\n\\n};\\n\\nexport const ItemOver = ( evt, it, source, title ) => {\\n\\n\\tRollOver.item = it;\\n\\tRollOver.elm = evt.currentTarget;\\n\\tRollOver.source = source;\\n\\n\\tif ( source && source.context ) {\\n\\t\\tRollOver.context = source.context;\\n\\t} else RollOver.context = Game;\\n\\n\\tRollOver.title = title;\\n}\\n\\nexport const ItemOut = () => {\\n\\tRollOver.item = null;\\n\\tRollOver.elm = null;\\n\\tRollOver.source = null;\\n\\tRollOver.title = null;\\n\\tRollOver.context = null;\\n}\\n\\n/**\\n * Box for displaying item information.\\n */\\nexport default {\\n\\n\\tdata(){\\n\\t\\treturn RollOver;\\n\\t},\\n\\n\\tupdated() {\\n\\t\\t// waiting for width to change before reposition.\\n\\t\\tif ( this.item ) {\\n\\t\\t\\tpositionAt( this.$el, this.elm );\\n\\t\\t}\\n\\t},\\n\\tcomponents:{ gdata:ItemView }\\n\\n}\\n</script>\\n\\n\\n<template>\\n\\n\\t<div class=\\\"item-popup\\\" v-show=\\\"item!=null\\\">\\n\\t\\t<div class=\\\"popup-content\\\">\\n\\t\\t<div v-if=\\\"title\\\" class=\\\"pop-title\\\">{{ title }}</div>\\n\\t\\t<template v-if=\\\"Array.isArray(item)\\\">\\n\\n\\t\\t\\t<div v-for=\\\"t in item\\\" :key=\\\"t\\\">{{ t.toString() }}</div>\\n\\n\\t\\t</template>\\n\\t\\t<template v-else>\\n\\t\\t\\t<gdata v-if=\\\"item\\\" :item=\\\"item\\\" />\\n\\t\\t</template>\\n\\t\\t</div>\\n\\t</div>\\n\\n</template>\\n\\n<style scoped>\\n\\ndiv.pop-title {\\n\\n\\tfont-weight: bold;\\n\\tborder-bottom: 1px solid black;\\n\\tmargin-bottom: var(--md-gap);\\n\\n}\\n\\n.popup-content {\\n\\tpadding: var(--md-gap);\\n}\\n\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\n.settings[data-v-2acc7e09] {\\n\\theight:auto;\\n\\tmin-height:5.5rem;\\n\\tmin-width:30%;\\n\\tmax-width:60%;\\n\\tposition: absolute;\\n\\tz-index:10000;\\n\\ttop:3rem;\\n\\tbackground:inherit;\\n\\tborder: var(--popup-border);\\n\\tborder-radius: 0.20rem;\\n\\tpadding:var(--md-gap);\\n}\\nbutton.close[data-v-2acc7e09] {\\n\\tposition:absolute;\\n\\tbottom:var(--md-gap);\\n\\tright:var(--md-gap);\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/popups/settings.vue\"],\"names\":[],\"mappings\":\";AAuIA;CACA,WAAA;CACA,iBAAA;CACA,aAAA;CACA,aAAA;CACA,kBAAA;CACA,aAAA;CACA,QAAA;CACA,kBAAA;CACA,2BAAA;CACA,sBAAA;CACA,qBAAA;AACA;AAEA;CACA,iBAAA;CACA,oBAAA;CACA,mBAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport Profile from 'modules/profile';\\nimport Settings from 'modules/settings';\\n\\nimport { centerX } from './popups';\\n\\n/**\\n * @emits save-settings\\n * @emits setting\\n */\\nexport default {\\n\\n\\tdata(){\\n\\n\\t\\tlet vars = Settings.vars;\\n\\n\\t\\treturn {\\n\\t\\t\\tsCompactMode:vars.compactMode,\\n\\t\\t\\tsDarkMode:vars.darkMode,\\n\\t\\t\\tsaves:Object.assign( {}, Settings.getSubVars('saves') )\\n\\t\\t};\\n\\n\\n\\n\\t},\\n\\tupdated() {\\n\\t\\tcenterX(this.$el);\\n\\t},\\n\\tcreated() {\\n\\n\\t\\tfor( let p in Settings.vars ) {\\n\\t\\t\\tthis.dispatch('setting', p, Settings.vars[p] );\\n\\t\\t}\\n\\n\\t},\\n\\tmethods:{\\n\\n\\t\\tclear(){\\n\\n\\t\\t},\\n\\n\\t\\tclose() {\\n\\t\\t\\tthis.dispatch('save-settings');\\n\\t\\t\\tthis.$emit('close-settings');\\n\\t\\t}\\n\\n\\t},\\n\\tcomputed:{\\n\\n\\t\\tcompactMode: {\\n\\t\\t\\tget() { return this.sCompactMode; },\\n\\t\\t\\tset(v){\\n\\t\\t\\t\\tSettings.set('compactMode', v);\\n\\t\\t\\t\\tthis.sCompactMode = v;\\n\\t\\t\\t\\tthis.dispatch('setting', 'compactMode', v);\\n\\t\\t\\t}\\n\\n\\t\\t},\\n\\t\\tremoteFirst:{\\n\\t\\t\\tget(){\\n\\t\\t\\t\\treturn this.saves.remoteFirst;\\n\\t\\t\\t},\\n\\t\\t\\tset(v){\\n\\t\\t\\t\\tthis.saves.remoteFirst = Settings.setSubVar( 'saves', 'remoteFirst', v );\\n\\t\\t\\t\\tthis.dispatch('setting', 'remoteFirst', v );\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tautosave:{\\n\\t\\t\\tget(){\\n\\t\\t\\t\\treturn this.saves.autosave;\\n\\t\\t\\t},\\n\\t\\t\\tset(v){\\n\\t\\t\\t\\tthis.saves.autoSave = Settings.setSubVar( 'saves', 'autosave', v );\\n\\t\\t\\t\\tthis.dispatch('setting', 'autosave', v );\\n\\t\\t\\t}\\n\\t\\t},\\n\\t\\tdarkMode:{\\n\\t\\t\\tget(){\\n\\t\\t\\t\\treturn this.sDarkMode;\\n\\t\\t\\t},\\n\\t\\t\\tset(v){\\n\\t\\t\\t\\tSettings.set( 'darkMode', v);\\n\\t\\t\\t\\tthis.sDarkMode = v;\\n\\t\\t\\t\\tthis.dispatch('setting', 'darkMode', v );\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t}\\n\\n}\\n</script>\\n\\n<template>\\n\\n<div :class=\\\"['settings', 'popup']\\\">\\n\\n\\n\\n\\t<div>\\n\\t<label :for=\\\"elmId('dark-mode')\\\">Dark Mode</label>\\n\\t<input type=\\\"checkbox\\\" :id=\\\"elmId('dark-mode')\\\" v-model=\\\"darkMode\\\">\\n\\t</div>\\n\\n\\t<div>\\n\\t<label :for=\\\"elmId('compact-mode')\\\">Compact Mode</label>\\n\\t<input type=\\\"checkbox\\\" :id=\\\"elmId('compact-mode')\\\" v-model=\\\"compactMode\\\">\\n\\t</div>\\n\\n\\t<div>\\n\\t<label :for=\\\"elmId('auto-save')\\\" title=\\\"Periodically save current game.\\\">Auto-Save</label>\\n\\t<input type=\\\"checkbox\\\" :id=\\\"elmId('auto-save')\\\" v-model=\\\"autosave\\\">\\n\\t<h6>Periodically save game to storage. Game is saved to Browser storage by default. Only saved to Remote storage if logged in and server is available.</h6>\\n\\t</div>\\n\\n\\t<div>\\n\\t<label :for=\\\"elmId('remote-first')\\\" title=\\\"Attempt to load saves from Remote Storage before Local Storage.\\\">Try Remote Load First</label>\\n\\t<input type=\\\"checkbox\\\" :id=\\\"elmId('remote-first')\\\" v-model=\\\"remoteFirst\\\">\\n\\t<h6>Attempt to load game from Remote host before loading from browser Storage.</h6>\\n\\t</div>\\n\\n\\t<!--<div><button @click=\\\"clear\\\">Clear Settings</button></div>-->\\n\\t<!--<div class=\\\"nowarn\\\">\\n\\n\\t\\t<div v-for=\\\"it in nowarns\\\" :key=\\\"it\\\"><span>{{it}}</span><button @click=\\\"clearWarn\\\">Delete</button></div>\\n\\n\\t</div>-->\\n\\n\\t<button class=\\\"close\\\" @click=\\\"close\\\">Close</button>\\n\\n</div>\\n\\n</template>\\n\\n<style scoped>\\n\\n.settings {\\n\\theight:auto;\\n\\tmin-height:5.5rem;\\n\\tmin-width:30%;\\n\\tmax-width:60%;\\n\\tposition: absolute;\\n\\tz-index:10000;\\n\\ttop:3rem;\\n\\tbackground:inherit;\\n\\tborder: var(--popup-border);\\n\\tborder-radius: 0.20rem;\\n\\tpadding:var(--md-gap);\\n}\\n\\nbutton.close {\\n\\tposition:absolute;\\n\\tbottom:var(--md-gap);\\n\\tright:var(--md-gap);\\n}\\n\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\ndiv.skip[data-v-1f1201ec] {\\n\\tmargin-top:1em;\\n\\tfont-size: 0.9em;\\n}\\ndiv.popup div[data-v-1f1201ec] {\\n\\tmargin:var(--sm-gap) 0;\\n}\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/popups/warn.vue\"],\"names\":[],\"mappings\":\";AA+EA;CACA,cAAA;CACA,gBAAA;AACA;AAEA;CACA,sBAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport {centerX} from './popups.js';\\n\\nconst WARN_MSG = 'This action is not reversible. Continue?';\\n\\nexport default {\\n\\n\\tdata(){\\n\\t\\treturn {\\n\\t\\t\\titem:null,\\n\\t\\t\\tcb:null,\\n\\t\\t\\tnowarn:false\\n\\t\\t}\\n\\t},\\n\\tupdated() {\\n\\t\\tif ( this.item ) {centerX( this.$el );}\\n\\t},\\n\\tcomputed:{\\n\\t\\tmsg(){\\n\\t\\t\\tif ( typeof this.item === 'string') return WARN_MSG;\\n\\t\\t\\treturn this.item.warnMsg || WARN_MSG;\\n\\t\\t}\\n\\t},\\n\\tmethods:{\\n\\t\\tshow( it, cb=null ){\\n\\t\\t\\tthis.item = it;\\n\\t\\t\\tthis.cb = cb;\\n\\t\\t\\tthis.nowarn=false;\\n\\t\\t},\\n\\t\\tconfirm(){\\n\\n\\t\\t\\tlet it = this.item;\\n\\t\\t\\tlet f = this.cb;\\n\\t\\t\\tlet nowarn = this.nowarn;\\n\\n\\t\\t\\tthis.item = null;\\n\\t\\t\\tthis.cb = null;\\n\\t\\t\\tthis.nowarn=false;\\n\\n\\t\\t\\tif ( it ) this.$emit('confirmed', it, nowarn );\\n\\t\\t\\tif (f ) f();\\n\\n\\t\\t},\\n\\t\\tcancel(){\\n\\t\\t\\tthis.cb = null;\\n\\t\\t\\tthis.nowarn=false;\\n\\t\\t\\tthis.item = null;\\n\\t\\t}\\n\\n\\t}\\n\\n}\\n</script>\\n\\n<template>\\n\\t<div class=\\\"popup\\\" v-if=\\\"item\\\">\\n\\n\\t\\t<div v-if=\\\"typeof item ==='string'\\\">\\n\\t\\t\\t<div>{{item }}</div>\\n\\t\\t\\t<div>{{ msg }}</div>\\n\\t\\t</div>\\n\\t\\t<div v-else>\\n\\t\\t<div class=\\\"log-title\\\">{{ item.name.toString().toTitleCase() }}</div>\\n\\t\\t<div>{{ item.desc }}</div>\\n\\t\\t<div>{{ msg }}</div>\\n\\t\\t<div class=\\\"skip\\\"><label :for=\\\"elmId('nowarn')\\\">Skip Warning</label>\\n\\t\\t<input type=\\\"checkbox\\\" v-model=\\\"nowarn\\\" :id=\\\"elmId('nowarn')\\\"></div>\\n\\t\\t</div>\\n\\n\\t\\t<div>\\n\\t\\t<button @click=\\\"confirm\\\">Confirm</button>\\n\\t\\t<button @click=\\\"cancel\\\">Cancel</button>\\n\\t\\t</div>\\n\\n\\t</div>\\n</template>\\n\\n<style scoped>\\n\\ndiv.skip {\\n\\tmargin-top:1em;\\n\\tfont-size: 0.9em;\\n}\\n\\ndiv.popup div {\\n\\tmargin:var(--sm-gap) 0;\\n}\\n\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\np.use-msg[data-v-3473ec58] {\\n\\tfont-size:1.2em;\\n\\tline-height: 1.4em;\\n\\tmargin-left: 10%;\\n}\\ndiv.quickbar[data-v-3473ec58] {\\n\\n\\tdisplay:flex;\\n\\tflex-basis:3em;\\n\\twidth:100%;\\n\\tflex-direction: row;\\n\\tjustify-self: flex-end;\\n\\tz-index: 50;\\n\\tmargin: 0;\\n}\\ndiv.quickslot[data-v-3473ec58] {\\n\\tmin-width:2em;\\n\\tmin-height:2em;\\n\\tcursor: pointer;\\n\\ttext-transform: capitalize;\\n\\tmargin:var(--tiny-gap) var(--sm-gap) var(--sm-gap) var(--sm-gap);\\n\\tpadding:var(--tiny-gap);\\n\\ttext-align: center;\\n\\t/** relative so remove button correctly placed. **/\\n\\tposition: relative;\\n\\tfont-size:xx-large;\\n\\tborder: 1px solid var(--dark-border-color);\\n}\\ndiv.remove[data-v-3473ec58] {\\n\\tposition:absolute;\\n\\tborder: 1px solid var(--dark-border-color);\\n\\ttop:0;\\n\\tright:0;\\n\\tmargin: 0;\\n\\tpadding: 0;\\n\\tbackground:white;\\n\\topacity:0.65;\\n\\tz-index: 10;\\n\\tmin-height:0.9em;\\n\\tmin-width:0.9em;\\n\\tfont-size: 0.8rem;\\n}\\ndiv.remove[data-v-3473ec58]::after {\\n\\tcontent:\\\"x\\\";\\n}\\n.quickslot div.remove[data-v-3473ec58] { background: #FFF0; color: #000; border: none; font-weight: bold;\\n}\\n\\n\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/quickbar.vue\"],\"names\":[],\"mappings\":\";AAmEA;CACA,eAAA;CACA,kBAAA;CACA,gBAAA;AACA;AAGA;;CAEA,YAAA;CACA,cAAA;CACA,UAAA;CACA,mBAAA;CACA,sBAAA;CACA,WAAA;CACA,SAAA;AACA;AAEA;CACA,aAAA;CACA,cAAA;CACA,eAAA;CACA,0BAAA;CACA,gEAAA;CACA,uBAAA;CACA,kBAAA;CACA,kDAAA;CACA,kBAAA;CACA,kBAAA;CACA,0CAAA;AACA;AAEA;CACA,iBAAA;CACA,0CAAA;CACA,KAAA;CACA,OAAA;CACA,SAAA;CACA,UAAA;CACA,gBAAA;CACA,YAAA;CACA,WAAA;CACA,gBAAA;CACA,eAAA;CACA,iBAAA;AACA;AAEA;CACA,WAAA;AACA;AAEA,yCAAA,iBAAA,EAAA,WAAA,EAAA,YAAA,EAAA,iBAAA;AAAA\",\"sourcesContent\":[\"<script>\\nimport Game from '../game';\\nimport {abbr} from '../util/format';\\nimport { TRY_USE } from '../events';\\n\\n/**\\n * Bar for quick-use items.\\n */\\nexport default {\\n\\n\\tprops:['bars'],\\n\\tmethods:{\\n\\n\\t\\tabbr:abbr\\n\\n\\t},\\n\\tcomputed:{\\n\\n\\t\\tbar(){return this.bars.active;},\\n\\n\\t\\tslots() {\\n\\t\\t\\treturn this.bar.slots;\\n\\t\\t},\\n\\n\\t\\thasItems(){\\n\\t\\t\\treturn this.slots.some(v=>v.item!=null);\\n\\t\\t}\\n\\n\\t}\\n\\n}\\n</script>\\n\\n<template>\\n\\t<div class=\\\"quickbar\\\" v-if=\\\"hasItems\\\">\\n\\n\\t\\t<div class=\\\"quickslot\\\" v-for=\\\"(it,i) in slots\\\" :key=\\\"i\\\">\\n\\n\\t\\t\\t<div v-if=\\\"it.item!=null\\\" :class=\\\"it.item.school ? it.item.school :''\\\"\\n\\t\\t\\t\\t\\t@click=\\\"emit( 'quickslot', it )\\\"\\n\\t\\t\\t\\t\\t@mouseenter.capture.stop=\\\"itemOver($event,it.item||it)\\\">\\n\\n\\n\\t\\t\\t\\t<div>{{ abbr(it) }}</div>\\n\\n\\t\\t\\t\\t<div class=\\\"remove\\\" @click=\\\"bar.clear(i)\\\" />\\n\\t\\t\\t\\t<div v-if=\\\"it.item.school\\\" class=\\\"bgfill\\\" >&nbsp;</div>\\n\\n\\t\\t\\t</div>\\n\\t\\t\\t<div v-else>{{ (i != 9) ? i + 1 : 0 }}</div>\\n\\n\\t\\t</div>\\n\\n\\t</div>\\n\\t<div class=\\\"quickbar\\\" v-else>\\n\\n\\t\\t<p class=\\\"use-msg\\\">\\n\\t\\t\\tRoll-over Item and hold {Shift} + {Number} to assign quickslot.<br>\\n\\t\\t\\tPress {Number} again to use quickslot Item.\\n\\t\\t</p>\\n\\n\\t</div>\\n\\n</template>\\n\\n<style scoped>\\n\\np.use-msg {\\n\\tfont-size:1.2em;\\n\\tline-height: 1.4em;\\n\\tmargin-left: 10%;\\n}\\n\\n\\ndiv.quickbar {\\n\\n\\tdisplay:flex;\\n\\tflex-basis:3em;\\n\\twidth:100%;\\n\\tflex-direction: row;\\n\\tjustify-self: flex-end;\\n\\tz-index: 50;\\n\\tmargin: 0;\\n}\\n\\ndiv.quickslot {\\n\\tmin-width:2em;\\n\\tmin-height:2em;\\n\\tcursor: pointer;\\n\\ttext-transform: capitalize;\\n\\tmargin:var(--tiny-gap) var(--sm-gap) var(--sm-gap) var(--sm-gap);\\n\\tpadding:var(--tiny-gap);\\n\\ttext-align: center;\\n\\t/** relative so remove button correctly placed. **/\\n\\tposition: relative;\\n\\tfont-size:xx-large;\\n\\tborder: 1px solid var(--dark-border-color);\\n}\\n\\ndiv.remove {\\n\\tposition:absolute;\\n\\tborder: 1px solid var(--dark-border-color);\\n\\ttop:0;\\n\\tright:0;\\n\\tmargin: 0;\\n\\tpadding: 0;\\n\\tbackground:white;\\n\\topacity:0.65;\\n\\tz-index: 10;\\n\\tmin-height:0.9em;\\n\\tmin-width:0.9em;\\n\\tfont-size: 0.8rem;\\n}\\n\\ndiv.remove::after {\\n\\tcontent:\\\"x\\\";\\n}\\n\\n.quickslot div.remove { background: #FFF0; color: #000; border: none; font-weight: bold; }\\n\\n\\n\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\ndiv.task-list[data-v-0e3bfebf], .main-tasks > div.upgrade-list[data-v-0e3bfebf] {\\n        margin: 0; padding: var(--md-gap);\\n\\t\\tdisplay: grid;\\n\\t\\tgrid-template-columns: repeat( auto-fit, var(--task-button-width) );\\n}\\ndiv.task-list .runnable[data-v-0e3bfebf]:hover {background: var(--accent-color-hover);\\n}\\ndiv.task-list .runnable[data-v-0e3bfebf]:active {background: var(--accent-color-active);\\n}\\n\\n\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/sections/tasks.vue\"],\"names\":[],\"mappings\":\";AA4DA;QACA,SAAA,EAAA,sBAAA;EACA,aAAA;EACA,mEAAA;AACA;AAEA,gDAAA,qCAAA;AAAA;AACA,iDAAA,sCAAA;AAAA\",\"sourcesContent\":[\"<script>\\nimport Game from '../../game';\\nimport Upgrades from '../panes/upgrades.vue';\\n\\nimport Settings from 'modules/settings';\\nimport ItemsBase from '../itemsBase';\\nimport UIMixin from '../uiMixin';\\n\\nexport default {\\n\\n\\tmixins:[ItemsBase,UIMixin],\\n\\tcomponents:{\\n\\t\\tupgrades:Upgrades\\n\\t},\\n\\tdata(){\\n\\n\\t\\tlet ops = Settings.getSubVars('main');\\n\\t\\tif (!ops.hide) ops.hide = {}\\n\\n\\t\\treturn {\\n\\t\\t\\thide:ops.hide\\n\\t\\t}\\n\\n\\t},\\n\\tcomputed:{\\n\\n\\t\\ttasks(){return Game.state.tasks.filter(v=>!v.perpetual&&!v.length)},\\n\\t\\trunnables(){return Game.state.tasks.filter(v=>v.perpetual||v.length>0)},\\n\\n\\t\\tvisActs(){return this.tasks.filter(v=>this.show(v))},\\n\\t\\tvisRuns(){ return this.runnables.filter(v=>this.show(v))},\\n\\n\\t\\tups(){\\n\\t\\t\\treturn Game.state.upgrades.filter( v=>!this.locked(v)&&this.show(v) )\\n\\t\\t},\\n\\t\\tclasses(){\\n\\t\\t\\treturn Game.state.classes.filter(v=>!this.locked(v)&&this.show(v));\\n\\t\\t}\\n\\n\\t}\\n\\n}\\n</script>\\n\\n<template>\\n\\t<div class=\\\"main-tasks\\\" ref=\\\"hidables\\\">\\n\\t\\t<div class=\\\"config\\\"><button ref=\\\"btnHides\\\" class=\\\"btnConfig\\\"></button></div>\\n\\t\\t<div v-if=\\\"visActs.length != 0\\\" class=\\\"div-hs\\\">Actions</div>\\n\\t\\t<upgrades class=\\\"task-list\\\" :items=\\\"visActs\\\" />\\n\\t\\t<div v-if=\\\"visRuns.length != 0\\\" class=\\\"div-hs\\\">Tasks</div>\\n\\t\\t<upgrades class=\\\"task-list\\\" :items=\\\"visRuns\\\" />\\n\\t\\t<div v-if=\\\"ups.length != 0\\\" class=\\\"div-hs\\\">Upgrades</div>\\n\\t\\t<upgrades class=\\\"upgrade-list\\\" :items=\\\"ups\\\" />\\n\\t\\t<div v-if=\\\"classes.length != 0\\\" class=\\\"div-hs\\\">Classes</div>\\n\\t\\t<upgrades class=\\\"upgrade-list\\\" :items=\\\"classes\\\" />\\n\\t</div>\\n</template>\\n\\n<style scoped>\\n\\n    div.task-list, .main-tasks > div.upgrade-list {\\n        margin: 0; padding: var(--md-gap);\\n\\t\\tdisplay: grid;\\n\\t\\tgrid-template-columns: repeat( auto-fit, var(--task-button-width) );\\n    }\\n\\n    div.task-list .runnable:hover {background: var(--accent-color-hover); }\\n    div.task-list .runnable:active {background: var(--accent-color-active); }\\n\\n\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\\nspan.vers[data-v-5e8f13b9] {\\n\\tfont-size: 0.9em;\\n\\talign-self: center;\\n\\tmargin-bottom: var(--sm-gap);\\n}\\ndiv.text-button a[data-v-5e8f13b9] {\\n\\ttext-decoration: none;\\n}\\ninput[type=\\\"file\\\"][data-v-5e8f13b9] {\\n\\tdisplay:none;\\n}\\n#drop-file[data-v-5e8f13b9] {\\n\\tborder: var(--tiny-gap) dashed var(--quiet-text-color);\\n}\\n.load-opts[data-v-5e8f13b9] {\\n\\tdisplay:flex;\\n}\\n.load-opts button[data-v-5e8f13b9] {\\n\\theight:100%;\\n}\\n.load-opts .text-button[data-v-5e8f13b9] {\\n\\tmax-height:var(--lg-gap);\\n}\\nspan.load-message[data-v-5e8f13b9] {\\n\\tpadding: var(--md-gap) var(--md-gap) var(--tiny-gap);\\n}\\nspan.items[data-v-5e8f13b9] {\\n\\ttext-transform: capitalize;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/ui/top-bar.vue\"],\"names\":[],\"mappings\":\";AA+FA;CACA,gBAAA;CACA,kBAAA;CACA,4BAAA;AACA;AAEA;CACA,qBAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,sDAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,WAAA;AACA;AACA;CACA,wBAAA;AACA;AAEA;CACA,oDAAA;AACA;AAEA;CACA,0BAAA;AACA\",\"sourcesContent\":[\"<script>\\nimport Profile from 'modules/profile';\\nimport Game from '../game';\\n\\nimport LoginStatus from './components/loginStatus.vue';\\n\\nexport default {\\n\\n\\tcomputed:{\\n\\t\\thasHall(){return Profile.hasHall() },\\n\\t\\tVERSION(){return __VERSION; }\\n\\n\\t},\\n\\tcreated(){\\n\\t\\tthis.Profile = Profile;\\n\\t},\\n\\tcomponents:{\\n\\t\\tlogin:LoginStatus\\n\\t},\\n\\tmethods:{\\n\\n\\t\\tfileSelect(e) {\\n\\n\\t\\t\\te.stopPropagation();\\n\\t\\t\\te.preventDefault();\\n\\n\\t\\t\\tthis.dispatch( 'load-file', e.target.files );\\n\\n\\t\\t},\\n\\n\\t\\tfileDrop(e){\\n\\t\\t\\te.stopPropagation();\\n\\t\\t\\te.preventDefault();\\n\\n\\t\\t\\te.target.classList.remove('hilite');\\n\\n\\t\\t\\tconst dt = e.dataTransfer;\\n\\t\\t\\tthis.dispatch('load-file', dt.files);\\n\\n\\t\\t},\\n\\t\\tfileDrag(e){\\n\\t\\t\\te.stopPropagation();\\n\\t\\t\\te.preventDefault();\\n\\t\\t\\te.currentTarget.classList.add('hilite');\\n\\t\\t},\\n\\t\\tdragOut(e){\\n\\t\\t\\te.stopPropagation();\\n\\t\\t\\te.preventDefault();\\n\\t\\t\\te.currentTarget.classList.remove('hilite');\\n\\t\\t},\\n\\n\\t}\\n\\n}\\n</script>\\n\\n<template>\\n\\n\\t<div class=\\\"top-bar\\\">\\n\\n\\t\\t<span class=\\\"load-opts\\\" >\\n\\t\\t\\t<login v-if=\\\"Profile.CLOUD\\\" />\\n\\t\\t\\t<button @click=\\\"dispatch('save')\\\">Save</button>\\n\\t\\t\\t<button @click=\\\"dispatch('load')\\\">Load</button>\\n\\n\\t\\t\\t<div class=\\\"text-button\\\"><a href=\\\"\\\"\\n\\t\\t\\t\\t@click.self=\\\"dispatch('save-file',$event )\\\" type=\\\"text/json\\\">Get Save</a></div>\\n\\n\\t\\t\\t<div v-if=\\\"hasHall\\\" class=\\\"text-button\\\"><a href=\\\"\\\"\\n\\t\\t\\t\\t@click.self=\\\"dispatch('hall-file',$event )\\\" type=\\\"text/json\\\">Hall Save</a></div>\\n\\n\\t\\t\\t<!--<input type=\\\"file\\\" name=\\\"[File]\\\" accept=\\\"text/json\\\" @change=\\\"fileDrop\\\">-->\\n\\t\\t\\t<button id=\\\"drop-file\\\" @click=\\\"$refs.fileInput.click()\\\" @drop=\\\"fileDrop\\\" @dragover=\\\"fileDrag\\\" @dragleave.capture.stop=\\\"dragOut\\\" name=\\\"[Load Save]\\\">[Load Save]</button>\\n\\t\\t\\t<input ref=\\\"fileInput\\\" type=\\\"file\\\" @change=\\\"fileSelect\\\" accept=\\\"text/json text/*\\\">\\n\\n\\t\\t\\t<confirm @confirm=\\\"dispatch('reset')\\\">Wipe Wizard</confirm>\\n\\t\\t</span>\\n\\n\\t\\t<span class=\\\"items\\\"><slot name=\\\"center\\\"></slot></span>\\n\\n\\t\\t<span class=\\\"link-bar\\\">\\n\\t\\t\\t<a href=\\\"https://discord.gg/bCABC96\\\" target=\\\"_blank\\\">Discord</a>\\n\\t\\t\\t<a href=\\\"http://wiki.lerpinglemur.com/dhrune\\\" target=\\\"_blank\\\">Wiki</a>\\n\\t\\t\\t<a href=\\\"https://www.reddit.com/r/wizrobe/\\\" target=\\\"_blank\\\">Reddit</a>\\n\\t\\t\\t<span class=\\\"vers\\\">Version: {{ VERSION }}</span>\\n\\t\\t\\t<button class=\\\"text-button\\\" @click=\\\"$emit('open-settings')\\\">&#9881;</button>\\n\\t\\t</span>\\n\\n\\t</div>\\n\\n\\n</template>\\n\\n<style scoped>\\n\\nspan.vers {\\n\\tfont-size: 0.9em;\\n\\talign-self: center;\\n\\tmargin-bottom: var(--sm-gap);\\n}\\n\\ndiv.text-button a {\\n\\ttext-decoration: none;\\n}\\n\\ninput[type=\\\"file\\\"] {\\n\\tdisplay:none;\\n}\\n\\n#drop-file {\\n\\tborder: var(--tiny-gap) dashed var(--quiet-text-color);\\n}\\n\\n.load-opts {\\n\\tdisplay:flex;\\n}\\n\\n.load-opts button {\\n\\theight:100%;\\n}\\n.load-opts .text-button {\\n\\tmax-height:var(--lg-gap);\\n}\\n\\nspan.load-message {\\n\\tpadding: var(--md-gap) var(--md-gap) var(--tiny-gap);\\n}\\n\\nspan.items {\\n\\ttext-transform: capitalize;\\n}\\n</style>\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/**\r\n * @const {Set} EmptySet - Empty set to use as a default set\r\n * for functions with a Set argument, but no Set was provided\r\n * by the user.\r\n * More efficient then recreating Sets every time.\r\n */\r\nconst EmptySet = new Set();\r\n\r\n/**\r\n * Recursively collect all properties in an object which do not appear in\r\n * an original template object, or which have been changed.\r\n * Changed variables are collected and returned _without_ cloning.\r\n * NOTE: falsey values are all considered equal when determining changes.\r\n * NOTE: This is NOT a complete diff: props appearing in original but deleted in clone\r\n * are NOT listed unless they exist with new values.\r\n * @param {Object} clone\r\n * @param {Object} original\r\n * @returns {Object} collection of properties existing in clone, which are different from values in original.\r\n */\r\nexport function changes( clone, original ) {\r\n\r\n\tlet res = null;\r\n\r\n\tfor( let p in clone ) {\r\n\r\n\t\tvar sub = clone[p];\r\n\t\tvar orig = original[p];\r\n\r\n\t\tif ( sub == orig ){\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tif ( !sub ) {\r\n\r\n\t\t\tif (!orig) continue;\r\n\r\n\t\t} else if ( typeof sub === 'object' ) {\r\n\r\n\t\t\tif ( typeof orig === 'object' && orig !== null ) {\r\n\r\n\t\t\t\tsub = changes( sub, orig );\r\n\t\t\t\tif ( sub === null ) continue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( res === null ) res = {};\r\n\t\tres[p] = sub;\r\n\r\n\t}\r\n\r\n\treturn res;\r\n\r\n}\r\n\r\n/**\r\n * Recursively merge two objects, with properties in dest overwritten by properties in source.\r\n * Arrays are concatenated without duplicating array elements.\r\n * @param {Object} dest - destination object.\r\n * @param {Object} src - source object.\r\n */\r\nexport function merge( dest, src ) {\r\n\r\n\tlet nowrite = getNoWrite(dest);\r\n\r\n\tfor( let p in src ) {\r\n\r\n\t\tif ( nowrite.has(p) ) continue;\r\n\r\n\t\tlet srcSub = src[p];\r\n\r\n\t\tif ( ( typeof srcSub !== 'object' && typeof srcSub !== 'function')\r\n\t\t|| dest[p] === null || dest[p] === undefined ) {\r\n\t\t\tdest[p] = srcSub;\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tlet destSub = dest[p];\r\n\t\tif (  Array.isArray(destSub) ) {\r\n\r\n\t\t\tif ( Array.isArray(srcSub) ) merge( destSub, srcSub );\r\n\t\t\telse if ( !destSub.includes(srcSub) ) destSub.push(srcSub);\r\n\r\n\t\t} else if ( typeof destSub === 'object') merge( destSub, srcSub );\r\n\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Recursively merge values from src into dest, without overwriting any of dest's existing values.\r\n * null values in dest will not be overwritten, but undefined values will be.\r\n * Object and array values merged from src are deep-cloned before being copied to dest.\r\n * Conflicting arrays are not merged.\r\n * Nothing is returned; The dest object is altered directly.\r\n * @param {Object} dest\r\n * @param {Object} src\r\n * @param {?Iterable<string>} [exclude=null] iterable of properties to exclude.\r\n */\r\nexport function mergeSafe( dest, src, exclude=null) {\r\n\r\n\tvar nowrite = getNoWrite(dest);\r\n\tif ( exclude ) {\r\n\t\tfor( let p of exclude ) nowrite.add(p);\r\n\t}\r\n\r\n\tvar svars = src;\r\n\r\n\twhile ( svars !== Object.prototype ) {\r\n\r\n\t\tfor( let p in svars ) {\r\n\r\n\t\t\tif ( nowrite.has(p) ) continue;\r\n\r\n\t\t\tvar destSub = dest[p];\r\n\t\t\tlet srcSub = src[p];\r\n\r\n\t\t\tif ( destSub === undefined ) {\r\n\r\n\t\t\t\tif ( srcSub !== null && typeof srcSub === 'object' ) dest[p] = clone( srcSub, Array.isArray(srcSub) ? [] : {} );\r\n\t\t\t\telse dest[p] = srcSub;\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t} else if ( destSub === null ) continue;\r\n\r\n\t\t\tif ( srcSub && typeof destSub === 'object' && typeof srcSub === 'object') {\r\n\r\n\t\t\t\tif ( !Array.isArray(destSub) && !Array.isArray(srcSub) ) mergeSafe( destSub, srcSub );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tsvars = Object.getPrototypeOf(svars);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Merge two arrays, ignoring entries duplicated between arrays.\r\n * This does not remove duplicated entries already existing in\r\n * either array separately.\r\n * @param {Array} a1\r\n * @param {Array} a2\r\n * @returns {Array}\r\n */\r\nexport function mergeArrays( a1, a2) {\r\n\r\n\tlet a = a1.slice();\r\n\tlet len = a2.length;\r\n\r\n\tfor( let i = 0; i < len; i++ ) {\r\n\r\n\t\tvar v = a2[i];\r\n\t\tif ( a1.includes(v) === false ) {\r\n\t\t\ta.push(v);\r\n\t\t}\r\n\r\n\t}\r\n\treturn a;\r\n}\r\n\r\n/**\r\n * Performs a deep-clone of an object, including class prototype\r\n * and class methods. The entire prototype chain up to the Object prototype\r\n * is searched for properties to clone.\r\n * @param {Object} src\r\n * @param {?Object} [dest=null] - optional base object of the clone.\r\n * if set, root object will not be cloned, only subobjects.\r\n */\r\nexport function cloneChain( src, dest=null ) {\r\n\r\n\tlet o, proto;\r\n\r\n\tif ( dest === null || dest === undefined ) {\r\n\r\n\t\tif ( src.clone && typeof src.clone === 'function') return src.clone.call(src);\r\n\r\n\t\tproto = Object.getPrototypeOf( src );\r\n\t\tdest = Array.isArray(src) ? [] : ( proto ? Object.create( proto ) : {} );\r\n\t}\r\n\r\n\tproto = src;\r\n\twhile ( proto !== Object.prototype ) {\r\n\r\n\t\tfor( let p in proto ) {\r\n\r\n\t\t\to = src[p];\r\n\r\n\t\t\tvar def = getPropDesc( dest, p );\r\n\t\t\tif ( def && ( !def.writable && def.set === undefined ) ) continue;\r\n\r\n\t\t\tif ( o === null || o === undefined ) dest[p] = o;\r\n\t\t\telse if ( typeof o === 'object' ) {\r\n\r\n\t\t\t\tif ( o.clone && typeof o.clone === 'function' ) dest[p] = o.clone.call( o );\r\n\t\t\t\telse dest[p] = cloneChain( o );\r\n\r\n\t\t\t} else dest[p] = o;\r\n\r\n\t\t}\r\n\r\n\t\tproto = Object.getPrototypeOf(proto);\r\n\r\n\t}\r\n\r\n\treturn dest;\r\n\r\n}\r\n\r\n\r\n/**\r\n * Performs a deep-clone of an object's own properties and methods.\r\n * Whenever a clone() function is present on an object, it is called\r\n * to provide its own clone.\r\n * NOTE: objects with clone functions that call cloneClass() can cause infinite loops\r\n * if a dest object is not used.\r\n * @param {Object} src\r\n * @param {?Object} [dest=null] - optional base object of the clone.\r\n * if set, root object will not be cloned, only subobjects.\r\n */\r\nexport function cloneClass( src, dest=null ) {\r\n\r\n\tlet o;\r\n\r\n\tif ( dest === null || dest === undefined ) {\r\n\r\n\t\tif ( src.clone && typeof src.clone === 'function') return src.clone.call(src);\r\n\r\n\t\tlet proto = Object.getPrototypeOf( src );\r\n\t\tdest = Array.isArray(src) ? [] : ( proto ? Object.create( proto ) : {} );\r\n\t}\r\n\r\n\tfor( let p in src ) {\r\n\r\n\t\to = src[p];\r\n\r\n\t\tvar def = getPropDesc( dest, p );\r\n\t\tif ( def && ( !def.writable && def.set === undefined ) ) {\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tif ( o === null || o === undefined ) dest[p] = o;\r\n\t\telse if ( typeof o === 'object' ) {\r\n\r\n\t\t\tif ( o.clone && typeof o.clone === 'function' ) dest[p] = o.clone.call( o );\r\n\t\t\telse dest[p] = cloneClass( o );\r\n\r\n\t\t} else dest[p] = o;\r\n\r\n\t}\r\n\r\n\treturn dest;\r\n\r\n}\r\n\r\n/**\r\n * Create a deep clone of an object. Any clone functions in source objects\r\n * or sub-objects are called to provide their own clone implementations.\r\n * @note dest is second parameter, whereas in Object.assign() it is first.\r\n * \t\tThis makes syntax of: var obj = clone(src); much clearer.\r\n * @todo eliminate circular references.\r\n * @param {object} src - object to clone.\r\n * @param {object} [dest={}] object to merge cloned values into.\r\n */\r\nexport function clone( src, dest={} ){\r\n\r\n\tif ( typeof src.clone === 'function ') {\r\n\t\treturn src.clone();\r\n\t}\r\n\r\n\tlet o, f;\r\n\tfor( let p in src ) {\r\n\r\n\t\to = src[p];\r\n\t\tif ( o === null || o === undefined ) dest[p] = o;\r\n\t\telse if ( Array.isArray(o) ) {\r\n\r\n\t\t\tdest[p] = clone( o, [] );\r\n\r\n\t\t} else if ( typeof o === 'object' ) {\r\n\r\n\t\t\tf = ( o.clone );\r\n\t\t\tif ( f && typeof f === 'function' ) dest[p] = f.call( o );\r\n\t\t\telse dest[p] = clone( o );\r\n\r\n\t\t} else dest[p] = o;\r\n\r\n\t}\r\n\r\n\treturn dest;\r\n\r\n}\r\n\r\n/**\r\n * Return an array of all string paths from the base object\r\n * which lead to a non-object property in the base object or subobject.\r\n * Paths to arrays are also returned, but not subpaths of arrays.\r\n * Path strings are concatenated with '.'\r\n * ex. [ 'myObject.sub.prop1', 'myObject.sub.prop2' ]\r\n * @param {Object} base\r\n * @return {string[]} - array of non-object properties reachable through base.\r\n */\r\nexport function propPaths( base ) {\r\n\r\n\tlet res = [];\r\n\tlet objStack = [];\r\n\tlet pathStack = [];\r\n\r\n\tlet path = '';\r\n\r\n\twhile ( base ) {\r\n\r\n\t\tfor( let p in base ) {\r\n\r\n\t\t\tvar sub = base[p];\r\n\t\t\tif ( typeof sub === 'object' && !( Array.isArray(sub)) ) {\r\n\t\t\t\tobjStack.push(sub);\r\n\t\t\t\tpathStack.push( path + p + '.' );\r\n\t\t\t\tcontinue;\r\n\t\t\t} else res.push( path + p );\r\n\r\n\t\t}\r\n\r\n\t\tbase = objStack.pop();\r\n\t\tif ( base === undefined ) break;\r\n\t\tpath = pathStack.pop();\r\n\r\n\t}\r\n\r\n\treturn res;\r\n\r\n}\r\n\r\n/**\r\n * Return a Set of all properties in an object's prototype chain,\r\n * not including Object.prototype, which cannot be assigned to,\r\n * either because they are marked writable=false, or because\r\n * they are properties without setters.\r\n * @param {object} obj\r\n * @param {Iterable<string>} [includes=null] - Additional property names to include\r\n * in the nonwritable Set result.\r\n * @returns {Set.<string>} Set of names of unwritable properties.\r\n */\r\nexport function getNoWrite( obj, includes=null ) {\r\n\r\n\tlet m = new Set( includes );\r\n\r\n\tlet proto = obj;\r\n\twhile ( proto !== Object.prototype ) {\r\n\r\n\t\tvar descs = Object.getOwnPropertyDescriptors( proto );\r\n\t\tfor ( let p in descs ) {\r\n\r\n\t\t\tvar d = descs[p];\r\n\t\t\tif ( (d.writable !== true) && d.set === undefined )  m.add(p);\r\n\r\n\t\t}\r\n\r\n\t\tproto = Object.getPrototypeOf( proto );\r\n\r\n\t} // while-loop.\r\n\r\n\treturn m;\r\n\r\n}\r\n\r\n/**\r\n * Get all property descriptors in an object's prototype chain,\r\n * not including the Object.prototype itself.\r\n * Descriptors are returned as a Map where property names\r\n * map to property descriptors.\r\n * @param {object} obj\r\n * @param {Map}\r\n * @returns {Map<string,PropertyDescriptor>}\r\n */\r\nexport function getDescs( obj ) {\r\n\r\n\tlet m = new Map();\r\n\r\n\tlet proto = obj;\r\n\twhile ( proto !== Object.prototype ) {\r\n\r\n\t\tvar descs = Object.getOwnPropertyDescriptors( proto );\r\n\t\tfor ( let p in descs ) {\r\n\t\t\tm.set( p, descs[p]);\r\n\t\t}\r\n\r\n\t\tproto = Object.getPrototypeOf( proto );\r\n\r\n\t} // while-loop.\r\n\r\n\treturn m;\r\n\r\n}\r\n\r\n/**\r\n * Return an array of all properties defined by an Object or its ancestors.\r\n * @param {Object} obj - Object whose properties are returned.\r\n * @param {bool} ownData - whether to include private data variables.\r\n * @param {bool} getters - whether to include getter properties.\r\n * @return {string[]} Array of property names.\r\n */\r\nexport function getProps( obj, ownData=true, getters=true ) {\r\n\r\n\tif ( !obj ) return [];\r\n\r\n\tlet proto = ownData ? obj : Object.getPrototypeOf(obj);\r\n\r\n\tlet p, props = [];\r\n\r\n\t/// fast version for when private variables and getters don't\r\n\t/// have to be ruled out.\r\n\tif ( getters === true ) {\r\n\t\twhile ( proto !== Object.prototype ) {\r\n\r\n\t\t\tfor ( p of Object.getOwnPropertyNames(proto)) {\r\n\r\n\t\t\t\tif ( typeof obj[p] !== 'function') props.push( p );\r\n\t\t\t}\r\n\r\n\t\t\t// quick push.\r\n\t\t\t//props.push.apply( props, Object.getOwnPropertyNames(proto) );\r\n\t\t\tproto = Object.getPrototypeOf( proto );\r\n\r\n\t\t} // while-loop.\r\n\r\n\t} else {\r\n\r\n\t\twhile ( proto !== Object.prototype ) {\r\n\r\n\t\t\tfor ( p of Object.getOwnPropertyNames(proto)) {\r\n\r\n\t\t\t\tif ( typeof obj[p] === 'function') continue;\r\n\t\t\t\tif ( Object.getOwnPropertyDescriptor(proto, p).get === undefined ) {\r\n\t\t\t\t\tprops.push( p );\r\n\t\t\t\t\t//else console.log( 'hiding internal prop: ' + p );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif ( getters === true ) props.push(p);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tproto = Object.getPrototypeOf( proto );\r\n\r\n\t\t} // while-loop.\r\n\r\n\t}\r\n\r\n\treturn props;\r\n\r\n}\r\n\r\n\r\n/**\r\n * Determines if array contains any of the given params.\r\n * @param {Array} arr - array to test for inclusions.\r\n * @param  {...any} params - arguments to test for inclusion in array.\r\n * @returns {boolean} - true if at least one param is found in the array.\r\n */\r\nexport function includesAny( arr, ...params ) {\r\n\r\n\tfor( let i = params.length-1; i>= 0; i-- ) {\r\n\t\tif ( arr.includes(params[i]) ) return true;\r\n\t}\r\n\treturn false;\r\n\r\n}\r\n\r\n/**\r\n * Return random element of an array.\r\n * @param {Array} a\r\n * @returns {*} Random element of array.\r\n */\r\nexport function randElm( a ) { return a[Math.floor( Math.random()*a.length) ]; }\r\n\r\n/**\r\n * Return a random element from and array which matches\r\n * a predicate.\r\n * @param {Array} a\r\n * @param {(*)=>boolean} pred - predicate test which a picked array element must pass.\r\n * @returns {*} random element of array which passes predicate.\r\n */\r\nexport function randMatch( a, pred ) {\r\n\r\n\tlet start = Math.floor( Math.random()*a.length );\r\n\tlet ind = start;\r\n\r\n\tdo {\r\n\r\n\t\tif ( pred( a[ind] ) ) return a[ind];\r\n\t\tind = --ind >= 0 ? ind : a.length-1;\r\n\r\n\t} while ( ind !== start );\r\n\r\n\treturn null;\r\n\r\n}\r\n\r\n/**\r\n * Sort item of a target array or object into sublists\r\n * based on each subobject's indexer value.\r\n * @param {Array|Object} arr\r\n * @param {string|function} indexer - property indexer or function that returns sublist index.\r\n * @returns {Object.<string|number,Array>} An object containing arrays\r\n * of sub-objects with matching property values.\r\n */\r\nexport function sublists( arr, indexer ) {\r\n\r\n\tlet lists = {};\r\n\r\n\tlet func = ((typeof indexer) === 'function');\r\n\r\n\tfor( let i in arr ) {\r\n\r\n\t\tvar sub = arr[i];\r\n\t\tif ( sub === null || sub === undefined ) continue;\r\n\r\n\t\tvar ind = func ? func(sub) : sub[indexer];\r\n\r\n\t\tvar list = lists[ind];\r\n\t\tif ( list === null || list === undefined ) lists[ind] = list = [];\r\n\r\n\t\tlist.push(sub);\r\n\r\n\t}\r\n\r\n\treturn lists;\r\n\r\n}\r\n\r\n/**\r\n * Define values for all of an Object's undefined properties with setters\r\n * up through its Object chain.\r\n * This can be useful in frameworks like Vue, where watched Objects must\r\n * have all their properties defined when the template is created.\r\n * @param {Object} obj - Object to assign properties for.\r\n * @param {*} [defaultVal=null] - Value to assign to undefined properties.\r\n */\r\nexport function defineVars( obj, defaultVal=null ) {\r\n\r\n\tif ( !obj ) return;\r\n\tlet proto = obj;\r\n\r\n\twhile ( proto !== Object.prototype ) {\r\n\r\n\t\tfor ( let p of Object.getOwnPropertyNames(proto)) {\r\n\r\n\t\t\tif ( obj[p] !== undefined ) continue;\r\n\t\t\tif ( Object.getOwnPropertyDescriptor(proto, p).set !== undefined ) {\r\n\r\n\t\t\t\tobj[p] = defaultVal;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tproto = Object.getPrototypeOf( proto );\r\n\r\n\t} // while-loop.\r\n\r\n}\r\n\r\n/**\r\n * Define values for all of an Object's undefined properties with setters\r\n * up through its Object chain.\r\n * This is useful in frameworks like Vue, where watched Objects must\r\n * have all their properties defined when the template is created.\r\n * @param {Object} obj - Object to assign properties for.\r\n * @param {*} [defaultVal=null] - Value to assign to undefined properties.\r\n * @param {?Set.<string>} exclude - Set of properties to skip.\r\n */\r\nexport function defineExcept( obj, defaultVal=null, exclude=null ) {\r\n\r\n\tif ( !obj ) return;\r\n\tif ( !exclude) exclude = EmptySet;\r\n\tlet proto = obj;\r\n\r\n\twhile ( proto !== Object.prototype ) {\r\n\r\n\t\tfor ( let p of Object.getOwnPropertyNames(proto)) {\r\n\r\n\t\t\tif ( exclude.has(p) || obj[p] !== undefined ) continue;\r\n\t\t\tif ( Object.getOwnPropertyDescriptor(proto, p).set !== undefined ) {\r\n\r\n\t\t\t\tobj[p] = defaultVal;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tproto = Object.getPrototypeOf( proto );\r\n\r\n\t} // while-loop.\r\n\r\n}\r\n\r\n/**\r\n * Ensure the existence of the given properties on an object.\r\n * Useful for Vue reactivity.\r\n * @property {Object} obj\r\n * @property {string[]} props - props to set.\r\n * @property {*} [defaultVal=null] - default value to use.\r\n */\r\nexport const ensure = ( obj, props, defaultVal=null ) => {\r\n\r\n\tfor( let i = props.length-1; i>= 0; i-- ) {\r\n\t\tlet s = props[i];\r\n\t\tif ( !obj.hasOwnProperty(s) ) obj[s] = defaultVal;\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Searches an object's prototype chain for a property descriptor.\r\n * @param {Object} obj\r\n * @param {string} k - property key.\r\n * @returns {PropertyDescriptor|null}\r\n */\r\nexport function getPropDesc(obj, k) {\r\n\r\n\twhile (obj !== Object.prototype) {\r\n\r\n\t\tvar desc = Object.getOwnPropertyDescriptor(obj, k);\r\n\t\tif (desc) return desc;\r\n\t\tobj = Object.getPrototypeOf(obj);\r\n\r\n\t}\r\n\treturn null;\r\n\r\n}\r\n\r\n/**\r\n * Behaves as objecty.assign() except it follows the src's prototype chain\r\n * and continues to assign values until reaching Object.prototype.\r\n * values from Object.prototype are not assigned.\r\n * @param {Object} dest - Destination object.\r\n * @param {Object} src - Object data to write into dest.\r\n * @param {string[]} [exclude=null] - Array of properties not to copy from src to dest.\r\n * @returns {Object} the destination object.\r\n */\r\nexport function assignChain(dest, src, exclude = null ) {\r\n\r\n\tlet nowrite = getNoWrite(dest, exclude );\r\n\r\n\tlet svars = src;\r\n\twhile ( svars !== Object.prototype ) {\r\n\r\n\t\tfor (let p of Object.getOwnPropertyNames(svars) ) {\r\n\r\n\t\t\tif ( nowrite.has(p) !== true ) dest[p] = src[p];\r\n\r\n\t\t} //for\r\n\r\n\t\tsvars = Object.getPrototypeOf(svars);\r\n\t}\r\n\r\n\treturn dest;\r\n\r\n}\r\n\r\n/**\r\n * Copies all iterable properties from a src to a destination object, if they exist\r\n * as fields or properties on the destination, and are writable.\r\n * @param {Object} dest - Destination for json data.\r\n * @param {Object} src - Object data to write into dest.\r\n * @param {Set.<string>} [exclude=null] - Array of properties not to copy from src to dest.\r\n * @returns {Object} the destination object.\r\n */\r\nexport function assignDefined(dest, src, exclude = null) {\r\n\r\n\tfor (let p in src ) {\r\n\r\n\t\tif (exclude && exclude.has(p)) continue;\r\n\t\tvar desc = getPropDesc(dest, p );\r\n\r\n\t\tif ( desc === null || (desc.set === undefined && !desc.writable )) continue;\r\n\r\n\t\tdest[p] = src[p];\r\n\r\n\t} //for\r\n\r\n\r\n\treturn dest;\r\n\r\n}\r\n\r\n/**\r\n * Behaves like Object.assign() but does not attempt to write to non-writable properties,\r\n * or properties without setters.\r\n * assign() is non-recursive and only assigns a src's own properties.\r\n * @param {Object} dest - Destination object.\r\n * @param {Object} src - Object data to write into dest.\r\n * @param {string[]} [exclude=null] - Array of properties not to copy from src to dest.\r\n * @returns {Object} the destination object.\r\n */\r\nexport function assign(dest, src, exclude = null ) {\r\n\r\n\tlet nowrite = getNoWrite(dest, exclude );\r\n\r\n\tfor ( let p of Object.getOwnPropertyNames(src) ) {\r\n\r\n\t\tif ( nowrite.has(p) !== true ) dest[p] = src[p];\r\n\r\n\t} //for\r\n\r\n\treturn dest;\r\n\r\n}\r\n\r\n/**\r\n * Convert an object to a JSON object ready to be stringified.\r\n * @param {Object} obj - the objet to convert.\r\n * @param {Set.<string>} [excludes=null] - Set with properties to be excluded from encoding if found on the target object.\r\n * @param {Iterable.<string>} [includes=null] - Iterable with keys to always encode. Includes take precedence over excludes.\r\n * @param {bool} [writableOnly=true] - Whether to only include writable properties / exclude read-only properties.\r\n */\r\nexport function jsonify(obj, excludes=null, includes=null, writableOnly = true) {\r\n\r\n\tlet r = {}, p, sub;\r\n\r\n\tif ( excludes == null ) excludes = EmptySet;\r\n\tif (includes) {\r\n\r\n\t\tfor( p of includes ) {\r\n\r\n\t\t\tsub = obj[p];\r\n\t\t\tif ( sub === undefined ) continue;\r\n\t\t\telse if ( typeof sub === 'object' && sub !== null && sub.toJSON ) r[p] = sub.toJSON();\r\n\t\t\telse r[p] = sub;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\tlet proto = Object.getPrototypeOf(obj);\r\n\twhile (proto != Object.prototype) {\r\n\r\n\t\tfor ( p of Object.getOwnPropertyNames(proto)) {\r\n\r\n\t\t\tif ( excludes.has(p) ) continue;\r\n\r\n\t\t\tvar desc = Object.getOwnPropertyDescriptor(proto, p);\r\n\t\t\tif (writableOnly && desc.set === undefined && !desc.writable) continue;\r\n\r\n\t\t\tsub = obj[p];\r\n\t\t\tif ( sub === undefined || typeof sub === 'function') continue;\r\n\t\t\telse if ( typeof sub === 'object' && sub !== null && sub.toJSON ) r[p] = sub.toJSON();\r\n\t\t\telse r[p] = sub;\r\n\r\n\t\t}\r\n\r\n\t\tproto = Object.getPrototypeOf(proto);\r\n\r\n\t} //\r\n\r\n\treturn r;\r\n\r\n}\r\n\r\n/**\r\n * Recursively freeze an object and all descendents.\r\n * @param {object} obj\r\n */\r\nexport function freeze( obj ) {\r\n\r\n\tlet sub;\r\n\tfor( let p in obj ){\r\n\r\n\t\tsub = obj[p];\r\n\t\tif ( typeof sub === 'object' && sub !== null && !Object.isFrozen(sub) ) freeze(sub);\r\n\t\telse Object.freeze( sub );\r\n\r\n\t}\r\n\r\n\treturn Object.freeze( obj );\r\n\r\n}\r\n","\"use strict\";\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var style = document.createElement(\"style\");\n  options.setAttributes(style, options.attributes);\n  options.insert(style);\n  return style;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(style) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    style.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute(\"media\", media);\n  } else {\n    style.removeAttribute(\"media\");\n  }\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, style);\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var style = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(style, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(style);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, style) {\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"container\" }, [\n    _vm.label\n      ? _c(\"label\", { attrs: { for: _vm.elmId(\"bar\") } }, [\n          _vm._v(_vm._s(_vm.label))\n        ])\n      : _vm._e(),\n    _vm._v(\" \"),\n    _c(\"div\", { staticClass: \"bar\", attrs: { id: _vm.elmId(\"bar\") } }, [\n      _c(\"div\", { staticClass: \"fill\", style: _vm.style }, [\n        !_vm.hideStats\n          ? _c(\"span\", { staticClass: \"bar-text\" }, [\n              _vm._v(_vm._s(_vm.value.toFixed(1) + \"/\" + _vm.max.toFixed(1)))\n            ])\n          : _c(\"span\", [_vm._v(\" \")])\n      ])\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nexport default {\n\n\tprops:['value', 'max', 'label', 'hideStats', 'color'],\n\tcomputed:{\n\n\t\tstyle(){\n\n\t\t\tlet s = 'width:' + this.width;\n\t\t\tif ( this.color ) s += ';background:' + this.color;\n\n\t\t\treturn s;\n\n\t\t},\n\n\t\twidth(){\n\t\t\tlet val = Math.floor( 100*(this.value/this.max) );\n\t\t\tif ( val > 100 ) val = 100;\n\t\t\telse if ( val < 0 ) val = 0;\n\t\t\treturn val + '%;'\n\t\t}\n\t}\n\n}\n</script>\n\n\n<template>\n\n<div class=\"container\">\n\t<label v-if=\"label\" :for=\"elmId('bar')\">{{label}}</label>\n\t<div class=\"bar\" :id=\"elmId('bar')\">\n\t\t<div class=\"fill\" :style=\"style\">\n\t\t\t<span class=\"bar-text\" v-if=\"!hideStats\">{{ value.toFixed(1) + '/' + max.toFixed(1) }}</span>\n\t\t\t<span v-else>&nbsp;</span>\n\t\t</div>\n\t</div>\n</div>\n\n</template>\n\n<style>\ndiv.container {\n\tdisplay:flex;\n\theight:100%;\n\twidth: 100%;\n}\n\n    div.bar .fill {\n\t  height:100%;\n\t  padding:0;\n\t  margin:0;\n    }\n\ndiv.bar .bar-text {\n\tcolor: var( --progbar-text-color );\n}\n\n\ndiv.bar {\n\n\tdisplay:inline-block;\n\tbackground: #333;\n\toverflow:hidden;\n\tpadding:0;\n\tmin-height:1.5rem;\n\twidth:-webkit-fill-available;\n\twidth:-moz-available;\n\tborder-radius: var(--lg-radius);\n}\n\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./progbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./progbar.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./progbar.vue?vue&type=style&index=0&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./progbar.vue?vue&type=style&index=0&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./progbar.vue?vue&type=template&id=1a530f5c&\"\nimport script from \"./progbar.vue?vue&type=script&lang=js&\"\nexport * from \"./progbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./progbar.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('1a530f5c')) {\n      api.createRecord('1a530f5c', component.options)\n    } else {\n      api.reload('1a530f5c', component.options)\n    }\n    module.hot.accept(\"./progbar.vue?vue&type=template&id=1a530f5c&\", function () {\n      api.rerender('1a530f5c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/components/progbar.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.dots.length > 0\n    ? _c(\n        \"div\",\n        { staticClass: \"dot-view\" },\n        _vm._l(_vm.dots, function(d) {\n          return _c(\n            \"div\",\n            {\n              key: d.id,\n              class: [\"dot\", d.kind, d.school, _vm.mini ? \"mini\" : \"\"],\n              on: {\n                \"!mouseenter\": function($event) {\n                  $event.stopPropagation()\n                  return _vm.itemOver($event, d, _vm.char)\n                }\n              }\n            },\n            [\n              !d.perm\n                ? _c(\"span\", [_vm._v(_vm._s(Math.ceil(d.duration)))])\n                : _vm._e(),\n              _vm._v(\" \"),\n              !_vm.mini\n                ? _c(\"span\", [\n                    _c(\"br\"),\n                    _vm._v(_vm._s(_vm.mini ? _vm.abbr(d) : d.name))\n                  ])\n                : _vm._e(),\n              _vm._v(\" \"),\n              d.kind || d.school\n                ? _c(\"div\", { staticClass: \"bgfill\" }, [_vm._v(\" \")])\n                : _vm._e()\n            ]\n          )\n        }),\n        0\n      )\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport { abbr } from 'util/format.js';\nimport ItemBase from 'ui/itemsBase';\n\n/**\n * Actual dot display in combat/hud.\n */\nexport default {\n\n\tprops:['dots', 'mini', 'char'],\n\tmixins:[ItemBase],\n\tbeforeCreate(){\n\t\tthis.abbr = abbr;\n\t}\n\n}\n</script>\n\n<template>\n\n\t<div class=\"dot-view\" v-if=\"dots.length>0\">\n\n\t\t<div :class=\"['dot',d.kind, d.school, mini ? 'mini':'']\" v-for=\"d in dots\" :key=\"d.id\"\n\t\t@mouseenter.capture.stop=\"itemOver( $event, d, char )\">\n\n\t\t\t<span v-if=\"!d.perm\">{{ Math.ceil( d.duration ) }}</span>\n\t\t\t<span v-if=\"!mini\"><br>{{ mini ? abbr( d ) : d.name }}</span>\n\n\t\t\t<div v-if=\"d.kind||d.school\" class=\"bgfill\" >&nbsp;</div>\n\n\t\t</div>\n\n\t</div>\n\n</template>\n\n<style scoped>\n\ndiv.dot-view {\n\tdisplay:flex;\n\tposition:relative;\n\tflex-flow: row nowrap;\n\talign-items: center;\n\tjustify-content: space-around;\n\tborder: 1px solid var(--very-quiet-text-color);\n\toverflow-x: hidden;\n\toverflow-y: visible;\n\theight:100%;\n}\ndiv.dot-view .dot {\n\tflex: 1; margin: 0; font-size: 0.75em; text-overflow: ellipsis; white-space: nowrap;\n\tborder: none;\n\toutline: 1px solid var(--very-quiet-text-color);\n\tposition: relative;\n\ttext-align: center;\n\tpadding:var(--sm-gap);\n\tbackground: unset;\n}\n\n\tdiv.dot-view span.mini {\n\t\tdisplay:flex;\n\t\tflex-direction: row;\n\t\tjustify-content: space-around;\n\t\talign-items: center;\n\t}\n\n\tdiv.mini {\n\t\twidth:auto;\n\t\tfont-size: 0.7em;\n\t\tpadding:0;\n\t}\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dotView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dotView.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dotView.vue?vue&type=style&index=0&id=54d5dc46&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dotView.vue?vue&type=style&index=0&id=54d5dc46&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./dotView.vue?vue&type=template&id=54d5dc46&scoped=true&\"\nimport script from \"./dotView.vue?vue&type=script&lang=js&\"\nexport * from \"./dotView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./dotView.vue?vue&type=style&index=0&id=54d5dc46&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54d5dc46\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('54d5dc46')) {\n      api.createRecord('54d5dc46', component.options)\n    } else {\n      api.reload('54d5dc46', component.options)\n    }\n    module.hot.accept(\"./dotView.vue?vue&type=template&id=54d5dc46&scoped=true&\", function () {\n      api.rerender('54d5dc46', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/items/dotView.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"item-info\" },\n    [\n      _c(\"span\", { staticClass: \"separate\" }, [\n        _c(\"span\", { staticClass: \"item-name\" }, [\n          _vm._v(_vm._s(_vm.name.toString().toTitleCase()))\n        ]),\n        _vm._v(\" \"),\n        _vm.item.type === \"resource\" || _vm.item.type === \"stat\"\n          ? _c(\"span\", [\n              _vm._v(\n                _vm._s(\n                  _vm.item.current.toFixed(0) +\n                    (_vm.item.max ? \" / \" + Math.floor(_vm.item.max.value) : \"\")\n                )\n              )\n            ])\n          : _vm.item.type === \"furniture\"\n          ? _c(\"span\", [\n              _vm._v(\n                \"max: \" +\n                  _vm._s(\n                    _vm.item.max\n                      ? Math.floor(_vm.item.max.value)\n                      : _vm.item.repeat\n                      ? \"∞\"\n                      : 1\n                  )\n              )\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.item.sym ? _c(\"span\", [_vm._v(_vm._s(_vm.item.sym))]) : _vm._e()\n      ]),\n      _vm._v(\" \"),\n      _vm.item.tags || _vm.item.hands\n        ? _c(\"div\", { staticClass: \"tight note-text\" }, [\n            _vm.item.hands > 1 ? _c(\"span\", [_vm._v(\"Two-Handed \")]) : _vm._e(),\n            _vm._v(_vm._s(_vm.tags))\n          ])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.rate && _vm.item.rate.value != 0\n        ? _c(\"span\", { staticClass: \"flex-right\" }, [\n            _vm._v(_vm._s(_vm.precise(_vm.item.rate.value)) + \"/s\")\n          ])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"div\", [\n        _c(\"span\", { staticClass: \"separate\" }, [\n          _vm.item.showLevel\n            ? _c(\"span\", [_vm._v(\"Level: \" + _vm._s(_vm.item.showLevel()))])\n            : _vm.item.level\n            ? _c(\"span\", [_vm._v(\"Level: \" + _vm._s(_vm.item.level))])\n            : _vm._e(),\n          _vm._v(\" \"),\n          _vm.item.slot\n            ? _c(\"span\", [\n                _vm._v(\n                  \"Slot: \" + _vm._s(_vm.item.slot.toString().toTitleCase())\n                )\n              ])\n            : _vm._e()\n        ]),\n        _vm._v(\" \"),\n        _vm.item.enchants && _vm.item.enchants.max > 0\n          ? _c(\"span\", [\n              _vm._v(\n                \"Enchant Levels: \" +\n                  _vm._s(_vm.item.enchants.value) +\n                  \" / \" +\n                  _vm._s(_vm.item.enchants.max)\n              )\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.item.at && _vm.nextAt > 0\n          ? _c(\"span\", { staticClass: \"note-text\" }, [\n              _vm._v(\n                \"\\n\\t\\t\\tNext Improvement: \" +\n                  _vm._s(\n                    Math.round((100 * _vm.item.value) / _vm.nextAt) + \"%\"\n                  ) +\n                  \"\\n\\t\\t\"\n              )\n            ])\n          : _vm.item.every && _vm.nextEvery >= 0\n          ? _c(\"span\", { staticClass: \"note-text\" }, [\n              _vm._v(\n                \"\\n\\t\\t\\tNext Improvement: \" +\n                  _vm._s(Math.round(100 * _vm.nextEvery) + \"%\") +\n                  \"\\n\\t\\t\"\n              )\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.item.cd || _vm.item.timer > 0\n          ? _c(\"div\", { staticClass: \"note-text\" }, [\n              _vm._v(\n                \"Cooldown: \" +\n                  _vm._s(\n                    _vm.item.timer > 0\n                      ? _vm.item.timer.toFixed(2) + \" Left\"\n                      : _vm.item.cd + \"s\"\n                  )\n              )\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.item.dist\n          ? _c(\"div\", [_vm._v(\"Distance: \" + _vm._s(_vm.item.dist))])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.item.armor\n          ? _c(\"div\", [_vm._v(\"Armor: \" + _vm._s(_vm.item.armor))])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _vm.item.desc\n          ? _c(\"div\", { staticClass: \"item-desc\" }, [\n              _vm._v(_vm._s(_vm.item.desc))\n            ])\n          : _vm._e()\n      ]),\n      _vm._v(\" \"),\n      _vm.item.need\n        ? _c(\"info\", { attrs: { info: _vm.item.need, title: \"Need\" } })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.buy && !_vm.item.owned\n        ? _c(\"info\", { attrs: { info: _vm.item.buy, title: \"Purchase Cost\" } })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.cost && _vm.item.id != \"bloodshot\"\n        ? _c(\"info\", { attrs: { info: _vm.item.cost, title: \"Cost\" } })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.cost && _vm.item.id == \"bloodshot\"\n        ? _c(\"info\", {\n            attrs: {\n              info: \"Life: \" + (this.player.hp / 3).toFixed(2),\n              title: \"Cost\"\n            }\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.sell || _vm.item.instanced || _vm.item.type === \"Furniture\"\n        ? _c(\"info\", { attrs: { info: _vm.sellPrice, title: \"Sell\" } })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.run\n        ? _c(\"info\", {\n            attrs: { info: _vm.item.run, title: \"Progress Cost\", rate: \"true\" }\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.attack ? _c(\"attack\", { attrs: { item: _vm.item } }) : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.effect\n        ? _c(\"div\", { staticClass: \"info-sect\" }, [_vm._v(\"Effects:\")])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.effect\n        ? _c(\"info\", {\n            attrs: {\n              info: _vm.item.effect,\n              rate: _vm.item.perpetual || _vm.item.length > 0\n            }\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.mod || _vm.item.alter\n        ? _c(\"div\", { staticClass: \"info-sect\" }, [_vm._v(\"Modifications:\")])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.mod ? _c(\"info\", { attrs: { info: _vm.item.mod } }) : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.alter\n        ? _c(\"info\", { attrs: { info: _vm.item.alter } })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.result\n        ? _c(\"div\", { staticClass: \"info-sect\" }, [_vm._v(\"Results:\")])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.result\n        ? _c(\"info\", { attrs: { info: _vm.item.result } })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.use\n        ? _c(\"div\", { staticClass: \"info-sect\" }, [_vm._v(\"When used:\")])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.use ? _c(\"info\", { attrs: { info: _vm.item.use } }) : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.dot\n        ? _c(\"div\", { staticClass: \"info-sect\" }, [_vm._v(\"Buffs:\")])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.dot\n        ? _c(\"dot\", { attrs: { dot: _vm.item.dot, item: _vm.item } })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.lock || _vm.item.disable\n        ? _c(\"div\", { staticClass: \"info-sect\" }, [_vm._v(\"Locks:\")])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.lock ? _c(\"info\", { attrs: { info: _vm.item.lock } }) : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.disable\n        ? _c(\"info\", { attrs: { info: _vm.item.disable } })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.flavor\n        ? _c(\"div\", { staticClass: \"note-text\" }, [\n            _vm._v(_vm._s(_vm.item.flavor))\n          ])\n        : _vm._e()\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.info && _vm.effects\n    ? _c(\n        \"div\",\n        [\n          _vm.title\n            ? _c(\"div\", { staticClass: \"note-text\" }, [\n                _c(\"hr\"),\n                _vm._v(_vm._s(_vm.title))\n              ])\n            : _vm._e(),\n          _vm._v(\" \"),\n          _vm._l(_vm.effects, function(v) {\n            return _c(\"div\", { key: v.name }, [\n              _c(\"span\", [_vm._v(_vm._s(v.toString()))])\n            ])\n          })\n        ],\n        2\n      )\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { precise } from \"../../util/format\";\n\n/**\n * Single item in a display block.\n */\nexport class DisplayItem {\n\n\t/**\n\t *\n\t * @param {string} name - item name.\n\t * @param {*} value\n\t * @param {boolean} isRate\n\t */\n\tconstructor( name, value, isRate ) {\n\n\t\t//this.path = path;\n\t\t//.toTitleCase() here fixes the caps of all items in the tooltips.\n\t\tthis.name = name.toTitleCase();\n\t\tthis.value = value;\n\t\tthis.isRate = isRate;\n\n\t}\n\n\t/**\n\t * Add amount to display item.\n\t * @param {*} v\n\t */\n\tadd( v ) {\n\t\tthis.value = this.value + v;\n\t}\n\n\ttoString(){\n\n\t\tlet typ = typeof this.value;\n\t\tif ( typ === 'boolean' ) return this.name;\n\n\t\treturn (this.name + ': ') +\n\t\t\t((typ ==='object') ? this.value.toString() : precise(this.value) ) +\n\t\t\t( this.isRate ? '/s' : '');\n\t}\n\n}","import { DisplayItem } from \"./displayItem\";\nimport {RollOver} from 'ui/popups/itemPopup.vue';\n\nimport { SKILL } from '../../values/consts';\nimport RevStat from \"../../items/revStat\";\n\n/**\n* Name to use for object in current context.\n*/\nexport const DisplayName = ( obj ) => {\n\n\tlet it = RollOver.context.getData(obj);\n\treturn it ? it.name : obj;\n\n}\n\n/**\n * Convert item path display based on next subprop.\n * Certain properties indicate the display path should be treated specially,\n * such as switching the order of 'max' or omitting 'base' and 'value' display.\n */\nvar PathConversions = {\n\n\teffect:( rootPath )=>rootPath,\n\tskipLocked:()=>undefined,\n\tmax:( rootPath )=>'max ' + rootPath,\n\trate:(rootPath, subProp)=>{\n\n\t\t//subProp = rootPath;\n\n\t\tlet ind = rootPath.indexOf('.');\n\t\tif ( ind > 0 ) {\n\n\t\t\tlet baseItem = RollOver.context.getData( rootPath.slice(0,ind) );\n\t\t\tif ( baseItem && baseItem.type === SKILL ) subProp = 'train ' + subProp + ' rate';\n\n\t\t} else return rootPath + ' ' + subProp;\n\n\t\treturn subProp;\n\t}\n\n\n};\n\nPathConversions.mod = PathConversions.base = PathConversions.value = PathConversions.effect;\n\n/**\n* Convert display path based on current path object\n* and current property being displayed.\n* @param {string} rootPath - base path up to prop\n* @param {string} prop - next prop on path - NOT path tail.\n* @returns {string} path displayed. returns undefined if no information\n* should be displayed for this variable path.\n*/\nexport const ConvertPath = ( rootPath, prop ) => {\n\n\tlet func = PathConversions[prop];\n\tif ( func !== undefined ) {\n\n\t\t// use conversion function.\n\t\treturn func( rootPath, prop );\n\n\t} else {\n\n\t\t// no conversion func.\n\t\tprop = DisplayName( prop );\n\t\treturn rootPath ? rootPath + ' ' + prop : prop;\n\n\t}\n\n}\n\n/**\n * Collection of display info.\n */\nexport class InfoBlock {\n\n\t/**\n\t * Attempt to add a path to the current item being referred to.\n\t * @param {string} p\n\t */\n\tstatic GetItem( p, curItem=null ) {\n\n\t\tif ( !curItem ) return RollOver.context.getData(p);\n\t\telse return curItem[p] || curItem;\n\n\t}\n\n\tconstructor(){\n\n\t\tthis.results = {};\n\n\t\t/**\n\t\t * @property {GData} rootItem - rootItem of the current path.\n\t\t */\n\t\t//this.rootItem = null;\n\n\t}\n\n\tclear(){\n\t\tthis.results = {};\n\t}\n\n\tadd( itemName, value, isRate=false, ref=null ){\n\n\t\tif ( ref && ref instanceof RevStat ) value = -value;\n\n\t\tlet cur = this.results[itemName];\n\t\tif ( cur === undefined ){\n\n\t\t\tthis.results[itemName] = new DisplayItem( itemName, value, isRate );\n\n\t\t} else {\n\n\t\t\tcur.add( value );\n\n\t\t}\n\n\t}\n\n}","<script>\nimport ItemsBase from '../itemsBase.js';\nimport { InfoBlock, DisplayName, ConvertPath } from './infoBlock';\n\n/**\n * Display for a sub-block of gdata, such as item.effect, item.result, item.run, etc.\n *\n * @property {boolean} rate - info items are 'rate' per-second items.\n */\nexport default {\n\tprops:['title', 'info', 'rate'],\n\tmixins:[ItemsBase],\n\tbeforeCreate(){\n\t\tthis.infos = new InfoBlock();\n\t},\n\tcomputed:{\n\t\teffects(){\n\n\t\t\tthis.infos.clear();\n\t\t\treturn this.effectItems( this.info, this.rate );\n\n\t\t}\n\n\t},\n\tmethods:{\n\t\t/**\n\t\t *\n\t\t * @param {*} obj\n\t\t * @param {boolean} rate - items represent /sec rates.\n\t\t */\n\t\teffectItems( obj, rate=false) {\n\n\t\t\tlet type = typeof obj;\n\n\t\t\tif ( type === 'number') {\n\n\t\t\t\t//@todo still happens. mostly for sell cost as gold.\n\t\t\t\t//console.warn('effect type is number: ' + obj) ;\n\t\t\t\tthis.infos.add( 'gold', obj, this.rate );\n\n\t\t\t} else if ( type === 'string') {\n\n\t\t\t\tthis.infos.add( DisplayName(obj), true, false, InfoBlock.GetItem( obj ) );\n\n\t\t\t} else if ( Array.isArray(obj) ) obj.forEach( v=>this.effectList(v) );\n\t\t\telse if ( type === 'function' ) {\n\n\t\t\t\t/*if ( !obj.fText ){\n\t\t\t\t\tobj.fText = funcText( obj, Game );\n\t\t\t\t\tinfos[obj.fText] = true;\n\t\t\t\t}*/\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\t\t\telse if ( type === 'object') {\n\n\t\t\t\tthis.effectList( obj, '', rate );\n\n\t\t\t}\n\n\t\t\treturn this.infos.results;\n\n\t\t},\n\n\t\t/**\n\t\t * @param {Object} obj - object of effects to enumerate.\n\t\t * @param {string} rootPath - prop path from base.\n\t\t * @param {boolean} rate - whether display is per/s rate.\n\t\t */\n\t\teffectList( obj, rootPath='', rate=false, refItem=null ) {\n\n\t\t\tif ( typeof obj === 'string' ) {\n\t\t\t\tthis.infos.add( DisplayName(obj), true, rate, InfoBlock.GetItem(obj, refItem) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor( let p in obj ) {\n\n\t\t\t\tlet sub = obj[p];\n\t\t\t\tif ( sub === null || sub === undefined || p === 'skipLocked' ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet subItem = InfoBlock.GetItem( p, refItem );\n\n\t\t\t\tlet subRate = rate;\n\t\t\t\t// displayed path to subitem.\n\t\t\t\tlet subPath = ConvertPath( rootPath, p );\n\n\t\t\t\t// path conversion indicated no display.\n\t\t\t\tif ( subPath === undefined ) continue;\n\n\t\t\t\tif ( typeof sub !== 'object' ) this.infos.add(subPath, sub, subRate, subItem );\n\t\t\t\telse if ( typeof sub !== 'function' ) {\n\n\t\t\t\t\tif ( sub.skipLocked ) {\n\n\t\t\t\t\t\tlet refItem = this.infos.rootItem;\n\t\t\t\t\t\tif ( refItem && (refItem.locked || refItem.disabled) ) continue;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( sub.constructor !== Object ) {\n              this.infos.add(subPath, sub, subRate, subItem);\n\t\t\t\t\t} else {\n            //special code for DOT subpath, currently unique to potions\n            if(subPath === 'dot') {\n              sub = {...sub}\n              if(sub.id) delete sub.id;\n              if(sub.name) delete sub.name;\n              if(sub[undefined]) delete sub[undefined];\n            }\n\t\t\t\t\t  this.effectList( sub, subPath, subRate, subItem );\n          }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n\n<template>\n\n\t<div v-if=\"info&&effects\">\n\n\t\t<div v-if=\"title\" class=\"note-text\"><hr>{{ title }}</div>\n\t\t<div v-for=\"v in effects\" :key=\"v.name\">\n      <span>{{ v.toString() }}</span>\n\t\t</div>\n\n\n\t</div>\n\n\n</template>\n\n\n<style scoped>\n\nhr {\n\tmargin-bottom: var(--sm-gap);\n}\n\ndiv.item-desc {\n\tmargin: 0.6em 0 0.9em;\n\tfont-size: 0.96em;\n}\n\n.item-name {\n\tfont-weight: bold;\n}\n.flavor {\n\tfont-style: italic;\n}\n\n</style>","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./info-block.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./info-block.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./info-block.vue?vue&type=style&index=0&id=408e302f&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./info-block.vue?vue&type=style&index=0&id=408e302f&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./info-block.vue?vue&type=template&id=408e302f&scoped=true&\"\nimport script from \"./info-block.vue?vue&type=script&lang=js&\"\nexport * from \"./info-block.vue?vue&type=script&lang=js&\"\nimport style0 from \"./info-block.vue?vue&type=style&index=0&id=408e302f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"408e302f\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('408e302f')) {\n      api.createRecord('408e302f', component.options)\n    } else {\n      api.reload('408e302f', component.options)\n    }\n    module.hot.accept(\"./info-block.vue?vue&type=template&id=408e302f&scoped=true&\", function () {\n      api.rerender('408e302f', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/items/info-block.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"attack\" },\n    [\n      Array.isArray(_vm.item.attack)\n        ? _c(\n            \"div\",\n            _vm._l(_vm.item.attack, function(attackunit) {\n              return _c(\n                \"div\",\n                [\n                  _c(\"div\", { staticClass: \"info-sect\" }, [_vm._v(\"Attack\")]),\n                  _vm._v(\" \"),\n                  attackunit.name\n                    ? _c(\"div\", [\n                        _c(\"span\", [_vm._v(\"Name: \")]),\n                        _c(\"span\", [\n                          _vm._v(\n                            _vm._s(attackunit.name.toString().toTitleCase())\n                          )\n                        ])\n                      ])\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  (attackunit.damage !== 0 &&\n                    attackunit.damage !== null &&\n                    typeof attackunit.damage !== \"undefined\" &&\n                    _vm.itemtype !== \"armor\") ||\n                  attackunit.targets ||\n                  _vm.item.attack.result\n                    ? _c(\n                        \"div\",\n                        [\n                          attackunit.tohit &&\n                          attackunit.damage !== 0 &&\n                          attackunit.damage !== null &&\n                          typeof attackunit.damage !== \"undefined\"\n                            ? _c(\"div\", [\n                                _vm._v(\"Hit Bonus: \" + _vm._s(attackunit.tohit))\n                              ])\n                            : _vm._e(),\n                          _vm._v(\" \"),\n                          attackunit.damage !== 0 &&\n                          attackunit.damage !== null &&\n                          typeof attackunit.damage !== \"undefined\"\n                            ? _c(\"div\", { staticClass: \"damage\" }, [\n                                _c(\"span\", [\n                                  _vm._v(\"Damage: \" + _vm._s(attackunit.damage))\n                                ]),\n                                _vm.bonus\n                                  ? _c(\"span\", [\n                                      _vm._v(_vm._s(attackunit.bonus))\n                                    ])\n                                  : _vm._e()\n                              ])\n                            : _vm._e(),\n                          _vm._v(\" \"),\n                          attackunit.damage !== 0 &&\n                          attackunit.damage !== null &&\n                          typeof attackunit.damage !== \"undefined\" &&\n                          attackunit.kind\n                            ? _c(\"div\", [\n                                _vm._v(\n                                  \"Kind: \" +\n                                    _vm._s(\n                                      attackunit.kind.toString().toTitleCase()\n                                    )\n                                )\n                              ])\n                            : _vm._e(),\n                          _vm._v(\" \"),\n                          attackunit.targets\n                            ? _c(\"div\", [\n                                _vm._v(\n                                  \"Targets: \" +\n                                    _vm._s(\n                                      attackunit.targetstring\n                                        .toString()\n                                        .toTitleCase()\n                                    )\n                                )\n                              ])\n                            : _vm._e(),\n                          _vm._v(\" \"),\n                          attackunit.result\n                            ? _c(\"div\", { staticClass: \"info-subsect\" }, [\n                                _vm._v(\"Results:\")\n                              ])\n                            : _vm._e(),\n                          _vm._v(\" \"),\n                          attackunit.result\n                            ? _c(\"info\", { attrs: { info: attackunit.result } })\n                            : _vm._e()\n                        ],\n                        1\n                      )\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  attackunit.hits\n                    ? _c(\n                        \"div\",\n                        _vm._l(attackunit.hits, function(hit) {\n                          return _c(\n                            \"div\",\n                            [\n                              _c(\"div\", { staticClass: \"info-subsect\" }, [\n                                _vm._v(\"Attack hit\")\n                              ]),\n                              _vm._v(\" \"),\n                              hit.tohit &&\n                              hit.damage !== 0 &&\n                              hit.damage !== null &&\n                              typeof hit.damage !== \"undefined\"\n                                ? _c(\"div\", [\n                                    _vm._v(\"Hit Bonus: \" + _vm._s(hit.tohit))\n                                  ])\n                                : _vm._e(),\n                              _vm._v(\" \"),\n                              hit.damage !== 0 &&\n                              hit.damage !== null &&\n                              typeof hit.damage !== \"undefined\"\n                                ? _c(\"div\", { staticClass: \"damage\" }, [\n                                    _c(\"span\", [\n                                      _vm._v(\"Damage: \" + _vm._s(hit.damage))\n                                    ]),\n                                    _vm.bonus\n                                      ? _c(\"span\", [_vm._v(_vm._s(hit.bonus))])\n                                      : _vm._e()\n                                  ])\n                                : _vm._e(),\n                              _vm._v(\" \"),\n                              hit.damage !== 0 &&\n                              hit.damage !== null &&\n                              typeof hit.damage !== \"undefined\" &&\n                              hit.kind\n                                ? _c(\"div\", [\n                                    _vm._v(\n                                      \"Kind: \" +\n                                        _vm._s(\n                                          hit.kind.toString().toTitleCase()\n                                        )\n                                    )\n                                  ])\n                                : _vm._e(),\n                              _vm._v(\" \"),\n                              hit.targets\n                                ? _c(\"div\", [\n                                    _vm._v(\n                                      \"Targets: \" +\n                                        _vm._s(\n                                          hit.targetstring\n                                            .toString()\n                                            .toTitleCase()\n                                        )\n                                    )\n                                  ])\n                                : _vm._e(),\n                              _vm._v(\" \"),\n                              hit.result\n                                ? _c(\"div\", { staticClass: \"info-subsect\" }, [\n                                    _vm._v(\"Results:\")\n                                  ])\n                                : _vm._e(),\n                              _vm._v(\" \"),\n                              hit.result\n                                ? _c(\"info\", { attrs: { info: hit.result } })\n                                : _vm._e(),\n                              _vm._v(\" \"),\n                              hit.dot\n                                ? _c(\"div\", { staticClass: \"info-subsect\" }, [\n                                    _vm._v(\"Applies\")\n                                  ])\n                                : _vm._e(),\n                              _vm._v(\" \"),\n                              hit.dot\n                                ? _c(\"dot\", {\n                                    attrs: { dot: hit.dot, item: hit }\n                                  })\n                                : _vm._e()\n                            ],\n                            1\n                          )\n                        }),\n                        0\n                      )\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  attackunit.dot\n                    ? _c(\"div\", { staticClass: \"info-subsect\" }, [\n                        _vm._v(\"Applies\")\n                      ])\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  attackunit.dot\n                    ? _c(\"dot\", {\n                        attrs: { dot: attackunit.dot, item: attackunit }\n                      })\n                    : _vm._e()\n                ],\n                1\n              )\n            }),\n            0\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      (_vm.damage !== 0 &&\n        _vm.damage !== null &&\n        typeof _vm.damage !== \"undefined\" &&\n        _vm.itemtype !== \"armor\") ||\n      _vm.item.attack.targets ||\n      _vm.item.attack.result\n        ? _c(\n            \"div\",\n            [\n              _c(\"div\", { staticClass: \"info-sect\" }, [_vm._v(\"Attack\")]),\n              _vm._v(\" \"),\n              _vm.item.attack.name\n                ? _c(\"div\", [\n                    _vm.item.attack.name !== _vm.item.name\n                      ? _c(\"div\", [\n                          _c(\"span\", [_vm._v(\"Name: \")]),\n                          _c(\"span\", [\n                            _vm._v(\n                              _vm._s(\n                                _vm.item.attack.name.toString().toTitleCase()\n                              )\n                            )\n                          ])\n                        ])\n                      : _vm._e()\n                  ])\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.hitBonus &&\n              _vm.damage !== 0 &&\n              _vm.damage !== null &&\n              typeof _vm.damage !== \"undefined\"\n                ? _c(\"div\", [_vm._v(\"Hit Bonus: \" + _vm._s(_vm.hitBonus))])\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.damage !== 0 &&\n              _vm.damage !== null &&\n              typeof _vm.damage !== \"undefined\"\n                ? _c(\"div\", { staticClass: \"damage\" }, [\n                    _c(\"span\", [_vm._v(\"Damage: \" + _vm._s(_vm.damage))]),\n                    _vm.bonus\n                      ? _c(\"span\", [_vm._v(_vm._s(_vm.bonus))])\n                      : _vm._e()\n                  ])\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.damage !== 0 &&\n              _vm.damage !== null &&\n              typeof _vm.damage !== \"undefined\" &&\n              _vm.item.attack.kind\n                ? _c(\"div\", [\n                    _vm._v(\n                      \"Kind: \" +\n                        _vm._s(_vm.item.attack.kind.toString().toTitleCase())\n                    )\n                  ])\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.item.attack.targets\n                ? _c(\"div\", [\n                    _vm._v(\n                      \"Targets: \" +\n                        _vm._s(\n                          _vm.item.attack.targetstring.toString().toTitleCase()\n                        )\n                    )\n                  ])\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.item.attack.result\n                ? _c(\"div\", { staticClass: \"info-sect\" }, [_vm._v(\"Results:\")])\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.item.attack.result\n                ? _c(\"info\", { attrs: { info: _vm.item.attack.result } })\n                : _vm._e()\n            ],\n            1\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.attack.hits\n        ? _c(\n            \"div\",\n            _vm._l(_vm.item.attack.hits, function(hit) {\n              return _c(\n                \"div\",\n                [\n                  _c(\"div\", { staticClass: \"info-sect\" }, [\n                    _vm._v(\"Attack hit\")\n                  ]),\n                  _vm._v(\" \"),\n                  hit.tohit &&\n                  hit.damage !== 0 &&\n                  hit.damage !== null &&\n                  typeof hit.damage !== \"undefined\"\n                    ? _c(\"div\", [_vm._v(\"Hit Bonus: \" + _vm._s(hit.tohit))])\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  hit.damage !== 0 &&\n                  hit.damage !== null &&\n                  typeof hit.damage !== \"undefined\"\n                    ? _c(\"div\", { staticClass: \"damage\" }, [\n                        _c(\"span\", [_vm._v(\"Damage: \" + _vm._s(hit.damage))]),\n                        _vm.bonus\n                          ? _c(\"span\", [_vm._v(_vm._s(hit.bonus))])\n                          : _vm._e()\n                      ])\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  hit.damage !== 0 &&\n                  hit.damage !== null &&\n                  typeof hit.damage !== \"undefined\" &&\n                  hit.kind\n                    ? _c(\"div\", [\n                        _vm._v(\n                          \"Kind: \" + _vm._s(hit.kind.toString().toTitleCase())\n                        )\n                      ])\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  hit.targets\n                    ? _c(\"div\", [\n                        _vm._v(\n                          \"Targets: \" +\n                            _vm._s(hit.targetstring.toString().toTitleCase())\n                        )\n                      ])\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  hit.result\n                    ? _c(\"div\", { staticClass: \"info-sect\" }, [\n                        _vm._v(\"Results:\")\n                      ])\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  hit.result\n                    ? _c(\"info\", { attrs: { info: hit.result } })\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  hit.dot\n                    ? _c(\"div\", { staticClass: \"info-subsect\" }, [\n                        _vm._v(\"Applies\")\n                      ])\n                    : _vm._e(),\n                  _vm._v(\" \"),\n                  hit.dot\n                    ? _c(\"dot\", { attrs: { dot: hit.dot, item: hit } })\n                    : _vm._e()\n                ],\n                1\n              )\n            }),\n            0\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.attack.dot\n        ? _c(\"div\", { staticClass: \"info-sect\" }, [_vm._v(\"Applies\")])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.item.attack.dot\n        ? _c(\"dot\", {\n            attrs: { dot: _vm.item.attack.dot, item: _vm.item.attack }\n          })\n        : _vm._e()\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"dot\" }, [\n    Array.isArray(_vm.dot)\n      ? _c(\n          \"div\",\n          _vm._l(_vm.dot, function(dots) {\n            return _c(\"div\", [\n              _c(\"div\", { staticClass: \"info-subsect\" }, [_vm._v(\"Effect\")]),\n              _vm._v(\" \"),\n              dots.name\n                ? _c(\"div\", [\n                    _c(\"span\", [_vm._v(\"Name: \")]),\n                    _c(\"span\", [\n                      _vm._v(_vm._s(dots.name.toString().toTitleCase()))\n                    ])\n                  ])\n                : _vm._e(),\n              _vm._v(\" \"),\n              dots.effect || dots.mod\n                ? _c(\n                    \"div\",\n                    [\n                      dots.effect\n                        ? _c(\"info\", {\n                            attrs: { info: dots.effect, rate: \"true\" }\n                          })\n                        : _vm._e(),\n                      _vm._v(\" \"),\n                      dots.mod\n                        ? _c(\"info\", { attrs: { info: dots.mod } })\n                        : _vm._e()\n                    ],\n                    1\n                  )\n                : _vm._e(),\n              _vm._v(\" \"),\n              _c(\"div\", [\n                dots.damage || dots.dmg\n                  ? _c(\"div\", [\n                      _c(\"span\", [_vm._v(\"Damage: \")]),\n                      _c(\"span\", [_vm._v(_vm._s(dots.damage))])\n                    ])\n                  : _vm._e(),\n                _vm._v(\" \"),\n                dots.kind\n                  ? _c(\"div\", [\n                      _c(\"span\", [_vm._v(\"Kind: \")]),\n                      _c(\"span\", [\n                        _vm._v(_vm._s(dots.kind.toString().toTitleCase()))\n                      ])\n                    ])\n                  : _vm._e(),\n                _vm._v(\" \"),\n                dots.duration\n                  ? _c(\"div\", [\n                      _c(\"span\", [_vm._v(\"Duration: \")]),\n                      _c(\"span\", [\n                        _vm._v(_vm._s(dots.duration + \"s\" || \"infinity\"))\n                      ])\n                    ])\n                  : _vm._e()\n              ]),\n              _vm._v(\" \"),\n              _c(\"div\", [\n                !dots.damage && !dots.dmg && !dots.effect && !dots.mod\n                  ? _c(\"div\", [\n                      dots.id\n                        ? _c(\"div\", [\n                            _c(\"span\", [_vm._v(\"Id: \")]),\n                            _c(\"span\", [\n                              _vm._v(_vm._s(dots.id.toString().toTitleCase()))\n                            ])\n                          ])\n                        : _vm._e()\n                    ])\n                  : _vm._e()\n              ])\n            ])\n          }),\n          0\n        )\n      : _vm._e(),\n    _vm._v(\" \"),\n    _vm.item.name && _vm.dot.name\n      ? _c(\"div\", [\n          _vm.dot.name !== _vm.item.name\n            ? _c(\"div\", [\n                _c(\"span\", [_vm._v(\"Name: \")]),\n                _c(\"span\", [\n                  _vm._v(_vm._s(_vm.dot.name.toString().toTitleCase()))\n                ])\n              ])\n            : _vm._e()\n        ])\n      : _vm._e(),\n    _vm._v(\" \"),\n    !_vm.item.name\n      ? _c(\"div\", [\n          _vm.dot.name\n            ? _c(\"div\", [\n                _c(\"span\", [_vm._v(\"Name: \")]),\n                _c(\"span\", [\n                  _vm._v(_vm._s(_vm.dot.name.toString().toTitleCase()))\n                ])\n              ])\n            : _vm._e()\n        ])\n      : _vm._e(),\n    _vm._v(\" \"),\n    _vm.dot.effect || _vm.dot.mod\n      ? _c(\n          \"div\",\n          [\n            _vm.dot.effect\n              ? _c(\"info\", { attrs: { info: _vm.dot.effect, rate: \"true\" } })\n              : _vm._e(),\n            _vm._v(\" \"),\n            _vm.dot.mod\n              ? _c(\"info\", { attrs: { info: _vm.dot.mod } })\n              : _vm._e()\n          ],\n          1\n        )\n      : _vm._e(),\n    _vm._v(\" \"),\n    _vm.title\n      ? _c(\"div\", { staticClass: \"note-text\" }, [\n          _vm._v(_vm._s(_vm.title) + \":\")\n        ])\n      : _vm._e(),\n    _vm._v(\" \"),\n    _c(\"div\", [\n      _vm.dot.damage || _vm.dot.dmg\n        ? _c(\"div\", [\n            _c(\"span\", [_vm._v(\"Damage: \")]),\n            _c(\"span\", [_vm._v(_vm._s(_vm.damage))])\n          ])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.dot.kind\n        ? _c(\"div\", [\n            _c(\"span\", [_vm._v(\"Kind: \")]),\n            _c(\"span\", [_vm._v(_vm._s(_vm.dot.kind.toString().toTitleCase()))])\n          ])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.dot.duration\n        ? _c(\"div\", [\n            _c(\"span\", [_vm._v(\"Duration: \")]),\n            _c(\"span\", [_vm._v(_vm._s(_vm.dot.duration + \"s\" || \"infinity\"))])\n          ])\n        : _vm._e()\n    ]),\n    _vm._v(\" \"),\n    _c(\"div\", [\n      !_vm.dot.damage && !_vm.dot.dmg && !_vm.dot.effect && !_vm.dot.mod\n        ? _c(\"div\", [\n            _vm.dot.id\n              ? _c(\"div\", [\n                  _c(\"span\", [_vm._v(\"Id: \")]),\n                  _c(\"span\", [\n                    _vm._v(_vm._s(_vm.dot.id.toString().toTitleCase()))\n                  ])\n                ])\n              : _vm._e()\n          ])\n        : _vm._e()\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\n\nimport Range from '../../values/range';\nimport ItemsBase from '../itemsBase';\nimport InfoBlock from './info-block.vue';\n/**\n * This is the dot InfoBlock in an info-popup, not the dotView in window.\n */\nexport default {\n\n\tprops:['dot', 'title', 'item'],\n\tname:'dot',\n\tmixins:[ItemsBase],\n\tcomponents:{\n\t\tgdata:() => import( /* webpackChunkName: \"gdata-ui\" */ './gdata.vue'),\n\t\tinfo:InfoBlock\n\t},\n\tcomputed:{\n\n\t\tdamage(){\n\n\t\t\tlet dmg = this.dot.damage || this.dot.dmg;\n\t\t\tif( typeof dmg === 'number') {\n\t\t\t\treturn dmg;\n\t\t\t} else if ( dmg ) {\n\n\t\t\t\tif ( typeof dmg === 'object') {\n\n\t\t\t\t\tif ( dmg.toString == Object.prototype.toString ) {\n\t\t\t\t\t\tconsole.warn('raw dot object dmg');\n\t\t\t\t\t\tif ( dmg.min && dmg.max ) return dmg.min + '~' + dmg.max;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\treturn dmg.toString();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n</script>\n\n<template>\n\n<div class=\"dot\">\n\n\t<div v-if=\"Array.isArray(dot)\">\n\t\t<div v-for=\"dots in dot\">\t\t\n\t\t\t<div class=\"info-subsect\" >Effect</div>\n\t\t\t<div v-if=\"dots.name\"><span>Name: </span><span>{{dots.name.toString().toTitleCase()}}</span></div>\n\t\t\t<div v-if=\"dots.effect||dots.mod\">\n\t\t\t\t<info v-if=\"dots.effect\" :info=\"dots.effect\" rate=\"true\" />\n\t\t\t\t<info v-if=\"dots.mod\" :info=\"dots.mod\" />\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div v-if=\"dots.damage||dots.dmg\">\n\t\t\t\t\t<span>Damage: </span><span>{{dots.damage}}</span></div>\n\t\t\t\t<div v-if=\"dots.kind\"><span>Kind: </span><span>{{dots.kind.toString().toTitleCase()}}</span></div>\n\t\t\t\t<div v-if=\"dots.duration\"><span>Duration: </span><span>{{ dots.duration  + \"s\" || 'infinity' }}</span></div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div v-if=\"!dots.damage&&!dots.dmg&&!dots.effect&&!dots.mod\">\n\t\t\t\t\t<div v-if=\"dots.id\"><span>Id: </span><span>{{dots.id.toString().toTitleCase()}}</span></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div v-if=\"item.name&&dot.name\">\n\t\t<div v-if=\"dot.name!==item.name\"><span>Name: </span><span>{{dot.name.toString().toTitleCase()}}</span></div>\n\t</div>\n\t<div v-if=\"!item.name\">\n\t\t<div v-if=\"dot.name\"><span>Name: </span><span>{{dot.name.toString().toTitleCase()}}</span></div>\n\t</div>\n\t<div v-if=\"dot.effect||dot.mod\">\n\t\t<info v-if=\"dot.effect\" :info=\"dot.effect\" rate=\"true\" />\n\t\t<info v-if=\"dot.mod\" :info=\"dot.mod\" />\n\t</div>\n\n\t<div v-if=\"title\" class=\"note-text\">{{ title }}:</div>\n\n\t<div>\n\t\t<div v-if=\"dot.damage||dot.dmg\">\n\t\t\t<span>Damage: </span><span>{{damage}}</span></div>\n\t\t<div v-if=\"dot.kind\"><span>Kind: </span><span>{{dot.kind.toString().toTitleCase()}}</span></div>\n\t\t<div v-if=\"dot.duration\"><span>Duration: </span><span>{{ dot.duration  + \"s\" || 'infinity' }}</span></div>\n\t</div>\n\n\t<div>\n\t\t<div v-if=\"!dot.damage&&!dot.dmg&&!dot.effect&&!dot.mod\">\n\t\t\t<div v-if=\"dot.id\"><span>Id: </span><span>{{dot.id.toString().toTitleCase()}}</span></div>\n\t\t</div>\n\t</div>\n\t\n</div>\n\n</template>","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dot-info.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./dot-info.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./dot-info.vue?vue&type=template&id=3ebf4f1a&\"\nimport script from \"./dot-info.vue?vue&type=script&lang=js&\"\nexport * from \"./dot-info.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3ebf4f1a')) {\n      api.createRecord('3ebf4f1a', component.options)\n    } else {\n      api.reload('3ebf4f1a', component.options)\n    }\n    module.hot.accept(\"./dot-info.vue?vue&type=template&id=3ebf4f1a&\", function () {\n      api.rerender('3ebf4f1a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/items/dot-info.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./attack.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./attack.vue?vue&type=script&lang=js&\"","<script>\nimport Range from '../../values/range';\nimport Dot from './dot-info.vue';\nimport InfoBlock from './info-block.vue';\n\nexport default {\n\n\tprops:['item'],\n\tname:'attack',\n\tcomponents:{\n\t\tgdata:() => import( /* webpackChunkName: \"gdata-ui\" */ './gdata.vue'),\n\t\tdot:Dot,\n\t\tinfo:InfoBlock\n\t},\n\tcomputed:{\n\n\t\tdamage(){\n\n\t\t\tlet dmg = this.item.attack.damage || this.item.attack.dmg;\n\t\t\tif( typeof dmg === 'number') return dmg;\n\t\t\telse if ( dmg ) {\n\t\t\t\treturn dmg.toString();\n\t\t\t}\n\n\t\t},\n\t\thitBonus(){\n\t\t\treturn this.item.attack.tohit || 0;\n\t\t},\n\t\tbonus(){\n\n\t\t\tlet bonus = this.item.attack.bonus;\n\t\t\tif ( !bonus || bonus.valueOf() == 0 ) return 0;\n\n\t\t\tif ( bonus > 0) return ' (+' + bonus + ')';\n\t\t\telse return ' (' + bonus + ')';\n\n\t\t},\n\t\titemtype(){\n\t\t\treturn this.item.type.toString();\n\t\t}\n\n\t}\n\n}\n</script>\n\n<template>\n\n<div class=\"attack\">\n\n\t<div v-if=\"Array.isArray(item.attack)\">\n\t\t<div v-for=\"attackunit in item.attack\">\t\n\t\t\t<div class=\"info-sect\" >Attack</div>\n\t\t\t<div v-if=\"attackunit.name\"><span>Name: </span><span>{{attackunit.name.toString().toTitleCase()}}</span></div>\n\t\t\t<div v-if=\"attackunit.damage!==0&&attackunit.damage!==null&&typeof attackunit.damage !== 'undefined'&&itemtype!=='armor'|| attackunit.targets||item.attack.result\">\t\n\t\t\t\t<div v-if=\"attackunit.tohit&&attackunit.damage!==0&&attackunit.damage!==null&&typeof attackunit.damage !== 'undefined'\">Hit Bonus: {{ attackunit.tohit }}</div>\n\t\t\t\t<div class=\"damage\" v-if=\"attackunit.damage!==0&&attackunit.damage!==null&&typeof attackunit.damage !== 'undefined'\">\n\t\t\t\t\t<span>Damage: {{ attackunit.damage }}</span><span v-if=\"bonus\">{{ attackunit.bonus }}</span></div>\n\t\t\t\t<div v-if=\"attackunit.damage!==0&&attackunit.damage!==null&&typeof attackunit.damage !== 'undefined'&&attackunit.kind\">Kind: {{ attackunit.kind.toString().toTitleCase() }}</div>\n\t\t\t\t<div v-if=\"attackunit.targets\">Targets: {{ attackunit.targetstring.toString().toTitleCase() }}</div>\n\t\t\t\t<div v-if=\"attackunit.result\" class=\"info-subsect\">Results:</div>\n\t\t\t\t<info v-if=\"attackunit.result\" :info=\"attackunit.result\" />\n\t\t\t</div>\n\t\t\t<div v-if=\"attackunit.hits\">\n\t\t\t\t<div v-for=\"hit in attackunit.hits\">\n\t\t\t\t\t<div class=\"info-subsect\" >Attack hit</div>\t\t\n\t\t\t\t\t<div v-if=\"hit.tohit&&hit.damage!==0&&hit.damage!==null&&typeof hit.damage !== 'undefined'\">Hit Bonus: {{ hit.tohit }}</div>\n\t\t\t\t\t<div class=\"damage\" v-if=\"hit.damage!==0&&hit.damage!==null&&typeof hit.damage !== 'undefined'\">\n\t\t\t\t\t\t<span>Damage: {{ hit.damage }}</span><span v-if=\"bonus\">{{ hit.bonus }}</span></div>\n\t\t\t\t\t<div v-if=\"hit.damage!==0&&hit.damage!==null&&typeof hit.damage !== 'undefined'&&hit.kind\">Kind: {{ hit.kind.toString().toTitleCase() }}</div>\n\t\t\t\t\t<div v-if=\"hit.targets\">Targets: {{ hit.targetstring.toString().toTitleCase() }}</div>\n\t\t\t\t\t<div v-if=\"hit.result\" class=\"info-subsect\">Results:</div>\n\t\t\t\t\t<info v-if=\"hit.result\" :info=\"hit.result\" />\n\t\t\t\t\t<div class=\"info-subsect\" v-if=\"hit.dot\">Applies</div>\n\t\t\t\t\t<dot v-if=\"hit.dot\" :dot=\"hit.dot\"  :item=\"hit\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"info-subsect\" v-if=\"attackunit.dot\">Applies</div>\n\t\t\t\t<dot v-if=\"attackunit.dot\" :dot=\"attackunit.dot\"  :item=\"attackunit\" />\t\t\t\n\t\t</div>\n\t</div>\n\n\t<div v-if=\"damage!==0&&damage!==null&&typeof damage !== 'undefined'&&itemtype!=='armor'||item.attack.targets||item.attack.result\">\n\t\t<div class=\"info-sect\" >Attack</div>\t\t\n\t\t<div v-if=\"item.attack.name\">\n\t\t\t<div v-if=\"item.attack.name!==item.name\"><span>Name: </span><span>{{item.attack.name.toString().toTitleCase()}}</span></div>\n\t\t</div>\t\t\n\t\t<div v-if=\"hitBonus&&damage!==0&&damage!==null&&typeof damage !== 'undefined'\">Hit Bonus: {{ hitBonus }}</div>\n\t\t<div class=\"damage\" v-if=\"damage!==0&&damage!==null&&typeof damage !== 'undefined'\">\n\t\t\t<span>Damage: {{ damage }}</span><span v-if=\"bonus\">{{ bonus }}</span></div>\n\t\t<div v-if=\"damage!==0&&damage!==null&&typeof damage !== 'undefined'&&item.attack.kind\">Kind: {{ item.attack.kind.toString().toTitleCase() }}</div>\n\t\t<div v-if=\"item.attack.targets\">Targets: {{ item.attack.targetstring.toString().toTitleCase() }}</div>\n\t\t<div v-if=\"item.attack.result\" class=\"info-sect\">Results:</div>\n\t\t<info v-if=\"item.attack.result\" :info=\"item.attack.result\" />\n\t</div>\n\n\t<div v-if=\"item.attack.hits\">\n\t\t<div v-for=\"hit in item.attack.hits\">\n\t\t\t<div class=\"info-sect\" >Attack hit</div>\n\t\t\t<div v-if=\"hit.tohit&&hit.damage!==0&&hit.damage!==null&&typeof hit.damage !== 'undefined'\">Hit Bonus: {{ hit.tohit }}</div>\n\t\t\t<div class=\"damage\" v-if=\"hit.damage!==0&&hit.damage!==null&&typeof hit.damage !== 'undefined'\">\n\t\t\t\t<span>Damage: {{ hit.damage }}</span><span v-if=\"bonus\">{{ hit.bonus }}</span></div>\n\t\t\t<div v-if=\"hit.damage!==0&&hit.damage!==null&&typeof hit.damage !== 'undefined'&&hit.kind\">Kind: {{ hit.kind.toString().toTitleCase() }}</div>\n\t\t\t<div v-if=\"hit.targets\">Targets: {{ hit.targetstring.toString().toTitleCase() }}</div>\n\t\t\t<div v-if=\"hit.result\" class=\"info-sect\">Results:</div>\n\t\t\t<info v-if=\"hit.result\" :info=\"hit.result\" />\n\t\t\t<div class=\"info-subsect\" v-if=\"hit.dot\">Applies</div>\n\t\t\t<dot v-if=\"hit.dot\" :dot=\"hit.dot\" :item=\"hit\" />\n\t\t</div>\n\t</div>\n\n\t<div class=\"info-sect\" v-if=\"item.attack.dot\">Applies</div>\n\t<dot v-if=\"item.attack.dot\" :dot=\"item.attack.dot\"  :item=\"item.attack\" />\n\t\n</div>\n\n</template>","import { render, staticRenderFns } from \"./attack.vue?vue&type=template&id=50c6c96e&\"\nimport script from \"./attack.vue?vue&type=script&lang=js&\"\nexport * from \"./attack.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('50c6c96e')) {\n      api.createRecord('50c6c96e', component.options)\n    } else {\n      api.reload('50c6c96e', component.options)\n    }\n    module.hot.accept(\"./attack.vue?vue&type=template&id=50c6c96e&\", function () {\n      api.rerender('50c6c96e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/items/attack.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdata.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdata.vue?vue&type=script&lang=js&\"","<script>\nimport Game from '../../game';\n\nimport ItemsBase from '../itemsBase.js';\nimport InfoBlock from './info-block.vue';\nimport Attack from './attack.vue';\nimport Dot from './dot-info.vue';\n\nimport {precise} from '../../util/format';\n\nexport default {\n\tprops:['item'],\n\tname:\"gdata\",\n\tmixins:[ItemsBase],\n\tcomponents:{\n\t\tinfo:InfoBlock,\n\t\tattack:Attack,\n\t\tdot:Dot\n\t},\n\tmethods:{\n\t\tprecise:precise,\n\n\t\t/**\n\t\t * Convert tag strings into viewable format.\n\t\t * @param {string|string[]} t\n\t\t * @returns {string|string[]}\n\t\t */\n\t\ttagNames( t ) {\n\n\t\t\tif ( Array.isArray(t) ) return t.map( this.tagNames, this );\n\n\t\t\tif ( typeof t === 'string' && t.substring(0,2) === 't_' ) return t.slice(2).toTitleCase();\n\t\t\t\n\t\t\treturn t.toTitleCase();\n\n\t\t}\n\n\t},\n\tbeforeCreate(){\n\t\tthis.player = Game.state.player;\n\t},\n\tcomputed:{\n\n\t\tname(){return this.item.sname || this.item.name.toTitleCase(); },\n\t\tsellPrice(){ return Game.sellPrice(this.item);},\n\n\t\tnextImprove(){\n\t\t\treturn this.nextAt > 0 ? this.nextAt : this.nextEvery;\n\t\t},\n\n\t\t/**\n\t\t * Occurance of next 'every' improvement relative to cur value.\n\t\t */\n\t\tnextEvery() {\n\n\t\t\tlet v = Math.floor( this.item.value );\n\n\t\t\tvar next = Number.MAX_VALUE;\n\n\t\t\tvar f;\t// save every-divisor for pct computation.\n\n\t\t\tfor( let p in this.item.every ) {\n\n\t\t\t\tvar dist = p - ( v % p );\n\t\t\t\tif ( dist < next ) {\n\t\t\t\t\tnext = dist;\n\t\t\t\t\tf = p;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn ( next !== Number.MAX_VALUE) ? ( (f-dist) / f ) : -1;\n\n\t\t},\n\n\t\tnextAt() {\n\n\t\t\tlet v = this.item.value;\n\n\t\t\t// least upper bound.\n\t\t\tvar sup = Number.MAX_VALUE;\n\t\t\tfor( let p in this.item.at ) {\n\t\t\t\tp = Number(p);\n\t\t\t\tif ( p > v && p < sup ) sup = p;\n\t\t\t}\n\n\t\t\treturn ( sup > v && sup !== Number.MAX_VALUE ) ? sup : -1;\n\n\t\t},\n\t\ttags(){\n\n\t\t\tlet t = this.item.tags;\n\t\t\tfor(var i=0; i < this.item.tags.length; i++) {\n\t\t\t\tif (this.item.tags[i] == 'gemimbue') {\n\t\t\t\t\tthis.item.tags[i] = 'Imbue Gem'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == 'magicgems') {\n\t\t\t\t\tthis.item.tags[i] = 'Magic Gems'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == 'prismaticgems') {\n\t\t\t\t\tthis.item.tags[i] = 'Prismatic Gems'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == 'elementalgems') {\n\t\t\t\t\tthis.item.tags[i] = 'Elemental Gems'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == 'primordialgems') {\n\t\t\t\t\tthis.item.tags[i] = 'Primordial Gems'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == 'elementalrunes') {\n\t\t\t\t\tthis.item.tags[i] = 'Elemental Runes'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == 'primaticrunes') {\n\t\t\t\t\tthis.item.tags[i] = 'Prismatic Runes'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == 'primordialrunes') {\n\t\t\t\t\tthis.item.tags[i] = 'Primordial Runes'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == 'manas') {\n\t\t\t\t\tthis.item.tags[i] = 'Mana energies'\n\t\t\t\t};\n \t\t\t\tthis.item.tags[i] = this.item.tags[i];\n\t\t\t}\n\t\t\tif ( typeof t === 'string') return this.tagNames(t);\n\t\t\telse if ( Array.isArray(t) ) return t.map( this.tagNames, this ).join(', ');\n\n\t\t}\n\n\t}\n\n}\n</script>\n\n\n<template>\n\n<div class=\"item-info\">\n\t<span class=\"separate\">\n\t\t<span class=\"item-name\">{{name.toString().toTitleCase()}}</span>\n\n\t\t\t<span v-if=\"item.type==='resource'||item.type==='stat'\">{{ item.current.toFixed(0) + ( item.max ? (' / ' + Math.floor(item.max.value ) ) :'' ) }}</span>\n\t\t\t<span v-else-if=\"item.type==='furniture'\">max: {{\n\t\t\t\titem.max ? Math.floor(item.max.value ) : ( (item.repeat) ? '&infin;' : 1) }}</span>\n\n\t\t\t<span v-if=\"item.sym\">{{item.sym}}</span>\n\n\n\t</span>\n\t<div class=\"tight note-text\" v-if=\"item.tags||item.hands\"><span v-if=\"item.hands>1\">Two-Handed </span>{{tags}}</div>\n\t\t<span class=\"flex-right\" v-if=\"item.rate&&item.rate.value!=0\">{{ precise( item.rate.value ) }}/s</span>\n\t\t<div>\n\n\t\t<span class=\"separate\">\n\t\t\t<span v-if=\"item.showLevel\">Level: {{item.showLevel()}}</span>\n\t\t\t<span v-else-if=\"item.level\">Level: {{item.level}}</span>\n\n\t\t\t<span v-if=\"item.slot\">Slot: {{ item.slot.toString().toTitleCase() }}</span>\n\t\t</span>\n\t\t<span v-if=\"item.enchants&&item.enchants.max>0\">Enchant Levels: {{item.enchants.value}} / {{ item.enchants.max }}</span>\n\n\t\t<span v-if=\"item.at&&(nextAt>0)\" class=\"note-text\">\n\t\t\tNext Improvement: {{ Math.round(100*item.value/nextAt)+'%'}}\n\t\t</span>\n\t\t<span v-else-if=\"item.every&&(nextEvery>=0)\" class=\"note-text\">\n\t\t\tNext Improvement: {{ Math.round(100*nextEvery)+'%'}}\n\t\t</span>\n\n\t\t\t<div v-if=\"item.cd||item.timer>0\" class=\"note-text\">Cooldown: {{ item.timer > 0 ? item.timer.toFixed(2) + ' Left' : item.cd + 's' }}</div>\n\n\t\t\t<div v-if=\"item.dist\">Distance: {{item.dist}}</div>\n\t\t\t<div v-if=\"item.armor\">Armor: {{ item.armor }}</div>\n\t\t\t<div class=\"item-desc\" v-if=\"item.desc\">{{ item.desc }}</div>\n\n\t\t</div>\n\n\t\t<info v-if=\"item.need\" :info=\"item.need\" title=\"Need\" />\n\t\t<info v-if=\"item.buy&&!item.owned\" :info=\"item.buy\" title=\"Purchase Cost\" />\n\t\t<info v-if=\"item.cost&&item.id != 'bloodshot'\" :info=\"item.cost\" title=\"Cost\" />\n\t\t<info v-if=\"item.cost&&item.id == 'bloodshot'\" :info=\"'Life: ' + (this.player.hp/3).toFixed(2)\" title=\"Cost\" />\n\t\t<info v-if=\"item.sell||item.instanced||item.type==='Furniture'\" :info=\"sellPrice\" title=\"Sell\" />\n\t\t<info v-if=\"item.run\" :info=\"item.run\" title=\"Progress Cost\" rate=\"true\" />\n\n\t\t<attack v-if=\"item.attack\" :item=\"item\" />\n\n\t\t<div v-if=\"item.effect\" class=\"info-sect\">Effects:</div>\t\t\t\t\n\t\t<info v-if=\"item.effect\" :info=\"item.effect\" :rate=\"item.perpetual||item.length>0\" />\n\t\t<div v-if=\"item.mod||item.alter\" class=\"info-sect\">Modifications:</div>\t\t\t\t\n\t\t<info v-if=\"item.mod\" :info=\"item.mod\" />\n\t\t<info v-if=\"item.alter\" :info=\"item.alter\" />\n\t\t<div v-if=\"item.result\" class=\"info-sect\">Results:</div>\n\t\t<info v-if=\"item.result\" :info=\"item.result\" />\n\t\t<div v-if=\"item.use\" class=\"info-sect\">When used:</div>\n\t\t<info v-if=\"item.use\" :info=\"item.use\" />\n\t\t<div v-if=\"item.dot\" class=\"info-sect\">Buffs:</div>\n\t\t<dot v-if=\"item.dot\" :dot=\"item.dot\" :item=\"item\" />\n\t\t\n\t\t<div v-if=\"item.lock||item.disable\" class=\"info-sect\">Locks:</div>\n\t\t<info v-if=\"item.lock\" :info=\"item.lock\" />\n\t\t<info v-if=\"item.disable\" :info=\"item.disable\" />\n\n\t\t<div class=\"note-text\" v-if=\"item.flavor\">{{item.flavor}}</div>\n</div>\n\n</template>\n\n\n<style scoped>\n\n.tight {\n\tmargin:0;\n\tpadding:0;\n}\n\ndiv.item-desc {\n\tmargin: 0.6em 0 0.9em;\n\tfont-size: 0.96em;\n}\n\n.item-name {\n\tfont-weight: bold;\n}\n\n.separate > span {\n\tmargin-left:var(--small-gap);\n}\n.flavor {\n\tfont-style: italic;\n}\n\n</style>","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdata.vue?vue&type=style&index=0&id=2d591720&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gdata.vue?vue&type=style&index=0&id=2d591720&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./gdata.vue?vue&type=template&id=2d591720&scoped=true&\"\nimport script from \"./gdata.vue?vue&type=script&lang=js&\"\nexport * from \"./gdata.vue?vue&type=script&lang=js&\"\nimport style0 from \"./gdata.vue?vue&type=style&index=0&id=2d591720&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2d591720\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('2d591720')) {\n      api.createRecord('2d591720', component.options)\n    } else {\n      api.reload('2d591720', component.options)\n    }\n    module.hot.accept(\"./gdata.vue?vue&type=template&id=2d591720&scoped=true&\", function () {\n      api.rerender('2d591720', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/items/gdata.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"upgrades\" },\n    _vm._l(_vm.items, function(it) {\n      return _c(\n        \"button\",\n        {\n          key: it.id,\n          class: {\n            \"task-btn\": true,\n            hidable: true,\n            locked: _vm.locked(it) || (it.owned && !it.repeat),\n            running: it.running,\n            runnable: it.perpetual || it.length > 0,\n            disabled: !it.canUse()\n          },\n          attrs: { \"data-key\": it.id },\n          on: {\n            \"!mouseenter\": function($event) {\n              $event.stopPropagation()\n              return _vm.itemOver($event, it)\n            },\n            click: function($event) {\n              return _vm.emit(\"upgrade\", it)\n            }\n          }\n        },\n        [_vm._v(_vm._s(it.name))]\n      )\n    }),\n    0\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport ItemsBase from '../itemsBase.js';\n//import UIMixin from './uiMixin';\n\nexport default {\n\n\t/**\n\t * @property {string} event - name of event to fire when an item is selected.\n\t */\n\tprops:['items'],\n\tmixins:[ItemsBase]\n\n}\n</script>\n\n\n<template>\n<div class=\"upgrades\">\n\n\t<!--<div><button ref=\"btnHides\" class=\"btnConfig\">&#9881;</button></div>-->\n\n\t<button :class=\"{'task-btn':true, hidable:true, locked:locked(it)||(it.owned&&!it.repeat),\n\t\trunning:it.running, runnable:it.perpetual||it.length>0,\n\t\tdisabled:!it.canUse() }\"\n\t\tv-for=\"it in items\" :data-key=\"it.id\" :key=\"it.id\"\n\t\t@mouseenter.capture.stop=\"itemOver( $event,it)\"\n\n\t\t@click=\"emit( 'upgrade', it)\">{{ it.name }}</button>\n\n</div>\n</template>","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upgrades.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upgrades.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./upgrades.vue?vue&type=template&id=8fa99ea6&\"\nimport script from \"./upgrades.vue?vue&type=script&lang=js&\"\nexport * from \"./upgrades.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('8fa99ea6')) {\n      api.createRecord('8fa99ea6', component.options)\n    } else {\n      api.reload('8fa99ea6', component.options)\n    }\n    module.hot.accept(\"./upgrades.vue?vue&type=template&id=8fa99ea6&\", function () {\n      api.rerender('8fa99ea6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/panes/upgrades.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      directives: [\n        {\n          name: \"show\",\n          rawName: \"v-show\",\n          value: _vm.item != null,\n          expression: \"item!=null\"\n        }\n      ],\n      staticClass: \"item-popup\"\n    },\n    [\n      _c(\n        \"div\",\n        { staticClass: \"popup-content\" },\n        [\n          _vm.title\n            ? _c(\"div\", { staticClass: \"pop-title\" }, [\n                _vm._v(_vm._s(_vm.title))\n              ])\n            : _vm._e(),\n          _vm._v(\" \"),\n          Array.isArray(_vm.item)\n            ? _vm._l(_vm.item, function(t) {\n                return _c(\"div\", { key: t }, [_vm._v(_vm._s(t.toString()))])\n              })\n            : [_vm.item ? _c(\"gdata\", { attrs: { item: _vm.item } }) : _vm._e()]\n        ],\n        2\n      )\n    ]\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport Game from 'game';\n\nimport ItemView from 'ui/items/gdata.vue';\nimport {positionAt} from './popups.js';\n\n/**\n * Information about current rollover object.\n */\nexport const RollOver = {\n\n\titem:null,\n\telm:null,\n\ttitle:null,\n\tsource:null\n\n};\n\nexport const ItemOver = ( evt, it, source, title ) => {\n\n\tRollOver.item = it;\n\tRollOver.elm = evt.currentTarget;\n\tRollOver.source = source;\n\n\tif ( source && source.context ) {\n\t\tRollOver.context = source.context;\n\t} else RollOver.context = Game;\n\n\tRollOver.title = title;\n}\n\nexport const ItemOut = () => {\n\tRollOver.item = null;\n\tRollOver.elm = null;\n\tRollOver.source = null;\n\tRollOver.title = null;\n\tRollOver.context = null;\n}\n\n/**\n * Box for displaying item information.\n */\nexport default {\n\n\tdata(){\n\t\treturn RollOver;\n\t},\n\n\tupdated() {\n\t\t// waiting for width to change before reposition.\n\t\tif ( this.item ) {\n\t\t\tpositionAt( this.$el, this.elm );\n\t\t}\n\t},\n\tcomponents:{ gdata:ItemView }\n\n}\n</script>\n\n\n<template>\n\n\t<div class=\"item-popup\" v-show=\"item!=null\">\n\t\t<div class=\"popup-content\">\n\t\t<div v-if=\"title\" class=\"pop-title\">{{ title }}</div>\n\t\t<template v-if=\"Array.isArray(item)\">\n\n\t\t\t<div v-for=\"t in item\" :key=\"t\">{{ t.toString() }}</div>\n\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<gdata v-if=\"item\" :item=\"item\" />\n\t\t</template>\n\t\t</div>\n\t</div>\n\n</template>\n\n<style scoped>\n\ndiv.pop-title {\n\n\tfont-weight: bold;\n\tborder-bottom: 1px solid black;\n\tmargin-bottom: var(--md-gap);\n\n}\n\n.popup-content {\n\tpadding: var(--md-gap);\n}\n\n</style>","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./itemPopup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./itemPopup.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./itemPopup.vue?vue&type=style&index=0&id=8c4acf3a&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./itemPopup.vue?vue&type=style&index=0&id=8c4acf3a&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./itemPopup.vue?vue&type=template&id=8c4acf3a&scoped=true&\"\nimport script from \"./itemPopup.vue?vue&type=script&lang=js&\"\nexport * from \"./itemPopup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./itemPopup.vue?vue&type=style&index=0&id=8c4acf3a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8c4acf3a\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('8c4acf3a')) {\n      api.createRecord('8c4acf3a', component.options)\n    } else {\n      api.reload('8c4acf3a', component.options)\n    }\n    module.hot.accept(\"./itemPopup.vue?vue&type=template&id=8c4acf3a&scoped=true&\", function () {\n      api.rerender('8c4acf3a', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/popups/itemPopup.vue\"\nexport default component.exports","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent (\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier, /* server only */\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options = typeof scriptExports === 'function'\n    ? scriptExports.options\n    : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) { // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n        injectStyles.call(\n          this,\n          (options.functional ? this.parent : this).$root.$options.shadowRoot\n        )\n      }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection (h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing\n        ? [].concat(existing, hook)\n        : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n","import { assignNoFunc } from \"../util/util\";\nimport { cloneClass } from 'objecty';\nimport Stat from \"../values/rvals/stat\";\nimport { TARGET_ALLIES, TARGET_ALLY, TARGET_SELF,\n\t\tParseTarget, ParseDmg} from \"../values/combatVars\";\n\nexport default class Attack {\n\n\ttoJSON(){\n\n\t\treturn {\n\t\t\t\n\t\t\t/*\n\t\t\tname:this.name,\n\t\t\tdmg:this._damage,\n\t\t\ttohit:this.tohit||undefined,\n\t\t\tbonus:this.bonus||undefined,\n\t\t\tkind:this.kind,\n\t\t\thits:this.hits||undefined,\n\t\t\tcure:this.cure||undefined,\n\t\t\tstate:this.state||undefined,\n\t\t\ttargets:this.targets||undefined,\n\t\t\ttargetstring:this.targetstring||undefined,\n\t\t\tresult:this.result||undefined,\n\t\t\tid:this.id,\n\t\t\tdot:this.dot\n\t\t\t*/\n\t\t};\n\n\t}\n\n\t/**\n\t * @property {object|object[]}\n\t */\n\tget dot(){ return this._dot; }\n\tset dot(v) {\n\t\tthis._dot = v;\n\t}\n\n\tget id() {return this._name; }\n\tset id(v) {\n\t\tthis._id = v;\n\n\t\tif ( this._hits ) {\n\t\t\tfor( let i = this._hits.length-1; i>=0; i--) if ( !this._hits[i].id ) this._hits[i].id = v;\n\t\t}\n\n\t}\n\n\tget name() {return this._name; }\n\tset name(v) {\n\t\tthis._name = v;\n\n\t\tif ( this._hits ) {\n\t\t\tfor( let i = this._hits.length-1; i>=0; i--) if ( !this._hits[i].name ) this._hits[i].name = v;\n\t\t}\n\n\t}\n\n\tget kind(){ return this._kind; }\n\tset kind(k){\n\n\t\tthis._kind = k;\n\t\tif ( this.dot ){\n\t\t\tif ( !this.dot.kind ) this.dot.kind = k;\n\t\t}\n\t\tif ( this._hits ) {\n\t\t\tfor( let i = this._hits.length-1; i>=0; i--) if ( !this._hits[i].kind ) this._hits[i].kind =k;\n\t\t\tif ( this._hits.dot ) {\n\t\t\t\tfor( let i = this._hits.length-1; i>=0; i--) if ( !this._hits[i].dot.kind ) this._hits[i].dot.kind = this._hits[i].kind;\n\t\t\t}\n\t\t}\n\t\t\n\n\t}\n\n\t/**\n\t * @property {string[]} state - states to cure/remove from target.\n\t */\n\tget state(){return this._state;}\n\tset state(v) {\n\t\tif ( typeof v === 'string') this._state = v.split(',');\n\t\telse this._state = v;\n\t}\n\n\t/**\n\t * @property {string[]} cure - states to cure/remove from target.\n\t */\n\tget cure(){ return this._cure; }\n\tset cure(v){\n\t\tif ( typeof v === 'string') this._cure = v.split(',');\n\t\telse this._cure = v;\n\t}\n\n\t/**\n\t * @property {string} targets - target of attack.\n\t */\n\tget targetstring() {return this._targetstring;}\n\tset targetstring(v) { \n\t\tthis.targetstring=v;\n\t}\n\tget targets() { return this._targets; }\n\tset targets(v) {\n\n\t\tif ( typeof v === 'string') {\n\t\t\tthis._targetstring = v;\n\t\t\tthis._targets = ParseTarget(v);\n\t\t\tif ( this._hits ) {\n\t\t\t\tfor( let i = this._hits.length-1; i>=0; i--) if ( !this._hits[i].targets ) this._hits[i].targets=ParseTarget(v);\n\t\t\t\tfor( let i = this._hits.length-1; i>=0; i--) if ( !this._hits[i].targetstring ) this._hits[i].targetstring = v;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis._targetstring = this._targets;\n\t\t\tthis._targets = v;\n\t\t\tif ( this._hits ) {\n\t\t\t\tfor( let i = this._hits.length-1; i>=0; i--) if ( !this._hits[i].targets ) this._hits[i].targets = v;\n\t\t\t\tfor( let i = this._hits.length-1; i>=0; i--) if ( !this._hits[i].targetstring ) this._hits[i].targetstring = v;\n\t\t\t}\n\t\t}\n\t\t\n\t}\n\n\t/**\n\t * @property {Stat} bonus - bonus damage applied by attack.\n\t */\n\tget bonus() { return this._bonus; }\n\tset bonus(v) {\n\n\t\tif ( this._bonus ) {\n\t\t\tthis._bonus.set(v);\n\t\t} else this._bonus = new Stat( v );\n\n\t}\n\n\t/**\n\t * @alias damage\n\t */\n\tget dmg() { return this.damage;}\n\tset dmg(v) { this.damage = v; }\n\n\t/**\n\t * @property {Range|RValue} damage\n\t */\n\tget damage() { return this._damage; }\n\tset damage(v) {\n\t\tthis._damage = ParseDmg(v);\n\t}\n\n\t/**\n\t * @property {Attack[]} hits\n\t */\n\tget hits(){ return this._hits; }\n\tset hits(v){\n\n\t\tthis._hits = v;\n\t\tif (!v) return;\n\n\t\tfor( let i = v.length-1; i>=0;i--) {\n\t\t\tvar h = v[i];\n\n\t\t\tif (!h.id) h.id = this.id;\n\t\t\tif ( !h.name ) h.name = this.name;\n\t\t\tif (!h.kind)h.kind = this.kind;\n\t\t\tif ( !(h instanceof Attack) ) v[i] = new Attack(h);\n\n\t\t}\n\t}\n\n\tget harmless(){ return this._harmless; }\n\tset harmless(v) { this._harmless = v;}\n\n\t/**\n\t * Messy, work on dot/state interface.\n\t */\n\tcanAttack(){return true;}\n\n\tclone(){ return cloneClass( this, new Attack() ); }\n\n\tconstructor( vars=null ){\n\n\t\tif ( vars ) {\n\n\t\t\t// necessary for sub id/name assignments.\n\t\t\tthis.id = vars.id;\n\t\t\tthis.name = vars.name;\n\t\t\tthis.kind = vars.kind;\n\n\t\t\t//cloneClass( vars, this ); // breaks save-reloading.\n\t\t\tassignNoFunc(this,vars);\n\n\t\t}\n\n\t\tif ( this.dot ) {\n\t\t\tif ( Array.isArray(this.dot)) {\n\t\t\t\tfor( let p of this.dot ) {\n\t\t\t\t\tif ( !p.id ) {\n\t\t\t\t\t\tif ( p.name ) p.id = p.name;\n\t\t\t\t\t\telse p.id = p.name = this.name || this.id;\n\t\t\t\t\t}\n\t\t\t\t\tif ( p.dmg || p.damage ) {\n\t\t\t\t\t\tif ( !p.damage ) p.damage = p.dmg;\n\t\t\t\t\t\telse p.dmg = p.damage;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif ( !this.dot.id ) {\n\t\t\t\t\tif ( this.dot.name ) this.dot.id = this.dot.name;\n\t\t\t\t\telse this.dot.id = this.dot.name = this.name || this.id;\n\t\t\t\t}\n\t\t\t\tif ( this.dot.dmg || this.dot.damage ) {\n\t\t\t\t\tif ( !this.dot.damage ) this.dot.damage = this.dot.dmg;\n\t\t\t\t\telse this.dot.dmg = this.dot.damage;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\tif ( this._harmless === null || this._harmless === undefined ) {\n\t\t\tthis.harmless = (this.targets === TARGET_SELF) ||\n\t\t\t\t(this.targets === TARGET_ALLY) || (this.targets === TARGET_ALLIES);\n\t\t}\n\n\t\t//this.damage = this.damage || 0;\n\t\tthis.bonus = this.bonus || 0;\n\t\tthis.tohit = this.tohit || 0;\n\n\t}\n\n\n}","import {ParseMods } from \"modules/parsing\";\nimport { ParseDmg } from \"../values/combatVars\";\nimport { assign } from 'objecty';\nimport { ParseFlags, NO_SPELLS, NO_ATTACK, NO_DEFEND } from \"./states\";\nimport { TYP_DOT } from \"../values/consts\";\n\n\nexport default class Dot {\n\n\ttoJSON(){\n\n\t\tif ( !this.id ) {\n\t\t\tconsole.warn('NO DOT ID: ' + this );\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn {\n\n\t\t\tid:this._id,\n\t\t\tkind:this.kind || undefined,\n\t\t\tname:this._name || undefined,\n\t\t\tdmg:this.damage || undefined,\n\t\t\teffect:this.effect||undefined,\n\t\t\tlevel:this._level||undefined,\n\t\t\tmod:this._mod||undefined,\n\t\t\tacc:this.acc||undefined,\n\t\t\tstate:this.state||undefined,\n\t\t\tadj:this._adj||undefined,\n\t\t\tflags:this._flags!== 0 ? this._flags : undefined,\n\t\t\tduration:this.duration,\n\t\t\t/** @todo source should never be string. maybe on load? */\n\t\t\tsource:this.source ? ( typeof this.source === 'string' ? this.source : this.source.id ) : undefined\n\t\t};\n\n\t}\n\n\tget name(){return this._name || this._id}\n\tset name(v){this._name =v;}\n\n\tget id() { return this._id; }\n\tset id(v) { this._id =v; }\n\n\tget mod() { return this._mod; }\n\tset mod(v) { this._mod = v; }\n\n\t/*get effect(){return this._effect;}\n\tset effect(v){this._effect = v;}*/\n\n\t/**\n\t * @property {string} verb - verb for dots that define state, e.g. sleeping.\n\t */\n\tget adj() { return this._adj || this._name || this._id; }\n\tset adj(v) { this._adj = v; }\n\n\t/**\n\t * @property {RValue} dmg - alias for damage.\n\t */\n\tget dmg(){return this.damage;}\n\tset dmg(v) { this.damage = v; }\n\n\t/**\n\t * @property {RValue} damage\n\t */\n\tget damage() { return this._damage; }\n\tset damage(v) { \n\t\tthis._damage = ParseDmg(v); \n\t}\n\n\t/**\n\t * @property {number} flags\n\t */\n\tget flags(){return this._flags;}\n\tset flags(v) {\n\n\t\tthis._flags = 0;\n\n\t\tif ( typeof v !== 'number' ) this._flags = ParseFlags(v);\n\t\telse this._flags = v;\n\n\t}\n\n\tget source(){return this._source;}\n\tset source(v){this._source=v}\n\n\t/**\n\t * @property {number} level - level (strength) of dot.\n\t */\n\tget level(){return this._level || this.source ? (this.source.level || 0 ) : 0; }\n\tset level(v){this._level=v;}\n\n\t/**\n\t * @property {boolean} perm - dot is permanent.\n\t */\n\tget perm(){return this._perm;}\n\tset perm(v) { this._perm =v}\n\n\tget type(){ return TYP_DOT}\n\n\tvalueOf(){ return ( this.perm || this.duration > 0 ) ? 1 : 0; }\n\n\tcanCast() { return (this._flags & NO_SPELLS) === 0 }\n\tcanAttack() { return (this._flags & NO_ATTACK) === 0 }\n\tcanDefend() { return (this._flags & NO_DEFEND ) === 0 }\n\n\tconstructor( vars, source, name ){\n\n\t\tif ( vars ) assign( this, vars );\n\n\t\tthis.source = this.source || source || null;\n\n\t\tthis.name = name || this.name || ( source ? source.name : null );\n\n\t\tif ( !this.id ) console.warn('BAD DOT ID: ' + this.name );\n\n\t\tif ( !this.duration) {\n\t\t\tthis.duration = 0;\n\t\t\tthis.perm = true;\n\t\t}\n\n\t\t/**\n\t\t * @property {boolean} stack - ability of dot to stack.\n\t\t */\n\t\tif ( this.mod ){\n\n\t\t\tthis.mod = ParseMods( this.mod, this.id, this );\n\n\t\t\t//SetModCounts( this.mod, this );\n\t\t}\n\t\tif ( !this.flags ) this.flags = 0;\n\n\t\t/*for( let p in this ) {\n\t\t\tif ( p === 'damage' || p =='dmg') console.log('DOT HAS DAMAGE');\n\t\t}*/\n\n\n\t\t/**\n\t\t * @private {number} acc - integer accumulator\n\t\t */\n\t\tthis.acc = this.acc || 0;\n\n\t}\n\n\t/**\n\t * Extend duration to the given number of seconds.\n\t * @param {number} duration\n\t */\n\textend( duration ) {\n\n\t\tif ( duration === 0|| this.perm ) {\n\n\t\t\tthis.perm = true;\n\t\t\tthis.duration = 0;\n\n\t\t} else if ( duration > this.duration ) {\n\t\t\tthis.duration = duration;\n\t\t}\n\n\t}\n\n\trevive(gs) {\n\t\tif ( this.source && typeof this.source === 'string') this.source = gs.getData( this.source );\n\t}\n\n\t/**\n\t * Ticks dt and returns the amount the dot has actually ticked,\n\t * (allowing for seconds-only updates.)\n\t * @param {number} dt\n\t * @returns {number} - amount of tick time to count.\n\t */\n\ttick(dt) {\n\n\t\tthis.acc += dt;\n\t\tif ( this.acc >= 1 ) {\n\n\t\t\tthis.acc--;\n\t\t\tif ( !this.perm ) this.duration--;\n\n\t\t\treturn 1;\n\n\t\t}\n\n\t\treturn 0;\n\n\t}\n\n}","import Base, {mergeClass} from '../items/base';\nimport Stat from '../values/rvals/stat';\nimport Attack from './attack';\nimport Dot from './dot';\nimport { cloneClass, mergeSafe } from 'objecty';\n\nimport { NPC, getDelay, TYP_PCT, TYP_STATE } from '../values/consts';\nimport { toStats } from \"../util/dataUtil\";\nimport Events, { CHAR_STATE, EVT_COMBAT, RESISTED, CHAR_ACTION } from '../events';\nimport States, { NO_ATTACK } from './states';\n\nimport { ApplyAction } from '../values/combatVars';\nimport { assignNoFunc } from '../util/util';\n\nexport default class Char {\n\n\tget defense() { return this._defense; }\n\tset defense(v) {\n\n\t\tif ( !this._defense ) {\n\t\t\tthis._defense = new Stat(v, this.id + '.defense');\n\t\t} else {\n\t\t\tthis._defense.set(v);\n\t\t}\n\n\t}\n\n\tget tohit() { return this._tohit; }\n\tset tohit(v) {\n\n\t\tif ( !this._tohit){this._tohit = new Stat(v, this.id + '.tohit');\n\t\t} else { this._tohit.set(v); }\n\n\t}\n\n\tget resist() { return this._resist };\n\tset resist(v) { this._resist = v; }\n\n\tget speed() { return this._speed; }\n\tset speed(v) {\n\t\tif (!this._speed) this._speed = new Stat(v, this.id + '.speed');\n\t\telse this._speed.set(v);\n\t}\n\n\t/**\n\t * @property {number} team - side in combat.\n\t */\n\tget team() { return this._team; }\n\tset team(v) { this._team=v;}\n\n\t/**\n\t * @alias immunities\n\t * @property {object<string,Stat>} immune\n\t */\n\tset immune(v){\n\t\tthis.immunities=v;\n\t}\n\n\t/**\n\t * @property {.<string,Stat>} immunities\n\t */\n\tget immunities(){\n\t\treturn this._immunities;\n\t}\n\tset immunities(v) {\n\n\t\tif ( typeof v === 'string') {\n\n\t\t\tthis._immunities = {};\n\t\t\tvar a = v.split(',');\n\t\t\tfor( let i in a ) {\n\t\t\t\tthis.addImmune( a[i] );\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tfor( let p in v ) {\n\n\t\t\tvar val = v[p];\n\t\t\tif ( !(val instanceof Stat) ) v[p] = new Stat(val);\n\n\t\t}\n\n\t\tthis._immunities=v;\n\t}\n\n\t/**\n\t * @property {.<string,Stat>} bonuses - damage bonuses per damage kind.\n\t */\n\tget bonuses(){ return this._bonuses }\n\tset bonuses(v){ this._bonuses = toStats(v); }\n\n\t/**\n\t * @property {Attack} attack\n\t */\n\tget attack() { return this._attack; }\n\tset attack(v) {\n\n\t\tif ( Array.isArray(v)) {\n\n\t\t\tlet a = [];\n\t\t\tfor( let i = v.length-1; i>=0; i-- ) {\n\n\t\t\t\ta.push( (v[i] instanceof Attack) ? v[i] :\n\t\t\t\t\tnew Attack(v[i])\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tthis._attack = a;\n\n\t\t} else this._attack = ( v instanceof Attack) ? v : new Attack(v);\n\n\t}\n\n\tget dots() { return this._dots; }\n\tset dots(v) {\n\n\t\tlet a = [];\n\n\t\tif ( v ) {\n\t\t\tfor( let i = v.length-1; i >= 0; i-- ) {\n\n\t\t\t\t//var d = v[i] instanceof Dot ? v[i] : new Dot(v[i]);\n\n\t\t\t\ta.push( v[i] instanceof Dot ? v[i] : new Dot(v[i] ) );\n\n\t\t\t}\n\t\t}\n\n\t\tthis._dots = a;\n\n\t}\n\n\t/**\n\t * Get cause of a state-flag being set.\n\t * @param {number} flag\n\t */\n\tgetCause(flag){return this._states.getCause(flag)}\n\n\thasState( flag ) { return this._states.has(flag); }\n\n\t/**\n\t * @returns {boolean} canAttack\n\t */\n\tcanAttack(){\n\t\treturn this._states.canAttack();\n\t}\n\n\tcanDefend(){\n\t\treturn this._states.canDefend();\n\t}\n\n\tcanCast(){\n\t\treturn this._states.canCast();\n\t}\n\n\t/**\n\t * @property {States} states - current char states. (silenced, paralyzed, etc.)\n\t */\n\tget states(){return this._states; }\n\tset states(v) { this._states = new States(); }\n\n\n\tget instanced() { return true; }\n\t//set instanced(v) {}\n\n\tget regen() { return this._regen; }\n\tset regen(v) { this._regen = ( v instanceof Stat ) ? v : new Stat(v); }\n\n\tget alive() { return this.hp.value > 0; }\n\n\t/**\n\t * @property {Object} context - context for dot mods/effects,\n\t * spells.\n\t * @todo: allow Player applyMods to work naturally.\n\t */\n\tget context(){ return this._context; }\n\tset context(v) { this._context = v;}\n\n\tconstructor( vars ){\n\n\t\tif ( vars ) {\n\t\t\tthis.id = vars.id;\t// useful for debugging.\n\t\t\tassignNoFunc( this, vars );\n\t\t}\n\n\t\tthis.type = NPC;\n\n\t\tthis._states = new States();\n\n\t\tthis.immunities = this.immunities || {};\n\t\tthis._resist = this._resist || {};\n\t\tif ( !this.bonuses ) this.bonuses = {};\n\n\t\t/**\n\t\t * @property {Object[]} dots - timed/ongoing effects.\n\t\t*/\n\t\tif ( !this.dots ) this._dots = [];\n\n\t\t/**\n\t\t * @property {number} timer\n\t\t */\n\t\tthis.timer = this.timer || 0;\n\n\t}\n\n\t/**\n\t * Revive from data after Game state restored.\n\t * @param {GameState} gs\n\t */\n\trevive( gs ){\n\n\t\tthis.reviveDots(gs);\n\t\t//this._states.refresh(this._dots);\n\n\t}\n\n\treviveDots(gs) {\n\t\tfor( let i = this.dots.length-1; i>=0; i--) {\n\t\t\tthis.dots[i].revive(gs);\n\t\t\tthis._states.add( this._dots[i]);\n\t\t}\n\t}\n\n\t/**\n\t * Use char state ( charmed, rage, etc ) to change the a default action target.\n\t * to new target type.\n\t * @param {?string} targ - type of target, ally, enemy, self etc.\n\t * @returns {string} - new target based on char state.\n\t */\n\tretarget( targ ){\n\t\treturn this._states.retarget(targ);\n\t}\n\n\t/**\n\t * Cure dot with the given state.\n\t * @param {string||string[]} state\n\t */\n\tcure( state ) {\n\n\t\tif ( Array.isArray(state )) {\n\t\t\tfor( let i = state.length-1; i>=0; i-- ) {\n\t\t\t\tthis.cure(state[i]);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tfor( let i = this.dots.length-1; i>= 0; i-- ) {\n\t\t\t//console.log('TRY cure: ' + this.dots[i].id + ': ' + this.dots[i].kind );\n\t\t\tif ( this.dots[i].id === state || this.dots[i].kind === state) {\n\t\t\t\tconsole.log('CURING: ' + state );\n\t\t\t\tthis.rmDot(i);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * try casting spell from player spelllist.\n\t * @returns {?GData}\n\t */\n\ttryCast(){\n\t\treturn this.spells ? this.spells.nextUsable(this.context) : null;\n\t}\n\n\t/**\n\t * Called once game actually begins. Dot-mods can't be applied\n\t * before game start because they can trigger game functions.\n\t */\n\tbegin() {\n\t}\n\n\t/**\n\t * Base item of dot.\n\t * @param {Dot|object|Array} dot\n\t * @param {?object} source\n\t * @param {number} duration - duration override\n\t */\n\taddDot( dot, source, duration=0 ) {\n\n\t\tif ( Array.isArray(dot)) {\n\t\t\treturn dot.forEach(v=>this.addDot(v,source,duration));\n\t\t}\n\n\t\tlet id = dot;\n\t\tif ( typeof dot === 'string') {\n\n\t\t\tdot = this.context.state.getData(dot);\n\t\t\tif ( !dot ) return\n\t\t\tdot = cloneClass(dot);\n\n\n\t\t} else {\n\n\t\t\tid = dot.id;\n\n\t\t\tdot = cloneClass(dot );\n\t\t\tlet orig = this.context.state.getData( id );\n\t\t\tif ( orig && orig.type === TYP_STATE ) this.mergeDot( dot, orig );\n\n\t\t}\n\t\tif ( dot[ TYP_PCT ] && !dot[TYP_PCT].roll() ) {\n\t\t\treturn;\n\t\t}\n\n\n\t\tif ( !id ) {\n\t\t\tid = dot.id = (source ? source.name || source.id : null );\n\t\t\tif ( !id) return;\n\t\t}\n\n\t\tif ( dot.flags && this.rollResist(dot.kind||id) ) {\n\t\t\tEvents.emit( RESISTED, this, (dot.kind||dot.name));\n\t\t\treturn;\n\t\t}\n\n\t\tif ( duration === 0 ) duration = dot.duration;\n\n\t\tlet cur = this.dots.find( d=>d.id===id);\n\t\tif ( cur !== undefined ) {\n\n\t\t\tvar level = dot.level || source ? source.level || 0 : 0;\n\t\t\tif ( cur.level >= level ) {\n\t\t\t\tcur.extend( duration );\n\t\t\t\treturn;\n\n\t\t\t}\n\t\t\tthis.removeDot( cur );\n\n\t\t}\n\n\t\tif ( !(dot instanceof Dot) ) {\n\t\t\tdot = new Dot(dot,source); //Game.state.mkDot( dot, source, duration );\n\t\t\tdot.duration = duration;\n\t\t}\n\n\t\tthis.applyDot( dot );\n\n\t}\n\n\n\t/**\n\t * Merge state or dot into this one.\n\t * @param {object} dot\n\t * @param {Dot} st\n\t */\n\tmergeDot( dot, st ) {\n\n\t\tmergeSafe( dot, st );\n\t\tdot.flags = dot.flags | st.flags;\n\t\tdot.adj = dot.adj || st.adj;\n\n\t\tconsole.log('dot flags: ' + dot.flags );\n\n\t}\n\n\tapplyDot( dot ) {\n\n\t\tthis._states.add( dot );\n\t\tthis.dots.push( dot );\n\n\t\tif ( dot.mod ) this.context.applyMods( dot.mod );\n\t\tif ( dot.flags ) Events.emit( CHAR_STATE, this, dot );\n\t}\n\n\tremoveDot( dot ) {\n\t\tlet id = dot.id;\n\t\tthis.rmDot( this.dots.findIndex(d=>d.id===id) );\n\t}\n\n\t/**\n\t * Remove dot by index.\n\t * @param {number} i\n\t */\n\trmDot( i ){\n\n\t\tif ( i < 0 ) return;\n\n\t\tlet dot = this.dots[i];\n\t\tthis.dots.splice(i,1);\n\n\t\tif ( dot.mod ) this.context.removeMods( dot.mod );\n\t\tif ( dot.flags ) this._states.remove( dot );\n\n\t}\n\n\t/**\n\t * Perform update effects.\n\t * @param {number} dt - elapsed time.\n\t */\n\tupdate( dt ) {\n\n\t\tlet dots = this.dots;\n\n\t\tfor( let i = dots.length-1; i >= 0; i-- ) {\n\n\t\t\tvar dot = dots[i];\n\t\t\tif ( !dot.tick(dt) ) continue;\n\n\t\t\t// ignore any remainder beyond 0.\n\t\t\t// @note: dots tick at second-intervals, => no dt.\n\t\t\tif ( dot.effect ) this.context.applyVars( dot.effect, 1 );\n\t\t\tif ( dot.damage || dot.cure ) ApplyAction( this, dot, dot.source );\n\n\t\t\tif ( dot.duration <= dt ) {\n\t\t\t\tthis.rmDot(i);\n\t\t\t}\n\n\t\t}\n\t\tif ( this.regen ) this.hp += ( this.regen*dt );\n\n\t}\n\n\t/**\n\t * Get Combat action.\n\t * @param {number} dt\n\t */\n\tcombat(dt) {\n\n\t\tif ( !this.alive ) return;\n\n\t\tthis.timer -= dt;\n\n\t\tif ( this.timer <= 0 ) {\n\n\t\t\tthis.timer += getDelay( this.speed );\n\n\t\t\tif ( this.spells && Math.random()<0.8 ) {\n\n\t\t\t\tlet s = this.tryCast()\n\t\t\t\tif ( s ) {\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tif ( s.attack || s.action ) {\n\t\t\t\t\t\tEvents.emit( CHAR_ACTION, s, this.context );\n\t\t\t\t\t}\t\t\t\n\t\t\t\t\tif ( s.mod ) { \n\t\t\t\t\t\tthis.context.applyMods( this.mod ); \n\t\t\t\t\t\tEvents.emit( EVT_COMBAT, this.name + ' uses ' + s.name );\n\t\t\t\t\t}\n\t\t\t\t\tif ( s.create ) this.context.create( s.create );\n\t\t\t\t\tif ( s.result ) {\n\t\t\t\t\t\tEvents.emit( EVT_COMBAT, this.name + ' uses ' + s.name );\n\t\t\t\t\t\tthis.context.applyVars( s.result, 1 );\n\t\t\t\t\t}\n\t\t\t\t\tif ( s.dot ) {\n\t\t\t\t\t\tEvents.emit( EVT_COMBAT, this.name + ' uses ' + s.name );\n\t\t\t\t\t\tthis.context.self.addDot( s.dot, s );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t\treturn this.getCause(NO_ATTACK) || this.getAttack();\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Get bonus damage for the damage type.\n\t * @param {string} kind\n\t * @returns {number}\n\t */\n\tgetBonus(kind) {\n\t\treturn this.bonuses[kind] || 0;\n\t}\n\n\tgetAttack(){\n\n\t\tif ( Array.isArray(this.attack) ) return this.attack[ Math.floor( Math.random()*this.attack.length ) ];\n\t\treturn this.attack || this;\n\n\t}\n\n\thasStatus(stat) { return this.states[stat] > 0; }\n\tisImmune(kind) { return this.immunities[kind] > 0; }\n\n\t/**\n\t * Roll a resistance check against the given damage type.\n\t * @param {string} kind - kind of damage.\n\t */\n\ttryResist(kind) {\n\n\t\treturn ( this.resist && this.resist[kind] ) ? 100*Math.random() < this.resist[kind] : false;\n\n\t}\n\n\t/**\n\t * @param {string} [kind=undefined]\n\t * @returns {number} tohit.\n\t */\n\tgetHit(kind) {\n\t\treturn this.tohit.valueOf();\n\t}\n\n\t/**\n\t * Perform a resistance roll for a damage/dot kind, with a base percent\n\t * success.\n\t * @param {string} kind\n\t * @param {number} [base=NaN]\n\t * @returns {boolean}\n\t */\n\trollResist( kind, base=null ) {\n\n\t\tlet res = (this._resist[kind]||0)+ ( base||10);\n\t\treturn res > 100*Math.random();\n\n\t}\n\n\t/**\n\t *\n\t * @param {*} kind\n\t * @returns {number} 0-based resist percent.\n\t */\n\tgetResist(kind) {\n\n\t\treturn (this._resist[kind]||0)/100;\n\t}\n\n\tremoveResist( kind, amt ) {\n\t\tif ( this._resist[kind] ) this._resist[kind] -= amt;\n\t}\n\n\taddResist( kind, amt ) {\n\n\t\tif ( !this._resist[kind] ) {\n\n\t\t\t//Vue.set( this._resist, kind, amt.valueOf() );\n\t\t\tthis._resist[kind] = amt.valueOf();\n\n\t\t} else this._resist[kind].base += amt;\n\n\t}\n\n\taddStatus(stat) {\n\t\tthis.states[stat] = this.states[stat] ? this.states[stat] + 1 : 1;\n\t}\n\n\tremoveStatus(stat) {\n\t\tthis.states[stat] = this.states[stat] ? this.states[stat] - 1 : 0;\n\t}\n\n\t/**\n\t *\n\t * @param {string} kind\n\t */\n\taddImmune(kind){\n\t\tthis.immunities[kind] = this.immunities[kind] ? this.immunities[kind] + 1 : 1;\n\t}\n\n\t/**\n\t *\n\t * @param {string} kind\n\t */\n\tremoveImmune(kind) {\n\t\tthis.immunities[kind] = this.immunities[kind] ? this.immunities[kind] - 1 : 0;\n\t}\n\n}\n\nmergeClass( Char, Base );","import {cloneClass} from 'objecty';\nimport { PrepData } from '../modules/parsing';\n\n/**\n * Proxy GameState for Npcs\n */\nexport class NpcState {\n\n\tconstructor( gs, caster){\n\n\t\tthis.state = gs;\n\t\tthis.self = caster;\n\n\t\t/**\n\t\t * @property {Map<string,GData>} npcItems\n\t\t */\n\t\tthis.npcItems = new Map();\n\n\n\t}\n\n\t//get player(){return this.self; }\n\n\tnextId(id){\n\t\treturn this.state.nextId(id);\n\t}\n\n\tgetSlot(id, type) {\n\t\treturn null;\n\t}\n\n\tsetSlot(slot, v){\n\t\treturn;\n\t}\n\n\tfindInstance(id){\n\t\treturn null;\n\t}\n\n\tgetUnique(id){return this.state.getUnique(id)}\n\n\tfindData(id, any=false) {\n\t\treturn this.getData(p);\n\t}\n\n\thasUnique(id){return false}\n\n\n\n\t/**\n\t *\n\t * @param {string} p\n\t */\n\tgetData( p ){\n\n\t\t// appears to be check for special variables defined on state directly;\n\t\t// e.g. explore. @todo many issues with this.\n\t\tif ( p === 'self' ) {\n\t\t\treturn this.self;\n\t\t} else if ( this.state[p] ) return this.state[p];\n\n\t\tlet it = this.npcItems.get(p);\n\t\tif ( it !== undefined ) return it;\n\n\n\n\t\tit = this.state.getData(p);\n\t\tif ( it ) {\n\n\t\t\tif ( it.isRecipe ) return it;\n\t\t\t//console.log('NEW NPC ITEM: ' + p + ': ' + it );\n\t\t\treturn this.makeNpcItem( p, it );\n\n\t\t} else console.log('item not found: ' + p );\n\n\t\treturn null;\n\n\t}\n\n\tmakeNpcItem( p, data ){\n\n\t\t//console.log('MAKE NPC ITEM: ' + data.id );\n\n\t\tlet copy;\n\n\t\tif ( data.template ) {\n\t\t\tcopy = cloneClass( data.template  || data);\n\t\t\tcopy = PrepData(copy, data.id );\n\t\t} else copy = cloneClass(data,{});\n\n\t\tif ( data.constructor ) {\n\t\t\t//console.log('using constr: ' + data.constructor.name );\n\t\t\tcopy = new data.constructor( copy );\n\t\t}\n\n\t\tif ( copy === null || copy === undefined ) {\n\t\t\tconsole.log('NPC: Cant create: ' + p );\n\t\t\tcopy = data;\n\t\t}\n\n\t\tthis.npcItems.set( p, copy );\n\t\treturn copy;\n\t}\n\n}","import { NpcState } from \"./npcState\";\nimport Events, { EVT_EVENT } from \"../events\";\nimport { P_TITLE, P_LOG, TYP_PCT, MONSTER } from \"../values/consts\";\nimport { TICK_LEN } from '../game';\n\nimport { assign, clone } from 'objecty';\n\n/**\n * @interface Context\n * Alternate context for a data item (NPC spellcaster, etc.)\n */\nexport default class Context {\n\n\tget runner() { return this._runner;}\n\tset runner(v) { this._runner = v;}\n\n\tget state(){return this._state;}\n\tset state(v) { this._state=v}\n\n\t/**\n\t * @property {Char} self - caster/user of any spell/action.\n\t */\n\tget self(){ return this._state.self; }\n\tset self(v){ this._state.self = v }\n\n\tconstructor( stateObj, caster ) {\n\n\t\tthis.state = new NpcState( stateObj, caster );\n\n\t}\n\n\tgetData(id){\n\t\treturn this.state.getData(id);\n\t}\n\n\ttryItem( it ){\n\t}\n\n\ttryUseOn( it, targ ) {\n\t}\n\n\ttryBuy( it ) {\n\t\treturn true;\n\t}\n\n\t/**\n\t * Don't unlock items.\n\t * @param {*} test\n\t */\n\tunlockTest(test){\n\t\treturn false;\n\t}\n\n\tcraft(it){\n\t\treturn true;\n\t}\n\n\tcreate( it, keep, count=1 ) {\n\n\t\tif ( typeof it === 'string') it = this.state.getData(it);\n\t\telse if ( Array.isArray(it) ) {\n\t\t\tfor( let i = it.length-1; i>=0; i--) {\n\t\t\t\tthis.create(it[i], false, count);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (!it ) return;\n\n\t\tfor( let i = count; i >0; i--) {\n\n\t\t\tif ( it.type === MONSTER ) {\n\t\t\t\tif ( it.onCreate ) it.onCreate( this, this.self.team, false );\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n\tfilled(){\n\t\treturn false;\n\t}\n\n\tremoveMods( mod, amt ){\n\t\tthis.applyMods(mod,-amt);\n\t}\n\n\tremove(id, amt) {\n\t}\n\n\tdisable(it){\n\t}\n\n\t/**\n\t * Use item on target without paying running costs.\n\t * Item effects/mods are applied to target.\n\t * @param {*} it\n\t * @param {*} targ\n\t */\n\tuseOn( it, targ ) {\n\t}\n\t\n\n\t/**\n\t * Not implemented.\n\t * @param {*} it\n\t */\n\taddTimer(it){\n\t}\n\n\t/**\n\t * Not implemented\n\t */\n\tgetLoot(){\n\t}\n\n\t/**\n\t * Determine if an object cost can be paid before the pay attempt\n\t * is actually made.\n\t * @param {Array|Object} cost\n\t * @returns {boolean} true if cost can be paid.\n\t */\n\tcanPay( cost, amt=1 ) {\n\n\t\tif (cost===null||cost===undefined) return true;\n\t\t// @note @todo: this doesnt work since some items might charge same cost.\n\t\tif (Array.isArray(cost) ) return cost.every( v=>this.canPay(v,amt), this );\n\n\t\tlet res;\n\n\t\tif ( typeof cost === 'object' ){\n\n\t\t\tfor( let p in cost ) {\n\n\t\t\t\tlet sub = cost[p];\n\n\t\t\t\tres = this.state.getData(p);\n\t\t\t\tif ( !res ) return false;\n\t\t\t\telse if ( res.instanced || res.isRecipe ) {\n\n\t\t\t\t\t/* @todo: ensure correct inventory used. map type-> default inventory? */\n\t\t\t\t\treturn this.state.inventory.hasCount( res, amt );\n\n\t\t\t\t} else if ( !isNaN(sub) || sub.isRVal ) {\n\n\t\t\t\t\tif ( !res.canPay(sub*amt) ) return false;\n\t\t\t\t\t//if ( res.value < sub*amt ) return false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// things like research.max. with suboject costs.\n\t\t\t\t\tif ( !this.canPayObj( res, sub, amt ) ) return false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Follow object path to determine ability to pay.\n\t * @param {object} parent - parent object.\n\t * @param {object|number} cost - cost expected on parent or sub.\n\t * @param {number} amt - cost multiplier.\n\t * @returns {boolean}\n\t */\n\tcanPayObj( parent, cost, amt=1 ){\n\n\t\tif ( !parent ) return false;\n\n\t\tif ( (cost instanceof RValue) || !isNaN(cost)){\n\t\t\treturn parent.value >= cost;\n\t\t}\n\n\t\tfor( let p in cost ) {\n\n\t\t\tvar val = cost[p];\n\t\t\tif ( !isNaN(val) || (val instanceof RValue) ) {\n\t\t\t\tif ( parent.value < val*amt ) return false;\n\t\t\t} else if ( typeof val === 'object'){\n\n\n\t\t\t\t//console.log('checking sub cost: ' + p + ' ' +cost.constructor.name );\n\t\t\t\t//if ( parent ) console.log( 'parent: ' + parent.id );\n\n\t\t\t\tif ( !this.canPayObj( parent[p], val, amt ) ) return false;\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tcanEquip(it) {return true;}\n\n\tequip(it){\n\t}\n\n\tunequip( slot, it ){\n\t}\n\n\tonUnequip(it){\n\t}\n\n\t/**\n\t * Needed for proper item interactions.\n\t * @param {*} it\n\t */\n\tsetSlot( it ) {\n\t}\n\n\t/**\n\t * Default will do nothing for now.\n\t * @param {*} cost\n\t */\n\tpayCost(cost) {\n\t}\n\n\tcanMod(mod){\n\t\treturn true;\n\t}\n\n\tpayInst( p, amt ) {\n\t}\n\n\tsetTask(it){\n\n\t}\n\n\t/**\n\t * Determines whether an item can be run as a continuous task.\n\t * @returns {boolean}\n\t */\n\tcanRun( it ) {\n\n\t\tif ( !it.canRun ) {\n\t\t\tconsole.error( it.id + ' no canRun()');\n\t\t\treturn false;\n\t\t} else return it.canRun( this, TICK_LEN );\n\n\t}\n\n\tcanUse(it) {\n\t\treturn true;\n\t}\n\n\tapplyMods( mod, amt=1) {\n\n\t\tif ( !mod ) return;\n\n\t\tif ( Array.isArray(mod)  ) {\n\t\t\tfor( let m of mod ) this.applyMods(m, amt);\n\t\t} else if ( typeof mod === 'object' ) {\n\n\t\t\tfor( let p in mod ) {\n\n\t\t\t\tvar target = this.getData( p );\n\t\t\t\tif ( target === undefined || target === null ) continue;\n\t\t\t\tif ( target.applyMods) {\n\n\t\t\t\t\t\ttarget.applyMods( mod[p], amt );\n\n\t\t\t\t} else console.warn( 'no applyMods(): ' + target );\n\t\t\t}\n\n\t\t} else if ( typeof mod === 'string') {\n\n\t\t\tlet t = this.getData(mod);\n\t\t\tif ( t ) {\n\n\t\t\t\tconsole.warn('!!!!!!!!!!ADDED NUMBER MOD: ' + mod );\n\t\t\t\tt.amount( this, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tapplyVars( vars, dt ) {\n\t\t\n\t\tif (  Array.isArray(vars) ) {\n\t\t\tfor( let e of vars ) { this.applyVars( e,dt); }\n\n\t\t} else if ( typeof vars === 'object' ) {\n\n\t\t\tlet target, e = vars[TYP_PCT];\n\t\t\tif ( e && !e.roll() ) return;\n\n\t\t\tfor( let p in vars ){\n\t\t\t\t\n\t\t\t\ttarget = this.getData(p);\n\t\t\t\te = vars[p];\n\n\t\t\t\tif ( target === undefined || target === null ) {\n\n\t\t\t\t\tif ( p === P_TITLE ) this.self.addTitle( e );\n\t\t\t\t\telse if ( p === P_LOG ) Events.emit( EVT_EVENT, e );\n\t\t\t\t\telse console.warn( p + ' no effect target: ' + e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( typeof e === 'number' ) {\n\n\t\t\t\t\t\ttarget.amount( e*dt );\n\n\t\t\t\t\t} else if ( e.isRVal ) {\n\t\t\t\t\t\t// messy code. this shouldn't be here. what's going on?!?!\n\t\t\t\t\t\ttarget.amount( dt*e.getApply(this.state, target ) );\n\n\t\t\t\t\t} else if ( e === true ) {\n\n\t\t\t\t\t\ttarget.doUnlock(this);\n\t\t\t\t\t\ttarget.onUse( this );\n\n\t\t\t\t\t} else if ( e.type === TYP_PCT ) {\n\n\t\t\t\t\t\tif ( e.roll() ) target.amount( 1 );\n\n\t\t\t\t\t} else target.applyVars(e,dt);\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else if ( typeof vars === 'string') {\n\t\t\tlet target = this.getData(vars);\n\t\t\tif ( target !== undefined ) {\n\t\t\t\tif(target.amount.length === 1){ \n\t\t\t\t\ttarget.amount( dt ); \n\t\t\t\t}\n\t\t\t\telse if (target.amount.length === 2){ \n\t\t\t\t\ttarget.amount(this, dt ); \n\t\t\t\t}\n\t\t\t}\t\t\n\n\t\t}\n\n\t}\n\n}","import Char from './char';\nimport Range, { RangeTest } from '../values/range';\nimport Percent, { PercentTest } from '../values/percent';\nimport MaxStat from '../values/maxStat';\nimport Attack from './attack';\nimport { TEAM_NPC } from 'values/consts';\nimport { ParseDmg } from '../values/combatVars'\nimport { mergeClass } from '../items/base';\nimport Instance from '../items/instance';\nimport Game from '../game';\nimport { MakeDataList } from '../gameState';\nimport Context from './context';\nimport { assignPublic } from '../util/util';\n\n/**\n * Class for specific Enemies/Minions in game.\n */\nexport default class Npc extends Char {\n\n\ttoJSON() {\n\n\t\tlet data = super.toJSON();\n\t\tdata.id = this.id;\n\n\t\tdata.cost = undefined;\n\t\tdata.context = undefined;\n\t\tdata.team = this.team||undefined;\n\n\t\tdata.timer = this.timer;\n\n\t\tdata.attack = this.attack;\n\n\t\tif ( this.template ){\n\t\t\tdata.template = this.template.id;\n\t\t\tif ( this._name != this.template.name ) data.name = this._name;\n\n\t\t} else data.name = this._name;\n\n\t\t//data.keep = this.keep;\n\n\t\t//data.died = this.died||undefined;\n\n\t\treturn data;\n\n\t}\n\n\t/**\n\t * @property {boolean} keep - whether to keep ally after combat.\n\t */\n\tget keep(){return this._keep;}\n\tset keep(v) { this._keep = v;}\n\n\t/**\n\t * @property {MaxStat} hp\n\t */\n\tget hp() { return this._hp; }\n\tset hp(v) {\n\n\t\tif ( this._hp === undefined || this._hp === null || typeof v === 'object') {\n\t\t\t this._hp = v instanceof MaxStat ? v : new MaxStat(v);\n\t\t} else this._hp.set( v );\n\n\t}\n\n\t/**\n\t * @property {object|string|object[]}\n\t */\n\tget loot() { return this._loot; }\n\tset loot( loot ){\n\n\t\tif ( typeof loot !== 'object'){\n\t\t\tthis._loot = loot;\n\t\t\treturn;\n\t\t}\n\n\t\tfor( var p in loot ) {\n\n\t\t\tvar sub = loot[p];\n\t\t\tif ( (typeof sub==='string') ) {\n\n\t\t\t\tif ( PercentTest.test(sub)) {\n\n\t\t\t\t\tloot[p] = new Percent(sub);\n\n\t\t\t\t} else if ( RangeTest.test(sub) ) {\n\n\t\t\t\t\tloot[p ] = new Range(sub);\n\n\t\t\t\t} else if ( !isNaN(sub) ) loot[p] = Number(sub);\n\n\t\t\t}\n\t\t}\n\n\t\tthis._loot = loot;\n\n\t}\n\n\tget damage() { return this._damage; }\n\tset damage(v) { this._damage = ParseDmg(v); }\n\n\t/**\n\t * @property {boolean} active - whether minion is active in combat.\n\t */\n\tget active() { return this._active; }\n\tset active(v) { this._active = v; }\n\n\t/**\n\t * @property {DataList} spells - list of spells char can cast.\n\t */\n\tget spells(){ return this._spells; }\n\tset spells(v) {\n\t\tthis._spells = MakeDataList(v);\n\t}\n\n\tconstructor(vars, save=null ) {\n\n\t\tsuper( vars );\n\n\t\tif ( save ) assignPublic( this, save );\n\n\t\t//if ( this.id.includes('mecha')) console.dir(this.attack, 'post-save');\n\n\t\tthis.dodge = this.dodge || this.level/2;\n\n\t\tthis.active = (this.active === undefined || this.active === null) ? false : this._active;\n\n\t\tthis.context = new Context( Game.state, this );\n\n\t\tif ( this._spells ) {\n\t\t\tthis.spells.revive( this._context.state );\n\n\t\t}\n\n\n\t\tif ( typeof this.hp === 'string' ) this.hp = new Range(this.hp).value;\n\t\telse if ( this.hp instanceof Range ) {\n\n\t\t\tthis.hp = this.hp.value;\n\t\t}\n\t\tif (!this.hp ) { this.hp = 1; }\n\n\t\tif ( !this.team) this.team = TEAM_NPC;\n\t\tif ( !this.tohit ) this.tohit = 0;\n\n\t\tif ( this.dmg && (this.damage===null||this.damage===undefined) ) this.damage = this.dmg;\n\t\tif ( !this.attack ) {\n\t\t\tthis.attack = new Attack( this.damage );\n\t\t\tthis.damage = 0;\n\t\t}\n\n\t}\n\n\trevive(gs) {\n\n\t\tif ( typeof this.template === 'string') this.template = gs.getData(this.template);\n\t\tif ( this.template ) {\n\n\t\t\tthis.attack = this.template.attack;\n\t\t\t//mergeSafe( this.template, this );\n\n\t\t}\n\t\tsuper.revive(gs);\n\n\n\t}\n\n\t/**\n\t * Catch event. Do nothing.\n\t * @param {*} g\n\t */\n\tonUse(g){\n\t}\n\n\t/**\n\t * Resurrect.\n\t */\n\tres() {\n\t\tthis.hp = 1;\n\t}\n\n\t/**\n\t *\n\t * @param {number} dt\n\t */\n\trest(dt) {\n\t\tthis.hp.amount( 0.01*this.hp.max*dt );\n\t}\n\n}\n\nmergeClass( Npc, Instance )","import { quickSplice } from \"../util/array\";\nimport { TARGET_ALLIES, TARGET_ENEMIES, TARGET_ENEMY, TARGET_ALLY, TARGET_SELF, TARGET_RAND, TARGET_RANDG } from \"../values/combatVars\";\n\n\nexport const NO_ATTACK = 1;\nexport const NO_DEFEND = 2;\nexport const NO_SPELLS = 4;\nexport const CONFUSED = 8;\nexport const CHARMED = 16;\n\nexport const NO_ACT = NO_ATTACK + NO_DEFEND + NO_SPELLS;\nexport const IMMOBILE = NO_ATTACK + 32;\n\nexport const ParseFlags = (list)=>{\n\n\tif ( typeof list === 'string') list = list.split(',');\n\n\tlet f = 0;\n\n\tfor( let i = list.length-1; i >= 0; i-- ) {\n\n\t\tvar v = list[i];\n\t\tif ( v === 'noact') f |= NO_ACT;\n\t\telse if ( v === 'noattack') f |= NO_ATTACK;\n\t\telse if ( v === 'nodefend' ) f |= NO_DEFEND;\n\t\telse if ( v === 'nocast') f |= NO_SPELLS;\n\t\telse if ( v === 'confused') f |= CONFUSED;\n\t\telse if ( v === 'charmed') f |= CHARMED;\n\n\t}\n\treturn f;\n\n}\n\nconst ConfuseTargets = {\n\t[TARGET_ALLIES]:TARGET_RANDG,\n\t[TARGET_ENEMIES]:TARGET_RANDG,\n\t[TARGET_ENEMY]:TARGET_RAND,\n\t[TARGET_ALLY]:TARGET_RAND,\n\t[TARGET_SELF]:TARGET_RAND\n}\nconst CharmTargets = {\n\t[TARGET_ALLIES]:TARGET_ENEMIES,\n\t[TARGET_ENEMIES]:TARGET_ALLIES,\n\t[TARGET_ENEMY]:TARGET_ALLY,\n\t[TARGET_ALLY]:TARGET_ENEMY,\n};\n\n/**\n * State information about a character.\n */\nexport default class States {\n\n\ttoJSON(){return undefined;}\n\n\t/**\n\t * @property {.<number,Dot[]>} causes - causes of each state flag.\n\t */\n\tget causes(){return this._causes; }\n\tset causes(v) { this._causes = v; }\n\n\tget flags(){return this._flags;}\n\tset flags(v) { this._flags = v;}\n\n\tcanCast() { return (this._flags & NO_SPELLS) === 0 }\n\tcanAttack() { return (this._flags & NO_ATTACK) === 0 }\n\tcanDefend() { return (this._flags & NO_DEFEND ) === 0 }\n\n\t/**\n\t *\n\t * @param {string} flag\n\t * @returns {boolean}\n\t */\n\thas( flag ) {\n\n\t\tvar a = this._causes[flag];\n\t\treturn a && a.length > 0;\n\n\t}\n\n\tconstructor(){\n\n\t\tthis._causes = {};\n\t\tthis._flags = 0;\n\n\t}\n\n\t/**\n\t * Retarget based on flags.\n\t * @param {string} targ\n\t */\n\tretarget( targ ){\n\n\t\tif ( (this.flags & CONFUSED) > 0 ) {\n\n\t\t\tif ( !targ ) return TARGET_RAND;\n\t\t\treturn ConfuseTargets[targ];\n\n\t\t} else if ( (this.flags & CHARMED) > 0) {\n\n\t\t\tif ( !targ ) return TARGET_ALLY;\n\t\t\treturn CharmTargets[targ];\n\n\t\t}\n\t\treturn targ;\n\n\t}\n\n\t/**\n\t * Get cause of a flag being set, or null\n\t * if flag not set.\n\t * @param {number} flag\n\t * @returns {Dot|null}\n\t */\n\tgetCause(flag) {\n\n\t\tlet a = this._causes[flag];\n\t\treturn (a && a.length > 0) ? a[0] : null;\n\n\t}\n\n\t/**\n\t * Blame each bit-flag in flags on cause.\n\t * @param {Dot} cause\n\t */\n\tadd( cause ) {\n\n\t\tif ( !cause ) console.warn('no cause: ' + cause );\n\n\t\tlet flags = cause.flags;\n\t\tif ( flags === 0 ) return;\n\n\t\t//console.log('ADD FLAGS: ' + flags );\n\n\t\tlet f = 1;\n\t\twhile ( f <= flags ) {\n\n\t\t\tif ( (flags & f) > 0 ) this._addCause( f, cause );\n\t\t\tf *= 2;\n\n\t\t}\n\t\tthis._flags |= flags;\n\n\t}\n\n\tremove( dot ) {\n\n\t\tif ( !dot ) return;\n\n\t\tlet flags = dot.flags;\n\t\tlet f = 1;\n\n\t\twhile ( f <= flags ) {\n\n\t\t\tif ( (flags & f) > 0 ) this._rmCause( f, dot );\n\t\t\tf *= 2;\n\n\t\t}\n\n\t}\n\n\t_rmCause( flag, cause ) {\n\n\t\tlet a = this._causes[flag];\n\t\tif ( !a ) return;\n\n\t\tlet ind = a.indexOf(cause);\n\t\tif ( ind >= 0 ) {\n\n\t\t\tquickSplice( a, ind );\n\t\t\tif ( a.length === 0 ) this.flags ^= flag;\n\n\t\t}\n\n\t}\n\n\t_addCause( flag, cause ) {\n\n\t\tlet a = this._causes[flag];\n\t\tif ( !a ) a = this._causes[flag] = [cause]\n\t\telse a.push( cause );\n\n\t}\n\n\t/**\n\t * Refresh all state flags from active dots.\n\t * @param {Dot[]} dots\n\t */\n\trefresh( dots ) {\n\n\t\tthis._flags = 0;\n\t\tfor( let p in this._causes ) {\n\t\t\tthis._causes[p] = null;\n\t\t}\n\n\t\tfor( let i = dots.length-1; i >= 0; i-- ) {\n\n\t\t\tvar d = dots[i];\n\t\t\tif ( d.flags ) {\n\t\t\t\tthis.add( d );\n\t\t\t}\n\n\t\t}\n\n\t} // refresh()\n\n}","import Attack from './attack';\n\nimport Mod from '../values/mods/mod';\nimport { ParseMods } from 'modules/parsing';\nimport Item from '../items/item';\nimport Instance from '../items/instance';\nimport { WEARABLE, ARMOR, WEAPON, ENCHANT } from '../values/consts';\nimport Stat from '../values/rvals/stat';\nimport MaxStat from '../values/maxStat';\n\n\nexport default class Wearable extends Item {\n\n\ttoJSON() {\n\n\t\tlet data = super.toJSON();\n\n\t\tif ( !this.save ) data.material = data.kind = undefined;\n\t\tdata.id = this.id;\n\n\t\tif ( !this.template ) {\n\n\t\t\t//console.warn('MISSING TEMPLATE: ' + this.id );\n\t\t\tdata.type = this.type;\n\n\t\t} else if ( typeof this.template === 'string' ) {\n\n\t\t\tdata.template = this.template;\n\n\t\t} else data.template = this.template.id;\n\n\t\tdata.name = this.sname;\n\t\t\n\t\tdata.enchants = this.enchants; //explicitly saving those, let's see if it helps with the disappearing act.\n\t\tif ( this.mod ) data.mod = this.mod;\n\t\t\n\t\tif ( this.material ) {\n\t\t\tif ( !data ) data = {};\n\t\t\tdata.material = this.material.id;\n\t\t}\n\n\t\treturn data ? data : undefined;\n\n\t}\n\n\t/**\n\t * @property {number} enchants - total level of all enchantments applied.\n\t */\n\tget enchants(){return this._enchants}\n\tset enchants(v){\n\n\t\tif ( this._enchants === undefined || this._enchants === null || typeof v === 'object') {\n\t\t\tthis._enchants = v instanceof MaxStat ? v : new MaxStat(v, true);\n\t   } else this._enchants.set( v );\n\n\t}\n\n\t/**\n\t * @property {Damage} dmg\n\t * @alias attack.damage\n\t */\n\tget dmg(){\n\t\treturn this.damage;\n\t}\n\t/**\n\t * @property {Damage} damage\n\t * @alias attack.damage\n\t */\n\tget damage() {\n\t\treturn this._attack ? this._attack.damage : 0;\n\t}\n\n\tget equippable() { return true; }\n\n\t/**\n\t * @property {Alter} material - (may be string before revive.)\n\t */\n\tget material() { return this._material; }\n\tset material(v) { this._material=v;}\n\n\t/**\n\t * @property {Stat} armor\n\t */\n\tget armor(){ return this._armor; }\n\tset armor(v) {\n\n\t\tif ( this._armor ) {\n\t\t\t// NOTE: assign() copies _armor directly, so setter is never called. @todo fix this.\n\t\t\tif ( typeof this._armor === 'number') this._armor = new Stat(this._armor);\n\t\t\tthis._armor.base = v;\n\t\t} else {\n\t\t\tthis._armor = new Stat(v);\n\t\t}\n\n\t}\n\n\t/**\n\t * @property {Attack} attack\n\t */\n\tget attack() { return this._attack; }\n\tset attack(v) {\n\n\t\tif ( v ) {\n\n\t\t\tif ( v !== this._attack ) {\n\n\t\t\t\tif ( v instanceof Attack  ) {\n\t\t\t\t\tthis._attack = v.clone();\n\t\t\t\t} else this._attack = new Attack(v);\n\n\t\t\t} else {\n\t\t\t\tif ( !(v instanceof Attack) ) this._attack = new Attack(v);\n\t\t\t}\n\n\t\t} else {\n\t\t\tthis._attack = null;\n\t\t}\n\n\t}\n\n\t/**\n\t * @property {boolean} worn\n\t */\n\tget worn(){ return this.value > 0; }\n\n\t/**\n\t * @property {string} slot\n\t */\n\tget slot(){return this._slot; }\n\tset slot(v){this._slot=v;}\n\n\t/**\n\t * @property {string} kind - subtype of wearable.\n\t */\n\tget kind() { return this._kind; }\n\tset kind(v) { this._kind = v; }\n\n\tconstructor(vars=null, save=null ){\n\n\t\tsuper( vars, save );\n\n\t\tthis.stack = false;\n\t\tthis.consume = false;\n\n\t\t//if ( vars ) cloneClass( vars, this );\n\t\t//if ( save ) Object.assign( this, save );\n\n\t\tif ( !this.enchants ) this.enchants = 0;\n\t\tif (!this.alters ) this.alters = [];\n\n\t\tthis.value = this.val = 0;\n\n\t\tif ( !this.type ) {\n\t\t\tconsole.warn(this.id + ' unknown wear type: ' + this.type );\n\t\t\tif ( this.attack ) {\n\t\t\t\tthis.type = WEAPON;\n\t\t\t} else if ( this.armor || this.slot != null ) this.type = ARMOR;\n\t\t\telse this.type = WEARABLE;\n\t\t}\n\n\t\tif ( this._attack ){\n\t\t\tthis.attack = this._attack;\n\t\t\tif ( !this._attack.name ) this._attack.name = this.name;\n\t\t}\n\n\t}\n\n\tmaxed() { return false; }\n\n\t/**\n\t * @note super.revive() cannot be called here because the revive is too complex.\n\t * @param {GameState} gs\n\t */\n\trevive( gs ) {\n\n\t\t//console.log('reviving: ' + this.id );\n\n\t\tif ( typeof this.material === 'string') this.material = gs.getData( this.material );\n\n\t\tif ( typeof this.recipe === 'string' ) this.template = gs.getData(this.recipe );\n\t\telse if ( typeof this.template === 'string' ) this.template = gs.getData( this.template );\n\n\t\tif ( this.template ) {\n\n\t\t\tif ( this.armor === null || this.armor === undefined ) this.armor = this.template.armor;\n\t\t\t// bonus applied for using item; not linked to attack.\n\t\t\tif ( this.tohit === null || this.tohit === undefined ) this.tohit = this.template.tohit || 0;\n\n\t\t\tif ( this.attack === null || this.attack === undefined ) this.attack = this.template.attack;\n\n\t\t\tthis.type = this.template.type || this.type;\n\n\t\t\t//mergeSafe( this, this.template );\n\n\t\t} else console.log('bad template: ' + this.template );\n\n\t\tif ( !this.level || (this.template && this.level <= this.template.level)) {\n\n\t\t\tif ( this.template && this.template.level ) this.level = this.template.level.valueOf() || 1;\n\t\t\telse this.level = 1;\n\n\t\t\tif ( this.material && this.material.level ) {\n\t\t\t\tconsole.log('MAT WITH LEVEL: ' + this.material.level );\n\t\t\t\tthis.level += this.material.level.valueOf() || 0;\n\t\t\t}\n\n\t\t}\n\n\t\tif(typeof this.alters.includes === \"function\")\n\t\t//{\n\t\t\tif ( this.material && !this.alters.includes(this.material.id)) {\n\t\t\t\t\tthis.alters.push(this.material.id);\n\t\t\t}\n\t\t//}\n\t\t\n\n\t\tif ( this.mod ) this.mod = ParseMods( this.mod, this.id, this );\n\t\t// @compat\n\t\tif ( !this.enchants.max ) this.calcMaxEnchants();\n\n\t\t/*console.log('WEARABLE LEVEL: ' + this.level + ' MAT: '+ (this.material ? this.material.level : 0 )\n\t\t + ' base: ' + (this.template ? this.template.level : 0 ) );*/\n\t\t //this.initAlters(gs);\n\t}\n\n\t/**\n\t * Test if item has an enchantment.\n\t * @param {string} id\n\t * @returns {boolean}\n\t */\n\thasEnchant(id){\n\t\treturn this.alters && this.alters.find( v=>v.id===id);\n\t}\n\n\tapplyMaterial( mat ) {\n\n\t\tif (!mat) return;\n\t\tthis.material = mat;\n\t\tconsole.log('APPLY MATERIAL: ' + mat.id );\n\n\t\tthis.doAlter( mat );\n\n\t}\n\n\t/**\n\t *\n\t * @param {Alter} it - enchantment being added.\n\t */\n\tdoAlter( it ) {\n\t\t\n\t\tif ( it.type === ENCHANT) this.enchants += it.level || 0;\n\t\tconsole.log('APPLY ALTER: ' + it.id );\n\n\t\tInstance.doAlter.call( this, it );\n\n\t}\n\n\tcalcMaxEnchants() {\n\n\t\tlet max = 0;\n\t\tif ( this.template ) {\n\n\t\t\tmax = this.template.enchants || 0;\n\n\t\t}\n\n\t\tconsole.log( this.id + ' RECALC ENCHANT max: ' + max );\n\t\tthis.enchants.max = max;\n\n\t}\n\n\t/**\n\t *\n\t * @param {Game} g\n\t */\n\tequip( g ) {\n\n\t\tlet p = g.state.player;\n\n\t\tif ( this.armor ) p.defense.add( this.armor );\n\t\tif ( this.type === 'weapon' ) p.addWeapon(this);\n\n\t\tthis.value = 1;\n\t\tif ( this.mod ) {\n\n\t\t\tfor( let p in this.mod ) {\n\t\t\t\tconsole.log('apply mod: ' + p );\n\t\t\t}\n\t\t\tg.applyMods( this.mod, 1 );\n\n\t\t} else {\n\t\t\t//console.log('no mods: '+ this.id );\n\t\t}\n\n\t}\n\tremod( g ) { \n\t\t//this is a copy of equip function meant to workaround the enchants loading bug. Applies mods from item but not the attack or armor.\n\t\tlet p = g.state.player;\n\t\tthis.value = 1;\n\t\tif ( this.mod ) {\n\n\t\t\tfor( let p in this.mod ) {\n\t\t\t\tconsole.log('apply mod: ' + p );\n\t\t\t}\n\t\t\tg.applyMods( this.mod, 1 );\n\n\t\t} else {\n\t\t\t//console.log('no mods: '+ this.id );\n\t\t}\n\n\t}\n\t/**\n\t *\n\t * @param {Game} g\n\t */\n\tunequip( g ) {\n\n\t\tlet p = g.state.player;\n\n\t\tif ( this.armor ) p.defense.add( -this.armor );\n\t\tif ( this.type === WEAPON ) p.removeWeapon( this );\n\n\t\tthis.value = 0;\n\n\t\tif ( this.mod ) {\n\t\t\tg.removeMods(this.mod)\n\t\t}\n\n\t}\n\n\tconvertMods(v) {\n\n\t\tlet t = typeof v;\n\t\tif ( v instanceof Mod ) return v;\n\n\t\tif ( t === 'object') {\n\n\t\t\tif ( v.id ) {\n\t\t\t\t//console.log('new mod: ' +this.id);\n\t\t\t\t//for( let p in v ) console.log( p + ' -> ' + v[p]);\n\t\t\t\treturn new Mod( v, v.id, this );\n\t\t\t} else {\n\n\t\t\t\tfor( let p in v ) {\n\t\t\t\t\tv[p] = this.convertMods( v[p] );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( t === 'string' || t==='number') return new Mod(v, this.id, this );\n\n\t\treturn v;\n\n\t}\n\n}","import Game from '../game';\nimport Proxy from './proxy';\nimport { TYP_RUN, ENCHANTSLOTS } from '../values/consts';\nimport Stat from '../values/rvals/stat';\nimport { itemRevive } from '../modules/itemgen';\nimport {assign } from 'objecty';\n\n/**\n * An enchantment in progress.\n * @note item is the enchantment, since the enchanment sets the base\n * cost, level, requirements, etc.\n */\nexport default class Enchanting extends Proxy {\n\n\ttoJSON(){\n\n\t\treturn {\n\t\t\titem:this.item.id,\n\t\t\ttarget:this.target,\n\t\t\texp:this._exp\n\t\t};\n\t}\n\n\tget type() { return TYP_RUN; }\n\n\tget controller() { return ENCHANTSLOTS; }\n\n\t/**\n\t * @property {?GData} target - target of the running item.\n\t * may be undefined if not applicable.\n\t */\n\tget target() { return this._target;}\n\tset target(v) {\n\t\tthis._target = v;\n\n\t}\n\n\tget exp(){ return this._exp; }\n\tset exp(v) { this._exp = v; }\n\n\tpercent() { return this._length ? Math.round(100*this._exp / this._length) : 0; }\n\n\tget length() { return this._length; }\n\tset length(v) { this._length = new Stat(v);}\n\n\tcanRun( g ) { return !this.done && this._item && this._target && this._item.canAlter( this._target ) }\n\tget done() { return this._exp >= this._length; }\n\n\t/**\n\t * If target is supplied, first element MUST be the item\n\t * being used with target.\n\t * @param {object|GData} [vars=null] - runnable variables OR runner item.\n\t * @param {targ} [targ=null]\n\t */\n\tconstructor( vars=null, targ=null ) {\n\n\t\tsuper();\n\n\t\tif ( targ ) {\n\n\t\t\tthis.target = targ;\n\t\t\tthis.item = vars;\n\n\t\t} else if (vars) assign( this, vars );\n\n\t\tthis.length = ( typeof this.item === 'object') ? this.item.length || 0 : 0;\n\t\tthis.exp = this._exp || 0;\n\n\t}\n\n\tupdate(dt){\n\n\t\tthis.exp += dt;\n\n\t\tif ( this.exp >= this.length ) {\n\t\t\tif ( this.target ) this.target.doAlter(this.item);// Game.useOn( this.item, this.target );\n\t\t}\n\n\t}\n\n\trevive( gs ) {\n\n\t\tsuper.revive(gs);\n\n\t\tif ( typeof this._target === 'string') this.target = gs.findData(this._target);\n\t\telse if ( typeof this._target === 'object') {\n\n\t\t\tthis._target = itemRevive( gs, this._target );\n\t\t}\n\n\t\tif ( this.item ) {\n\t\t\tthis._length = this.item.length;\n\t\t}\n\n\t}\n\n}","import { assign } from 'objecty';\n\n/**\n * @class Proxy - proxies an item to add functionality/different behavior.\n */\nexport default class Proxy {\n\n\t/**\n\t * @property {string} id - maybe a bad idea.\n\t */\n\tget id() { return 'prox_' + ( this.item ? this.item.id : '' ) + '_' +\n\t\t(this.target ? this.target.id : ''); }\n\n\t/**\n\t * @property {string} name\n\t */\n\tget name() { return this.item ? this.item.name : ''; }\n\tset name(v){}\n\n\tget instanced(){return true;}\n\n\tset count(v){}\n\n\thasTag(t) { return this.item && this.item.hasTag(t); }\n\thasTags(t) { return this.item && this.items.hasTag(t); }\n\n\tget buy() { return this.item ? this.item.buy : null; }\n\tget cost() { return this.item ? this.item.cost : null; }\n\tget run() { return this.item ? this.item.run : null; }\n\tget effect() { return this.item ? this.item.effect : null; }\n\n\tget level(){return this.item ? this.item.level: 0;}\n\n\tget length () {return this.item ? this.item.length : null }\n\tget perpetual() { return this._item ? this._item.perpetual : false }\n\n\t/**\n\t * @property {Item} item - item being run.\n\t */\n\tget item() { return this._item; }\n\tset item(v) { this._item = v; }\n\n\tget repeat() { return (this._item && this._item.repeat) || false; }\n\n\tget owned() { return this._item ? this.item.owned : false; }\n\tset owned(v) { if ( this._item ) this._item.owned = v; }\n\n\tget running() { return this.item ? this.item.running:false;}\n\tset running(v) {\n\t\tif ( this.item) this.item.running=v;\n\t}\n\n\tisProxy() { return true; }\n\n\tmaxed() { return !this.item || this.item.maxed(); }\n\tcanUse( g ) { return this._item && this._item.canUse( g ) }\n\tcanRun( g ) { return this._item && this._item.canRun( g ) }\n\n\tconstructor( vars=null ){\n\n\t\tif (vars) assign( this, vars );\n\n\t}\n\n\tamount( amt ) {\n\n\t\tif ( this._item ) this._item.amount( amt );\n\n\t}\n\n\trevive( gs ) {\n\n\t\tif ( typeof this._item === 'string') this._item = gs.findData(this._item);\n\n\t}\n\n}","/**\n * @class TagSet to allow referencing tagged items by id.\n */\nexport default class TagSet {\n\n\t/**\n\t * TagSets are internal and not meant to be saved.\n\t */\n\ttoJSON(){return undefined;}\n\n\t/**\n\t * @property {string}\n\t */\n\tget id() { return this._id; }\n\tset id(v) { this._id = v;}\n\n\t/**\n\t * @property {Set.<GData>} items\n\t */\n\tget items() { return this._items; }\n\tset items(v) {\n\t\tthis._items = v;\n\t}\n\n\t[Symbol.iterator](){return this._items[Symbol.iterator]()}\n\n\t/**\n\t * @property {string} type - type might need to be a standard type.\n\t */\n\tget type() { return this._type; }\n\tset type(v) { this._type = v; }\n\n\t/**\n\t * @property {string} name\n\t */\n\tget name() {return this._name }\n\tset name(v) { this._name = v; }\n\n\n\t/*get.instanced() { return true; }\n\tset.instanced(v){}*/\n\n\t/**\n\t * @property {boolean} locked\n\t */\n\tget locked() {\n\t\tfor( let it of this.items ) {\n\t\t\tif ( it.locked === false ) return false;\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * Used by cheat menu.\n\t */\n\tset locked(v){\n\t\tfor( let it of this.items ) {\n\t\t\tit.locked = v;\n\t\t}\n\t}\n\n\t/**\n\t * @property {boolean} owned\n\t */\n\tget owned(){\n\t\tfor( let it of this.items ) {\n\t\t\tif ( it.owned === true ) return true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tget delta(){ return 0; }\n\n\t/**\n\t * @returns {number}\n\t */\n\tvalueOf(){\n\n\t\tlet v = 0;\n\t\tfor( let it of this.items ) {\n\t\t\tv += it.valueOf();\n\t\t}\n\t\treturn v;\n\t}\n\n\t/**\n\t *\n\t * @param {string} tag\n\t */\n\tconstructor(tag) {\n\n\t\tthis.id = tag;\n\t\tthis.items = new Set();\n\n\t\t//The followint .toString() resolves an error thrown in console\n\t\tlet ind = tag.toString().indexOf('t_');\n\t\tif ( ind < 0) this.name = tag.toString();\n\t\telse {\n\t\t\tthis.name = tag.toString().slice(ind+2);\n\t\t}\n\n\t}\n\n\t/**\n\t * @returns {boolean}\n\t */\n\tfillsRequire(){\n\t\tfor( let it of this.items ) {\n\t\t\tif ( it.fillsRequire() ) return true;\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * @returns {boolean}\n\t */\n\tcanUse( g ) {\n\t\treturn g.canPay( this.cost );\n\t}\n\n\t/**\n\t * Tests whether item fills unlock requirement.\n\t * @returns {boolean}\n\t */\n\tfillsRequire(){\n\t\tfor( let it of this.items ) {\n\t\t\tif ( it.fillsRequire()) return true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * @returns {boolean}\n\t */\n\tfilled( rate ){\n\t\tfor( let it of this.items ) {\n\t\t\tif ( !it.filled(rate) ) return false;\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * @returns {boolean}\n\t */\n\tmaxed(){\n\t\tfor( let it of this.items ) {\n\t\t\tif ( !it.maxed() ) return false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tremove(){\n\t\tconsole.warn('TagSet remove() not implemented');\n\t}\n\n\t/**\n\t * Not implemented.\n\t * @param {*} g\n\t */\n\tonUse(g) {\n\t\tconsole.warn('TagSet onUse() not implemented');\n\t}\n\n\t/**\n\t *\n\t * @param {GData} it\n\t */\n\tadd( it ) {\n\t\tthis.items.add(it);\n\t}\n\n\t/**\n\t * @returns {GData} - random tagged item.\n\t */\n\trandom() {\n\n\t\tlet size = this.items.size;\n\t\tif ( size <= 0 ) return null;\n\n\t\t// dont know better way to do random on iterator.\n\t\tlet ind = Math.floor(Math.random()*size);\n\n\t\tconst itr = this.items.values();\n\t\twhile ( ind-- > 0 ) {\n\t\t\titr.next();\n\t\t}\n\t\treturn itr.next().value;\n\n\n\t}\n\n\t/**\n\t *\n\t * @param {Game} g\n\t * @param {*} amt\n\t */\n\tamount( amt ) {\n\n\t\tfor( let it of this.items ) {\n\t\t\t//if ( typeof it.amount === 'function' ) it.amount( amt );\n\t\t\tit.amount(amt);\n\t\t}\n\n\t}\n\n\tdisable(){\n\t}\n\n\t/**\n\t *\n\t * @param {Object} mods - effect/mod description.\n\t * @param {number} amt - factor of base amount added\n\t * ( fractions of full amount due to tick time. )\n\t */\n\tapplyVars( mods, amt=1 ) {\n\n\t\tfor( let it of this.items ) {\n\t\t\tit.applyVars( mods, amt );\n\t\t}\n\n\t}\n\n\t/**\n\t * Apply mod to every tagged item.\n\t * @param {Mod|Object} mods\n\t * @param {number} amt\n\t * @param {Object} [targ=null]\n\t */\n\tapplyMods( mods, amt=1 ) {\n\n\t\tfor( let it of this.items ) {\n\t\t\tit.applyMods( mods, amt, it );\n\t\t}\n\n\t}\n\n\thasTag(t){ return t === 'tagset'}\n\n\t/**\n\t * Get raw array of tagged items.\n\t * @returns {GData[]}\n\t */\n\ttoArray(){\n\t\treturn Array.from(this.items);\n\t}\n\n\t/**\n\t * Filter tagged items.\n\t * @param {v=>boolean} p\n\t * @returns {GData[]}\n\t */\n\tfilter(p){\n\n\t\tlet a = [];\n\n\t\tfor( let it of this.items ) {\n\t\t\tif ( p(it) ) a.push(it);\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\t/**\n\t * Wrap Set forEach()\n\t * @param {*=>*} p\n\t */\n\tforEach(p){\n\t\treturn this.items.forEach(p);\n\t}\n\n}","import GData from './gdata';\n\n/**\n * Like a resource but a single Stat value with no max, that can be directly modified.\n * Resources can't be modified by stats because they represent progress vs a max.\n */\nexport default class StatData extends GData {\n\n\t/**\n\t * @property {number} current - identical to value except uses floor of values.\n\t */\n\tget current() { return this.unit ? Math.floor(this.value) : this._value; }\n\n\t/**\n\t * Add amount to base value.\n\t * @param {number} amt - base amount being added.\n\t * @returns {number} actual change in value.\n\t */\n\tadd(amt) {\n\n\t\tlet prev = this.value.valueOf();\n\t\tthis.value.base += amt;\n\n\t\treturn this.value.valueOf() - prev;\n\n\t}\n\n\t/**\n\t * Set the StatData base value and apply all change mods\n\t * @note This does trigger all game events, etc.\n\t * @param {Game} g - game instance, for mods stuff. ( @todo use event instead?)\n\t * @param {number} amt\n\t */\n\tsetBase( g, amt ) {\n\n\t\tlet del = this.add( amt - this.value.base );\n\t\tthis.changed( g, del );\n\n\t}\n\n\t/**\n\t *\n\t * @param {?Object} [vars=null]\n\t */\n\tconstructor( vars=null ){\n\n\t\tsuper(vars);\n\n\t\tif ( this.value === undefined || this.value === null ) this.value = 0;\n\t\tthis.repeat = true;\n\n\t\t/**\n\t\t * @property {boolean} unit - true if current value is reported in integer amounts.\n\t\t */\n\t\tif ( this.unit === null || this.unit === undefined ) this.unit = true;\n\n\t\tif ( this._rate === null || this.rate === undefined ) this.rate = 0;\n\n\t}\n\n\t/*amount( g, count ) {\n\t}*/\n\n\t/**\n\t * Not currently used any more.\n\t * @param {} dt\n\t */\n\t/*update( dt ) {\n\n\t\tif ( this._rate.value !== 0 ) {\n\n\t\t\tthis.value = this.value.base + this._rate.value*dt;\n\n\t\t} else this._delta = 0;\n\n\t}*/\n\n\t/**\n\t * @returns {false} true if an unlocked item is at maximum value.\n\t */\n\tmaxed() { return false; }\n\n\t/**\n\t * Pure stat cannot be filled.\n\t * @returns {false}\n\t */\n\tfilled() { return false; }\n\n}","import Attack from '../chars/attack';\nimport Task from './task';\nimport { canTarget } from '../values/consts';\n\n/**\n * Single requirement substring.\n * @param {string} s - GData/Idable id.\n * @param {number} lvl\n */\n/*const reqStr = (s,lvl=1)=>{\n\treturn '!g.' + s + '||g.' + s + '>=' + lvl;\n}*/\n\n/**\n * Create a school unlock function.\n * @param {string|string[]} s - name(s) of school which unlocks item.\n * @param {number} lvl - spell level.\n * @param {number} ratio - multiply spell level before test.\n */\n\nexport default class Spell extends Task {\n\n\t/**\n\t * @property {string} only - target type, name, kind, or tag, to which\n\t * the enchantment can be applied.\n\t */\n\tget only(){return this._only;}\n\tset only(v){this._only = typeof v === 'string' ? v.split(',') : v;}\n\n\t/**\n\t * @property {boolean} silent - spell can be cast while silenced.\n\t */\n\tget silent(){return this._silent;}\n\tset silent(v){this._silent = v;}\n\n\tget attack(){return this._attack;}\n\tset attack(v){\n\n\t\tif ( v != null ) {\n\t\t\tif ( !(v instanceof Attack)) v = new Attack(v);\n\t\t\tif ( !v.name ) v.name = this.name;\n\t\t\tif (!v.kind) v.kind = this.school;\n\t\t}\n\n\t\tthis._attack = v;\n\t}\n\n\tget action(){return this._action;}\n\tset action(v){\n\n\t\tif ( v) {\n\t\t\t//console.dir(v, this.id);\n\t\t\tif ( !(v instanceof Attack)) v = new Attack(v);\n\t\t\tif ( !v.name ) v.name = this.name;\n\t\t\tif (!v.kind) v.kind = this.school;\n\t\t}\n\n\t\tthis._action = v;\n\t}\n\n\ttoJSON(){\n\n\t\tlet data = super.toJSON();\n\n\t\tif ( this.owned ) data.owned = this.owned;\n\n\t\treturn data;\n\t}\n\n\tconstructor(vars=null) {\n\n\t\tsuper(vars);\n\n\t\tthis.repeat = true;\n\t\tthis.type = 'spell';\n\t\tthis.level = this.level || 1;\n\n\t\tthis.owned = this.owned || false;\n\t\tif ( !this.owned ) {\n\n\t\t\tif ( !this.buy ) this.buy = {};\n\t\t\tif ( !this.buy.arcana && this.level > 1 ) this.buy.arcana = this.level - 1;\n\n\t\t}\n\n\t\tif ( this.dot && !this.dot.id) {\n\t\t\tthis.dot.id = this.dot.name || this.name;\n\t\t}\n\n\t\tif ( this.locked !== false ) {\n\t\t\tthis.addRequire(\"spellbook\");\n\n\t\t}\n\n\t}\n\n\t/**\n\t *\n\t * @param {GData} targ\n\t */\n\tcanUseOn(targ) {\n\n\t\tif ( targ.level && ( 2*this.level < targ.level) ) return false;\n\t\treturn !this.only || canTarget( this.only, targ );\n\n\t}\n\n\n};","import Base, {mergeClass} from '../items/base';\nimport { assign } from 'objecty';\nimport { ParseMods } from '../modules/parsing';\n\n/**\n * @class A Mutator alters instanced objects.\n */\nexport default class Alter {\n\n\tget isRecipe(){return true}\n\n\tget exclude(){return this._exclude;}\n\tset exclude(v) {\n\t\tthis._exclude = typeof v === 'string' ? v.split(',') : v;\n\t}\n\n\tget only(){return this._only;}\n\tset only(v) {\n\t\tthis._only = typeof v === 'string' ? v.split(',') : v;\n\t}\n\n\t/**\n\t * @property {object} alter - alteration mods applied to target.\n\t */\n\tget alter(){return this._alter;}\n\tset alter(v) {this._alter = v;}\n\n\tconstructor(vars=null) {\n\n\t\tif ( vars ) assign( this, vars);\n\n\t\tif ( this.alter ) this.alter = ParseMods( this.alter, this.id, 1 );\n\n\t}\n\n}\n\nmergeClass( Alter, Base );","import Task from './task';\nimport GData from './gdata';\nimport { SetModCounts } from './base';\nimport { canTarget, ENCHANTSLOTS } from '../values/consts';\nimport Enchanting from '../composites/enchanting';\n\n\nexport default class Enchant extends Task {\n\n\tget isRecipe(){return true;}\n\n\t/**\n\t * @property {string} only - limit target type by name, kind, or tag, to which\n\t * the enchantment can be applied.\n\t */\n\tget only(){return this._only;}\n\tset only(v){\n\t\tthis._only = typeof v === 'string' ? v.split(',') : v;\n\t}\n\n\tget controller(){ return ENCHANTSLOTS; }\n\n\tconstructor( vars ){\n\n\t\tsuper(vars);\n\n\t\tthis.verb = this.verb || 'enchanting';\n\n\t\tthis.level = this.level || 1;\n\t\tthis.need = this.need || 'enchantsource';\n\n\t\tif ( this.alter ) SetModCounts( this.alter, 1);\n\n\t}\n\n\t/**\n\t * Begin using Enchant on item. Increase item level immediately.\n\t * @param {GData} targ\n\t * @returns {Enchanting}\n\t */\n\tbeginUseOn( targ ) {\n\t\treturn new Enchanting( this, targ );\n\t}\n\n\t/**\n\t * Catch complete\n\t */\n\tcomplete(){}\n\n\t/**\n\t * Called when enchant is being used on target.\n\t * @param {*} targ\n\t * @param {Context} g - execution context, Game.\n\t */\n\tuseOn( targ, g ) {\n\n\t\tif ( !targ) return;\n\t\ttarg.doAlter( this );\n\n\t}\n\n\t/**\n\t * Test if enchantment can be applied to target item.\n\t * @param {Item} targ\n\t */\n\tcanAlter( targ ) {\n\n\t\tif ( targ.hasEnchant(this.id) || (targ.enchants + this.level > targ.enchants.max) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t//console.log('can target: ' + canTarget(this.only, targ));\n\n\t\treturn !this.only || canTarget( this.only, targ );\n\n\t}\n\n\t/**\n\t * Called when enchant stopped? Is it?\n\t * @param {*} targ\n\t */\n\t/*onStop(targ){\n\t}*/\n\n\n}","import GData from \"./gdata\";\n\nconst defaults = {\n\n\tlevel:1,\n\trepeat:true,\n\tstack:true\n\n};\n\n/**\n * This is actually only the prototype for a potion.\n * Individual potions are instanced from this data.\n */\nexport default class Potion extends GData {\n\t\n\ttoJSON() {\n\n\t\tlet data = super.toJSON();\n\n\t\tdata.id = this.id;\n\t\tdata.template=this.template;\n\t\tdata.recipe=this.recipe;\n\t\treturn data ? data : undefined;\n\n\t}\n\n\tget isRecipe() {return true; }\n\n\tconstructor(vars=null ) {\n\n\t\tsuper(vars, defaults );\n\n\t\tthis.require = this.require||this.unlockTest;\n\n\t}\n\n}\n","import GData from \"./gdata\";\nimport Events, { EVT_EVENT, EVT_UNLOCK } from \"../events\";\nimport Game from \"../game\";\n\n/**\n * Represents in-game event.\n */\nexport default class GEvent extends GData {\n\n\t/**\n\t * @property {number} rand - 100-based percent chance per 100 seconds\n\t * for event to occur. indicates a randomized event.\n\t */\n\tget rand() { return this._rand; }\n\tset rand(v) { this._rand = v; }\n\n\t/**\n\t * @property {number} cd - cooldown.\n\t */\n\tget cd() { return this._cd; }\n\tset cd(v) { this._cd =v; }\n\n\tconstructor(vars=null){\n\n\t\tsuper(vars);\n\n\t}\n\n\t/**\n\t * Unlocking the event triggers the event.\n\t * @todo: randomized events won't work this way.\n\t */\n\tdoUnlock(g=Game) {\n\n\n\t\tif ( this.disabled || (this.value>0 &&!this.repeat) ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( this.locked ) Events.emit( EVT_UNLOCK, this );\n\t\tif ( this.loot ) g.getLoot( this.loot );\n\n\t\t// randomized event.\n\t\tif ( this.rand ) {\n\n\t\t} else super.amount( 1 );\n\n\t\tthis.locked = false;\n\n\t\tEvents.emit( EVT_EVENT, this );\n\n\t}\n\n\t/**\n\t * Any amount of an event simply triggers the event.\n\t * @param {*} g\n\t * @param {*} amt\n\t */\n\tamount( amt ) {\n\t\tthis.doUnlock();\n\t}\n\n}","import Stat from \"../values/rvals/stat\";\nimport Resource from \"../items/resource\";\nimport { toStats } from \"../util/dataUtil\";\n\nimport Events, { LEVEL_UP, NEW_TITLE, CHAR_TITLE, CHAR_NAME, CHAR_CLASS } from \"../events\";\nimport Wearable from \"./wearable\";\nimport GData from \"../items/gdata\";\nimport Char from './char';\nimport { RESOURCE, TEAM_PLAYER, getDelay, WEAPON } from \"../values/consts\";\n\nimport { NO_ATTACK } from \"./states\";\nimport DataList from '../inventories/dataList';\nimport { Changed } from '../techTree';\nimport { SAVE_IDS } from '../inventories/inventory';\n\n/**\n * @const {string[]} LoseConditions - player retreats from locale if any of these stats are empty.\n */\nconst DefeatStats = [ 'hp', 'stamina', 'rage', 'bf', 'unease', 'weary', 'rage', 'madness' ];\n\nconst Fists = new Wearable( null, {\n\n\tid:'baseWeapon',\n\tname:'fists',\n\ttype:WEAPON,\n\tattack:{\n\t\tname:\"fists\",\n\t\ttohit:1,\n\t\tkind:'blunt',\n\t\tdamage:\"0~1\"\n\t}\n\n});\n\n/**\n * @constant {number} EXP_RATE\n */\nconst EXP_RATE = 0.125;\n\nexport default class Player extends Char {\n\n\tget level() { return this._level; }\n\tset level(v) {\n\n\t\tif ( this._level && (typeof v === 'number') ) {\n\n\t\t\tthis._level.value = v;\n\n\t\t} else this._level = v;\n\n\t}\n\n\t/**\n\t * currently active title.\n\t * @property {string} title\n\t */\n\tget title() { return this._title; }\n\tset title(v) { this._title =v; }\n\n\t/**\n\t * @property {string[]} titles\n\t */\n\tget titles(){\n\t\tif ( this._titles == null ) this._titles = [];\n\t\treturn this._titles;\n\t}\n\tset titles(v){ this._titles = v; }\n\n\t/**\n\t * @property {} exp\n\t */\n\tget exp(){ return this._exp; }\n\tset exp(v) {\n\n\t\tif ( this._exp === undefined ) this._exp = v;\n\t\telse {\n\n\t\t\tthis._exp.value = v;\n\t\t\twhile ( this._next > 0 && this._exp.value >= this._next ) this.levelUp();\n\n\t\t}\n\t}\n\n\t/**\n\t * @property {string} gclass - name of last game class attained.\n\t */\n\tget gclass() { return this._gclass; }\n\tset gclass(v) { this._gclass = v; }\n\n\t/**\n\t * @property {number} next - exp to level up.\n\t */\n\tget next() { return this._next; }\n\tset next(v) { this._next = v;}\n\n\t/**\n\t * @property {GData} hp - player hitpoints.\n\t */\n\tget hp() { return this._hp; }\n\tset hp(v) {\n\n\t\tif ( this._hp ) this._hp.value = v;\n\t\telse if ( v instanceof GData ) this._hp = v;\n\t\telse console.error('Invalid Hp: ' + v );\n\t}\n\n\t/**\n\t * @property {Stat} damage - bonus damage per attack.\n\t */\n\tget damage(){ return this._damage; }\n\tset damage(v) {\n\t\tthis._damage = v instanceof Stat ? v : new Stat(v)\n\t}\n\n\t/**\n\t * @property {Resource} speed\n\t * speed normalized to an average of level=speed.\n\t */\n\tget speed() { return this._speed; }\n\tset speed(v) {\n\n\t\tif ( this._speed ) this._speed.value = v;\n\t\telse if ( v instanceof GData ) this._speed = v;\n\n\t}\n\n\t/**\n\t * @property {DataList<Wearable>} weapons - active weapons.\n\t */\n\tget weapons(){ return this._weapons; }\n\tset weapons(v){\n\n\t\tthis._weapons = new DataList(v);\n\t\tthis._weapons.saveMode = SAVE_IDS;\n\t\tthis._weapons.removeDupes = true;\n\n\t}\n\n\t/**\n\t * Property continues to exist so spells/abilities can access 'current weapon'\n\t * @property {Wearable} weapon - primary weapon.\n\t */\n\tget weapon() {\n\t\treturn this._weapons ? this._weapons.curItem() : null;\n\t}\n\n\t/**\n\t * @property {.<string,Stat>} hits - tohit bonuses per damage kind.\n\t */\n\tget hits(){ return this._hits ? this._hits : (this._hits = {}) }\n\tset hits(v){ this._hits = toStats(v); }\n\n\t/**\n\t * NOTE: Elements that are themselves Items are not encoded,\n\t * since they are encoded in the Item array.\n\t * @return {object}\n\t */\n\ttoJSON() {\n\n\t\tlet data = {};\n\n\t\tdata.defense = ( this.defense );\n\t\tdata.tohit = ( this.tohit );\n\t\tdata.name = ( this.name );\n\n\t\tdata.titles = this.titles;\n\t\tdata.title = this.title;\n\n\t\tdata.next = ( this.next );\n\t\t// attack timer.\n\t\tdata.timer = ( this.timer );\n\t\tdata.alignment = ( this.alignment );\n\t\tdata.damage = ( this.damage );\n\t\tdata.dots = ( this.dots );\n\n\t\tdata.bonuses = this.bonuses;\n\t\tdata.hits = this.hits;\n\t\tdata.immunities = this.immunities;\n\t\tdata.resist = this.resist;\n\n\t\tdata.retreat = this.retreat||undefined;\n\n\t\tdata.gclass = this.gclass;\n\n\t\tdata.weapons = this.weapons;\n\n\t\treturn data;\n\n\t}\n\n\t/**\n\t * Get player tohit bonus for damage type.\n\t * @param {*} kind\n\t * @returns {number}\n\t */\n\tgetHit(kind){\n\n\t\treturn this.tohit.valueOf() + ( kind ? this.hits[kind] || 0 : 0 );\n\n\t}\n\n\tconstructor( vars=null ){\n\n\t\tsuper(vars);\n\n\t\tthis.id = this.type = \"player\";\n\t\tif ( !vars || !vars.name) this.name = 'Wizrobe';\n\n\t\tif ( !this.weapons ) {\n\t\t\tthis.weapons = null;\n\t\t}\n\n\t\t//if ( vars ) Object.assign( this, vars );\n\t\tif ( !this.level ) this.level = 0;\n\t\tthis._title = this._title || 'Waif';\n\n\t\tthis.titles = this._titles || [];\n\n\t\tthis._next = this._next || 50;\n\n\t\tthis.team = TEAM_PLAYER;\n\n\t\t/**\n\t\t * @property {GData[]} retreats - stats to check for empty before retreating.\n\t\t * Initialized from RetreatStats\n\t\t */\n\t\tthis.defeators = [];\n\t\tthis.retreat = this.retreat || 0;\n\n\t\tthis.initStates();\n\n\t\tif ( !this.tohit) this.tohit = 1;\n\t\tif ( !this.defense ) this.defense = 0;\n\n\t\tthis.alignment = this.alignment || 'neutral';\n\n\t\tif ( this.damage === null || this.damage === undefined ) this.damage = 1;\n\n\t}\n\n\t/**\n\t *\n\t * @param {string} gclass - name of class added\n\t */\n\tsetClass( gclass ) {\n\n\t\tthis.gclass = gclass;\n\t\tthis.addTitle( gclass );\n\t\tEvents.emit( CHAR_CLASS, this );\n\n\t}\n\n\tsetName( name ) {\n\n\t\tif ( !name ) return;\n\t\tthis.name = name;\n\t\tEvents.emit( CHAR_NAME, this );\n\n\t}\n\n\tsetTitle( title ) {\n\n\t\tif ( !title ) return;\n\n\t\tthis.title = title;\n\t\tthis.addTitle(title);\n\n\t\tEvents.emit( CHAR_TITLE, this );\n\n\t}\n\n\taddTitle( title ){\n\n\t\tif ( !this._titles.includes(title.toTitleCase()) ) {\n\n\t\t\tthis.context.applyVars( 'hallPoints', 0.1 );\n\t\t\tthis._titles.push( title.toTitleCase() );\n\t\t\tEvents.emit( NEW_TITLE, title, this._titles.length );\n\n\t\t}\n\n\t}\n\n\n\trevive( gs ) {\n\n\t\tsuper.revive(gs);\n\n\t\tthis.weapons.revive( gs, (s,v)=>{\n\t\t\ts.equip.find( v )\n\t\t});\n\n\t\tif ( this.weapons.count === 0 ) {\n\t\t\tthis.weapons.add( Fists );\n\t\t}\n\n\t\tfor( let i = DefeatStats.length-1; i>= 0; i-- ) {\n\n\t\t\tvar it = gs.getData( DefeatStats[i] );\n\t\t\tif ( it ) this.defeators.push(it);\n\n\t\t}\n\n\t\t// @compat\n\t\t// @todo at least link these to template defaults?\n\t\tthis.spells = gs.getData('spelllist');\n\t\tthis.spells.max.value = 0;\n\t\tthis.stamina.max.base = 10;\n\t\tthis.tohit.base = 1;\n\n\t\t// @todo can't set base directly because of stat type,\n\t\t// base assignment will break things. bad.\n\t\tthis.speed.value.base = 1;\n\n\t\tthis.hp.max.base = 5;\n\n\t}\n\n\t/**\n\t * Add item to active weapons.\n\t * @param {Wearable} it\n\t */\n\taddWeapon( it ){\n\n\t\tthis.weapons.add( it );\n\t\tif ( this.weapons.count > 1 ) {\n\t\t\t// check for fists.\n\t\t\tthis.weapons.remove(Fists);\n\t\t}\n\n\t}\n\n\t/**\n\t * Remove item from active weapons.\n\t * @param {Wearable} it\n\t */\n\tremoveWeapon(it){\n\n\t\tthis.weapons.remove( it );\n\t\tif ( this.weapons.count === 0 ) {\n\t\t\tthis.weapons.add(Fists);\n\t\t}\n\n\t}\n\n\t/**\n\t * Called once game actually begins. Dot-mods can't be applied\n\t * before game start because they can trigger game functions.\n\t */\n\tbegin() {\n\n\t\tfor( let i = this.dots.length-1; i>=0; i-- ){\n\t\t\tif ( this.dots[i].mod) this.context.applyMods( this.dots[i].mod, 1 );\n\t\t}\n\n\t}\n\n\t/**\n\t * Determine if player has fully rested and can re-enter a locale.\n\t * @returns {boolean}\n\t */\n\trested() {\n\n\t\tfor( let i = this.defeators.length-1; i>=0; i--){\n\t\t\tif ( this.defeators[i].maxed() === false ) return false;\n\t\t}\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * @returns {boolean}\n\t */\n\tdefeated() {\n\n\t\tfor( let i = this.defeators.length-1; i>=0; i--){\n\n\t\t\tif ( this.defeators[i].empty() ) return true;\n\t\t}\n\t\treturn false;\n\n\t}\n\n\t/**\n\t * Explore player action.\n\t * @param {*} dt\n\t */\n\texplore(dt) {\n\n\t\tthis.timer -= dt;\n\t\tif ( this.timer <= 0 ) {\n\n\t\t\tthis.timer += getDelay( this.speed );\n\n\t\t\t// attempt to use cast spell first.\n\t\t\tthis.tryCast();\n\t\t}\n\n\t}\n\n\t/**\n\t * Get combat action.\n\t * @param {*} dt\n\t */\n\tcombat(dt) {\n\n\t\tthis.timer -= dt;\n\t\tif ( this.timer <= 0 ) {\n\n\t\t\tthis.timer += getDelay(this.speed);\n\n\t\t\t// attempt to use spell first.\n\t\t\tif ( this.tryCast() ) {\n\n\t\t\t\t// don't mix fists and spells.\n\t\t\t\tif ( !this.weapons.includes(Fists) ){\n\t\t\t\t\treturn this.nextAttack();\n\t\t\t\t}\n\n\t\t\t} else return this.nextAttack();\n\n\t\t}\n\n\t}\n \ttryCast(){\n\t\treturn this.spells ? this.spells.onUse(this.context) : null;\n\t}\n\n\t/**\n\t * Get next weapon attack.\n\t */\n\tnextAttack(){\n\n\t\tlet a = this.getCause( NO_ATTACK );\n\t\tif ( a ) return a;\n\n\t\tlet nxt = this.weapons.nextItem();\n\t\t//console.log('attack with: ' + (nxt !== null && nxt!==undefined?nxt.id:'none') );\n\t\treturn nxt ? nxt.attack : null;\n\t}\n\n\t/**\n\t * @returns {Resource[]} - list of all resources defined by Player.\n\t */\n\tgetResources() {\n\n\t\tlet res =[];\n\n\t\tfor( let p in this ) {\n\n\t\t\tvar obj = this[p];\n\t\t\tif ( obj !== null && typeof obj === 'object' && obj.type === RESOURCE) res.push(obj);\n\n\t\t}\n\n\t\treturn res;\n\n\t}\n\n\tremoveResist( kind, amt ) {\n\t\tif ( this._resist[kind] ) this._resist[kind].base -= amt;\n\t}\n\n\taddResist( kind, amt ) {\n\n\t\tif ( !this._resist[kind] ) this._resist[kind] = new Stat( amt );\n\t\telse this._resist[kind].base += amt;\n\n\t}\n\n\tlevelUp() {\n\n\t\tthis.level.amount( 1 );\n\n\t\tthis._exp.value -= this._next;\n\t\tthis._next = Math.floor( this._next * ( 1 + EXP_RATE ) );\n\n\t\tChanged.add(this);\n\n\t\tEvents.emit( LEVEL_UP, this, this._level.valueOf() );\n\n\t}\n\n\t/**\n\t * Init immunities, resists, etc.\n\t */\n\tinitStates(){\n\n\t\tthis._resist = this._resist || {};\n\t\tfor( let p in this._resist ) {\n\t\t\tthis._resist[p] = new Stat( this._resist[p]);\n\t\t}\n\n\t\tthis.regen = this.regen || 0;\n\n\t\tif ( !this.immunities ) this.immunities = {\n\t\t\tfire:0,\n\t\t\twater:0,\n\t\t\tair:0,\n\t\t\tearth:0,\n\t\t\tlight:0,\n\t\t\tshadow:0,\n\t\t\tarcane:0,\n\t\t\tphysical:0,\n\t\t\tnatural:0,\n\t\t\tpoison:0,\n\t\t\tdisease:0\n\t\t}\n\n\t\tif ( !this.bonuses ) this.bonuses = {\n\t\t}\n\t}\n\n}","import GData from \"./gdata\";\n\n/**\n * Upgrade locked to unique character.\n */\nexport default class CharUpgrade extends GData {\n\n\ttoJSON(){\n\n\t\tlet p = super.toJSON();\n\t\tif ( this.char ) {\n\t\t\tif ( !p ) p = {};\n\t\t\tp.char = this.char;\n\t\t}\n\t\treturn p;\n\n\t}\n\n\t/**\n\t * @property {boolean} charlock - indicates upgrade locked to a single character.\n\t */\n\tget charlock(){ return this._charlock }\n\tset charlock(v){\n\t\tthis._charlock=v;\n\t}\n\n\t/**\n\t * @property {string} char - id of character bound to upgrade.\n\t */\n\tget char(){ return this._char }\n\tset char(v){ this._char = v;}\n\n\tconstructor(vars=null){\n\n\t\tsuper(vars);\n\n\t}\n\n\t/**\n\t *\n\t * @param {Game} g\n\t * @param {number} amt\n\t * @returns {boolean}\n\t */\n\tchanged( g, amt ) {\n\n\t\tif ( this.charlock && amt > 0 ) {\n\t\t\tthis.char = g.state.player.hid;\n\t\t}\n\t\treturn super.changed( g, amt );\n\n\t}\n\n\t/**\n\t *\n\t * @param {GameState} gs\n\t */\n\trevive( gs ) {\n\n\t\tlet p = gs.player;\n\t\tif ( this.char && p.hid !== this.char ) {\n\t\t\tthis.disabled = true;\n\t\t\tconsole.log( this.id + ' DISABLED FOR ' + p.hid );\n\t\t}\n\n\t}\n\n}","import Events, { EVT_EVENT } from \"../events\";\nimport CharUpgrade from \"./charupgrade\";\n/**\n * Represents in-game wizard class.\n */\nexport default class GClass extends CharUpgrade {\n\n\tconstructor(vars=null){\n\n\t\tsuper(vars);\n\n\t\tif ( vars.warn !== false ) {\n\t\t\tthis.warnMsg = 'Alternate Wizard classes of this tier will be locked.';\n\t\t\tthis.warn = true;\n\t\t}\n\n\t}\n\n\t/**\n\t *\n\t * @param {Game} g\n\t * @param {number} amt\n\t * @returns {boolean}\n\t */\n\tchanged( g, amt ) {\n\n\t\tsuper.changed( g, amt );\n\n\t\tg.state.player.setClass( this.name );\n\n\t\tthis.locked = false;\n\n\t\tEvents.emit( EVT_EVENT, this );\n\n\t}\n\n}","import Base, {mergeClass} from '../items/base';\nimport { assign } from 'objecty';\nimport { TYP_STATE } from '../values/consts';\nimport { ParseFlags } from './states';\n\nexport default class State {\n\n\tget type() { return TYP_STATE }\n\tset type(v){}\n\n\tget id() { return this._id; }\n\tset id(v) { this._id =v;}\n\n\tget name() { return this._name || this._id; }\n\tset name(v) { this._name = v;}\n\n\tget value() { return this._value; }\n\tset value(v) { this._value=v;}\n\n\tget mod() { return this._mod; }\n\tset mod(v) { this._mod = v; }\n\n\tget effect() { return this._effect; }\n\tset effect(v) {\n\t\tthis._effect = v;\n\t}\n\n\t\t/**\n\t * @property {number} flags\n\t */\n\tget flags(){return this._flags;}\n\tset flags(v) {\n\n\t\tif ( typeof v !== 'number' ) this._flags = ParseFlags(v);\n\t\telse this._flags = v;\n\n\t}\n\n\t/**\n\t * @property {boolean} stack\n\t */\n\tget stack() { return this._stack;}\n\tset stack(v) { this._stack = v; }\n\n\tconstructor( vars){\n\n\t\tif ( vars ) assign(this, vars);\n\n\t}\n\n\t/**\n\t * Apply state to char.\n\t * @param {Char} char\n\t * @param {Game} g\n\t */\n\tapplyTo( char, g ) {\n\n\t\tif ( this.mod ) char.applyMods( this.mod, g );\n\n\t}\n\n\t/**\n\t * Remove state from char.\n\t * @param {Char} char\n\t * @param {Game} g\n\t */\n\tremove( char, g ) {\n\t}\n\n}\n\nmergeClass( State, Base );","import GData from './items/gdata';\n\nimport { PrepData } from './modules/parsing';\n\nimport Resource from './items/resource';\nimport RevStat from './items/revStat';\nimport StatData from './items/statData';\nimport Skill from './items/skill';\nimport Monster from './items/monster';\n\nimport { Locale } from './items/locale';\n\nimport Spell from './items/spell.js';\nimport Task from './items/task';\n\nimport { mergeSafe } from 'objecty';\nimport ProtoItem from './protos/protoItem';\nimport Alter from './chars/alter';\nimport Enchant from './items/enchant';\nimport Potion from './items/potion';\nimport Encounter from './items/encounter';\nimport GEvent from './items/gevent';\n\nimport Player from './chars/player';\n\nimport Loader from './util/jsonLoader';\nimport GClass from './items/gclass';\nimport Module from './modules/module';\nimport { SKILL, ENCOUNTER, MONSTER, ARMOR, WEAPON, HOME, POTION, RESOURCE, EVENT, DUNGEON } from './values/consts';\nimport State from './chars/state';\n\nimport { mergeInto } from './util/array';\n\nconst DataDir = './data/';\n\n// list of all files to load.\nconst ModFiles = 'modules';\n\n/**\n *\n * @param {string[]} fileList\n * @param {string} [dir=DataDir]\n * @returns {Promise.<string,object>}\n */\nexport const loadFiles = ( fileList, dir=DataDir ) => {\n\n\tlet loader = new Loader( dir, fileList );\n\treturn loader.load();\n\n}\n\n/**\n * @todo replace with server call.\n */\nexport default {\n\n\t/**\n\t * @property {GModule} module - main module.\n\t */\n\tmain:null,\n\n\t/**\n\t * Load information on all available data files.\n\t * @param {string} srcList - name of file specifying mod list.\n\t * @returns {object}\n\t */\n\tasync loadModInfo( srcList ) {\n\n\t\t// load the local list of mod files then load all listed files.\n\t\treturn loadFiles( [srcList] ).then( list=>{\n\t\t\tif (!list) throw new Error('Modlist not found: ' + srcList );\n\t\t\treturn list[srcList];\n\t\t});\n\n\t},\n\n\tasync loadGame( saveData ) {\n\n\t\tif ( this.main === null ) {\n\n\t\t\tlet files = await this.loadModInfo( ModFiles );\n\t\t\tthis.main = await new Module().load( files.core );\n\n\t\t\tif ( files.modules ) {\n\t\t\t\tawait this.main.load( files.modules, DataDir + 'modules/' );\n\t\t\t}\n\n\t\t}\n\n\t\treturn this.instance( this.main.objects, this.main.lists, saveData );\n\n\t},\n\n\t/**\n\t * At this point dataLists and gdatas both refer to the same data items.\n\t * dataLists are simply separated into lists by type (upgrades,tasks, etc.)\n\t * @param {.<string,object>} raws\n\t * @param {.<string,object[]>} dataLists\n\t * @param {object} saveData\n\t * @returns {object} initialized save&game data.\n\t */\n\tinstance( raws, dataLists, saveData={} ){\n\n\t\tsaveData = saveData || {};\n\n\t\t// restore Percent/Range classes /special functions of non-item data.\n\t\tfor( let p in saveData ) {\n\n\t\t\t// items prepped separately so template can be written over, then prep, then template assigned.\n\t\t\tif ( p === 'items' || p === 'drops') continue;\n\t\t\tsaveData[p] = PrepData( saveData[p], p );\n\n\t\t}\n\n\t\t// Remove items with outdated/aliased names.\n\t\tlet items = saveData.items;\n\t\tif ( items ) {\n\n\t\t\tfor( let p in raws ) {\n\n\t\t\t\tlet t = raws[p];\n\t\t\t\tif ( t.alias && !items[p] ) {\n\t\t\t\t\t// check aliased item.\n\t\t\t\t\tvar it = items[t.alias];\n\t\t\t\t\tif ( it ) {\n\t\t\t\t\t\tconsole.warn('alias: ' + t.alias + ' -> ' + p );\n\t\t\t\t\t\titems[p] = it;\n\t\t\t\t\t\tdelete items[t.alias];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else items = {};\n\n\t\t// Merge and ensure game data item for every template.\n\t\tsaveData.items = this.mergeItems( items, raws );\n\n\t\t// replace original data list items with saveData items.\n\t\tlet gameLists = this.buildLists( saveData.items, dataLists );\n\n\t\treturn this.initInstance( saveData, gameLists );\n\n\t},\n\n\t/**\n\t * Use prepped item data to form data lists matching the\n\t * datalists from the raw data files.\n\t * @param {.<string,object>} items\n\t * @param {.<string,object[]>} dataLists\n\t * @returns {.<string,object[]>} lists of items matching lists of loaded data.\n\t */\n\tbuildLists( items, dataLists ){\n\n\t\tlet gameLists = {};\n\n\t\tfor( let p in dataLists ) {\n\n\t\t\tvar dataList = dataLists[p];\n\t\t\t// possibly missing file or empty list.\n\t\t\tif ( !dataList ) continue;\n\n\t\t\t// lists of game-item data by type.\n\t\t\tvar gameList = gameLists[p] = [];\n\n\t\t\tfor( let i = 0; i < dataList.length; i++ ) {\n\t\t\t\tgameList[i] = items[ dataList[i].id ];\n\t\t\t}\n\n\t\t}\n\n\t\treturn gameLists;\n\n\t},\n\n\t/**\n\t * Merge template data into saved data items.\n\t * @param {Object} saveItems - previous save items.\n\t * @param {.<string,Object>} raws - template items..\n\t * @returns {.<string,Object>} - the saveItems with data merged from default data.\n\t */\n\tmergeItems( saveItems, raws ) {\n\n\t\t/**\n\t\t * @note ordering.\n\t\t * 1) raw template merged over raw save.\n\t\t * 2) data prepared with type instances.\n\t\t * 3) template assigned LAST because the template is frozen and can't be prepped.\n\t\t */\n\t\tfor( let p in raws ) {\n\n\t\t\tvar saveObj = saveItems[p] || {};\n\n\t\t\tif ( typeof saveObj === 'number') {\n\t\t\t\tsaveObj = { val:saveObj };\n\t\t\t}\n\t\t\tmergeSafe( saveObj, raws[p] );\n\n\t\t\tsaveItems[p] = PrepData( saveObj, p );\n\n\t\t\tsaveObj.template = raws[p];\n\n\t\t}\n\n\t\treturn saveItems;\n\n\t},\n\n\tinitInstance( inst, lists ){\n\n\t\tvar items = inst.items;\n\n\t\tif ( lists.resources) inst.resources = this.initItems( items, lists['resources'], Resource );\n\n\t\tif ( lists.stressors ) {\n\t\t\tinst.stressors = this.initItems( items, lists.stressors, Resource, 'stress', 'stress' );\n\t\t\tinst.stressors.forEach(v=>v.hide=true);\n\t\t}\n\n\t\tif ( lists.upgrades ) inst.upgrades = this.initItems( items, lists['upgrades'], GData, null, 'upgrade' );\n\n\t\tif ( lists.homes ) {\n\t\t\tinst.homes = this.initItems( items, lists['homes'], GData, HOME, HOME );\n\t\t\tinst.homes.forEach( v=>v.slot=HOME);\n\t\t}\n\n\t\tif ( lists.furniture ) this.initItems( items, lists.furniture, GData, 'furniture', 'furniture' );\n\n\t\tif ( lists.skills ) inst.skills = this.initItems( items, lists.skills, Skill, SKILL );\n\n\t\tif ( lists.encounters ) inst.encounters = this.initItems( items, lists['encounters'], Encounter, ENCOUNTER, ENCOUNTER);\n\t\tif ( lists.monsters ) inst.monsters = this.initItems( items, lists['monsters'], Monster, MONSTER, MONSTER );\n\n\t\tif ( lists.rares ) inst.rares = this.initItems( items, lists['rares'], ProtoItem );\n\t\tif ( lists.states ) inst.states = this.initItems( items, lists['states'], State, 'state', 'state' );\n\t\tif ( lists.reagents ) inst.reagents = this.initItems( items, lists['reagents'], Resource );\n\n\t\tif ( lists.locales ) {\n\t\t\tthis.initItems( items, lists.locales, Locale );\n\t\t\tlists.locales.forEach( v=>v.sym = v.sym||'🌳');\n\t\t}\n\n\t\tif ( lists.dungeons ) {\n\t\t\tthis.initItems( items, lists.dungeons, Locale, null, DUNGEON );\n\t\t\tlists.dungeons.forEach( v=>v.sym = v.sym || '⚔' );\n\t\t}\n\t\tif ( lists.spells ) this.initItems( items, lists.spells, Spell );\n\n\t\tif ( lists.stats ) this.initItems( items, lists['stats'], StatData, 'stat', 'stat' );\n\n\t\t/**@deprecated ??? @compat */\n\t\t//this.initItems( items, lists['items'], Item, ITEM, ITEM);\n\n\t\tif ( lists.armors ) {\n\t\t\tinst.armors = this.initItems( items, lists.armors, ProtoItem, ARMOR,ARMOR );\n\t\t\tinst.armors.forEach( v=>v.kind = v.kind || ARMOR );\n\t\t}\n\n\t\tif ( lists.weapons ) {\n\t\t\tinst.weapons = this.initItems( items, lists.weapons, ProtoItem, WEAPON, WEAPON );\n\t\t\tinst.weapons.forEach(v=>v.kind=v.kind ||WEAPON);\n\t\t}\n\n\t\tif ( lists.potions ) inst.potions = this.initItems( items, lists.potions, Potion, POTION, POTION );\n\n\t\tif ( lists.materials ) inst.materials = this.initItems( items, lists.materials, Alter, 'material', 'material' );\n\t\tif ( lists.properties ) inst.properties = this.initItems( items, lists.properties, Alter, 'property', 'property' );\n\n\t\tif ( lists.events ) inst.events = this.initItems( items, lists.events, GEvent, EVENT, EVENT );\n\t\tif ( lists.classes ) inst.classes = this.initItems( items, lists.classes, GClass, 'class', 'class' );\n\n\t\tif ( lists.tasks ) inst.tasks = this.initItems( items, lists.tasks, Task, null, 'task' );\n\t\t/** @deprecated */\n\t\tif ( lists.actions ) {\n\t\t\t\tinst.tasks = this.mergeTasks( inst.tasks, this.initItems( items, lists.actions, Task, null, 'task' ) );\n\t\t}\n\n\t\tif ( lists.enchants ) inst.enchants =this.initItems( items, lists.enchants, Enchant, null, 'enchant' );\n\t\tif ( lists.sections ) inst.sections = this.initItems( items, lists.sections );\n\n\t\tif ( lists.player ) inst.player = this.initPlayer( items, lists.player, inst.items.player );\n\n\t\treturn inst;\n\n\t},\n\n\t/**\n\t * @compat\n\t * @deprecated\n\t * Merge old action files with new ones, removing dupe ids.\n\t * @param {Task[]} a\n\t * @param {Task[]} b\n\t */\n\tmergeTasks( a, b  ) {\n\t\treturn mergeInto( a, b, v=> a.find(w=>w.id==v.id)===undefined );\n\t},\n\n\tinitItems( items, dataList, UseClass=GData, tag=null, type=null ) {\n\n\t\tif ( dataList === null || dataList === undefined ) return undefined;\n\n\t\tfor( let i = dataList.length-1; i >= 0; i-- ) {\n\n\t\t\tvar def = dataList[i];\n\n\t\t\tif ( def.reverse) dataList[i] = def = new RevStat(def);\n\t\t\telse if ( def.stat ) dataList[i] = def = new StatData(def);\n\t\t\telse dataList[i] = def = new UseClass( def );\n\n\t\t\tif ( tag ) def.addTag( tag );\n\t\t\tif ( type ) def.type = type;\n\n\t\t\titems[def.id] = def;\n\n\t\t}\n\n\t\treturn dataList;\n\n\t},\n\n\t/**\n\t *\n\t * @param {*} stats - player stats from json.\n\t * @param {Object} savePlayer - player data from previous save.\n\t */\n\tinitPlayer( items, stats, savePlayer=null ) {\n\n\t\tif ( !stats ) return undefined;\n\n\t\tlet vars = savePlayer || {};\n\n\t\tlet res;\n\t\tfor( let def of stats ) {\n\n\t\t\tres = vars[ def.id ] =\n\t\t\t\t( def.stat === true ? new StatData(def) :\n\t\t\t\t( def.reverse === true ? new RevStat(def) : new Resource( def ) )\n\t\t\t);\n\t\t\tres.type = RESOURCE;\n\t\t\titems[def.id] = res;\n\n\t\t}\n\n\t\treturn items.player = new Player( vars );\n\n\t},\n\n}\n\n/**\n * Recursive freezing of an object template.\n * Clones must be made to make any changes.\n * @param {*} obj\n */\nexport const freezeData = ( obj ) => {\n\n\tlet sub;\n\tfor( let p in obj ){\n\n\t\tsub = obj[p];\n\t\tif ( typeof sub === 'object') freezeData(sub);\n\t\telse Object.freeze( sub );\n\n\t}\n\n\treturn Object.freeze( obj );\n\n}","import Emitter from 'eventemitter3';\nimport {uppercase} from './util/util';\nimport { TYP_PCT, EVENT } from './values/consts';\nimport { precise } from './util/format';\n\n/**\n * @const {Emitter} events - emitter for in-game events.\n */\nconst events = new Emitter();\n\n/**\n * @const {Emitter} sys - emitter for system-level events.\n * (save,load,gameLoaded, etc.)\n */\nconst sys = new Emitter();\n\nexport const EVT_COMBAT = 'combat';\n\n/**\n * @event COMBAT_HIT (Char,number,attackName)\n */\nexport const COMBAT_HIT = 'char_hit';\n\n\n/**\n * Generic game event.\n */\nconst EVT_EVENT = 'event';\nconst EVT_UNLOCK = 'unlock';\nconst EVT_LOOT = 'loot';\n//const EVT_DISABLED = 'disabled';\n\nconst LOG_EVENT = 1;\nconst LOG_UNLOCK = 2;\nconst LOG_LOOT = 4;\nexport const LOG_COMBAT = 8;\n\nexport const LogTypes = {\n\t'event':LOG_EVENT,\n\t'unlock':LOG_UNLOCK,\n\t'loot':LOG_LOOT,\n\t'combat':LOG_COMBAT\n};\n\n/**\n * @const {string} TRIGGER - event indicating data defined trigger\n * occurred.\n */\nexport const TRIGGER = 'trigger';\n\n/**\n * BASIC ITEM EVENTS\n */\nexport const TRY_BUY = 'buy';\nexport const TRY_USE = 'tryuse';\nexport const TRY_SELL = 'trysell';\nexport const TRY_USE_WITH = 'tryUseOn';\nexport const USE = 'use';\n\nexport const SET_SLOT = 'set_slot';\n\n/**\n * @event DROP_ITEM - permanently remove an instanced item.\n */\nexport const DROP_ITEM = 'dropitem';\n\n/**\n * Any character died by damage.\n */\nexport const CHAR_DIED = 'char_died';\n\nexport const ALLY_DIED = 'ally_died';\n\n/**\n * @const {string} COMBAT_WON - all enemies slain in current combat.\n */\nexport const COMBAT_WON = 'combat_won';\n\nexport const ENEMY_SLAIN = 'slain';\n\n/**\n * @const {string} CHAR_STATE - inform current char state.\n */\nexport const CHAR_STATE = 'charstate';\n\nexport const STATE_BLOCK = 'stateblock';\n\n/**\n * player defeated by some stat.\n */\nconst DEFEATED = 'defeat';\n\nconst DAMAGE_MISS = 'dmg_miss';\nexport const IS_IMMUNE = 'is_immune';\nexport const RESISTED = 'resists';\n\n/**\n * @const {string} TASK_REPEATED\n */\nconst TASK_REPEATED = 'taskrepeat';\nconst TASK_IMPROVED = 'taskimprove';\n\n/**\n * stop all running tasks.\n */\nconst STOP_ALL = 'stopall';\n\n/**\n * Dispatched by a Runnable when it has completed.\n * It is the job of the runnable to determine when it has completed.\n */\nconst TASK_DONE = 'taskdone';\n\n/**\n * Action should be stopped by runner.\n */\nconst HALT_TASK = 'halttask';\n\n/**\n * Action blocked or failed.\n * @event TASK_BLOCKED - obj, resumable\n */\nconst TASK_BLOCKED = 'taskblock';\n\n/**\n * Item with attack used. Typically spell; could be something else.\n */\nconst CHAR_ACTION = 'charact';\n\n/**\n * Completely delete item data. Use for Custom items only.\n */\nconst DELETE_ITEM = 'delitem';\n\n/**\n * Encounter done.\n */\nconst ENC_DONE = 'encdone';\nconst ENC_START = 'encstart'\n\n\n/**\n * New character title set.\n */\nconst CHAR_TITLE = 'chartitle';\n/**\n * New title added but not necessarily set as main.\n */\nconst NEW_TITLE = 'newtitle';\n\n/**\n * Character name changed.\n */\nexport const CHAR_NAME = 'charname';\n\nconst LEVEL_UP = 'levelup'\n\n/**\n * Character class changed.\n */\nconst CHAR_CLASS = 'charclass';\n\n/**\n * Player's character changed in some way\n * not covered by other events.\n */\nconst CHAR_CHANGE = 'charchange';\n\n/**\n * @const {string} EVT_STAT - statistic event to send to server (kong).\n */\nexport const EVT_STAT = 'stat';\n\n/**\n * @property {string} TOGGLE - toggle a task on/off.\n */\nexport const TOGGLE = 'toggle';\n\nexport { CHAR_TITLE, NEW_TITLE, LEVEL_UP, CHAR_CLASS, CHAR_CHANGE };\n\nexport { HALT_TASK, EVT_EVENT, EVT_UNLOCK, EVT_LOOT, TASK_DONE, CHAR_ACTION, STOP_ALL, DELETE_ITEM,\n\tTASK_REPEATED, TASK_IMPROVED, TASK_BLOCKED,\n\tDAMAGE_MISS, DEFEATED, ENC_START, ENC_DONE };\n\nexport default {\n\n\tlog:null,\n\n\tinit( game ) {\n\n\t\tthis.log = game.log;\n\t\tthis.game = game;\n\n\t\t/**\n\t\t * @property {.<string,object>}\n\t\t */\n\t\tthis._triggers = {};\n\n\t\tconsole.log('clearGameEvents()');\n\t\tthis.clearGameEvents();\n\n\t\tevents.addListener( EVT_LOOT, this.onLoot, this );\n\t\tevents.addListener( EVT_UNLOCK, this.onUnlock, this );\n\t\tevents.addListener( EVT_EVENT, this.onEvent, this );\n\t\tevents.addListener( LEVEL_UP, this.onLevel, this );\n\t\tevents.addListener( NEW_TITLE, this.onNewTitle, this );\n\n\t\tevents.addListener( TRIGGER, this.doTrigger, this );\n\t\tevents.addListener( TASK_IMPROVED, this.actImproved, this );\n\n\t\tevents.addListener( EVT_COMBAT, this.onCombat, this );\n\t\tevents.addListener( COMBAT_HIT, this.onHit, this );\n\n\t\tevents.addListener( CHAR_STATE, this.onCharState, this );\n\t\tevents.addListener( STATE_BLOCK, this.onStateBlock, this );\n\n\t\tevents.addListener( ENEMY_SLAIN, this.npcSlain, this );\n\t\tevents.addListener( ALLY_DIED, this.npcSlain, this );\n\n\t\tevents.addListener( DEFEATED, this.onDefeat, this );\n\t\tevents.addListener( DAMAGE_MISS, this.onMiss, this );\n\t\tevents.addListener( IS_IMMUNE, this.onImmune, this );\n\t\tevents.addListener( RESISTED, this.onResist, this );\n\t\tevents.addListener( ENC_START, this.onEnc, this );\n\n\t},\n\n\tclearGameEvents() {\n\n\t\tevents.removeAllListeners();\n\n\t},\n\n\t/**\n\t *\n\t * @param {*} obj\n\t */\n\tclearTriggers(obj) {\n\n\t\tlet ons = obj.on;\n\t\tif ( !ons ) return;\n\n\t\tfor( let p in ons ) {\n\t\t\tthis.clearTrigger( p, obj );\n\t\t}\n\n\t},\n\n\t/**\n\t *\n\t * @param {string} trigger\n\t * @param {object} obj\n\t */\n\tclearTrigger( trigger, obj ) {\n\n\t\tlet trigs = this._triggers.get( trigger );\n\t\tif ( trigs ) {\n\t\t\ttrigs.delete(obj);\n\t\t}\n\n\t},\n\n\t/**\n\t *\n\t * @param {string} trigger\n\t * @param {*} obj\n\t * @param {*} result\n\t */\n\taddTrigger( trigger, obj, result ) {\n\n\t\tlet trigs = this._triggers.get(trigger);\n\t\tif ( !trigs ) {\n\t\t\ttrigs = {};\n\t\t\tthis._triggers.set( trigger, trigs);\n\t\t}\n\n\t},\n\n\t/**\n\t *\n\t * @param {string} trigger - data defined trigger.\n\t */\n\tdoTrigger( trigger ){\n\n\t\tlet trigs = this._triggers[trigger];\n\t\tif ( trigs ) {\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Event item event.\n\t * @param {Item|Log} it\n\t */\n\tonEvent( it ) {\n\t\tif ( it.hide) return;\n\t\tif ( it[TYP_PCT] && !it[TYP_PCT].roll() ) return;\n\n\t\tthis.log.log( it.name, it.desc, LOG_EVENT );\n\t},\n\n\tonUnlock( it ) {\n\t\tif ( it.hide || it.type === EVENT ) return;\n\t\tthis.log.log( uppercase(it.typeName) + ' Unlocked: ' + it.name, null, LOG_UNLOCK );\n\t},\n\n\tonLoot( loot ) {\n\n\t\tlet text = this.getDisplay(loot);\n\n\t\tif ( !text || Number.isNaN(text) ) return;\n\n\t\tthis.log.log( 'LOOT', text, LOG_LOOT );\n\n\t},\n\n\t/**\n\t * Get display string for item or item list.\n\t * Empty and null entries are skipped.\n\t * @param {string|string[]|Nameable} it\n\t * @returns {string}\n\t */\n\tgetDisplay( it ) {\n\n\t\tif ( !it ) return null;\n\n\t\tif ( typeof it === 'object') {\n\n\t\t\tif ( Array.isArray(it) ) {\n\n\t\t\t\tlet s, res = [];\n\t\t\t\tfor( let i = it.length-1; i >= 0; i--) {\n\n\t\t\t\t\ts = this.getDisplay(it[i] );\n\t\t\t\t\tif ( s ) res.push(s);\n\n\t\t\t\t}\n\n\t\t\t\tif ( res.length > 0) return res.join( ', ');\n\n\t\t\t} else return it.name.toTitleCase();\n\n\t\t} else if ( typeof it === 'string') return it.toTitleCase();\n\n\t\treturn null;\n\n\t},\n\n\t/**\n\t *\n\t * @param {*} t\n\t * @param {number} len - new title number.\n\t */\n\tonNewTitle(t, len ) {\n\n\t\tthis.log.log( 'Title Earned: ' + uppercase(t), null, LOG_UNLOCK );\n\n\t\tthis.dispatch( EVT_STAT, 'titles', len );\n\n\t},\n\n\tactImproved(it) {\n\n\t\tthis.log.log( it.name.toTitleCase() + ' Improved', null, LOG_UNLOCK );\n\t},\n\n\tonLevel( player, lvl ) {\n\n\t\tthis.log.log( player.name + ' Level Up!', null, LOG_EVENT );\n\n\t\tthis.dispatch( EVT_STAT, 'level', lvl );\n\n\t},\n\n\tonDefeat( locale ) {\n\n\t\tthis.log.log( 'RETREAT', 'Leaving '+ locale.name.toTitleCase(), LOG_COMBAT );\n\n\t},\n\n\t/**\n\t *\n\t * @param {Char} target\n\t * @param {string} kind\n\t */\n\tonImmune( target, kind ) {\n\t\tthis.log.log( 'IMMUNE', target.name.toTitleCase() + ' Is Immune To ' + kind, LOG_COMBAT );\n\t},\n\n\tonResist(target, kind) {\n\t\tthis.log.log( 'RESISTS', target.name.toTitleCase() + ' Resists ' + kind, LOG_COMBAT );\n\t},\n\n\tonMiss( msg ) {\n\n\t\tthis.log.log( '', msg.toString().toTitleCase(), LOG_COMBAT );\n\t},\n\n\tonEnc( title, msg ) {\n\t\tthis.log.log( title.toString().toTitleCase(), msg, LOG_COMBAT );\n\t},\n\n\tonCombat( title, msg) {\n\n\t\tif ( Array.isArray(msg)) {\n\n\t\t\tfor( let i = 0; i < msg.length; i++ ) {\n\n\t\t\t\tvar sub = msg[i];\n\t\t\t\tif ( sub[TYP_PCT] && sub[TYP_PCT].roll() ) {\n\t\t\t\t\tthis.onCombat( title, sub );\n\t\t\t\t\treturn;\n\t\t\t\t} else this.onCombat( title, sub );\n\t\t\t}\n\n\n\t\t} else if ( typeof msg === 'object' ) {\n\n\t\t\tthis.log.log( msg.name||title, msg.desc, LOG_COMBAT );\n\n\t\t} else this.log.log( title, msg, LOG_COMBAT );\n\n\t},\n\n\t/**\n\t * @param {string} msg\n\t */\n\tonHit( target, dmg, resist, reduce, source ) {\n\n\t\tlet msg = source.toString().toTitleCase() + \" Hits \";\n\t\tif (resist < 0) msg += \"Strongly \";\n\t\telse if (resist > 0) msg += \"Weakly \";\n\t\telse if (resist > 1) msg += \" Absorbed By \";\n\t\tmsg += target.name.toString().toTitleCase() + \": \"+ precise( dmg, 1 );\n\n\t\t/*let tot_reduce = 100*(resist + reduce);\n\t\tif (tot_reduce > 0) {\n\n\t\t\tif ( tot_reduce <= 100 ) msg += \" (-\" + precise(tot_reduce,1) + \"%)\";\n\t\t\telse msg += \" (absorb: \" + precise(tot_reduce-100, 1) + \"%)\";\n\n\t\t} else if (tot_reduce < 0) msg += \" (+\" + precise( -tot_reduce, 1) + \"%)\";*/\n\n\n\t\tthis.log.log( '', msg, LOG_COMBAT);\n\n\t},\n\n\t/**\n\t * Action blocked by state/reason.\n\t * @param {Char} char\n\t * @param {Dot} state\n\t */\n\tonStateBlock( char, state ) {\n\t\tthis.log.log( state.adj, char.name + ' Is ' + state.adj, LOG_COMBAT )\n\t},\n\n\t/**\n\t * Char has entered state.\n\t * @param {Char} char\n\t * @param {Dot} state\n\t */\n\tonCharState( char, state ) {\n\n\t\tthis.log.log( state.adj, char.name + ' Is ' + state.adj, LOG_COMBAT )\n\n\t},\n\n\t/**\n\t * Action blocked by state/reason.\n\t * @param {Char} char\n\t * @param {Dot} state\n\t */\n\tonStateBlock( char, state ) {\n\t\tthis.log.log( state.adj, char.name + ' Is ' + state.adj, LOG_COMBAT )\n\t},\n\n\t/**\n\t * Char has entered state.\n\t * @param {Char} char\n\t * @param {Dot} state\n\t */\n\tonCharState( char, state ) {\n\n\t\tthis.log.log( state.adj, char.name + ' Is ' + state.adj, LOG_COMBAT )\n\n\t},\n\n\tnpcSlain( enemy, attacker ) {\n\t\tthis.log.log( enemy.name.toTitleCase() + ' Slain',\n\t\t\t( attacker && attacker.name.toTitleCase() ? ' By ' + attacker.name.toTitleCase() : ''), LOG_COMBAT );\n\t},\n\n\t/**\n\t * Dispatch a game-level event.\n\t * @param  {...any} params\n\t */\n\temit( ...params ) {\n\t\tevents.emit.apply( events, params );\n\n\t},\n\n\t/**\n\t *\n\t * Add game-event listener.\n\t * @param {string} evt\n\t */\n\tadd( evt, listener, context ) {\n\t\tevents.addListener(evt, listener, context );\n\t},\n\n\t/**\n\t * listen for system-level events.\n\t * @param {*} evt\n\t * @param {*} f\n\t * @param {*} context\n\t */\n\tlisten(evt, f, context) {\n\t\tsys.addListener(evt,f,context);\n\t},\n\n\tremoveListener(evt,f){\n\t\tsys.removeListener(evt,f);\n\t},\n\t/**\n\t * Dispatch a system-level event.\n\t * pause,save,reload,etc.\n\t * @param  {...any} params\n\t */\n\tdispatch( ...params ) {\n\t\tsys.emit.apply( sys, params );\n\t}\n\n\n}","import { LogTypes } from './events';\n\nexport class LogItem {\n\n\tconstructor( title='', text='', type=1, subtype=''){\n\n\t\tthis.text = text;\n\t\tthis.title = title;\n\n\t\t/**\n\t \t* @var {number} type - message type.\n\t \t*/\n\t\tthis.type = type;\n\n\t\tthis.subtype = subtype;\n\n\t\tthis.count = 1;\n\t}\n\n}\n\nexport default class Log {\n\n\tconstructor( vars=null ) {\n\n\t\tif ( vars ) Object.assign( this, vars );\n\n\t\t/**\n\t\t * @property {LogItem[]} items\n\t\t */\n\t\tthis.items = this.items || [];\n\n\t\t/**\n\t\t * @property {number} maxItems\n\t\t */\n\t\tthis.maxItems = this.maxItems || 100;\n\n\t\tthis.initCounts();\n\n\t}\n\n\t/**\n\t * Counts of each event type.\n\t */\n\tinitCounts() {\n\n\t\tthis.counts = this.counts || {};\n\t\tfor( let p in LogTypes ) {\n\t\t\tthis.counts[ LogTypes[p] ] = 0;\n\t\t}\n\n\t}\n\n\tclear( types ) {\n\n\t\tif ( types ) {\n\n\t\t\tthis.cut( types, this.items.length );\n\n\t\t} else {\n\n\t\t\tthis.items.splice( 0, this.items.length );\n\t\t\tthis.initCounts();\n\t\t}\n\n\t}\n\n\tlog( title='', text='', type=1, sub=null ) {\n\n\t\tif ( this.tryMatch( title, text, type ) ) return;\n\n\t\tthis.items.push( new LogItem(title, text, type, sub ) );\n\n\t\tif ( ++this.counts[type] >= this.maxItems+50 ) {\n\t\t\tthis.cut( type )\n\t\t}\n\n\t}\n\n\t/**\n\t * cut previous items of the given log type.\n\t * @param {number} type - OR'd types\n\t * @param {number} [count=50]\n\t */\n\tcut( type, count=50 ) {\n\n\t\tlet max = this.items.length;\n\n\t\tlet del = 0;\n\n\t\t// new bottom elements.\n\t\tlet bot = [];\n\n\t\tvar i = 0;\n\t\twhile ( i < max) {\n\n\t\t\tvar it = this.items[i++];\n\t\t\tif ( it.type === type ){\n\n\t\t\t\tif ( ++del >= count ) break;\n\n\t\t\t} else bot.push( it );\n\n\n\t\t} //\n\n\t\tthis.counts[type] -= del;\n\t\t//console.log('CUT TYPE ' + type + ' COUNT: ' + this.counts[type] );\n\n\t\tthis.items = i < max ? bot.concat( this.items.slice(i) ) : bot;\n\n\t}\n\n\t/**\n\t *\n\t * @param {*} title\n\t * @param {*} text\n\t * @param {*} type\n\t * @returns {boolean} true if new message was combined with an\n\t * existing message.\n\t */\n\ttryMatch( title, text, type ) {\n\n\t\tfor( let i = this.items.length-1; i>=0; i-- ) {\n\n\t\t\tvar last = this.items[i];\n\t\t\tif ( (type & last.type) === 0 ) continue;\n\n\t\t\tif ( last.title === title && last.text === text ) {\n\n\t\t\t\tlast.count++;\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\tlogItem(it) {\n\n\t\tif ( this.tryMatch(it.title, it.text, it.type) ) return;\n\n\t\tthis.items.push( it);\n\n\t\tif ( ++this.counts[type] >= this.maxItems+50 ) {\n\t\t\tthis.cut( type )\n\t\t}\n\n\t}\n\n}","import GData from './items/gdata';\nimport Log from './log.js';\nimport GameState, { REST_SLOT } from './gameState';\nimport ItemGen from './modules/itemgen';\nimport TechTree, { Changed, GetChanged } from './techTree';\nimport Resource from './items/resource';\nimport Skill from './items/skill';\nimport Stat from './values/rvals/stat';\n\nimport DataLoader from './dataLoader';\n\nimport Events, {EVT_EVENT, EVT_LOOT, SET_SLOT, DELETE_ITEM } from './events';\nimport { MONSTER, TYP_PCT, P_TITLE, P_LOG, TEAM_PLAYER, ENCHANTSLOTS, WEAPON } from './values/consts';\nimport TagSet from './composites/tagset';\nimport RValue from './values/rvals/rvalue';\nimport { SetModCounts } from './items/base';\n\nvar techTree;\n\n/**\n * @constant {number} TICK_TIME - time in milliseconds between updates.\n */\nexport const TICK_TIME = 150;\n\n/**\n * @constant {number} TICK_LEN - time between frames in seconds.\n */\nexport const TICK_LEN = TICK_TIME/1000;\n\n/**\n * @constant {number} EVT_TIME - time for checking randomized events.\n */\nexport const EVT_TIME = 1000;\n\nexport default {\n\n\ttoJSON() { return this.state },\n\n\t/**\n\t * @property {GameState} gameData\n\t */\n\tstate:null,\n\n\t/**\n\t * @property {Object.<string,Item>} gdata\n\t */\n\tget gdata() { return this._gdata; },\n\n\t/**\n\t * Not really used any more.\n\t * @property {boolean} loaded - true when data is ready and game ready to play.\n\t */\n\tloaded:false,\n\n\t/**\n\t * @property {ItemGen} itemGen - item generator/instancer object.\n\t */\n\n\t/**\n\t * @property {Log} log\n\t */\n\tlog:new Log(),\n\n\t/**\n\t * @property {Runner} runner - runs active tasks.\n\t */\n\trunner:null,\n\n\n\tget player(){return this.state.player},\n\n\t/**\n\t* @property {Char} self - self/user of any spell/action.\n\t*/\n\tget self(){return this.state.player;},\n\n\n\t/**\n\t *\n\t * @param {object} obj\n\t * @param {(number)=>boolean} obj.tick -tick function.\n\t */\n\taddTimer( obj ){ this.runner.addTimer(obj); },\n\n\t/**\n\t * Clear game data.\n\t */\n\treset() {\n\n\t\tthis.loaded = false;\n\t\tthis.state = null;\n\t\tthis._gdata = null;\n\t\tthis.runner = null;\n\t\tthis.log.clear();\n\n\t},\n\n\t/**\n\t *\n\t * @param {*} saveData\n\t * @param {.<string,GData>} hallData - data items from wizard hall.\n\t * @returns {Promise.<GameState>}\n\t */\n\tload( saveData=null, hallData=null ) {\n\n\t\tthis.reset();\n\n\t\t// Code events. Not game events.\n\t\tEvents.init(this);\n\n\t\treturn this.loader = DataLoader.loadGame( saveData ).then( async allData=>{\n\n\t\t\tthis.state = new GameState( allData, saveData );\n\t\t\tawait this.state.revive();\n\n\t\t\tthis.player.context = this;\n\n\t\t\tthis.itemGen = new ItemGen( this );\n\n\t\t\tthis._gdata = this.state.items;\n\n\t\t\tthis.runner = this.state.runner;\n\t\t\tthis.runner.context = this;\n\n\t\t\tif ( hallData ) this.addData( hallData );\n\n\t\t\tawait this.recalcSpace();\n\t\t\tawait this.recheckTiers();\n\t\t\tawait this.restoreMods();\n\n\t\t\ttechTree = new TechTree( this.gdata );\n\t\t\t//Events.add( EVT_UNLOCK, techTree.unlocked, techTree );\n\t\t\t//Events.add( CHAR_ACTION, this.onCharAction, this );\n\n\t\t\t// initial unlocks/usables check.\n\t\t\tawait techTree.forceCheck();\n\n\t\t\t//Events.add( DROP_ITEM, this.state.deleteInstance, this.state );\n\t\t\tEvents.add( SET_SLOT, this.setSlot, this );\n\t\t\tEvents.add( DELETE_ITEM, this.onDelete, this );\n\n\t\t\tthis.loaded = true;\n\n\t\t\treturn this;\n\n\t\t}, err=>{ console.error( err.message + '\\n' + err.stack )} );\n\n\t},\n\n\t/**\n\t *\n\t * @param {string} id\n\t */\n\tlogStat( id ) {\n\n\t\tlet s = this.getData(id);\n\t\tif ( !s ) console.warn('STAT MISSING: '+id);\n\t\telse {\n\n\t\t\t//if ( full ) logObj(s,'LOG STAT' );\n\t\t\tconsole.dir( s );\n\t\t\tconsole.warn( id + ' value: ' + s.value + '  type: ' + s.constructor.name.toString().toTitleCase() );\n\n\t\t}\n\t},\n\n\trecheckTiers() {\n\n\t\tlet highClass = '';\n\n\t\tlet n = -1;\n\t\twhile ( ++n <= 5 ) {\n\n\t\t\tvar list = this.state.getData('t_tier'+n);\n\t\t\tvar evt = this.state.getData('tier'+n);\n\n\t\t\tvar hasEvent = false;\n\n\t\t\tfor( var s of list ) {\n\n\t\t\t\tif ( s.value > 0) {\n\n\t\t\t\t\thighClass = s.name;\n\t\t\t\t\tif ( evt.value == 0 ) {\n\n\t\t\t\t\t\tevt.doUnlock(this);\n\n\t\t\t\t\t} else if ( evt.locked ) evt.locked = false;\n\t\t\t\t\thasEvent = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// none of this tier.\n\t\t\tif ( !hasEvent ) evt.value = 0;\n\n\t\t}\n\t\tif ( highClass && !this.state.player.gclass ) {\n\t\t\tthis.state.player.setClass( highClass );\n\t\t}\n\n\t},\n\n\t/**\n\t * Reapply mods for all owned items.\n\t */\n\trestoreMods() {\n\n\t\tlet gdata = this.state.items;\n\n\t\t/**\n\t\t * @todo: instance-table starting to look like a better idea.\n\t\t */\n\t\tthis.state.inventory.begin(this);\n\t\tthis.state.items.enchantslots.begin(this);\n\t\tthis.state.drops.begin(this);\n\t\tthis.state.equip.begin(this);\n\t\tthis.state.player.begin( this );\n\t\tgdata[ENCHANTSLOTS].begin(this);\n\n\t\tfor( let p in gdata ) {\n\n\t\t\tvar it = gdata[p];\n\t\t\tif ( it instanceof TagSet) continue;\n\n\t\t\tif ( !it.locked && !it.disabled && !(it.instanced||it.isRecipe) ) {\n\n\t\t\t\tif ( it.value != 0 ) {\n\n\t\t\t\t\tif ( it.mod ) this.applyMods( it.mod, it.value, it.id);\n\t\t\t\t\tif ( it.lock ) {\n\t\t\t\t\t\tthis.lock( it.lock, it.value );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor( let e of this.state.equip ) {\n\t\t\tif ( e.type === WEAPON) {\n\t\t\t\tthis.player.addWeapon(e);\n\t\t\t}\n\t\t\tif ( e.mod ) e.remod( this ); //used to call ApplyMods, but that does not work. Instead calls the Remod function of wearable which simulates equipping it.\n\t\t}\n\n\n\t},\n\n\t/**\n\t * Recalculate amount of space used by items.\n\t * @compat @deprecated\n\t */\n\trecalcSpace(){\n\n\t\tlet space = this.state.getData('space');\n\t\tspace.value = 0;\n\t\tSetModCounts( space.mod, space.value );\n\n\t},\n\n\t/**\n\t * Add data item to running game.\n\t * This is currently so Hall data can be patched into every\n\t * loaded game.\n\t * @param {Object.<string,GData>} data\n\t */\n\taddData( data ) {\n\n\t\tfor( let p in data ) {\n\n\t\t\tlet it = data[p];\n\t\t\t//console.warn('ADDING DATA ITEM: ' + p + ': '+ it.valueOf() );\n\t\t\tthis.state.addItem(it);\n\t\t}\n\n\t},\n\n\tsetSlot( it ) {\n\n\t\tlet cur = this.state.getSlot( it.slot );\n\t\tif ( cur ) { this.remove( cur, 1 );}\n\n\t\tthis.state.setSlot( it.slot, it );\n\n\t\tthis.payCost( it.cost );\n\t\tit.amount( 1 );\n\n\t},\n\n\t/**\n\t * Frame update.\n\t */\n\tupdate() {\n\n\t\tlet changed = GetChanged();\n\n\t\tfor( let it of changed ) {\n\n\t\t\tvar del = it.delta;\n\t\t\tif ( del !== 0 ) {\n\t\t\t\tif ( !it.changed) console.log('NO CHANGE: ' + it.id );\n\t\t\t\telse it.changed( this, del );\n\t\t\t}\n\n\t\t}\n\n\t\ttechTree.updateTech( changed );\n\n\t\t//console.log('CHANGE SIZE: ' + Changed.size );\n\t\tlet time = Date.now();\n\t\tlet dt = Math.min( ( time - this.lastUpdate )/1000, 1 );\n\t\tthis.lastUpdate = time;\n\n\t\tthis.state.player.update(dt);\n\t\tthis.state.minions.update(dt);\n\n\t\tthis.runner.update(dt);\n\n\t\tthis.doResources( this.state.resources, dt);\n\t\tthis.doResources( this.state.playerStats, dt );\n\t\tthis.doResources( this.state.stressors, dt );\n\n\t},\n\n\t/**\n\t * Frame update of all resources.\n\t * @param {number} dt - elapsed time.\n\t */\n\tdoResources( stats, dt ) {\n\n\t\tfor( let i = stats.length-1; i >= 0; i-- ) {\n\n\t\t\tlet stat = stats[i];\n\t\t\tif ( stat.locked === false && !stat.disabled ) {\n\n\t\t\t\tif  ( stat.rate.value !== 0 ) {\n\n\t\t\t\t\tstat.amount( stat.rate.value*dt);\n\n\t\t\t\t}\n\t\t\t\tif ( stat.effect ) {\n\t\t\t\t\tthis.applyVars( stat.effect, dt );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Toggles an task on or off.\n\t * @param {GData} a\n\t */\n\ttoggleTask(a) { this.runner.toggleAct(a); },\n\n\t/**\n\t * Wrapper for Runner rest\n\t */\n\tdoRest() { this.runner.tryAdd( this.state.getSlot(REST_SLOT) ) },\n\n\thaltTask(a) { this.runner.stopTask(a);},\n\n\tsetTask( a ) { this.runner.setTask(a); },\n\n\t/**\n\t * Tests if a task has effectively filled a resource.\n\t * @param {string|string[]} v - data or datas to fill.\n\t * @param {GData} a - task doing the filling.\n\t * @param {string} - name of relavant filling effect ( for tag-item fills)\n\t */\n\tfilled( v, a, tag ) {\n\n\t\tif ( Array.isArray(v) ) {\n\t\t\tfor( let i = v.length-1; i>=0; i-- ) {\n\t\t\t\tif ( !this.filled( v[i], a, tag ) ) return false;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\tlet item = this.getData(v);\n\t\tif (!item) {\n\t\t\tconsole.warn('missing fill item: ' + v );\n\t\t\treturn true;\n\t\t}\n\t\tif ( !item.rate || !a.effect || item.rate >= 0 ) return item.maxed();\n\n\t\t// actual filling rate.\n\t\ttag = a.effect[ tag || v ];\n\n\t\treturn ( !tag || item.filled(tag ) );\n\n\t},\n\n\t/**\n\t * Completely disable an item - cannot be purchased/used/etc.\n\t * @param {string|GData|Array} it\n\t */\n\tdisable( it ) {\n\n\t\tif ( Array.isArray(it) ) for( let v of it ) {\n\t\t\tthis.disable(v);\n\t\t} else {\n\n\t\t\tif ( typeof it === 'string' ) {\n\t\t\t\tit = this.getData( it );\n\t\t\t}\n\n\t\t\tif ( it && !it.disabled ) {\n\n\t\t\t\tit.disabled = true;\n\n\t\t\t\tif ( it.slot && this.state.getSlot(it.slot, it.type) === it ) {\n\t\t\t\t\tthis.remove( it, 1 );\n\t\t\t\t}\n\n\t\t\t\tif ( it.running ) this.runner.stopTask(it);\n\n\t\t\t\tif ( it instanceof Resource || it instanceof Skill ) {\n\t\t\t\t\tthis.remove( it, it.value);\n\n\t\t\t\t} else if ( it.mod ) {\n\t\t\t\t\t//console.log('REMOVING MOD: ' + it.id + ' --> ' + it.value );\n\t\t\t\t\tthis.removeMods( it.mod, it.value );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\t},\n\n\t/**\n\t * Remove all quantity of an item.\n\t * @param {string|string[]|GData|GData[]} it\n\t */\n\tremoveAll( it ){\n\n\t\tif ( typeof it === 'object' ) {\n\n\t\t\tthis.remove( it, it.value );\n\n\t\t} else if ( Array.isArray(it)) {\n\t\t\tit.forEach( this.removeAll, this );\n\n\t\t} else {\n\n\t\t\tlet item = this.getData( it );\n\t\t\tif ( item ) this.remove( it, it.value );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Attempt to pay the cost to permanently buy an item.\n\t * @param {GData} it\n\t * @param {boolean} [keep=true]\n\t * @returns {boolean}\n\t */\n\ttryBuy( it, keep=true ) {\n\n\t\tif ( this.canPay(it.buy) === false ) return false;\n\t\tthis.payCost( it.buy );\n\n\t\tif ( it.isRecipe ) this.create( it, keep );\n\t\tit.owned = true;\n\n\t\tif ( it.slot && !this.state.getSlot(it.slot) ) this.setSlot(it);\n\n\t\treturn true;\n\n\t},\n\n\t/**\n\t * Use inventory or equip item.\n\t * @param {*} it\n\t */\n\tuse( it, inv=null ) {\n\n\t\tit.onUse( this, inv || this.state.inventory );\n\n\t},\n\n\t/**\n\t * Attempt to pay for an item, and if the cost is met, apply it.\n\t * @param {GData} it\n\t * @returns {boolean} - true if item is used. note that 'buying' an item\n\t * does not actually use it, and returns false.\n\t */\n\ttryItem(it) {\n\n\t\tif ( !it ) return;\n\n\t\tif ( !this.canUse(it) ) return false;\n\n\t\tif ( it.buy && !it.owned ) {\n\t\t\treturn this.tryBuy( it, false );\n\t\t}\n\n\t\tif ( it.perpetual || it.length > 0 ) {\n\n\t\t\tthis.setTask(it);\n\n\t\t}  else if ( it.instanced ){\n\n\t\t\tif ( it.count > 0 ) it.onUse( this );\n\n\t\t} else  {\n\n\t\t\tif ( it.isRecipe ) {\n\n\t\t\t\tthis.craft(it );\n\n\t\t\t} else {\n\n\t\t\t\tif ( it.slot ) this.setSlot( it );\n\t\t\t\telse {\n\t\t\t\t\tthis.payCost( it.cost );\n\t\t\t\t\tit.amount( 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Custom item deleted from game.\n\t * @param {*} it\n\t */\n\tonDelete(it) {\n\t\tthis.state.deleteItem(it);\n\t},\n\n\t/**\n\t * Create instance from data.\n\t * @param {string|Object} data\n\t */\n\tinstance( data ) {\n\n\t\tif ( typeof data === 'string') data = this.state.getData(data);\n\t\treturn this.itemGen.instance(data);\n\n\t},\n\n\t/**\n\t * Craft an item by paying its cost, then instantiating it.\n\t * Note that a crafted item does not use any of its effects or abilities.\n\t * @param {GData} it\n\t */\n\tcraft( it ) {\n\n\t\tif ( !this.canPay( it.cost ) ) return false;\n\t\tthis.payCost( it.cost );\n\n\t\tthis.create( it );\n\n\t},\n\n\t/**\n\t * Get target of spell or action.\n\t * @param {Char} char\n\t * @param {string} targets\n\t * @returns {Char|Char[]|null}\n\t */\n\t/*getTarget( char, targets ) {\n\t},*/\n\n\t/**\n\t * Create an item whose cost has been met ( or been provided by an effect )\n\t * @param {GData} it\n\t * @param {boolean} [keep=true] whether the item should be kept after effect.\n\t * ( currently used for npcs )\n\t * @param {number} [count=1]\n\t */\n\tcreate( it, keep=true, count=1 ) {\n\n\t\t//console.log('CREATING: ' + it.id );\n\n\t\tif ( typeof it === 'string') it = this.state.getData(it);\n\t\telse if ( Array.isArray(it) ) {\n\t\t\tfor( let i = it.length-1; i>=0; i--) {\n\t\t\t\tthis.create(it[i], keep, count);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (!it ) {\n\t\t\t//console.log('not found: ' + it.id );\n\t\t\treturn;\n\t\t}\n\n\t\tfor( let i = count; i >0; i--) {\n\n\t\t\t/**\n\t\t\t * create monster and add to inventory.\n\t\t\t * @todo this is hacky.\n\t\t\t*/\n\t\t\tif ( it.type === MONSTER ) {\n\n\t\t\t\tif ( it.onCreate ) it.onCreate( this, TEAM_PLAYER, keep );\n\n\t\t\t} else {\n\n\t\t\t\tvar inst = this.itemGen.instance( it );\n\t\t\t\tif ( inst ) {\n\t\t\t\t\tthis.state.inventory.add( inst );\n\t\t\t\t}\n\t\t\t\tEvents.emit( EVT_LOOT, inst );\n\n\t\t\t}\n\n\t\t}\n\n\n\t},\n\n\t/**\n\t *\n\t * @param {GData} it\n\t * @param {GData} targ - enchant target.\n\t */\n\ttryUseOn( it, targ ) {\n\n\t\tif ( targ === null || targ === undefined ) return false;\n\n\t\tif ( it.buy && !it.owned ) {\n\n\t\t\tthis.payCost( it.buy );\n\t\t\tit.owned = true;\n\n\t\t\treturn true;\n\n\t\t} else {\n\n\t\t\tif ( !it.length ) {\n\n\t\t\t\tthis.payCost( it.cost );\n\t\t\t\tthis.useOn( it, targ, this );\n\n\t\t\t\treturn true;\n\n\t\t\t} else {\n\n\t\t\t\t// runner will handle costs.\n\t\t\t\treturn this.runner.beginUseOn( it, targ );\n\n\t\t\t}\n\t\t}\n\n\t},\n\n\t/**\n\t * Use an item in conjunction with another item.\n\t * Item is used immediately. No running or costs necessary.\n\t * The item effects/modifiers are applied to the target.\n\t * @param {GData} it\n\t * @param {GData} targ - use target.\n\t */\n\tuseOn( it, targ ) {\n\n\t\tif ( targ === null || targ === undefined ) return;\n\n\t\tif ( typeof it.useOn === 'function') it.useOn( targ, this );\n\t\tit.value++;\n\n\t\tif ( it.mod ) {\n\t\t\ttarg.permVars( it.mod );\n\t\t}\n\t\tif ( it.result ) targ.permVars(it.result);\n\n\t},\n\n\n\t/**\n\t *\n\t * @param {string} id\n\t */\n\tfillItem( id ) {\n\n\t\tlet it = typeof id === 'string' ? this.getData(id) : id;\n\t\tif ( !it ) return;\n\t\tif ( typeof it.doFill === 'function'){\n\t\t\tit.doFill();\n\t\t} else {\n\n\t\t\tif ( !it.max ) {\n\t\t\t\tit.amount( 1 );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet del = it.max.value - it.value;\n\t\t\tif ( del > 0) it.amount( it.max.value - it.value );\n\t\t}\n\n\t},\n\n\tdoLog( logItem ) {\n\t\tEvents.emit( EVT_EVENT, logItem );\n\t},\n\n\tsellPrice( it ) {\n\n\t\tlet sellObj = it.sell || it.cost || (5*it.level) || 5;\n\n\t\tif(it.sell && typeof it.sell === 'object') {\n\t\t\tsellObj = {...sellObj};\n\t\t\tif (sellObj.gold) {\n\t\t\t\tsellObj.gold = sellObj.gold * this.state.sellRate\n\t\t\t}\n\t\t\treturn sellObj;\n\t\t}\n\t\telse if ( typeof sellObj === 'object' ) {\n\t\t\tsellObj = sellObj.gold || (5*it.level) || 5;\n\t\t}\n\t\treturn Math.ceil(sellObj * this.state.sellRate);\n\t},\n\n\t/**\n\t * Attempt to sell one unit of an item.\n\t * @param {GData} it\n\t * @param {Inventory}\n\t * @param {number} count - positive count of number to sell.\n\t * @returns {boolean}\n\t */\n\ttrySell( it, inv, count=1 ) {\n\n\t\tif ( it.value < 1 && !it.instanced ) { return false; }\n\t\tif ( count > it.count ) count = it.count;\n\n\t\tif(count<1) count=1;\n\t\tconst sellPrice = this.sellPrice(it);\n\n\t\tif(sellPrice.gold || typeof sellPrice === 'object') {\n\t\t\tObject.keys(sellPrice).forEach(key => {\n\t\t\t\tconst res = this.getData(key);\n\t\t\t\tconst price = sellPrice[key];\n\t\t\t\tres.amount(count * (price||1));\n\t\t\t});\n\t\t}\n\t\t else {\n\t\t\tthis.getData('gold').amount(count * this.sellPrice(it));\n\t\t}\n\n\t\tif ( it.instanced ) {\n\n\t\t\tit.count -= count;\n\n\t\t\t//console.log('remainig: ' + it.value );\n\t\t\tif ( inv && (!it.stack || it.count <= 0) ) inv.remove( it );\n\n\t\t} else this.remove(it,count);\n\n\t\treturn true;\n\n\t},\n\n\t/**\n\t * Remove amount of a non-inventory item.\n\t * If a tag list is specified, the amount will only be removed\n\t * from a single element of the list. Apparently.\n\t * @property {string|GData} id - item id or tag.\n\t */\n\tremove( id, amt=1 ){\n\n\t\tlet it = typeof id === 'string' ? this.getData(id) : id;\n\t\tif ( !it ) {\n\t\t\tconsole.warn('missing remove id: ' + id );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( it.slot ) { if ( this.state.getSlot(it.slot) === it ) this.state.setSlot(it.slot, null); }\n\n\t\tit.remove(amt);\n\n\t\tif ( it.mod ) this.applyMods( it.mod, -amt );\n\t\tif ( it.lock ) this.unlock( it.lock, amt );\n\n\t\tChanged.add( it );\n\n\t},\n\n\t/**\n\t * Attempt to unlock an item.\n\t * @param {GData} it\n\t * @returns {boolean} true on success.\n\t */\n\ttryUnlock( it ) {\n\n\t\tif ( it.disabled || it.locks > 0 ) return false;\n\n\t\tlet test = it.require || it.need;\n\t\tif ( test && !this.unlockTest(test, it ) ) return false;\n\n\t\tit.doUnlock(this);\n\n\t\treturn true;\n\n\t},\n\n\t/**\n\t * Return the results of a testing object.\n\t * @param {string|function|Object|Array} test - test object.\n\t * @param {?GData} [item=null] - item being used/unlocked.\n\t * @returns {boolean}\n\t */\n\tunlockTest( test, item=null ) {\n\n\t\tif ( test === null || test === undefined ) {\n\t\t\tconsole.warn('test not found: ' + test + ' : ' + item );\n\t\t\treturn true;\n\t\t}\n\t\t//console.log('trying unlock: ' + item.id );\n\t\tlet type = typeof test;\n\t\tif ( type === 'function') {\n\t\t\treturn test( this._gdata, item, this.state );\n\t\t}\n\n\t\telse if ( type === 'string') {\n\n\t\t\t// test that another item is unlocked.\n\t\t\tlet it = this.getData(test);\n\t\t\treturn it && it.fillsRequire(this);\n\n\t\t} else if (  Array.isArray(test) ) {\n\n\t\t\tfor( let i = test.length-1; i >= 0; i-- )\n\t\t\t\tif ( !this.unlockTest(test[i], item ) ) return false;\n\t\t\treturn true;\n\n\t\t} else if ( type === 'object' ) {\n\n\t\t\t/**\n\t\t\t * @todo: quick patch in case it was a data item.\n\t\t\t */\n\t\t\tif ( test.id ) return test.fillsRequire(this);\n\n\t\t\t// @todo: take recursive values into account.\n\t\t\t// @todo allow tag tests.\n\t\t\tlet it;\n\t\t\tfor( let p in test ) {\n\n\t\t\t\tit = this.getData(p);\n\t\t\t\tif ( it && it.value < test[p] ) return false;\n\n\t\t\t}\n\t\t\treturn true;\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Perform the one-time effect of an task, resource, or upgrade.\n\t * @param {GData} vars\n\t * @param {number} dt - time elapsed.\n\t */\n\tapplyVars( vars, dt=1 ) {\n\n\t\tif (  Array.isArray(vars) ) {\n\t\t\tfor( let e of vars ) { this.applyVars( e,dt); }\n\n\t\t} else if ( typeof vars === 'object' ) {\n\n\t\t\tlet target, e = vars[TYP_PCT];\n\t\t\tif ( e && !e.roll() ) return;\n\n\t\t\tfor( let p in vars ){\n\n\t\t\t\ttarget = this.getData(p);\n\t\t\t\te = vars[p];\n\n\t\t\t\tif ( target === undefined || target === null ) {\n\n\t\t\t\t\tif ( p === P_TITLE ) this.self.addTitle( e );\n\t\t\t\t\telse if ( p === P_LOG ) Events.emit( EVT_EVENT, e );\n\t\t\t\t\telse console.warn( p + ' no effect target: ' + e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( typeof e === 'number' ) {\n\t\t\t\t\t\ttarget.amount( e*dt );\n\t\t\t\t\t} else if ( e.isRVal ) {\n\n\t\t\t\t\t\t// messy code. this shouldn't be here. what's going on?!?!\n\t\t\t\t\t\ttarget.amount( dt*e.getApply( target ) );\n\n\t\t\t\t\t} else if ( e === true ) {\n\n\t\t\t\t\t\ttarget.doUnlock(this);\n\t\t\t\t\t\ttarget.onUse( this );\n\n\t\t\t\t\t} else if ( e.type === TYP_PCT ) {\n\n\t\t\t\t\t\tif ( e.roll( this.getData('luck').valueOf() ) ) target.amount( 1 );\n\n\t\t\t\t\t} else target.applyVars(e,dt);\n\n\t\t\t\t\tChanged.add(target);\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else if ( typeof vars === 'string') {\n\n\t\t\tlet target = this.getData(vars);\n\t\t\tif ( target !== undefined ) {\n\t\t\t\tif (target.type === 'monster') target.amount( this, dt );\n\t\t\t\telse target.amount( dt );\n\t\t\t\t//target.amount( this );\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/**\n\t *\n\t * @param {Object} mod\n\t */\n\tremoveMods( mod ) {\n\n\t\tif ( !mod ) return;\n\n\t\tif ( Array.isArray(mod)  ) {\n\t\t\tfor( let m of mod ) this.removeMods(m );\n\t\t} else if ( typeof mod === 'object' ) {\n\n\t\t\tfor( let p in mod ) {\n\n\t\t\t\tvar target = this.getData( p );\n\t\t\t\tif ( target === undefined || target === null ) continue;\n\t\t\t\telse {\n\n\t\t\t\t\tif ( target.removeMods) {\n\n\t\t\t\t\t\ttarget.removeMods( mod[p] );\n\n\t\t\t\t\t} else console.warn( 'no removeMods(): ' + target );\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else if ( typeof mod === 'string') {\n\n\t\t\tlet t = this.getData(mod);\n\t\t\tif ( t ) {\n\n\t\t\t\tconsole.warn('!!! REMOVE NUM MOD: ' + mod );\n\t\t\t\tt.amount( -1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Apply a mod.\n\t * @param {Array|Object|string} mod\n\t * @param {number} amt - amount added.\n\t */\n\tapplyMods( mod, amt=1 ) {\n\n\t\tif ( !mod ) return;\n\n\t\tif ( Array.isArray(mod)  ) {\n\t\t\tfor( let m of mod ) this.applyMods(m, amt);\n\t\t} else if ( typeof mod === 'object' ) {\n\n\t\t\tfor( let p in mod ) {\n\n\t\t\t\tvar target = this.getData( p );\n\t\t\t\tif ( target === undefined || target === null ) continue;\n\t\t\t\telse if ( mod[p] === true ){\n\n\t\t\t\t\ttarget.doUnlock(this);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( target.applyMods) {\n\n\t\t\t\t\t\ttarget.applyMods( mod[p], amt );\n\n\t\t\t\t\t} else console.warn( 'no applyMods(): ' + target );\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else if ( typeof mod === 'string') {\n\n\t\t\tlet t = this.getData(mod);\n\t\t\tif ( t ) {\n\n\t\t\t\tconsole.warn('!!!!!!!!!!ADDED NUMBER MOD: ' + mod );\n\t\t\t\tt.amount( 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Determines whether an item can be run as a continuous task.\n\t * @returns {boolean}\n\t */\n\tcanRun( it ) {\n\n\t\tif ( !it.canRun ) {\n\t\t\tconsole.error( it.id + ' no canRun()');\n\t\t\treturn false;\n\t\t} else return it.canRun( this, TICK_LEN );\n\n\t},\n\n\t/**\n\t * Determine if a one-use item can be used. Ongoing/perpetual tasks\n\t * test with 'canRun' instead.\n\t * @param {GData} it\n\t */\n\tcanUse( it ){\n\t\tif ( !it.canUse ) console.error( it.id + ' no canUse()');\n\t\telse return it.canUse( this );\n\t},\n\n\t/**\n\t * Attempts to pay the cost to perform an task, buy an upgrade, etc.\n\t * Before calling this function, ensure cost can be met with canPay()\n\t *\n\t * @param {Array|Object} cost\n\t */\n\tpayCost( cost, unit=1) {\n\n\t\tif ( cost === undefined || cost === null ) return;\n\t\tif ( Array.isArray(cost)  ) return cost.forEach( v=>this.payCost(v,unit), this );\n\n\t\tlet res;\n\t\tif ( typeof cost === 'object' ){\n\n\t\t\tfor( let p in cost ) {\n\n\t\t\t\tres = this.getData(p);\n\n\t\t\t\tif ( !res || res.instanced || res.isRecipe ) {\n\t\t\t\t\tthis.payInst( p, cost[p]*unit );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar price = cost[p];\n\n\t\t\t\t\tif ( !isNaN(price) ) this.remove( res, price*unit );\n\t\t\t\t\telse if ( typeof price === 'object' ) {\n\n\t\t\t\t\t\tres.applyVars( price, -unit );\n\n\t\t\t\t\t} else if ( typeof price === 'function') {\n\t\t\t\t\t\tthis.remove( res, unit*price(this.state, this.player) )\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tpayInst( p, amt ){\n\n\t\tvar res = this.state.inventory.find( p,true );\n\t\tif ( res ) this.state.inventory.removeCount(res,amt);\n\t\telse console.warn('Too Low: ' + p );\n\n\t},\n\n\t/**\n\t * Test if mods can be safely applied.\n\t * @param {object} mod\n\t * @returns {boolean}\n\t */\n\tcanMod( mod, src ) {\n\n\t\tif ( typeof mod !== 'object') return true;\n\t\tif (Array.isArray(mod) ) return mod.every( v=>this.canMod(v), this );\n\n\t\tlet res;\n\n\t\tfor( let p in mod ) {\n\n\t\t\tvar sub = mod[p];\n\n\t\t\tif ( !isNaN(sub) || sub instanceof RValue ) {\n\n\t\t\t\tres = this.state.getData(p);\n\n\t\t\t\tif ( res instanceof Resource ) {\n\n\t\t\t\t\treturn ( res.canPay(-sub) );\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\t/**\n\t * Determine if an object cost can be paid before the pay attempt\n\t * is actually made.\n\t * @param {Array|Object} cost\n\t * @returns {boolean} true if cost can be paid.\n\t */\n\tcanPay( cost, amt=1 ) {\n\n\t\t// @note @todo: this doesnt work since some items might charge same cost.\n\t\tif (Array.isArray(cost) ) return cost.every( v=>this.canPay(v,amt), this );\n\n\t\tlet res;\n\n\t\tif ( typeof cost === 'object' ){\n\n\t\t\tfor( let p in cost ) {\n\n\t\t\t\tvar sub = cost[p];\n\n\t\t\t\tres = this.state.getData(p);\n\t\t\t\tif ( !res ) return false;\n\t\t\t\telse if ( res.instanced || res.isRecipe ) {\n\n\t\t\t\t\t/* @todo: ensure correct inventory used. map type-> default inventory? */\n\t\t\t\t\treturn this.state.inventory.hasCount( res, amt );\n\n\t\t\t\t} else if ( !isNaN(sub) || sub.isRVal ) {\n\n\t\t\t\t\tif ( res.canPay && !res.canPay(sub*amt) ) return false;\n\t\t\t\t\t//if ( res.value < sub*amt ) return false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// things like research.max. with suboject costs.\n\t\t\t\t\tif ( res.canPay && !this.canPayObj( res, sub, amt ) ) return false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t * Follow object path to determine ability to pay.\n\t * @param {object} parent - parent object.\n\t * @param {object|number} cost - cost expected on parent or sub.\n\t * @param {number} amt - cost multiplier.\n\t * @returns {boolean}\n\t */\n\tcanPayObj( parent, cost, amt=1 ){\n\n\t\tif ( !parent ) return false;\n\n\t\tif ( (cost instanceof RValue) || !isNaN(cost)){\n\t\t\treturn parent.value >= cost;\n\t\t}\n\n\t\tfor( let p in cost ) {\n\n\t\t\tvar val = cost[p];\n\t\t\tif ( !isNaN(val) || (val instanceof RValue) ) {\n\t\t\t\tif ( parent.value < val*amt ) return false;\n\t\t\t} else if ( typeof val === 'object'){\n\n\n\t\t\t\t//console.log('checking sub cost: ' + p + ' ' +cost.constructor.name );\n\t\t\t\t//if ( parent ) console.log( 'parent: ' + parent.id );\n\n\t\t\t\tif ( !this.canPayObj( parent[p], val, amt ) ) return false;\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\t},\n\n\t/**\n\t * Test if equip is possible. ( Must have space in inventory\n\t * for any items replaced. )\n\t * @param {*} it\n\t * @returns {boolean}\n\t */\n\tcanEquip(it) {\n\n\t\t// if inventory contains item, +1 free spaces.\n\t\tlet adjust = this.state.inventory.includes(it) ? 1 : 0;\n\t\treturn this.state.equip.replaceCount(it ) <= this.state.inventory.freeSpace() + adjust;\n\n\t},\n\n\t/**\n\t *\n\t * @param {*} it\n\t * @param {?Inventory} inv - source inventory of item.\n\t */\n\tequip( it, inv=null ) {\n\n\t\tif ( !this.canEquip(it) ) {\n\t\t\tconsole.log('equip: ' + it.id  + ' type: ' + it.type + ' kind: ' + it.kind );\n\t\t\treturn false;\n\t\t}\n\n\t\tlet res = this.state.equip.equip( it );\n\t\tif ( !res) return;\n\n\t\t(inv || this.state.inventory).remove(it);\n\n\t\tthis.onUnequip(res);\n\n\t\tit.equip( this );\n\n\t},\n\n\t/**\n\t * Item was unequipped.\n\t * @param {*} it\n\t */\n\tonUnequip( it ) {\n\n\t\tif ( !it || typeof it ==='boolean') return;\n\n\t\tif ( Array.isArray(it) ) {\n\n\t\t\tfor( let i = it.length-1; i>=0;i--) {this.onUnequip(it[i])}\n\n\t\t} else {\n\n\t\t\tthis.state.inventory.add( it );\n\t\t\tit.unequip(this);\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Attempt to remove item from equip slot.\n\t * Unlike onUnequip, this can fail.\n\t * @param {string} slot\n\t * @param {*} it\n\t * @returns {boolean}\n\t */\n\tunequip( slot, it){\n\n\t\tif ( this.state.inventory.full() ) return false;\n\n\t\tthis.onUnequip( this.state.equip.remove( it, slot ) );\n\n\t\treturn true;\n\n\t},\n\n\t/**\n\t * Add an item to player's inventory.\n\t * @param {Item} it\n\t */\n\ttake( it ) {\n\t\treturn this.state.inventory.add(it);\n\t},\n\n\t/**\n\t * Get loot from a task, monster, or dungeon.\n\t * @param {string|Wearable|Object|Array} it\n\t * @param {?Inventory} inv - inventory to place looted item.\n\t */\n\tgetLoot(it, inv=null) {\n\n\t\tif ( !it) return null;\n\n\t\t//console.log('LOOT: ' + it.id );\n\n\t\tinv = inv || this.state.inventory;\n\t\tif ( inv.full() ) inv = this.state.drops;\n\n\t\tif ( typeof it === 'object' && it.stack ) {\n\n\t\t\tif ( inv.addStack( it ) ) {\n\t\t\t\tEvents.emit( EVT_LOOT, it );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t}\n\n\t\tlet res = this.itemGen.getLoot(it);\n\t\tif ( res === null || res === undefined ) return;\n\n\t\tEvents.emit( EVT_LOOT, res );\n\n\t\tinv.add( res );\n\n\t},\n\n\t/**\n\t * Decrement lock count on an Item or array of items, etc.\n\t * @param {string|string[]|GData|GData[]} id\n\t */\n\tunlock( id ) { this.lock(id, -1); },\n\n\t/**\n\t * Increment lock counter on item or items.\n\t * @param {string|string[]|GData|GData[]} id\n\t */\n\tlock(id, amt=1 ) {\n\n\t\tif ( typeof id === 'object' && id[Symbol.iterator] ) {\n\n\t\t\tfor( let v of id ) this.lock(v,amt);\n\n\t\t} else if ( typeof id === 'object' ) {\n\n\t\t\tid.locks += amt;\n\n\t\t} else {\n\n\t\t\tlet it = this.getData(id);\n\t\t\tif ( it ) {\n\t\t\t\tthis.lock(it, amt);\n\t\t\t}\n\n\t\t}\n\n\n\t},\n\n\t/**\n\t *\n\t * @param {string} id\n\t * @returns {GData|undefined}\n\t */\n\tgetData(id) { return this._gdata[id] || this.state[id]; },\n\n}","import { itemRevive } from \"../modules/itemgen\";\nimport Item from \"../items/item\";\n\n/**\n * Equipment slot.\n */\nexport default class Slot {\n\n\ttoJSON(){\n\t\treturn {\n\t\t\titem:this.item,\n\t\t\tmulti:this.multi,\n\t\t\tmax:this.max\n\t\t}\n\t}\n\n\tget item() {\n\t\treturn this._item;\n\t}\n\tset item(v){\n\n\t\tthis._item = v;\n\n\t}\n\n\tconstructor(vars=null){\n\n\t\tif ( vars ) Object.assign( this, vars);\n\n\t\tthis.max = this.max || 1;\n\t\tthis.item = this.item || ( this.max > 1 ? [] : null );\n\n\t\t/**\n\t\t * @property {boolean} multi - true if slot holds multiple items.\n\t\t */\n\t\tthis.multi = Array.isArray( this.item );\n\n\t\t//this.name = this._name || this.id;\n\n\t}\n\n\t*[Symbol.iterator]() {\n\n\t\tif ( Array.isArray(this.item) ) {\n\n\t\t\tfor( let i = 0; i < this.item.length;i ++ ) yield this.item[i];\n\n\t\t} else yield this.item;\n\n\t}\n\n\t/**\n\t * @returns {string[]}\n\t */\n\tgetItemIds(){\n\n\t\tif ( this.item == null ) return [];\n\n\t\tif ( Array.isArray(this.item)) {\n\n\t\t\tlet a = [];\n\t\t\tfor( let i = 0; i < this.item.length; i++ ) a.push( this.item[i].id);\n\t\t\treturn a;\n\n\t\t} else return [this.item.id]\n\n\t}\n\n\t/**\n\t * Compute spaces left in slot.\n\t * @returns {number}\n\t */\n\tfreeSpace() {\n\n\t\tlet count = this.max;\n\t\tif ( !this.item ) return count;\n\t\telse if ( count === 1 ) return 0;\n\n\t\t// should be impossible.\n\t\tif ( !Array.isArray(this.item) ) return 0;\n\n\t\tfor( let i = this.item.length-1; i>= 0; i-- ) {\n\t\t\tcount -= ( this.item[i].numslots || 1 );\n\t\t}\n\n\t\treturn count;\n\n\t}\n\n\t/**\n\t *\n\t * @param {Item} it - the item to place in the slot.\n\t * @returns {Item|boolean} Item(s) removed from slot, or true,\n\t * if no item needs to be removed.\n\t */\n\tequip( it ){\n\n\t\tlet spaces = it.numslots || 1;\n\n\t\t// won't fit in slot.\n\t\tif ( spaces > this.max ) return false;\n\n\t\tif ( this.multi === true ) {\n\n\t\t\treturn this.addMult( it, spaces );\n\n\t\t} else if ( !this.item ) {\n\n\t\t\tthis.item = it;\n\t\t\treturn true;\n\n\t\t} else {\n\n\t\t\tlet tmp = this.item;\n\t\t\tthis.item = it;\n\n\t\t\treturn tmp;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Add item when items is array.\n\t * @param {*} it\n\t * @param {number} spaces - used spaces.\n\t */\n\taddMult( it, spaces ){\n\n\t\tif ( this.item.find(v=>v.id===it.id) ) return false;\n\n\t\tthis.item.push(it);\n\t\tfor( let i = this.item.length-2; i >= 0; i-- ) {\n\n\t\t\tspaces += (this.item[i].numslots || 1);\n\t\t\tif ( spaces > this.max ) {\n\n\t\t\t\treturn this.item.splice( 0, i+1);\n\n\t\t\t}\n\n\t\t}\n\t\treturn true;\n\n\n\t}\n\n\t/**\n\t * Find item in slot by id.\n\t * @param {string} id\n\t * @returns {Item|null}\n\t */\n\tfind(id ) {\n\t\tif ( this.item === null) return null;\n\t\treturn this.multi ?\n\t\t\tthis.item.find(v=>v.id===id) :\n\t\t\t(this.item.id === id) ? this.item : null\n\t}\n\n\t/**\n\t *\n\t * @param {(*)=>boolean} pred\n\t */\n\tmatch( pred  ) {\n\t\tif ( this.item === null) return null;\n\t\treturn this.multi ? this.item.find( pred ) : pred(this.item) ? this.item : null;\n\t}\n\n\t/**\n\t *\n\t * @param {*} it\n\t * @returns {boolean}\n\t */\n\thas(it) {\n\t\treturn (this.multi === false ) ? this.item === it : this.item.includes(it);\n\t}\n\n\t/**\n\t * Remove item from slot.\n\t * @param {?Item} [it=null] - item to remove. If item is null, any item(s) in slot are removed.\n\t * @returns {?Item|boolean} - If no parameter is specified, removes all items and returns them.\n\t * If a param is specified, returns the item removed.\n\t */\n\tremove( it=undefined) {\n\n\t\tif ( this.item === it ) {\n\n\t\t\tthis.item = null;\n\t\t\treturn it;\n\n\t\t} else if ( it === null || it === undefined ) {\n\n\t\t\tit = this.item;\n\t\t\tthis.item = null;\n\n\t\t\treturn it;\n\n\t\t} else if ( this.multi ) {\n\n\t\t\tlet ind = this.item.indexOf(it);\n\t\t\tif ( ind < 0 ) return false;\n\t\t\treturn this.item.splice(ind,1)[0];\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t/**\n\t *\n\t * @param {Context} g\n\t */\n\tbegin(g){\n\t\tif ( this.item === null || this.item === undefined ) return;\n\t\tif ( Array.isArray( this.item) ) {\n\n\t\t\tfor( let i = this.item.length-1; i>= 0; i-- ) {\n\t\t\t\tthis.item[i].begin(g);\n\t\t\t}\n\n\t\t} else this.item.begin( g );\n\t}\n\n\trevive( gs ) {\n\n\t\tif ( this.item === null || this.item === undefined ) return;\n\t\tif ( Array.isArray( this.item) ) {\n\n\t\t\tlet ids = {};\n\n\t\t\tlet all = this.item;\n\t\t\tfor( let i = all.length-1; i>= 0; i-- ) {\n\n\t\t\t\tvar it = itemRevive(gs, all[i]);\n\n\t\t\t\tif ( !it || ids[it.id]===true) {\n\n\t\t\t\t\tall.splice(i,1);\n\n\t\t\t\t} else {\n\t\t\t\t\t// @note seems to be some sort of duplicate item check.\n\t\t\t\t\t// this shouldn't occur but seems familiar as a previous bug.\n\t\t\t\t\tall[i] = it;\n\t\t\t\t\tids[ it.id ] = true;\n\t\t\t\t\t//it.worn=true;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\t\t\tthis.item = itemRevive(gs, this.item );\n\t\t\t//if ( this.item !== null && this.item !== undefined )this.item.worn=true;\n\t\t}\n\n\t}\n\n\t/**\n\t * Return the hands used by a weapon held in this slot.\n\t */\n\thands() {\n\t\treturn this.item != null ? (this.item.hands) || 0 : 0;\n\t}\n\n\tempty(){\n\t\treturn this.item === null ||\n\t\t\t(Array.isArray(this.item) && this.item.length===0);\n\t}\n\n}","import Slot from './slot';\n\nexport default class SlotGroup {\n\n\t/**\n\t * @property {.<string,Slot>} slots\n\t */\n\tget slots() { return this._slots; }\n\tset slots(v) {\n\n\t\tfor( let p in v ) {\n\n\t\t\tvar s = v[p];\n\t\t\tif ( s instanceof Slot ) continue;\n\t\t\tv[p] = new Slot(s);\n\n\t\t}\n\n\t\tthis._slots = v;\n\n\t}\n\n\tconstructor( vars=null ) {\n\n\t\tif ( vars ) Object.assign(this, vars);\n\n\t}\n\n\t/**\n\t * Find equipment item by id.\n\t * @param {string} id\n\t * @returns {Item|null}\n\t */\n\tfind( id ) {\n\n\t\tfor( let p in this.slots ) {\n\t\t\tvar it = this.slots[p].find(id);\n\t\t\tif ( it ) return it;\n\t\t}\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Search for all items that match predicate.\n\t * @param {*=>boolean} pred\n\t * @returns {?object}\n\t */\n\tfindAll( pred ){\n\n\t\tlet a = [];\n\n\t\tfor( let p in this.slots ) {\n\t\t\tvar it = this.slots[p].match(pred);\n\t\t\tif ( it ) {\n\t\t\t\ta.push(it);\n\t\t\t}\n\n\t\t}\n\t\treturn a;\n\n\t}\n\n\t/**\n\t * Get item or items in a named slot.\n\t * @param {string} slot\n\t * @returns {?Item|Item[]}\n\t */\n\tget( slot ) {\n\n\t\tslot = this.slots[slot];\n\t\tif ( slot === undefined ) return undefined;\n\n\t\treturn slot.item;\n\n\n\t}\n\n\tfreeSpace( slot ) {\n\t\tslot = this.slots[slot];\n\t\tif ( slot === undefined ) return 0;\n\t\treturn slot.freeSpace();\n\t}\n\n\t/**\n\t *\n\t * @param {Item} it\n\t */\n\tremove( it, slot=null ) {\n\n\t\tslot = slot || it.slot;\n\t\tif ( typeof slot === 'string' ) slot = this.slots[slot];\n\n\t\t//console.log('remove from: ' + slot.id );\n\t\tif ( slot ) return slot.remove(it);\n\n\t\treturn false;\n\n\t}\n\n\tbegin(g){\n\t\tfor( let p in this.slots ) {\n\t\t\tthis.slots[p].begin(g);\n\t\t}\n\t}\n\n\trevive(gs) {\n\t\tfor( let p in this.slots ) {\n\t\t\tthis.slots[p].revive(gs);\n\t\t}\n\n\t}\n\n\t/**\n\t *\n\t * @param {Item} it\n\t * @param {string} slot\n\t * @returns {boolean|Wearable|Wearable[]}\n\t */\n\tsetSlot( it, slot=null ) {\n\n\t\tslot = slot || it.slot;\n\t\tif( slot === null || !this.slots.hasOwnProperty(slot)) return false;\n\n\t\tlet cur = this.slots[slot];\n\t\treturn cur.equip(it);\n\t}\n\n\t/**\n\t * Iterate slot names.\n\t * @returns {Iterator<string>}\n\t */\n\t* slotNames() {\n\t\tfor( let k in this.slots ) yield k;\n\t}\n\n\t*[Symbol.iterator]() {\n\n\t\tfor( let k in this.slots ) {\n\n\t\t\tvar it = this.slots[k].item;\n\t\t\tif ( Array.isArray(it) ) {\n\t\n\t\t\t\tfor( let i = it.length-1; i>= 0; i-- ) {\n\t\t\t\t\tif ( it[i]) yield it[i];\n\t\t\t\t}\n\n\t\t\t} else if (it) yield it;\n\n\t\t}\n\n\t}\n\n}","import Slot from './slot';\nimport SlotGroup from './slotgroup';\n\nexport default class Equip extends SlotGroup {\n\n\ttoJSON(){\n\t\treturn { slots:( this.slots ) };\n\t}\n\n\tconstructor( vars=null ) {\n\n\t\tsuper(vars );\n\n\t\tthis.slots = this._slots || {\n\t\t\t\"left\":new Slot(),\n\t\t\t\"right\":new Slot(),\n\t\t\t\"head\":new Slot(),\n\t\t\t\"hands\":new Slot(),\n\t\t\t\"back\":new Slot(),\n\t\t\t\"waist\":new Slot(),\n\t\t\t\"neck\":new Slot({\n\t\t\t\tmax:3\n\t\t\t}),\n\t\t\t\"trinket\":new Slot(),\n\t\t\t\"fingers\":new Slot({\n\t\t\t\tmax:4\n\t\t\t}),\n\t\t\t\"chest\":new Slot(),\n\t\t\t\"shins\":new Slot(),\n\t\t\t\"feet\":new Slot()\n\t\t};\n\n\t\tfor( let p in this._slots ) this._slots[p].name = p.toString().toTitleCase();\n\n\t}\n\n\t/**\n\t *\n\t * @param {Item} it\n\t */\n\tremove( it, slot=null ) {\n\t\treturn ( it.type === 'weapon') ? this.removeWeap(it) : super.remove(it,slot);\n\t}\n\n\tremoveWeap( it ) {\n\t\treturn this.slots.right.remove(it) || this.slots.left.remove(it);\n\t}\n\n\t/**\n\t * Get a count of items returned when using item.\n\t * This is to ensure there is sufficient inventory space for new items.\n\t * (Equip from Dungeon drops, multihanded weaps, etc.)\n\t * @todo this is somewhat incorrect as inventory doesnt currently count spaces-used.\n\t * @param {Item} it\n\t * @returns {number}\n\t */\n\treplaceCount(it) {\n\n\t\tlet space = (it.type==='weapon') ?\n\t\t\tthis.freeSpace( 'right' ) + this.freeSpace('left') : this.freeSpace(it.slot);\n\n\t\treturn Math.max( ( it.numslots || 1 ) - space, 0 );\n\n\t}\n\n\t/**\n\t *\n\t * @param {Armor|Weapon} it\n\t * @param {string} slot\n\t * @returns {boolean|Wearable|Wearable[]}\n\t */\n\tequip( it, slot=null ) {\n\n\t\tif ( it.type === 'weapon' ) return this.equipWeap(it);\n\n\t\tslot = slot || it.slot;\n\t\tif( slot === null || !this.slots.hasOwnProperty(slot)) {\n\t\t\tconsole.log( it.id + ' bad equip slot: ' + it.slot );\n\t\t\treturn false;\n\t\t}\n\n\t\tlet cur = this.slots[slot];\n\t\treturn cur.equip(it);\n\t}\n\n\t/**\n\t * @returns {Wearable|null} equipped weapon, or null.\n\t */\n\tgetWeapon() {\n\t\treturn ( this.slots.right.empty() ===false) ? this.slots.right.item :this.slots.left.item;\n\t}\n\n\t/**\n\t *\n\t * @param {*} it\n\t * @returns {Item|Item[]|true}\n\t */\n\tequipWeap( it ) {\n\n\t\tlet right = this.slots.right;\n\t\tlet left = this.slots.left;\n\n\t\tif ( it.hands === 2 ) {\n\n\t\t\tlet rightItem = right.equip( it );\n\t\t\tlet leftItem = left.remove();\n\n\t\t\treturn (rightItem && leftItem) ? [ rightItem, leftItem ] :\n\t\t\t\t(rightItem || leftItem || true );\n\n\t\t} else {\n\n\t\t\tif ( right.empty() ) {\n\n\t\t\t\tconsole.log('setting right.');\n\n\t\t\t\tright.equip( it );\n\t\t\t\treturn ( !left.empty() ) ? left.remove() : true;\n\n\t\t\t} else if ( left.empty() ) {\n\n\t\t\t\tconsole.log('setting left.');\n\n\t\t\t\tleft.equip( it );\n\t\t\t\treturn ( !right.empty() ) ? right.remove() : true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.log('NEITHER EMPTY. switch hands.');\n\n\t\t\t\tlet res = right.equip( left.equip(it) );\n\t\t\t\treturn res;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}","import Inventory, { SAVE_IDS } from \"./inventory\";\nimport Events, { TASK_REPEATED } from '../events';\nimport { NPC, TEAM_PLAYER} from \"../values/consts\";\nimport RValue from \"../values/rvals/rvalue\";\n\n\nexport default class Minions extends Inventory {\n\n\t/**\n\t * @deprecated - use allies.max\n\t * @property {Stat} maxAllies - level max allies taken into battle.\n\t */\n\tget maxAllies() { return this._allies.max; }\n\tset maxAllies(v) { this._allies.max = v;\n\t}\n\n\t/**\n\t * @property {Inventory} - minions active in combat.\n\t */\n\tget allies() { return this._allies; }\n\tset allies(v) { this._allies = v; }\n\n\t/**\n\t * @property {Set<string>} - summons always kept.\n\t */\n\tget keep(){ return this._keep; }\n\tset keep(v){this._keep = v;}\n\n\t/**\n\t * @property {Map.<object,string>} mods - mods applied to added minions\n\t * by kind,tag,name, etc.\n\t * the mod/path object has to map to the mod tag, since tags are not unique.\n\t */\n\tget mods(){ return this._mods; }\n\tset mods(v){this._mods =v;}\n\n\tconstructor(vars=null){\n\n\t\tsuper(vars);\n\n\t\tthis.type = this.id = \"minions\";\n\n\t\tif ( !this.max ) this.max = 0;\n\n\t\t/*this.saveMode = 'custom';\n\t\tthis.saveMap = SaveInstanced;*/\n\n\t\tthis._allies = new Inventory( {id:'allies', spaceProp:'level', saveMode:SAVE_IDS} );\n\t\tthis.mods = new Map();\n\t\tthis.keep = new Set();\n\n\t}\n\n\taddKeep( mod ) {\n\n\t\tif ( typeof mod === 'string') {\n\t\t\tthis.keep.add(mod);\n\t\t} else if ( typeof mod ==='object') {\n\t\t\tfor( let p in mod) this.keep.add(p);\n\t\t}\n\n\t}\n\n\t/**\n\t * @todo - improve this w/ NpcState/Context.\n\t * @param {GData} it\n\t */\n\tshouldKeep(it) {\n\n\t\tif ( this.keep.has(it.id)||this.keep.has(it.kind) ) return true;\n\t\tfor( let p of it.tags ) if ( this.keep.has(p) ) return true;\n\t\treturn false;\n\n\t}\n\n\tupdate(dt) {\n\n\t\tfor( let i = this.items.length-1; i>= 0; i-- ) {\n\n\t\t\tlet it = this.items[i];\n\t\t\tif ( it.active === false && it.alive ) it.rest(dt);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Unique access point for adding minion.\n\t * @param {*} m\n\t */\n\tadd(m ) {\n\n\t\tsuper.add(m);\n\n\t\tm.team = TEAM_PLAYER;\n\t\tm.keep = true;\n\n\t\tif ( m.active ) {\n\t\t\tthis.setActive(m)\n\t\t}\n\n\t\tfor( let pair of this.mods ) {\n\n\t\t\tif ( m.is(pair[1] ) ) {\n\t\t\t\t//console.log('APPLY MINION MOD: ' + pair[1] );\n\t\t\t\tm.applyMods(pair[0]);\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n\tsetActive( b, active=true ) {\n\n\t\tif ( active === true ) {\n\n\t\t\tif ( !b.alive || !this.allies.canAdd(b) ) {\n\t\t\t\tb.active = false;\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif ( !this.allies.includes(b) ) {\n\t\t\t\tthis.allies.add(b);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.allies.remove(b);\n\n\t\t}\n\n\t\tb.active = active;\n\n\t}\n\n\trevive( state ) {\n\n\t\tsuper.revive(state);\n\n\t\tif ( !this.allies.max ) { this.allies.max = Math.floor( state.player.level / 5 ); }\n\n\t\tvar actives = [];\n\n\t\tfor( let i = this.items.length-1; i>=0; i-- ) {\n\n\t\t\tvar m = this.items[i];\n\t\t\tif ( m.type !== NPC ) {\n\t\t\t\tthis.items.splice( i, 1 );\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( m.active ) { actives.push(m); }\n\n\t\t}\n\n\t\tthis.allies.items = actives;\n\t\tthis.allies.calcUsed();\n\n\t\tthis.calcUsed();\n\n\t\t//Events.add( ALLY_DIED, this.died, this );\n\t\tEvents.add( TASK_REPEATED, this.resetActives, this );\n\n\t}\n\n\t/**\n\t *\n\t * @param {object} mods\n\t */\n\tapplyMods( mods, amt ){\n\n\t\tfor( let p in mods ){\n\n\t\t\tvar mod = mods[p];\n\n\t\t\tif ( this[p] ) {\n\n\t\t\t\t// own property.\n\t\t\t\tif ( this[p] instanceof RValue ) this[p].addMod(mod);\n\t\t\t\telse if ( p === 'keep' ) this.addKeep( mod );\n\t\t\t\telse this[p].applyMods( mod );\n\n\t\t\t} else if ( this.mods.has(mod) ) continue;\n\t\t\telse {\n\n\t\t\t\tthis.mods.set( mod, p );\n\t\t\t\tfor( let it of this.items ) {\n\n\t\t\t\t\tif ( it.is(p) ) {\n\t\t\t\t\t\tit.applyMods( mod, amt );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Reset the active list for any minions that have died,\n\t * gone inactive, etc.\n\t */\n\tresetActives() {\n\n\t\t/** @todo dangerous order referencing. */\n\t\tlet allies = this.allies.items;\n\n\t\tfor( let i = allies.length-1; i>=0; i-- ) {\n\n\t\t\tif ( !allies[i].active || !allies[i].alive ) {\n\t\t\t\tthis.setActive( allies[i], false );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t *\n\t * @param {Npc} m\n\t */\n\tremove( m ) {\n\n\t\tsuper.remove(m);\n\n\t\tconsole.log('removing minion: ' + m.id );\n\t\t// @note mods are not removed here.\n\t\tthis.setActive( m, false );\n\n\t}\n\n\t/**\n\t * Apparently does nothing.\n\t * @param {Npc} m\n\t */\n\tdied( m ) {\n\t\t//m.active = false;\n\t}\n\n}","import Game from '../game';\nimport Events, {TASK_DONE} from '../events';\nimport Proxy from './proxy';\nimport { TYP_RUN } from '../values/consts';\n\n\n/**\n * Wraps a task in progress with a task target, and possible\n * extra.instanced data.\n */\nexport default class Runnable extends Proxy {\n\n\ttoJSON(){\n\n\t\treturn {\n\t\t\titem:this.item ? this.item.id : undefined,\n\t\t\ttarget:this.target ? this.target.id : undefined,\n\t\t\texp:this._exp\n\t\t};\n\t}\n\n\tget type() { return TYP_RUN; }\n\n\t/**\n\t * @property {?GData} target - target of the running item.\n\t * may be undefined if not applicable.\n\t */\n\tget target() { return this._target;}\n\tset target(v) { this._target = v; }\n\n\tget exp(){ return this._exp; }\n\tset exp(v) { this._exp = v; }\n\n\tget running(){\n\t\tif ( this._item) return this._item.running;\n\t\treturn false;\n\t}\n\tset running(v){\n\t\tif ( this._item)this._item.running=v;\n\t\tif ( this._target) this._target.running=v;\n\t}\n\n\tget repeat() { return (this._item && this._item.repeat) || false; }\n\n\tpercent() { return this._length ? 100*this._exp / this._length : 0; }\n\n\tget length() { return this._length; }\n\tset length(v) { this._length = v;}\n\n\tcanRun( g ) { return !this.done && this._item && this._target && this._item.canAlter( this._target ) }\n\tget done() { return this._exp >= this._length; }\n\n\t/**\n\t * If target is supplied, first element MUST be the item\n\t * being used with target.\n\t * @param {object|GData} vars - runnable variables OR runner item.\n\t * @param {*} targ\n\t */\n\tconstructor( vars=null, targ=null ) {\n\n\t\tsuper();\n\n\t\tif ( targ ) {\n\n\t\t\tthis.target = targ;\n\t\t\tthis.item = vars;\n\n\t\t} else if (vars) Object.assign( this, vars );\n\n\t\tthis.length = ( typeof this.item === 'object') ? this.item.length || 0 : 0;\n\t\tthis.exp = this._exp || 0;\n\n\t}\n\n\tupdate(dt){\n\n\t\tthis.exp += dt;\n\n\t\tif ( this.exp > this.length ) {\n\n\t\t\tif ( this.target ) Game.useOn( this.item, this.target );\n\t\t\tEvents.emit( TASK_DONE, this, this.repeat );\n\t\t\tthis.target = null;\n\n\t\t}\n\n\t}\n\n\tonStop(){\n\t\tif ( this.item.onStop ) this.item.onStop( this.target );\n\t}\n\n\trevive( state ) {\n\n\t\tsuper.revive(state);\n\n\t\tif ( typeof this._target === 'string') this._target = state.findData(this._target);\n\n\t\tif ( this.item ) {\n\t\t\tthis._length = this.item.length;\n\t\t\tif ( this.item.resumeUseOn ) this.item.resumeUseOn(this.target );\n\t\t}\n\n\t}\n\n}","import { swap } from \"../util/array\";\n\n/**\n * Implements Set class using Array for Vue reactivity.\n */\nexport default class ArraySet {\n\n\tget size(){return this._store.length; }\n\n\t[Symbol.iterator](){\n\t\treturn this._store[Symbol.iterator]();\n\t}\n\n\t/**\n\t *\n\t * @param {?Iterable} a\n\t */\n\tconstructor( a ) {\n\n\t\t/**\n\t\t * @property {object[]} _store\n\t\t * @private\n\t\t */\n\t\tthis._store = [];\n\n\t\tif ( a ) {\n\t\t\tfor( let it of a ) this.add(it);\n\t\t}\n\n\t}\n\n\tclear(){\n\t\tthis._store = [];\n\t}\n\n\tforEach(p){\n\t\treturn this._store.forEach(p);\n\t}\n\n\tvalues(){\n\t\treturn this._store.slice(0);\n\t}\n\n\tinc(it){\n\t\tlet i = this._store.indexOf(it);\n\t\tswap(this._store, i,i+1);\n\t}\n\n\tdec(it){\n\t\tlet i = this._store.indexOf(it);\n\t\tswap(this._store, i,i-1);\n\t}\n\n\tadd( it ){\n\t\tthis._store.push(it);\n\t}\n\n\thas(it){\n\t\treturn this._store.includes(it);\n\t}\n\n\tdelete( it){\n\n\t\tlet ind = this._store.indexOf(it);\n\t\tif ( ind < 0) return false;\n\t\tthis._store.splice(ind, 1);\n\t\treturn true;\n\n\t}\n\n}","import {quickSplice, swap } from '../util/array';\nimport Events, {TASK_DONE, TASK_REPEATED, HALT_TASK, TASK_BLOCKED, STOP_ALL } from '../events';\nimport Stat from '../values/rvals/stat';\nimport Base, {mergeClass} from '../items/base';\nimport Runnable from '../composites/runnable';\nimport { SKILL, REST_TAG, TYP_RUN, PURSUITS } from '../values/consts';\nimport { assign } from 'objecty';\nimport { iterableMap, iterableFind, setReplace, mapSet } from '../util/dataUtil';\nimport ArraySet from '../values/arrayset';\nimport { Changed } from '../techTree';\n\n/**\n * Tracks running/perpetual tasks.\n */\nexport default class Runner {\n\n\t/**\n\t * @item compat.\n\t */\n\tget type() { return 'runner' }\n\thasTag() { return false; }\n\n\tconstructor( vars=null ){\n\n\t\tif ( vars ) assign( this, vars );\n\n\t\tthis.id = this.type;\n\t\tthis.name = 'activity';\n\n\t\t/**\n\t\t * @property {ArraySet.<Task>} actives - Actively running tasks.\n\t\t */\n\t\tthis.actives = new ArraySet( this.actives || null );\n\n\t\t/**\n\t\t * @property {Task[]} waiting - tasks waiting to run once rest is complete.\n\t\t */\n\t\tthis.waiting = this.waiting || null;\n\n\t\t/**\n\t\t * @property {} timers - timers ticking.\n\t\t */\n\t\tthis.timers = new Set( this.timers || null );\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn {\n\t\t\tmax:this.max,\n\t\t\twaiting:this.waiting.map(v=>v.id),\n\t\t\tactives:iterableMap( this.actives, v=> v.id ),\n\t\t\ttimers:this.timers.size > 0 ? iterableMap( this.timers, v=>v.id ) : undefined\n\t\t};\n\n\t}\n\n\t/**\n\t * @todo : Messy for Focus skill.\n\t */\n\tget exp() {\n\t\tlet a = iterableFind(this.actives, v=>v.type===SKILL);\n\t\treturn a ? a.exp : 0;\n\t}\n\n\tset exp(v) {\n\t\tlet a = iterableFind(this.actives, v=>v.type===SKILL);\n\t\tif ( a ) a.exp =v;\n\t}\n\n\t/**\n\t *\n\t * @param {object} obj\n\t * @param {(number)=>boolean} obj.tick -tick function.\n\t */\n\taddTimer(obj){\n\n\t\tthis.timers.add(obj);\n\n\t}\n\n\t/**\n\t * Used for cheat.\n\t */\n\tautoProgress(){\n\n\t\tthis.actives.forEach(v=>{\n\t\t\tif ( v.length ) {\n\t\t\t\tv.exp = v.length - 0.001;\n\t\t\t}\n\t\t});\n\n\t}\n\n\tget context(){return this._context;}\n\tset context(v) { this._context = v;}\n\n\t/**\n\t * @property {number} running - number currently running.\n\t */\n\tget running(){return this.actives.size; }\n\n\t/**\n\t * @property {number} free - number of available run slots.\n\t */\n\tget free(){\n\t\treturn Math.floor( this.max.valueOf() ) - this.actives.size;\n\t}\n\n\t/**\n\t * @property {Stat} max\n\t */\n\tget max() { return this._max; }\n\tset max(v) {\n\n\t\tif ( !this._max ) {\n\t\t\tthis._max = v instanceof Stat ? v : new Stat(v, 'max', true);\n\t\t} else {\n\t\t\tthis._max.base = v instanceof Stat ? v.base : v;\n\t\t}\n\n\t}\n\n\t/**\n\t * revive data from save.\n\t * @param {GameState} gs\n\t */\n\trevive( gs ) {\n\n\t\tthis.max = this._max || 1;\n\n\t\t/**\n\t\t * @property {DataList} pursuits\n\t\t */\n\t\tthis.pursuits = gs.getData( PURSUITS );\n\n\t\tthis.waiting = this.reviveList( this.waiting, gs, false );\n\n\t\tif ( this.waiting.length > this.max ) {\n\t\t\tthis.waiting = this.waiting.slice( this.waiting.length - this.max );\n\t\t}\n\n\t\tsetReplace( this.actives, this.reviveList( this.actives, gs, true ) );\n\n\t\tthis.timers = mapSet( this.timers, v=>gs.getData(v) );\n\n\t\tEvents.add( TASK_DONE, this.actDone, this );\n\t\tEvents.add( HALT_TASK, this.haltTask, this );\n\t\tEvents.add( TASK_BLOCKED, this.actBlocked, this );\n\t\tEvents.add( STOP_ALL, this.stopAll, this );\n\n\t}\n\n\t/**\n\t * Revive a list, removing elements that can't revive (missing items, etc.)\n\t * @param {Iterable} list\n\t * @param {GameState} gs\n\t * @param {boolean} [running=false] - whether the items in list are running.\n\t */\n\treviveList( list, gs, running=false ) {\n\n\t\tlet res = [];\n\t\tif ( !list ) return res;\n\n\t\tfor( let a of list ) {\n\n\t\t\ta = this.reviveTask( a, gs, running);\n\t\t\tif ( a ) res.push(a);\n\n\t\t}\n\n\t\treturn res;\n\n\t}\n\n\t/**\n\t *\n\t * @param {*} a\n\t * @param {*} gs\n\t * @param {boolean} [running=false]\n\t */\n\treviveTask( a, gs, running=false ) {\n\n\t\tif ( !a ) return;\n\n\t\tif ( typeof a === 'string' ) {\n\n\t\t\ta = gs.getData( a);\n\t\t\tif ( !a || !a.hasTag ) return null;\n\n\t\t}\n\n\t\ta.running=running;\n\t\tif ( a.controller ) return gs.getData(a.controller);\n\n\n\t\treturn a;\n\n\t}\n\n\t/**\n\t * setTask of two items combined.\n\t * Before using an item and target, check if any existing Runnable matches.\n\t * If no match, create a Runnable.\n\t * @param {GData} it\n\t * @param {*} targ\n\t */\n\tbeginUseOn( it, targ ) {\n\n\t\tvar run;\n\t\tif ( it.beginUseOn ) {\n\t\t\trun = it.beginUseOn( targ );\n\t\t} else {\n\t\t\trun = new Runnable( it, targ );\n\t\t}\n\n\t\treturn this.setTask( run );\n\n\t}\n\n\t/**\n\t * Toggle running state of task.\n\t * @public\n\t * @param {Task} a\n\t */\n\ttoggleAct( a ) {\n\n\t\tif ( this.actives.has(a) ) {\n\t\t\tthis.stopTask(a, false);\n\t\t} else this.setTask(a);\n\n\t}\n\n\t/**\n\t * Add a task absolutely, removing a running task if necessary.\n\t * @public\n\t * @param {*} a\n\t * @returns {boolean} true on success\n\t */\n\tsetTask(a) {\n\n\t\tif ( !a) return false;\n\n\t\tif ( a.cost && (a.exp.valueOf() === 0) ) {\n\t\t\tthis.context.payCost( a.cost);\n\t\t}\n\n\t\tif ( a.controller ) {\n\t\t\t/// a is proxied by another object. (raid/explore)\n\t\t\tlet p = this.context.state.getData( a.controller );\n\t\t\tif (!p) return false;\n\t\t\tp.runWith(a);\n\t\t\ta = p;\n\t\t}\n\n\t\tif ( !this.has(a) ) {\n\n\t\t\tthis.runTask(a);\n\t\t\tthis.trimActives(a);\n\n\t\t} else {\n\t\t\t// task already in running list.\n\t\t\tEvents.emit( TASK_REPEATED );\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * stop activities to make the available space.\n\t * @param {number} free - activity spaces to free.\n\t */\n\ttrimActives( not=null ){\n\n\t\tvar remove = this.actives.size - Math.floor(this.max.valueOf());\n\t\tif ( remove <= 0 ) return;\n\n\t\tfor( let a of this.actives ) {\n\n\t\t\tif ( a === not ) continue;\n\t\t\tthis.stopTask(a, false );\n\t\t\tif ( a.type === TYP_RUN ) this.addWait(a);\n\n\t\t\tif ( --remove <= 0 ) return;\n\t\t}\n\n\t}\n\n\t/**\n\t * @private\n\t * @param {Task} act\n\t * @param {boolean} [resume=true] - attempt to resume task later.\n\t */\n\tactBlocked( act, resume=true ) {\n\n\t\tthis.stopTask( act, false );\n\t\tif ( act.hasTag(REST_TAG) ) {\n\n\t\t\tthis.tryResume();\n\n\t\t} else {\n\n\t\t\tif ( resume ) this.addWait(act);\n\t\t\tthis.doRest();\n\t\t}\n\n\t}\n\n\t/**\n\t * UNIQUE ACCESS POINT for removing active task.\n\t * @param {Task} i\n\t * @param {boolean} [tryWaiting=true] - whether to attempt to resume other tasks.\n\t */\n\tstopTask( a, tryWaiting=true ){\n\n\t\tif ( a.onStop ) a.onStop();\n\t\ta.running = false;\n\t\tthis.actives.delete(a);\n\n\t\tChanged.add(this);\n\n\t\tif ( tryWaiting ){\n\t\t\tthis.tryResume();\n\t\t}\n\n\t}\n\n\t/**\n\t * Test if task can be a pursuit\n\t * @param {*} a\n\t */\n\tcanPursuit(a){\n\t\treturn this.pursuits.max>0 && a.type !== TYP_RUN;\n\t}\n\n\t/**\n\t * Controller -> base task.\n\t * @param {*}\n\t */\n\tbaseTask(a) {\n\t\treturn a.baseTask || a;\n\t}\n\n\t/**\n\t * Add or remove existence of pursuit.\n\t * Does not toggle actual running state.\n\t * @param {*} a\n\t */\n\ttogglePursuit(a) {\n\n\t\ta = this.baseTask(a);\n\t\tif ( !a) return;\n\n\t\tif ( this.pursuits.includes(a) ) {\n\t\t\tthis.pursuits.remove(a);\n\t\t} else {\n\t\t\tthis.pursuits.cycleAdd(a);\n\t\t}\n\n\t}\n\n\t/**\n\t * Attempt to run next hobby.\n\t * @returns {boolean} true if pursuit was started.\n\t */\n\ttryPursuit(){\n\n\t\tif ( this.free <= 0 ){\n\t\t\treturn false;\n\t\t}\n\n\t\tlet it = this.pursuits.getRunnable( this.context );\n\t\tif ( !it ) return false;\n\n\t\treturn this.tryAdd( it );\n\n\t}\n\n\t/**\n\t * Attempt to add an task, while avoiding any conflicting task types.\n\t * @public\n\t * @param {GData} a\n\t */\n\ttryAdd( a ) {\n\n\t\tif ( !this.free ) return false;\n\t\tif ( a.fill && this.context.filled(a.fill,a) ) return false;\n\t\tif ( !a.canRun(this.context) ) return false;\n\n\t\treturn this.setTask(a);\n\n\t}\n\n\twaitingUp( t ){\n\n\t\tlet ind = this.waiting.indexOf(t);\n\t\tswap( this.waiting, ind, ind+1);\n\n\n\t}\n\n\twaitingDown( t ){\n\n\t\tlet ind = this.waiting.indexOf(t);\n\t\tswap( this.waiting, ind, ind-1);\n\n\t}\n\n\t/**\n\t * Remove task entirely from Runner, whether active\n\t * or waiting.\n\t * @param {GData} a\n\t */\n\tremoveAct( a ){\n\n\t}\n\n\t/**\n\t * Attempt to remain an task from waiting list.\n\t * @param {GData} a\n\t * @returns {boolean} true if task was found and removed.\n\t */\n\tremoveWait(a) {\n\n\t\tlet ind = this.waiting.indexOf(a);\n\t\tif ( ind < 0 ) return false;\n\n\t\tthis.waiting.splice(ind, 1);\n\t\treturn true;\n\n\t}\n\n\taddWait( a ){\n\n\t\tif ( a.hasTag(REST_TAG) ) return;\n\n\t\t//console.log('adding wait: ' + a.id );\n\t\tthis.waiting.push(a);\n\n\t\tlet remove = this.waiting.length - this.max.value;\n\t\tif ( remove > 0 ) {\n\t\t\tthis.waiting.splice(0, remove );\n\t\t}\n\n\t}\n\n\thaltTask( act ) {\n\n\t\tif ( act.controller ) act = this.context.state.getData(act.controller);\n\n\t\t// absolute rest stop if no tasks waiting.\n\t\tif ( this.waiting.length === 0 && act.hasTag( REST_TAG ) ) this.stopTask(act,false);\n\n\t\telse {\n\t\t\tthis.stopTask( act );\n\t\t}\n\n\t}\n\n\t/**\n\t * Task is done, but could be perpetual/ongoing.\n\t * Attempt to repay cost and keep task.\n\t * @param {*} act\n\t */\n\tactDone( act, repeatable=true ){\n\n\t\t//console.log('COMPLETE: ' + act.id );\n\n\t\tif ( act.running === false || !repeatable ) {\n\t\t\t// skills cant complete when not running.\n\t\t\tthis.stopTask(act);\n\n\t\t} else if ( repeatable ) {\n\n\t\t\tif ( this.context.canRun(act) && this.actives.size <= this.max.value ) {\n\n\t\t\t\tthis.setTask(act);\n\t\t\t\tif ( !act.hasTag( REST_TAG)  ) {\n\t\t\t\t\tthis.tryResume();\n\t\t\t\t}\n\n\n\t\t\t} else {\n\n\t\t\t\tthis.stopTask( act );\n\t\t\t\tthis.addWait(act);\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tstopAll() {\n\n\t\tfor( let a of this.actives.values() ) {\n\t\t\tthis.stopTask(a, false);\n\t\t}\n\t\tthis.clearWaits();\n\n\t}\n\n\tclearWaits() {\n\t\tthis.waiting.splice(0,this.waiting.length);\n\t}\n\n\t/**\n\t * Attempt to resume any waiting tasks.\n\t */\n\ttryResume() {\n\n\t\tlet avail = this.free;\n\n\t\t//console.log('tryResume() avail: ' + avail );\n\n\t\tfor( let i = this.waiting.length-1; i >= 0; i-- ) {\n\n\t\t\tvar a = this.waiting[i];\n\n\t\t\tif ( a == null ) {\n\n\t\t\t\tquickSplice(this.waiting,i);\n\n\t\t\t} else if ( this.tryAdd(a) ) {\n\n\t\t\t\tquickSplice(this.waiting,i);\n\t\t\t\tif ( --avail <= 0 ) return;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( avail > 0 ) {\n\t\t\tif ( !this.context.state.player.rested() ) {\n\t\t\t\tthis.tryAdd( this.context.state.restAction );\n\t\t\t}\n\t\t\tthis.tryPursuit();\n\t\t}\n\n\t}\n\n\tupdate(dt) {\n\n\t\tfor( let a of this.actives ) {\n\t\t\tthis.doTask( a, dt );\n\t\t}\n\n\t\tfor( let a of this.timers ) {\n\t\t\tif ( a.tick(dt) ) this.timers.delete(a);\n\t\t}\n\n\t}\n\n\t/**\n\t * Force-add a rest task.\n\t * @public\n\t */\n\tdoRest(){\n\t\tthis.tryAdd( this.context.state.restAction );\n\t}\n\n\t/**\n\t * Update individual task. Called during update()\n\t * @param {Task} a\n\t * @param {number} dt\n\t * @returns {boolean} false if task should be halted.\n\t */\n\tdoTask(a, dt) {\n\n\t\tif ( a.maxed() ) {\n\t\t\tthis.stopTask(a);\n\t\t\tthis.tryAdd( this.context.state.restAction );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( a.run ) {\n\n\t\t\tif ( !this.context.canPay( a.run, dt ) ) {\n\t\t\t\tthis.stopTask(a);\n\t\t\t\tthis.addWait(a);\n\t\t\t\tthis.tryAdd( this.context.state.restAction );\n\n\t\t\t}\n\t\t\tthis.context.payCost( a.run, dt );\n\n\t\t}\n\n\t\tif ( a.fill && this.context.filled( a.fill, a ) ) {\n\n\t\t\tthis.actBlocked(a);\n\n\t\t} else {\n\n\t\t\tif ( a.effect) this.context.applyVars( a.effect, dt );\n\t\t\tif ( a.update ) {\n\n\t\t\t\ta.update(dt);\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * UNIQUE ACCESS POINT for pushing task active.\n\t * @param {*} a\n\t */\n\trunTask(a) {\n\n\t\tChanged.add(this);\n\t\ta.running=true;\n\t\tthis.actives.add(a);\n\n\t\tif ( a.onStart ) a.onStart();\n\n\t\tthis.removeWait(a);\n\n\t}\n\n\t/**\n\t * Tests if exact task is running.\n\t * @param {Task} a\n\t * @returns {boolean}\n\t */\n\thas(a) {\n\t\treturn this.actives.has(a);\n\t}\n\n\t/**\n\t * Tests if the runner already has a similar task in progress.\n\t * Only actives are tested. Waiting task will not resume if\n\t * a new active takes its place.\n\t * @param {Task} a\n\t */\n\thasType( it ) {\n\n\t\tlet t = typeof it ==='string'? it : it.type;\n\t\treturn iterableFind( this.actives, a=>a.type===t) !== null;\n\n\t}\n\n\n}\n\n/**\n * applyMods() currently needed to increase runners.\n * @todo move this to Item stat.\n */\nmergeClass( Runner, Base );","import Events, { DEFEATED, TASK_DONE, ENC_START, TASK_BLOCKED, ENEMY_SLAIN, CHAR_DIED, EVT_COMBAT } from \"../events\";\nimport { assign } from 'objecty';\nimport Game from '../game';\nimport { EXPLORE, getDelay, TYP_PCT, ENCOUNTER } from \"../values/consts\";\nimport Encounter from \"../items/encounter\";\nimport { Locale } from \"../items/locale\";\n\n/**\n * Controls locale exploration.\n */\nexport default class Explore {\n\n\t/**\n\t * @property {string}\n\t */\n\tget id() { return EXPLORE; }\n\n\ttoJSON() {\n\n\t\tlet enc = this.enc;\n\n\t\treturn {\n\t\t\tlocale:this.locale ? this.locale.id : undefined,\n\t\t\tenc:enc ? enc.id : undefined\n\t\t}\n\n\t}\n\n\t/**\n\t * @property {string} name - name of locale in progress.\n\t */\n\tget name() { return this.locale? this.locale.name : ''; }\n\n\t/**\n\t * @property {object|string}\n\t */\n\tget cost() { return this.locale ? this.locale.cost : null; }\n\n\t/**\n\t * @property {object|string}\n\t */\n\tget run() { return this.locale ? this.locale.run : null; }\n\n\tget exp(){ return this.locale ? this.locale.exp : 0; }\n\tset exp(v){\n\n\t\tthis.locale.exp.set(v);\n\t\tif ( v >= this.locale.length ) this.complete();\n\n\t}\n\n\tget baseTask() { return this.locale }\n\n\t/**\n\t * @returns {number}\n\t */\n\tpercent() { return this.locale ? this.locale.percent() : 0; }\n\n\t/**\n\t * @returns {boolean}\n\t */\n\tmaxed() {\n\t\treturn !this.locale || this.locale.maxed();\n\t}\n\n\t/**\n\t * @returns {boolean}\n\t */\n\tcanUse() { return this.locale && !this.locale.maxed(); }\n\n\t/**\n\t * @returns {boolean}\n\t */\n\tcanRun(g) { return this.locale && !this.player.defeated() && this.locale.canRun(g); }\n\n\t/**\n\t * @property {object} effect - might be used by runner to apply effect?\n\t */\n\tget effect() { return this.locale ? this.locale.effect : null; }\n\tset effect(v){}\n\n\t/**\n\t * @property {number} length - length of locale in progress.\n\t */\n\tget length() { return this.locale ? this.locale.length : 0; }\n\n\t/**\n\t * @property {Encounter|Combat} enc - current encounter, or combat.\n\t */\n\tget enc() { return this._enc; }\n\tset enc(v) {\n\t\tthis._enc = v;\n\t}\n\n\t/**\n\t * @property {Combat}\n\t */\n\tget combat() { return this._combat; }\n\tset combat(v) { this._combat = v; }\n\n\t/**\n\t * @property {boolean} running\n\t */\n\tget running(){ return this._running; }\n\tset running(v) {\n\t\tthis._running = v;\n\t\tif ( this.combat ) this.combat.active = v && (this.enc === this.combat );\n\n\t}\n\n\t/**\n\t * @property {boolean} done\n\t */\n\tget done() { return this.exp === this.length; }\n\n\t/**\n\t *\n\t * @param {?Object} [vars=null]\n\t */\n\tconstructor( vars=null ) {\n\n\t\tif ( vars ) assign( this, vars);\n\n\t\tthis.running = false;\n\n\t\tthis.type = EXPLORE;\n\n\t\t// reactivity.\n\t\tthis._enc = this._enc || null;\n\n\t\t/**\n\t\t * @property {Locale} locale - current locale.\n\t\t */\n\t\tthis.locale = this.locale || null;\n\n\t}\n\n\trevive( gs ) {\n\n\t\tthis.state = gs;\n\t\tthis.player = gs.player;\n\t\tthis.spelllist = gs.getData('spelllist');\n\n\t\tEvents.add( ENEMY_SLAIN, this.enemyDied, this );\n\t\tEvents.add( CHAR_DIED, this.charDied, this );\n\t\t//Events.add( COMBAT_WON, this.nextEnc, this );\n\n\t\tif ( typeof this.locale === 'string') {\n\t\t\tlet loc = gs.getData(this.locale);\n\t\t\t// possible with save of deleted Locales.\n\t\t\tif ( !( loc instanceof Locale ) ) this.locale = null;\n\t\t\telse this.locale = loc;\n\n\t\t} else this.locale = null;\n\n\t\tif ( this._enc ) {\n\t\t\tthis.enc = gs.getData(this._enc);\n\t\t}\n\n\t\tthis.drops = gs.drops;\n\t\tthis.combat = gs.combat;\n\n\t}\n\n\t/**\n\t *\n\t * @param {Locale} locale - locale to explore.\n\t */\n\trunWith( locale ) {\n\n\t\tthis.player.timer = getDelay( this.player.speed );\n\n\t\tif ( locale != null ) {\n\n\t\t\tif ( locale != this.locale ) {\n\t\t\t\tthis.enc = null;\n\t\t\t\tthis.combat.reset();\n\t\t\t\tlocale.exp = 0;\n\n\t\t\t} else {\n\n\t\t\t\tthis.combat.reenter();\n\t\t\t\tif ( this.enc && this.enc.done ) this.nextEnc();\n\n\t\t\t\tif ( locale.exp >= locale.length ) {\n\t\t\t\t\tlocale.exp = 0;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.enc = null;\n\t\t\tthis.combat.reset();\n\n\t\t}\n\n\t\tthis.locale = locale;\n\n\t}\n\n\tcharDied( c ) {\n\n\t\tif ( c !== this.player || !this.running ) return;\n\n\t\tif ( this.player.luck > 100*Math.random() ) {\n\t\t\tthis.player.hp.value = Math.ceil( 0.05*this.player.hp.max );\n\t\t\tEvents.emit( EVT_COMBAT, 'Lucky Recovery', this.player.name + ' had a close call.' );\n\t\t}\n\n\t\tthis.emitDefeat();\n\n\t}\n\n\temitDefeat(){\n\t\tEvents.emit( DEFEATED, this.locale );\n\t\tEvents.emit( TASK_BLOCKED, this,\n\t\t\tthis.locale && this.player.level>this.locale.level && this.player.retreat>0 );\n\t}\n\n\tupdate(dt) {\n\n\t\tif ( this.locale == null || this.done ) return;\n\n\t\tif ( this.enc === null ) this.nextEnc();\n\t\telse {\n\n\t\t\t//@todo TODO: hacky.\n\t\t\tif ( this.enc !== this.combat ) this.player.explore(dt);\n\n\t\t\tthis.enc.update( dt );\n\t\t\tif ( this.player.defeated() ) {\n\n\t\t\t\tEvents.emit( DEFEATED, this );\n\t\t\t\tEvents.emit( TASK_BLOCKED, this, true );\n\n\t\t\t} else if ( this.enc.done ) {\n\n\t\t\t\tthis.encDone( this.enc );\n\t\t\t\tthis.exp += 1;\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\tnextEnc(){\n\n\t\tif ( !this.locale ) return;\n\t\t// get random encounter.\n\t\tthis.player.timer = getDelay( this.player.speed );\n\t\tvar e = this.locale.getEncounter();\n\n\t\tif ( e !== null ) {\n\n\t\t\tif ( e.type === ENCOUNTER ) {\n\n\t\t\t\tthis.enc = e;\n\n\t\t\t\te.exp = 0;\n\t\t\t\tEvents.emit( ENC_START, e.name, e.desc );\n\n\t\t\t} else {\n\n\t\t\t\t// Combat Encounter.\n\t\t\t\tthis.combat.setEnemies( e, this.exp/this.length );\n\t\t\t\tthis.enc = this.combat;\n\n\t\t\t}\n\n\t\t}\n\t\tthis.combat.active = (this.combat === this.enc );\n\n\n\t}\n\n\t/**\n\t * encounter complete.\n\t * @param {Encounter} enc\n\t */\n\tencDone( enc ) {\n\n\t\t//console.log('ENEMY templ: ' + (typeof enemy.template) );\n\n\t\tif ( enc !== this.combat ) {\n\n\t\t\tthis.player.exp += 0.75 + Math.max( enc.level - this.player.level, 0 );\n\n\t\t\tenc.value++;\n\n\t\t\tif ( enc.result ) Game.applyVars( enc.result );\n\t\t\tif ( enc.loot ) Game.getLoot( enc.loot, this.drops );\n\t\t\tenc.exp = enc.length;\n\n\t\t}\n\t\tthis.enc = null;\n\n\t}\n\n\tenemyDied( enemy, attacker ) {\n\n\t\tthis.player.exp += Math.max( 1.5*enemy.level - this.player.level, 1 );\n\n\t\t//console.log('ENEMY templ: ' + (typeof enemy.template) );\n\n\t\tif ( enemy.template && enemy.template.id ) {\n\n\t\t\tlet tmp = this.state.getData(enemy.template.id );\n\t\t\tif ( tmp ) {\n\t\t\t\ttmp.value++;\n\t\t\t}\n\t\t}\n\n\t\tif ( enemy.result ) Game.applyVars( enemy.result );\n\t\tif ( enemy.loot ) Game.getLoot( enemy.loot, this.drops );\n\t\telse Game.getLoot( {maxlevel:enemy.level, [TYP_PCT]:30}, this.drops );\n\n\t}\n\n\tcomplete() {\n\n\t\tthis.locale.amount(1);\n\n\t\tvar del = Math.max( 1 + this.player.level - this.locale.level, 1 );\n\n\t\tthis.player.exp +=\t(this.locale.level)*( 15 + this.locale.length )/( 0.8*del );\n\n\t\tEvents.emit( TASK_DONE, this, false );\n\n\t\tthis.enc = null;\n\t\tthis.locale = null;\n\n\t}\n\n\thasTag(t) { return t===EXPLORE; }\n\n}","import Base, { mergeClass } from \"../items/base\";\nimport { assign } from 'objecty';\nimport { addValues } from \"../util/dataUtil\";\n\n/**\n * Currently used to make custom user spells.\n * Groups multiple GData items into a single item.\n */\nexport default class Group {\n\n\ttoJSON(){\n\n\t\treturn {\n\n\t\t\tid:this.id,\n\t\t\titems:this.items.map(v=>v.id),\n\t\t\tname:this.name,\n\t\t\ttype:this.type,\n\t\t\tval:this.value,\n\t\t\tcustom:'group'\n\n\t\t}\n\t}\n\n\tget id() { return this._id; }\n\tset id(v) { this._id = v;}\n\n\tget name() {return this._name; }\n\tset name(v) { this._name = v; }\n\n\t/**\n\t * @property {Array} items\n\t */\n\tget items() { return this._items; }\n\tset items(v) {\n\n\t\tvar a = [];\n\n\t\tlet level = 0;\n\n\t\tif ( v ) {\n\n\t\t\tfor( let i = v.length-1; i >= 0; i-- ) {\n\n\t\t\t\tvar it = v[i];\n\t\t\t\tif ( typeof it === 'object') level += it.level || 0;\n\t\t\t\ta[i] = it;\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tthis.level = level;\n\n\t\tthis._items = a;\n\t}\n\n\t/**\n\t * @property {string} type - type might need to be a standard type\n\t * in order to mimic a default item in item lists.\n\t * 'custom' can distinguish as group.\n\t */\n\tget type() { return this._type; }\n\tset type(v) { this._type = v; }\n\n\t/**\n\t * @property {number} level\n\t */\n\tget level() { return this._level; }\n\tset level(v) { this._level = v; }\n\n\t/**\n\t * Cost to use.\n\t */\n\tget cost() { return this._cost; }\n\tset cost(v) { this._cost = v;}\n\n\t/*get instanced() { return true; }\n\tset instanced(v){}*/\n\n\tget locked() { return false;}\n\tget owned(){return true;}\n\tmaxed(){ return false; }\n\n\tconstructor(vars=null ) {\n\n\t\tif( vars) assign( this, vars );\n\n\t\tif (!this.items ) this.items = null;\n\n\t}\n\n\tcomputeCost() {\n\n\t\tif ( !this.items || this.items.length === 0) {\n\t\t\tthis.cost = null;\n\t\t\treturn;\n\t\t}\n\t\tlet cost = {};\n\n\t\tfor( let i = this.items.length-1; i >= 0; i-- ) {\n\n\t\t\tlet it = this.items[i];\n\t\t\tif (!it) this.items.splice( i, 1);\n\t\t\telse if ( it.cost ) addValues( cost, it.cost );\n\n\n\t\t}\n\n\t\tthis.effect = this.items.map( v=> typeof v === 'string' ? v : v.name );\n\t\tthis.cost = cost;\n\n\t}\n\n\tcanUse( g ) {\n\n\t\t//check for additional blocks like cd, locks, disabled, etc.\n\t\tfor( let i = this.items.length-1; i>=0; i-- ) {\n\t\t\tif ( !this.items[i].canUse(g) ) return false;\n\t\t}\n\n\t\treturn g.canPay( this.cost );\n\n\t}\n\n\t/**\n\t *\n\t * @param {} g\n\t * @returns nothing\n\t */\n\tonUse(g) {\n\n\t\tlet len = this.items.length;\n\t\tfor( let i = 0; i < len; i++ ) {\n\n\t\t\tthis.items[i].onUse(g);\n\n\t\t}\n\n\t}\n\n\tadd( it ) {\n\n\t\tthis.items.push(it);\n\n\t}\n\n\t/**\n\t *\n\t * @param {Game} g\n\t * @param {*} amt\n\t */\n\tamount( amt ) {\n\n\t\tlet len = this.items.length;\n\t\tfor( let i = 0; i < len; i++ ) {\n\t\t\tthis.items[i].amount( amt );\n\t\t}\n\n\t}\n\n\t/**\n\t *\n\t * @param {Object} mods - effect/mod description.\n\t * @param {number} amt - factor of base amount added\n\t * ( fractions of full amount due to tick time. )\n\t */\n\tapplyVars( mods, amt=1 ) {\n\n\t\tlet len = this.items.length;\n\t\tfor( let i = 0; i < len; i++ ) {\n\t\t\tthis.items[i].applyVars( mods, amt );\n\t\t}\n\t}\n\n\t/**\n\t * Apply mod to every data of group.\n\t * @param {Mod|Object} mods\n\t * @param {number} amt\n\t * @param {Object} [targ=null]\n\t */\n\tapplyMods( mods, amt=1, targ=this ) {\n\n\t\tlet len = this.items.length;\n\t\tfor( let i = 0; i < len; i++ ) {\n\t\t\tthis.items[i].applyMods( mods, amt, targ );\n\t\t}\n\n\t}\n\n\t/**\n\t *\n\t * @param {GameState} gs\n\t */\n\trevive(gs){\n\n\t\tthis.items = gs.toData(this.items);\n\t\tthis.computeCost();\n\n\t}\n\n}\n\nmergeClass( Group, Base );","import Inventory, { SAVE_IDS } from \"./inventory\";\nimport Group from \"../composites/group\";\nimport Events, { DELETE_ITEM } from \"../events\";\n\n/**\n * @note Entire class can be removed by putting the relevant functions\n * inside Spellcrafting display.\n * Leaving for more flexibility.\n */\nexport default class UserSpells extends Inventory {\n\n\tconstructor(vars=null) {\n\n\t\tsuper(vars);\n\n\t\tthis.id = 'userSpells';\n\t\tthis.name = \"Crafted Spells\";\n\t\tthis.saveMode = SAVE_IDS;\n\n\t}\n\n\trevive(gs) {\n\n\t\tsuper.revive(gs);\n\t\tthis.state = gs;\n\n\t\tfor( let s of this.items ) {\n\n\t\t\tif ( !s.school ) s.school = 'crafted';\n\n\t\t}\n\n\t}\n\n\t/**\n\t *\n\t * @param {number} ind\n\t */\n\tremoveAt(ind) {\n\n\t\tlet it = this.items[ind];\n\t\tif ( it ) {\n\n\t\t\tEvents.emit( DELETE_ITEM, it );\n\t\t\tsuper.removeAt(ind);\n\n\t\t}\n\n\t}\n\n\t/**\n\t *\n\t * @param {Spell[]} list\n\t * @param {GameState} gs\n\t * @param {string} [name=null]\n\t */\n\tcreate( list, gs, name=null ) {\n\n\t\tlet g = new Group();\n\n\t\tg.school = 'crafted';\n\t\tg.items = list;\n\n\t\tg.id = gs.nextId('spell');\n\t\tg.type = 'spell';\n\t\tg.name = name || 'new spell';\n\t\tg.computeCost();\n\n\t\tgs.addItem( g );\n\n\t\tthis.add( g );\n\n\t\treturn g;\n\n\t}\n\n}","import Proxy from \"./proxy\";\n\n/**\n * Slot in quickslot bar.\n */\nexport default class QuickSlot extends Proxy {\n\n\ttoJSON(){\n\n\t\tif ( this._item || this.recipe ) {\n\n\n\t\t\tif ( !this.recipe ) return this._item.id;\n\t\t\treturn {\n\t\t\t\titem:this.item.id,\n\t\t\t\trecipe:this.recipe\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tget name() {\n\n\t\treturn super.item ? super.item.name.toTitleCase() :\n\t\tthis.recipe || '';\n\n\t}\n\n\tget item() { return super.item; }\n\tset item(v) {\n\n\t\tsuper.item = v;\n\n\t\tif ( v && typeof v === 'object' ){\n\n\t\t\t// if id === recipe, the item is just using the recipe as a stand-in until item is found.\n\t\t\tif ( v.id !== this.recipe ) this.recipe = v.recipe || null;\n\n\t\t} else this.recipe = null;\n\n\t}\n\n\t/**\n\t * @property {string} recipe - recipe of the item, if any.\n\t * used to find a similar item if the original item reference\n\t * runs out.\n\t * @todo clean this up so recipes are reassigned to item automatically.\n\t */\n\tget recipe() {return this._recipe;}\n\tset recipe(v) {\n\n\t\tthis._recipe = v;\n\t}\n\n\t/**\n\t * All quickSlots are created at startup, so vars is always\n\t * JSON data or null.\n\t * @param {Object} [vars=null]\n\t */\n\tconstructor( vars=null ) {\n\n\t\tsuper();\n\n\t\tif ( vars ) {\n\n\t\t\tif ( typeof vars === 'string') {\n\n\t\t\t\tthis.item = vars;\n\t\t\t\tthis.recipe = null;\n\n\t\t\t} else if ( typeof vars === 'object' ) {\n\n\t\t\t\tthis.item = vars.item;\n\t\t\t\tthis.recipe = vars.recipe;\n\n\t\t\t}\n\n\t\t} else {\n\t\t\tthis.item = null;\n\t\t\tthis.recipe = null;\n\t\t}\n\n\t}\n\n\t/**\n\t * @returns {GData} target of the quickSlot item.\n\t */\n\tslotTarget( g ) {\n\n\t\t// if the recipe.id === item.id then the recipe was being used as a representative stand-in until an item isntance\n\t\t// could be found.\n\t\tif ( this.item && !this.recipe ) {\n\n\t\t\treturn this.item;\n\n\t\t} else if ( this.item ) {\n\n\t\t\tif ( this.item.value > 0 || (this.recipe !== this.item.id )) return this.item;\n\n\n\t\t} else if ( this.recipe ) return g.state.findInstance( this.recipe, true );\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Unused?!?!?\n\t * @param {Game} g\n\t */\n\tonUse( g ) {\n\n\t\tlet targ = this.slotTarget(g);\n\t\tif ( targ != null && targ.value >0 ) targ.onUse(g);\n\n\t}\n\n\trevive(gs) {\n\n\t\tif ( this.item ) {\n\n\t\t\t//console.log('finding quickslot item: ' + this.item );\n\n\t\t\tvar revive = gs.findData( this.item, false );\n\t\t\tif ( revive ) {\n\t\t\t\t//console.log('quickslot found: ' + revive.id );\n\t\t\t\tthis.item = revive;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t}\n\n\t\t// if the item didnt revive, need to rely on recipe.\n\t\tif ( this.recipe ) {\n\n\t\t\t// save recipe so item setter doesnt overwrite.\n\t\t\tlet recipe = this.recipe;\n\n\t\t\t//console.log('finding slot recipie: ' + this.recipe );\n\n\t\t\t// no item. if a matching item type can't be found, the recipe item\n\t\t\t// is used as the quickbar rollover and a type will be searched on use.\n\t\t\tthis.item = gs.findInstance( recipe, true ) || gs.getData( recipe );\n\n\t\t}\n\n\t}\n\n}","import QuickSlot from \"./quickslot\";\nimport { RESOURCE } from \"../values/consts\";\n\nexport const MAX_SLOTS = 10;\n\nexport default class Quickbar {\n\n\ttoJSON(){\n\t\treturn {\n\t\t\tslots:this.slots\n\t\t}\n\t}\n\n\tget slots() { return this._slots; }\n\tset slots(v) {\n\n\t\tif ( v === null || v === undefined ) return;\n\n\t\tlet a = [];\n\n\t\t// json arrays are not true arrays.\n\t\tfor( let i = 0; i < MAX_SLOTS; i++ ) {\n\t\t\ta[i] = new QuickSlot( v[i] );\n\t\t}\n\n\t\tthis._slots = a;\n\n\t}\n\n\t/**\n\t *\n\t * @param {*} vars\n\t */\n\tconstructor( vars=null ){\n\n\t\tif ( Array.isArray(vars) ) {\n\n\t\t\tthis.slots = vars;\n\n\t\t} else if ( vars ) {\n\n\t\t\tObject.assign( this, vars );\n\t\t\tif ( !vars.slots ) this.slots = [];\n\n\t\t} else this.slots = [];\n\n\t}\n\n\trevive( gs ) {\n\n\t\tfor( let i = this._slots.length-1; i >= 0; i-- ) {\n\t\t\tthis._slots[i].revive(gs);\n\t\t}\n\n\t}\n\n\t/**\n\t * Remove/Clear quickslot by id.\n\t * @param {string} id\n\t */\n\tremove( id ) {\n\n\t\tfor( let p in this.slots ) {\n\n\t\t\tvar s = this.slots[p];\n\t\t\tif ( s && s.item && s.id === id ) {\n\t\t\t\tthis.clear(p);\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Clear item at slot at index.\n\t * Index is actual slot index, not keypad number.\n\t * @param {number} ind\n\t */\n\tclear( ind ) {\n\t\tthis.slots[ind].item = null;\n\t}\n\n\tsetSlot( it, num ) {\n\n\t\tif ( it && it.type === RESOURCE ) return;\n\n\t\t// NOTE: using splice for Vue reactivity.\n\t\tif ( num >= 0 && num <=9 ) {\n\n\t\t\tlet ind = num > 0 ? num - 1 : 9;\n\t\t\tthis.slots[ind].item = it;\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Indices are converted N-1 mod 10\n\t * @param {number} num - key number pressed.\n\t * @returns {?GData}\n\t */\n\tgetSlot( num ) {\n\t\treturn this._slots[ num > 0 ? num-1 : 9 ];\n\t}\n\n}","import Quickbar from \"./quickbar\";\nimport Stat from \"../values/rvals/stat\";\nimport events, { DELETE_ITEM } from \"../events\";\n\n/**\n * Organizes sub-quick bars.\n */\nexport default class Quickbars {\n\n\ttoJSON(){\n\n\t\treturn {\n\t\t\tbars:this.bars,\n\t\t\tindex:this.index,\n\t\t\tmax:this.max\n\t\t};\n\n\t}\n\n\t/**\n\t * {QuickBar[]} bars defined.\n\t */\n\tget bars() { return this._bars; }\n\tset bars(v) {\n\n\t\tif ( !Array.isArray(v) ) {\n\t\t\tconsole.warn('NONARRAY: ' +v);\n\t\t\treturn;\n\t\t}\n\n\t\tfor( let i = v.length-1; i>= 0; i-- ) {\n\t\t\tv[i] = v[i] instanceof Quickbar ? v[i] : new Quickbar(v[i]);\n\t\t}\n\t\tthis._bars = v;\n\n\t}\n\n\tget active(){ return this._active; }\n\n\t/**\n\t * @property {number} index - index of current bar.\n\t */\n\tget index() { return this._index; }\n\tset index(v) { this._index = v; }\n\n\tconstructor( vars=null ) {\n\n\t\tif ( vars ) Object.assign( this, vars );\n\n\t\tif ( !this.bars || this.bars.length === 0 ) this.bars = [ {} ];\n\t\tif ( !this.max ) this.max = new Stat(1, 'quickbars.max');\n\n\t}\n\n\tnext(){\n\n\t\tif ( ++this._index >= this.bars.length ) {\n\t\t\tthis._index = 0;\n\t\t}\n\t\tthis._active = this._bars[this._index];\n\n\t}\n\n\tprev(){\n\n\t\tif ( --this._index < 0 ) {\n\t\t\tthis._index = this._bars.length-1;\n\t\t}\n\t\tthis._active = this._bars[this._index];\n\n\t}\n\n\tdataDeleted(it) {\n\n\t\tif ( !it ) return;\n\n\t\tfor( let i = this.bars.length-1; i>=0; i-- ) {\n\t\t\tthis._bars[i].remove(it.id);\n\t\t}\n\n\t}\n\n\trevive(state) {\n\n\t\tfor( let i = this.bars.length-1; i>=0; i-- ) {\n\t\t\tthis._bars[i].revive(state);\n\t\t}\n\n\t\tthis._index = this._index || 0;\n\t\tthis._active = this._bars[this._index];\n\n\t\tevents.add( DELETE_ITEM, this.dataDeleted, this );\n\n\t}\n\n}","import Inventory from \"./inventory\";\nimport { TYP_RUN, ENCHANTSLOTS } from \"../values/consts\";\nimport Enchanting from \"../composites/enchanting\";\n\nexport default class EnchantSlots extends Inventory {\n\n\tget exp(){\n\t\treturn this._exp;\n\t}\n\t/**\n\t * @private\n\t * @property {number} exp\n\t */\n\tset exp(v){\n\t\tthis._exp = v;\n\t}\n\n\t/**\n\t * @property {number} length\n\t */\n\tget length(){\n\t\treturn this._length;\n\t}\n\t/**\n\t * @private\n\t * @property {number} length\n\t */\n\tset length(v){\n\t\tthis._length=v;\n\t}\n\tpercent(){\n\t\treturn this._length>0 ? Math.round(100*this.exp/this.length) : 0;\n\t}\n\n\tconstructor( vars ) {\n\n\t\tsuper(vars);\n\n\t\tthis.id = ENCHANTSLOTS;\n\t\tthis.name = 'enchanting';\n\t\tthis.spaceProp = 'level';\n\n\t\tthis.removeDupes = true;\n\n\t\tthis._exp = 0;\n\t\tthis._length = 0;\n\n\t}\n\n\t/**\n\t * Note: this is called by Runner to determine if enchants complete.\n\t */\n\tmaxed(){\n\n\t\tfor( let i = this.items.length-1; i>= 0; i--) {\n\t\t\tif ( !this.items[i].done ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\n\t}\n\n\trevive( gs ){\n\n\t\tlet ltot = 0;\n\t\tlet extot = 0;\n\n\t\tfor( let i = this.items.length-1; i >= 0; i--) {\n\n\t\t\tvar it = new Enchanting( this.items[i] );\n\t\t\tif ( !it ) {\n\t\t\t\tconsole.warn('invalid enchanting: ' + i );\n\t\t\t\tthis.items.splice(i,1);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tit.revive(gs);\n\t\t\tif ( !it || it.target === null || it.item === null ) {\n\t\t\t\tthis.items.splice(i,1);\n\t\t\t} else {\n\t\t\t\tltot += it.length;\n\t\t\t\textot += it.exp;\n\t\t\t}\n\t\t\tthis.items[i] = it;\n\n\n\t\t}\n\n\t\tthis.exp = extot;\n\t\tthis.length = ltot;\n\n\t\tthis.calcUsed();\n\n\t}\n\n\tupdate(dt) {\n\n\t\tlet ltot = 0;\n\t\tlet extot = 0;\n\n\t\tfor( let i = this.items.length-1; i >= 0; i--) {\n\n\t\t\tvar it = this.items[i];\n\t\t\tif ( !it.done ) {\n\n\t\t\t\tit.update(dt);\n\t\t\t\tltot += it.length;\n\t\t\t\textot += it.exp;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.exp = extot;\n\t\tthis.length = ltot;\n\n\t}\n\n\t/**\n\t *\n\t * @param {Enchanting} e\n\t */\n\trunWith( e ) {\n\n\t\tif ( !this.includes(e) && e instanceof Enchanting ) {\n\t\t\tsuper.add(e);\n\t\t}\n\n\t}\n\n\tadd( item, enchant=null ){\n\n\t\tif ( item.type === TYP_RUN ){\n\n\t\t\tsuper.add(item);\n\n\t\t} else if ( item && enchant ) {\n\n\t\t\tlet r = new Enchanting( enchant, item );\n\t\t\tsuper.add( r );\n\n\t\t}\n\n\t}\n\n\t/**\n\t *\n\t * @param {} e - running task or enchant target.\n\t */\n\tremove( e ){\n\n\t\tif ( e.type !== TYP_RUN) {\n\n\t\t\te = this.items.find( v=>v.targ===e);\n\t\t\tif ( !e) return;\n\n\t\t}\n\n\t\tsuper.remove( e );\n\n\t}\n\t//God damn magic, calls begin for target instead of item since the item in enchantslots in an enchant with a target, not a real item.\n\tbegin(g){\n\t\tfor( let i = this.items.length-1; i>= 0; i-- ) {\n\t\t\tif ( typeof this.items[i].target.begin === 'function' ) this.items[i].target.begin(g);\n\t\t}\n\t}\n\n}","import { assign } from 'objecty';\n\nimport Events, {\n\tEVT_COMBAT, ENEMY_SLAIN, ALLY_DIED,\n\tDAMAGE_MISS, CHAR_DIED, STATE_BLOCK, CHAR_ACTION, COMBAT_WON\n} from '../events';\n\nimport { itemRevive } from '../modules/itemgen';\nimport { NO_SPELLS } from '../chars/states';\n\nimport { TEAM_PLAYER, getDelay, TEAM_NPC, TEAM_ALL } from '../values/consts';\nimport { TARGET_ENEMY, TARGET_ALLY, TARGET_SELF,\n\tTARGET_RAND, TARGET_PRIMARY, ApplyAction, TARGET_GROUP, TARGET_ANY, RandTarget, PrimeTarget } from \"../values/combatVars\";\nimport Npc from '../chars/npc';\n\n\n/**\n * @const {number} DEFENSE_RATE - rate defense is multiplied by before tohit computation.\n */\nconst DEFENSE_RATE = 0.25;\n\nexport default class Combat {\n\n\tget id() { return 'combat' }\n\n\ttoJSON() {\n\n\t\tvar a = undefined;\n\t\tif ( this.allies.length > 1 ) {\n\n\t\t\ta = [];\n\t\t\tfor( let i = 1; i < this.allies.length; i++ ) {\n\t\t\t\tvar v = this.allies[i];\n\t\t\t\ta.push( v.keep ? v.id : v )\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\tenemies: this._enemies,\n\t\t\tallies:a\n\t\t}\n\n\t}\n\n\t/**\n\t * Whether combat is active.\n\t * @property {boolean} active\n\t */\n\tget active() { return this._active;}\n\tset active(v) {this._active=v}\n\n\t/**\n\t * @property {Npc[]} enemies - enemies in the combat.\n\t */\n\tget enemies() { return this._enemies; }\n\tset enemies(v) {this._enemies = v;}\n\n\t/**\n\t * @property {Char[]} allies - player & allies. allies[0] is always the player.\n\t */\n\tget allies() { return this._allies; }\n\tset allies(v) { this._allies = v; }\n\n\t/**\n\t * @property {boolean} done\n\t */\n\tget done() { return this._enemies.length === 0; }\n\n\t/**\n\t * @property {Char[][]} teams - maps team id to team list.\n\t */\n\tget teams(){ return this._teams; }\n\n\tconstructor( vars=null ) {\n\n\t\tif (vars) assign(this, vars);\n\n\t\tif (!this.enemies) this.enemies = [];\n\t\tif ( !this.allies) this.allies = [];\n\n\t\tthis.active = false;\n\n\t\tthis._teams = [];\n\n\t}\n\n\t/**\n\t *\n\t * @param {GameState} gs\n\t */\n\trevive(gs) {\n\n\t\tthis.state = gs;\n\t\tthis.player = gs.player;\n\n\t\t// splices done in place to not confuse player with changed order.\n\n\t\tlet it;\n\n\t\tfor( let i = this._enemies.length-1; i>=0; i-- ) {\n\n\t\t\t// data can be null both before and after itemRevive()\n\t\t\tit = this._enemies[i];\n\t\t\tif ( it ) {\n\t\t\t\tit = this._enemies[i] = itemRevive( gs, it );\n\t\t\t}\n\t\t\tif ( !it || !(it instanceof Npc) ) {\n\t\t\t\tthis._enemies.splice(i,1);\n\t\t\t}\n\n\n\t\t}\n\n\t\tfor( let i = this._allies.length-1; i>=0; i-- ) {\n\n\t\t\tit = this._allies[i];\n\t\t\tif ( typeof it === 'string' ) this._allies[i] = gs.minions.find( it );\n\t\t\telse if ( it && typeof it === 'object' && !(it instanceof Npc)) {\n\t\t\t\tconsole.log('NEW ALLY');\n\t\t\t\tthis._allies[i] = itemRevive( gs, it );\n\t\t\t}\n\n\t\t\tif ( !this._allies[i] ) this._allies.splice(i,1);\n\n\t\t}\n\n\t\tthis._allies.unshift( this.player );\n\n\t\tthis.resetTeamArrays();\n\n\t\tEvents.add( CHAR_ACTION, this.spellAction, this );\n\t\tEvents.add( CHAR_DIED, this.charDied, this );\n\n\t}\n\n\tupdate(dt) {\n\n\t\tif ( this.player.alive === false ) return;\n\n\t\tvar e, action;\n\t\tfor( let i = this._allies.length-1; i >= 0; i-- ) {\n\n\t\t\te = this._allies[i];\n\n\t\t\tif ( i > 0 ) {\n\t\t\t\t// non-player allies.\n\t\t\t\tif ( e.alive === false ) {\n\n\t\t\t\t\t/** @todo messy minion removal. */\n\t\t\t\t\te.hp -= dt;\n\t\t\t\t\tif ( e.hp < -5 ) {\n\t\t\t\t\t\tthis._allies.splice(i,1);\n\t\t\t\t\t}\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\t\t\t\te.update(dt);\n\t\t\t}\n\n\t\t\taction = e.combat(dt);\n\t\t\tif ( !action ) continue;\n\n\t\t\telse if ( !action.canAttack() ) {\n\t\t\t\tEvents.emit( STATE_BLOCK, e, action );\n\t\t\t} else this.attack( e, action );\n\n\t\t}\n\n\t\tfor( let i = this._enemies.length-1; i >= 0; i-- ) {\n\n\t\t\te = this._enemies[i];\n\t\t\te.update(dt);\n\n\t\t\tif ( e.alive === false ) {\n\t\t\t\tthis._enemies.splice(i,1);\n\t\t\t\tif ( this._enemies.length === 0 ) Events.emit( COMBAT_WON );\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\taction = e.combat(dt);\n\t\t\tif ( !action ) continue;\n\n\t\t\telse if ( !action.canAttack() ){\n\t\t\t\tEvents.emit( STATE_BLOCK, e, action );\n\t\t\t} else this.attack( e, action );\n\n\t\t}\n\n\n\t}\n\n\t/**\n\t * Player-casted spell or action attack.\n\t * @param {Item} it\n\t * @param {Context} g\n\t */\n\tspellAction( it, g ) {\n\n\t\tlet a = g.self.getCause( NO_SPELLS);\n\t\tif ( a && !it.silent ) {\n\n\t\t\tEvents.emit( STATE_BLOCK, g.self, a );\n\n\t\t} else {\n\n\t\t\t//Events.emit(EVT_COMBAT, null, g.self.name + ' casts ' + it.name + ' at the darkness.' );\n\t\t\t//This capitalizes all the spells in the combat log.\n\t\t\tEvents.emit(EVT_COMBAT, null, g.self.name + ' Casts ' + it.name.toTitleCase() );\n\t\t\tif ( it.attack ) {\n\t\t\t\tthis.attack( g.self, it.attack );\n\t\t\t}\n\t\t\tif ( it.action ) {\n\t\t\t\t\n\t\t\t\tconsole.log('ACTION: ' + it.action );\n\t\t\t\tlet target = this.getTarget( g.self, it.action.targets );\n\n\t\t\t\tif (!target ) return;\n\t\t\t\tif ( Array.isArray(target)) {\n\n\t\t\t\t\tfor( let i = target.length-1; i>= 0; i-- ) ApplyAction( target[i], it.action, g.self );\n\n\t\t\t\t} else {\n\t\t\t\t\tApplyAction( target, it.action, g.self );\n\t\t\t\t}\n\n\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Attack a target.\n\t * @param {Char} attacker - enemy attacking.\n\t * @param {Object|Char} atk - attack object.\n\t */\n\tattack( attacker, atk ) {\n\t\tif ( atk.log ) {\n\t\t\tEvents.emit( EVT_COMBAT, null, atk.log );\n\t\t}\n\n\t\tif ( atk.hits ) {\n\t\t\t\n\t\t\tfor( let p in atk.hits ) {\n\t\t\t\tthis.attack( attacker, atk.hits[p] );\n\t\t\t}\n\t\t}\n\n\t\tlet targ = this.getTarget( attacker, atk.targets );\n\t\tif ( !targ) return;\n\n\t\tif ( Array.isArray(targ)) {\n\n\t\t\tfor( let i = targ.length-1; i>= 0; i-- ) {\n\t\t\t\tthis.doAttack( attacker, atk, targ[i]);\n\t\t\t}\n\n\t\t} else this.doAttack( attacker, atk, targ );\n\n\t}\n\n\t/**\n\t *\n\t * @param {Char} attacker\n\t * @param {Attack} atk\n\t * @param {Char} targ\n\t */\n\tdoAttack( attacker, atk, targ ) {\n\n\t\tif (!targ || !targ.alive ) return;\n\n\t\tif ( atk.harmless || !targ.canDefend() || this.tryHit( attacker, targ, atk ) ) {\n\t\t\tApplyAction( targ, atk, attacker );\n\t\t\t\n\t\t}\n\n\t}\n\n\t/**\n\t * @param {Char} char\n\t * @param {string} targets\n\t * @returns {Char|Char[]|null}\n\t */\n\tgetTarget( char, targets ) {\n\n\t\t// retarget based on state.\n\t\ttargets = char.retarget(targets);\n\n\t\tvar group = this.getGroup( targets, char.team );\n\t\tif ( !this.active ) {\n\n\t\t\tif ( this.group === this.enemies ) return null;\n\t\t\tif ( this.group === this.teams[TEAM_ALL] ) return this.allies;\n\t\t}\n\n\t\tif ( targets & TARGET_GROUP ) return group;\n\n\t\tif ( !targets || targets === TARGET_ENEMY || targets === TARGET_ALLY ) {\n\t\t\treturn RandTarget(group);\n\t\t} else if ( targets & TARGET_SELF ) return char;\n\n\t\tif ( targets & TARGET_PRIMARY) return PrimeTarget(group);\n\t\tif ( targets & TARGET_RAND ) return RandTarget(group);\n\n\t}\n\n\t/**\n\t * Get the Char group to which the target flags can apply.\n\t * Null or zero targets are assumed an enemy target.\n\t * @param {number} targets\n\t * @param {number} team - ally team.\n\t */\n\tgetGroup( targets, team ) {\n\n\t\tif ( !targets || (targets & TARGET_ENEMY) ) {\n\n\t\t\treturn team === TEAM_PLAYER ? this.enemies : this.allies;\n\n\t\t} else if ( targets & (TARGET_ALLY+TARGET_SELF) ) {\n\t\t\treturn this.teams[team];\n\n\t\t} else if ( targets & TARGET_ANY ) return this.teams[TEAM_ALL];\n\t\telse if ( targets & TARGET_RAND ) {\n\t\t\treturn Math.random() < 0.5 ? this.allies : this.enemies;\n\t\t}\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Rolls an attack roll against a defender.\n\t * @param {Char} attacker - attack object\n\t * @param {Char} defender - defending char.\n\t * @param {Object} attack - attack or weapon used to hit.\n\t * @returns {boolean} true if char hit.\n\t */\n\ttryHit( attacker, defender, attack ){\n\n\t\tlet tohit = attacker.getHit();\n\n\t\tif ( attack && (attack != attacker) ) tohit += ( attack.tohit || 0 );\n\n\t\tif ( this.dodgeRoll( defender.dodge, tohit )) {\n\t\t\tif(attack.name) {\n\t\t\t\tEvents.emit( DAMAGE_MISS, defender.name.toTitleCase() + ' Dodges ' + (attack.name.toTitleCase()));\n\t\t\t\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tEvents.emit( DAMAGE_MISS, defender.name.toTitleCase() + ' Dodges ' + (attacker.name.toTitleCase()));\n\t\t\t}\n\n\t\t} else if ( Math.random()*( 10 + tohit ) >= Math.random()*(10 + defender.defense * DEFENSE_RATE ) ) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tif(attack.name) {\n\t\t\t\tEvents.emit( DAMAGE_MISS, defender.name.toTitleCase() + ' Parries ' + (attack.name.toTitleCase()));\n\t\t\t\t\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tEvents.emit( DAMAGE_MISS, defender.name.toTitleCase() + ' Parries ' + (attacker.name.toTitleCase()));\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t *\n\t * @param {Npc[]} enemies\n\t */\n\tsetEnemies( enemies ) {\n\n\t\tthis.enemies.push.apply( this.enemies, enemies );\n\t\t//\tthis.enemies.push.apply( this.enemies, enemies );\n\n\t\tif ( enemies.length>0 ){\n\n\t\t\tif ( enemies[0] ) Events.emit( EVT_COMBAT, enemies[0].name.toTitleCase() + ' Encountered' );\n\t\t\telse console.warn('No valid enemy');\n\n\t\t}\n\n\t\tthis.resetTeamArrays();\n\t\tthis.setTimers();\n\n\t}\n\n\t/**\n\t * Add Npc to combat\n\t * @param {Npc} it\n\t */\n\taddNpc( it ){\n\n\t\tit.timer = getDelay( it.speed );\n\n\t\tif ( it.team === TEAM_PLAYER ) {\n\t\t\tthis._allies.push( it)\n\t\t} else this._enemies.push(it);\n\n\t\tthis.teams[TEAM_ALL].push(it);\n\n\t}\n\n\tresetTeamArrays() {\n\n\t\tthis.teams[TEAM_PLAYER] = this.allies;\n\t\tthis.teams[TEAM_NPC] = this.enemies;\n\t\tthis.teams[TEAM_ALL] = this.allies.concat(this.enemies);\n\n\t}\n\n\t/**\n\t * Reenter a dungeon.\n\t */\n\treenter() {\n\n\t\tthis.allies = this.state.minions.allies.toArray();\n\t\tthis.allies.unshift( this.player );\n\t\tthis.resetTeamArrays();\n\n\t}\n\n\t/**\n\t * Begin new dungeon.\n\t */\n\treset() {\n\n\t\tthis._enemies.splice(0, this.enemies.length);\n\t\tthis.reenter();\n\n\t}\n\n\n\t/**\n\t * readjust timers at combat start to the smallest delay.\n\t * prevents waiting for first attack.\n\t */\n\tsetTimers() {\n\n\t\tlet minDelay = this.player.timer = getDelay( this.player.speed );\n\n\t\tvar t;\n\t\tfor( let i = this.enemies.length-1; i >= 0; i-- ) {\n\t\t\tt = this.enemies[i].timer = getDelay( this.enemies[i].speed );\n\t\t\tif ( t < minDelay ) minDelay = t;\n\t\t}\n\t\tfor( let i = this.allies.length-1; i >= 0; i-- ) {\n\t\t\tt = this.allies[i].timer = getDelay( this.allies[i].speed );\n\t\t\tif ( t < minDelay ) minDelay = t;\n\t\t}\n\n\t\t// +1 initial encounter delay.\n\t\tminDelay -= 1;\n\n\t\tthis.player.timer -= minDelay;\n\n\n\t\tfor( let i = this.enemies.length-1; i >= 0; i-- ) {\n\t\t\tthis.enemies[i].timer -= minDelay;\n\t\t}\n\t\tfor( let i = this.allies.length-1; i >= 0; i-- ) {\n\t\t\tthis.allies[i].timer -= minDelay;\n\t\t}\n\n\t}\n\n\t/**\n\t * @param {number} dodge\n\t * @param {number} tohit\n\t * @returns {boolean} true if defender dodges.\n\t */\n\tdodgeRoll( dodge, tohit ) {\n\n\t\t//let sig = 1 + (dodge-tohit)/( 1+ Math.abs(dodge-tohit));\n\t\tlet sig = 1 + (2/Math.PI)*( Math.atan(dodge-tohit) );\n\n\t\t//console.log( 'dodge: ' + dodge + ' tohit: ' + tohit + '  sig: ' + sig );\n\n\t\treturn sig > Math.random();\n\n\t}\n\n\tcharDied( char, attacker ) {\n\n\t\tif ( char === this.player ) return;\n\t\telse if ( char.team === TEAM_PLAYER ) {\n\n\t\t\tEvents.emit( ALLY_DIED, char );\n\n\t\t} else Events.emit( ENEMY_SLAIN, char, attacker );\n\n\t}\n\n}","import Inventory from './inventories/inventory';\nimport GData from './items/gdata';\nimport Equip from './chars/equip';\nimport Minions from './inventories/minions';\n\nimport Runner from './modules/runner';\nimport Explore from './composites/explore';\nimport { ensure } from './util/util';\nimport DataList from './inventories/dataList';\nimport Group from './composites/group';\nimport UserSpells from './inventories/userSpells';\nimport Quickbars from './composites/quickbars';\nimport { WEARABLE, ARMOR, WEAPON, HOME, PURSUITS, ENCHANTSLOTS, TimeId } from './values/consts';\nimport Stat from './values/rvals/stat';\nimport TagSet from './composites/tagset';\nimport EnchantSlots from './inventories/enchantslots';\nimport Combat from './composites/combat';\n\nexport const REST_SLOT = 'rest';\n\n/**\n * Used to avoid circular include references.\n * @param {string[]|object} list\n */\nexport const MakeDataList = (list)=>{\n\treturn new DataList(list);\n}\n\nexport default class GameState {\n\n\ttoJSON(){\n\n\t\tlet slotIds = {};\n\t\tfor( let p in this.slots ) {\n\t\t\tif ( this.slots[p] ) slotIds[p] = this.slots[p].id;\n\t\t}\n\n\t\tlet data = {\n\n\t\t\tversion:__VERSION,\n\t\t\tpid:this.pid,\n\n\t\t\tname:this.player.name,\n\t\t\titems:this.saveItems,\n\t\t\tbars:this.bars,\n\t\t\tslots:slotIds,\n\t\t\tequip:this.equip,\n\t\t\tcombat:this.combat,\n\t\t\tdrops:this.drops,\n\t\t\texplore:this.explore,\n\t\t\tsellRate:this.sellRate,\n\t\t\tNEXT_ID:this.NEXT_ID\n\n\t\t};\n\n\t\treturn data;\n\n\t}\n\n\t/**\n\t * @property {string[]} modules - list of modules used.\n\t */\n\tget modules(){return this._modules}\n\tset modules(v){this._modules = v;}\n\n\t/**\n\t * Create unique string id.\n\t * @param {string} [s='']\n\t */\n\tnextId( s='' ) { return s + '_' + this.nextIdNum(); }\n\n\tnextIdNum() { return this.NEXT_ID++; }\n\n\t/**\n\t *\n\t * @param {Object} baseData - base game data.\n\t */\n\tconstructor( baseData ){\n\n\t\tObject.assign( this, baseData );\n\n\t\t/**\n\t\t * @property {.<string,GData} saveItems - items actually saved.\n\t\t * does not include hall items, or TagSets.\n\t\t */\n\t\tthis.saveItems = {};\n\n\t\t/**\n\t\t * @property {Map<string,Inventory>} inventories - default inventories\n\t\t * by item type, plus named inventories.\n\t\t */\n\t\tthis.inventories = new Map();\n\n\t\t/**\n\t\t * @property {number} NEXT_ID - Next item id.\n\t\t */\n\t\tthis.NEXT_ID = this.NEXT_ID || 0;\n\n\t\tif ( !this.pid ) {\n\n\t\t\t/**@ hid compat */\n\t\t\tthis.pid = this.player.hid || TimeId('p');\n\t\t\tif ( this.player.hid ) console.log('USING LEGACY HID: ' + this.player.hid );\n\t\t\telse console.log('GENERATING NEW PLAYERID: ' + this.pid );\n\n\t\t}\n\n\t\tthis.initSlots();\n\n\t\tthis.bars = new Quickbars(\n\n\t\t\tbaseData.bars ||\n\t\t\t\t{ bars:[baseData.quickbar] }\n\t\t);\n\n\t\tthis.inventory = new Inventory( this.items.inv || baseData.inventory || {max:3} );\n\t\tthis.items.inv = this.inventory;\n\t\tthis.inventory.removeDupes = true;\n\n\t\tthis.self = this.player;\n\t\tthis.drops = new Inventory( baseData.drops );\n\n\t\tthis.items[ENCHANTSLOTS] = new EnchantSlots( this.items[ENCHANTSLOTS] );\n\n\t\t/**\n\t\t * @property {Minions} minions\n\t\t */\n\t\tthis.items.minions = this.minions = new Minions( baseData.items.minions || null );\n\n\t\tthis.equip = new Equip( baseData.equip );\n\n\t\tthis.initStats();\n\n\t\tthis.combat = new Combat( baseData.combat );\n\t\tthis.explore = new Explore( baseData.explore );\n\n\t\tthis.runner = this.items.runner = new Runner( this.items.runner );\n\n\t\tthis.prepItems();\n\n\t\tthis.userSpells = this.items.userSpells = new UserSpells( this.items.userSpells );\n\n\t\tthis.items.spelllist = this.spelllist = new DataList( this.items.spelllist );\n\t\tthis.spelllist.spaceProp = 'level';\n\t\tthis.spelllist.name = this.spelllist.id = 'spelllist';\n\n\t\tthis.items.pursuits = new DataList( this.items.pursuits );\n\t\tthis.items.pursuits.id = PURSUITS;\n\n\t}\n\n\trevive() {\n\n\t\tconsole.log('Reviving GameState Items');\n\t\tthis.reviveItems();\n\n\n\t\tthis.reviveSpecial();\n\n\n\t\t// quickbars must revive after inventory.\n\t\tthis.bars.revive(this);\n\n\t\t// circular problem. spelllist has to be revived after created spells\n\t\t// compute their levels. unless levels stored in json?\n\t\tthis.spelllist.calcUsed();\n\n\t\t/**\n\t\t * @todo: messy bug fix. used to place player-specific resources on update-list.\n\t\t * just move to player update()?\n\t\t */\n\t\tthis.playerStats = this.player.getResources();\n\n\t\t/**\n\t\t * @property {Map.<string,TagSet>} tagsets - tag to array of items with tag.\n\t\t * makes upgrading/referencing by tag easier.\n\t\t*/\n\t\tthis.tagSets = this.makeTagSets( this.items );\n\n\t\tthis.items.allies = this.minions.allies;\n\t\tthis.saveItems.allies = undefined;\n\n\t}\n\n\t/**\n\t * Game-wide stats.\n\t */\n\tinitStats() {\n\n\t\t/**\n \t\t* @property {number} sellRate - percent of initial cost\n \t\t* items sell for.\n \t\t*/\n\t\t this.sellRate = this.sellRate || new Stat(0.5, 'sellRate');\n\n\t}\n\n\t/**\n\t * Revive custom items.\n\t */\n\tprepItems() {\n\n\t\tfor( let p in this.items ) {\n\n\t\t\tvar it = this.items[p];\n\n\t\t\tif ( !it ) {\n\t\t\t\tconsole.warn('prepItems() item undefined: ' + p );\n\t\t\t\tdelete this.items[p];\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\t/**\n\t\t\t * special instanced item.\n\t\t\t */\n\t\t\tif ( it.custom === 'group') {\n\n\t\t\t\t//console.warn('CUSTOM: ' + it.id + ' name: ' + it.name );\n\t\t\t\tthis.items[p] = new Group( it );\n\n\t\t\t} else if ( it.instanced ) {\n\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n\treviveSpecial() {\n\n\t\tfor( let p in this.slots ) {\n\t\t\tif ( typeof this.slots[p] === 'string') this.slots[p] = this.getData(this.slots[p] );\n\t\t}\n\t\tthis.restAction = this.slots[REST_SLOT];\n\n\t\tthis.equip.revive( this );\n\n\t\tthis.player.revive(this);\n\n\t\tthis.minions.revive(this);\n\t\tthis.drops.revive(this);\n\n\t\tthis.combat.revive(this);\n\t\tthis.explore.revive(this);\n\n\t}\n\n\t/**\n\t * Check items for game-breaking inconsistencies and remove or fix\n\t * bad item entries.\n\t */\n\treviveItems() {\n\n\t\tvar manualRevive = new Set( ['minions', 'player', 'explore', 'equip', 'drops'] );\n\n\t\tlet count = 0;\n\t\tfor( let p in this.items ) {\n\n\t\t\tvar it = this.items[p];\n\t\t\t/**\n\t\t\t * revive() has to be called after prepItems() so custom items are instanced\n\t\t\t * and can be referenced.\n\t\t\t */\n\t\t\tif ( it.revive && typeof it.revive === 'function' && !manualRevive.has(p) ) {\n\n\t\t\t\t//console.log('REVIVING: ' + it.id );\n\t\t\t\tit.revive(this);\n\t\t\t}\n\n\t\t\tif ( !it.hasTag ) {\n\n\t\t\t\tconsole.warn( p + ': ' + this.items[p].id + ' missing hasTag(). Removing.');\n\t\t\t\tdelete this.items[p];\n\n\t\t\t} else {\n\n\t\t\t\tthis.saveItems[p] = it;\n\t\t\t\t// need hasTag() func.\n\t\t\t\tif ( it.hasTag(HOME)) {\n\t\t\t\t\tit.need = this.homeTest;\n\t\t\t\t}\n\t\t\t\tcount++;\n\t\t\t}\n\n\t\t}\n\t\tconsole.log('Items Total: ' + count);\n\n\t}\n\n\t/**\n\t * Test if a home can fit the current used capacity.\n\t * @param {Object.<string,Items>} g - all game data.\n\t * @param {GData} i - item being tested.\n\t * @param {GameState} gs\n\t */\n\thomeTest( g, i, gs ) {\n\n\t\tvar cur = gs.slots.home;\n\n\t\treturn g.space.valueOf()<=\n\t\t\tg.space.max.delValue( i.mod.space.max.bonus - ( cur ? cur.mod.space.max.bonus : 0) );\n\n\t}\n\n\n\tinitSlots(){\n\n\t\t/**\n\t\t * @property {Object.<string,Item>} slots - slots for items which can only have\n\t\t * a single active at a given time.\n\t\t */\n\t\tthis.slots = this.slots || {};\n\n\t\t// must be defined for Vue. slots could be missing from save.\n\t\tensure( this.slots, [HOME, 'mount', 'bed', REST_SLOT]);\n\t\tif ( !this.slots[REST_SLOT] ) this.slots[REST_SLOT] = this.getData('rest');\n\n\t}\n\n\t/**\n\t * Create lists of tagged items.\n\t * @param {.<string,GData>} items\n\t * @returns {Map.<string,GData[]>} lists\n\t */\n\tmakeTagSets( items ) {\n\n\t\tvar tagSets = new Map();\n\n\t\tfor( let p in items ) {\n\n\t\t\tvar it = items[p];\n\t\t\tvar tags = it.tags;\n\t\t\tif ( !tags ) continue;\n\n\t\t\tfor( var t of tags ){\n\n\t\t\t\tvar list = tagSets[t];\n\t\t\t\tif ( !list ) {\n\t\t\t\t\titems[t] = tagSets[t] = list = new TagSet(t);\n\t\t\t\t}\n\n\t\t\t\tlist.add( it );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn tagSets;\n\n\t}\n\n\t/**\n\t *\n\t * @param {GData} it\n\t * @param {number} slotNum\n\t */\n\tsetQuickSlot( it, slotNum ) {\n\n\t\t//console.log('QUICK: ' + it.name );\n\n\t\tthis.bars.active.setSlot(it, slotNum);\n\t}\n\n\t/**\n\t * Get quickslot item for slot number.\n\t * @param {number} slotNum\n\t * @returns {?GData}\n\t*/\n\tgetQuickSlot( slotNum ) {\n\t\treturn this.bars.active.getSlot( slotNum);\n\t}\n\n\t/**\n\t * Replace all ids in array with corresponding GData.\n\t * @param {Array.<string|GData>} a\n\t * @returns - the original array.\n\t */\n\ttoData(a) {\n\n\t\tif (!a) return [];\n\n\t\tfor( let i = a.length-1; i >= 0; i-- ) {\n\n\t\t\tvar s = a[i];\n\t\t\tif ( typeof s === 'string') a[i] = this.getData(s);\n\n\t\t}\n\n\t\treturn a;\n\t}\n\n\t/**\n\t *\n\t * @param {string} tag\n\t * @returns {GData[]|undefined}\n\t */\n\tgetTagSet( tag ) {\n\t\treturn this.tagSets[tag];\n\t}\n\n\t/**\n\t * Get the cost of a given subtype to buy item.\n\t * @param {string} type\n\t * @returns {number}\n\t */\n\ttypeCost( cost, type ) {\n\n\t\tif ( !cost ) return 0;\n\t\treturn cost[type] || 0;\n\t}\n\n\t/**\n\t * Add to maximum value of resource.\n\t * Used for cheat codes.\n\t * @param {string} id\n\t * @param {number} amt\n\t */\n\taddMax( id, amt=50) {\n\n\t\tlet it = typeof id === 'string' ? this.getData(id) : id;\n\t\tif ( !it) return;\n\n\t\tit.max.base += amt;\n\t}\n\n\t/**\n\t *\n\t * @param {(it)=>boolean} pred\n\t */\n\tfilterItems( pred ) {\n\t\tlet a = [];\n\t\tlet items = this.items;\n\t\tfor( let p in items ) {\n\t\t\tif ( pred( items[p] ) ) a.push( items[p] );\n\t\t}\n\t\treturn a;\n\t}\n\n\t/**\n\t * Add created item to items list.\n\t * @param {GData} it\n\t */\n\taddItem( it ) {\n\n\t\tif ( this.items[it.id] ) console.warn('OVERWRITE ID: ' + it.id);\n\n\t\tif ( !it.hasTag ) {\n\t\t\tconsole.log('MISSING HASTAG: ' + it.id );\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.items[it.id] = it;\n\n\t\tif ( it.module !== 'hall') {\n\t\t\tconsole.log('ADDING SAVE ITEM: ' + it.id );\n\t\t\tthis.saveItems[it.id] = it;\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * Should only be used for custom items.\n\t * Call from Game so DELETE_ITEM event called.\n\t * @param {GData} it\n\t */\n\tdeleteItem( it ) {\n\t\tdelete this.items[it.id];\n\t\tdelete this.saveItems[it.id];\n\t}\n\n\t/**\n\t * Get state slots so they can be modified for Vue reactivity.\n\t * @returns {.<string,GData>}\n\t */\n\tgetSlots(){ return this.slots; }\n\n\t/**\n\t * Get item in named slot.\n\t * @param {string} id - slot id.\n\t * @param {string} type - item type for determining subslot (equip,home,etc)\n\t * @returns {?GData}\n\t */\n\tgetSlot( id, type) {\n\t\tif ( type === WEARABLE || type === ARMOR || type ===WEAPON ) return null;\n\t\treturn this.slots[id];\n\t}\n\n\t/**\n\t * Set slotted item for exclusive items.\n\t * @param {string} slot\n\t * @param {?GData} v - item to place in slot, or null.\n\t */\n\tsetSlot(slot,v) {\n\n\t\tif ( v && (v.type === WEARABLE) ) return;\n\t\tthis.slots[slot] = v;\n\n\t\tif ( slot === REST_SLOT ) this.restAction = v;\n\n\t}\n\n\t/**\n\t * Find an item instantiated from given item proto/recipe.\n\t * @param {string} id\n\t */\n\tfindInstance( id ) {\n\t\treturn this.inventory.find(id, true) || this.equip.find(id, true );\n\t}\n\n\texists(id){ return this.items.hasOwnProperty(id);}\n\n\t/**\n\t * Find item in base items, equip, or inventory.\n\t * @param {string} id\n\t * @param {boolean} [any=false] - whether to return any matching instanced item.\n\t */\n\tfindData(id, any=false) {\n\n\t\treturn this.getData(id) || this.inventory.find(id, any) || this.equip.find(id, any );\n\t}\n\n\t/**\n\t * Check if an item is unique and already exists, or been\n\t * instanced.\n\t * @param {string|GData} it\n\t */\n\thasUnique(it) {\n\n\t\tif ( typeof it ==='string') it = this.getData(it);\n\n\t\tif ( it === undefined || !it.unique ) return false;\n\n\t\tif ( it.isRecipe || it.instanced ) {\n\n\t\t\treturn this.inventory.find(it.id,true) != null ||\n\t\t\tthis.drops.find(it.id,true) != null || this.equip.find(it.id,true) != null;\n\n\t\t} else return it.value > 0;\n\n\t}\n\n\t/**\n\t * Return item, excluding uniques with value > 0.\n\t * @param {string} id\n\t */\n\tgetUnique(id) {\n\n\t\tlet it = this.items[id];\n\t\treturn ( it === undefined || !it.unique ) ? it : (\n\t\t\tit.value>0 ? null : it\n\t\t);\n\n\t}\n\n\tgetData(id) { return this.items[id] || this[id]; }\n\n}","import Inventory, { SaveInstanced } from \"./inventory\";\nimport events, { DELETE_ITEM } from \"../events\";\nimport GData from \"../items/gdata\";\n\n/**\n * List of GData items to attempt to use/cast.\n * Spelllists and pursuits, currently.\n */\nexport const ORDER = 'top';\nexport const RANDOM = 'rand';\nexport const LOOP = 'loop';\n\nexport default class DataList extends Inventory {\n\n\ttoJSON(){\n\n\t\tlet data = super.toJSON();\n\t\tif ( data.order !== LOOP ) data.order = this.order;\n\t\tdata.lastInd = this.lastInd || undefined;\n\n\t\treturn data;\n\n\t}\n\n\t/**\n\t * @property {number} lastInd - index of last casted spell.\n\t * only used for casting spells in loop order.\n\t */\n\tget lastInd() { return this._lastInd; }\n\tset lastInd(v) { this._lastInd = v;}\n\n\t/**\n\t * @property {number} order - ORDER,RANDOM,LOOP - cast attempt order.\n\t */\n\tget order() { return this._order; }\n\tset order(v) { this._order=v;}\n\n\tconstructor( vars=null ) {\n\n\t\tsuper(vars);\n\n\t\tthis.lastInd = this.lastInd || 0;\n\n\t\tthis.saveMode = 'custom';\n\t\tthis.saveMap = SaveInstanced;\n\n\t\tthis.order = this.order || LOOP;\n\n\t}\n\n\t/**\n\t * Get the next runnable data item, or null.\n\t * @param {Game} g\n\t * @returns {GData} Next runnable data, or null.\n\t */\n\tgetRunnable(g){\n\n\t\tvar len = this.items.length;\n\n\t\tif ( len === 0) return null;\n\n\t\tlet start = this.nextInd();\n\t\tlet i = start;\n\n\t\tdo {\n\n\t\t\tif ( this.items[i].canRun(g) ) return this.items[i];\n\t\t\tif ( ++i >= len ) i = 0;\n\n\t\t} while ( i !== start );\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t *\n\t * @param {Game} g\n\t * @returns {boolean}\n\t */\n\tcanRun(g) {\n\n\t\tfor( let i = this.items.length-1; i>=0; i-- ) {\n\t\t\tif ( this.items[i].canRun(g) ) return true;\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t/**\n\t * usable if at least one spell can be cast.\n\t * @param {Game} g\n\t * @returns {boolean}\n\t */\n\tcanUse( g ) {\n\n\t\tfor( let i = this.items.length-1; i>=0; i-- ) {\n\t\t\tif ( this.items[i].canUse(g) ) return true;\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t/**\n\t * Returns current item without advancing index.\n\t */\n\tcurItem(){\n\t\tif ( this.items.length > 0 ) {\n\t\t\treturn this.items[ this.nextInd() ];\n\t\t}\n\t}\n\n\t/**\n\t * Return next item without regard for cost/usability.\n\t * current item index is updated.\n\t */\n\tnextItem(){\n\n\t\tif ( this.items.length > 0 ) {\n\t\t\tthis.lastInd = this.nextInd();\n\t\t\treturn this.items[this.lastInd];\n\t\t}\n\n\t}\n\n\t/**\n\t * Get next usable item and return it.\n\t * Use index is advanced.\n\t * @param {*} g\n\t * @returns {?GData}\n\t */\n\tnextUsable(g){\n\n\t\tvar len = this.items.length;\n\t\tif ( len <= 0 ) return null;\n\n\t\tlet start = this.nextInd();\n\t\tlet i = start;\n\n\t\tdo {\n\n\t\t\tvar it = this.items[i];\n\n\t\t\tif ( it.canUse(g) ) {\n\n\t\t\t\tif ( it.cost ) g.payCost(it.cost);\n\t\t\t\tthis.lastInd = i;\n\t\t\t\treturn it;\n\n\t\t\t}\n\t\t\tif ( ++i >= len ) i = 0;\n\n\t\t} while ( i !== start );\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t *\n\t * @param {Context} g\n\t * @returns {?GData} item used or null.\n\t */\n\tonUse(g) {\n\n\t\tvar it = this.nextUsable(g);\n\t\tif ( it ) {\n\t\t\tit.onUse(g);\n\t\t\treturn it;\n\t\t}\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * @returns {number} - index of next spell to cast.\n\t */\n\tnextInd(){\n\n\t\tif ( this.order === LOOP ) {\n\n\t\t\treturn this.lastInd+1 < this.items.length ? this.lastInd+1 : 0;\n\n\t\t} else if ( this.order === ORDER ) {\n\t\t\treturn 0;\n\n\t\t} else if ( this.order === RANDOM ) {\n\t\t\treturn Math.floor( Math.random()*this.items.length );\n\t\t}\n\t\treturn 0;\n\n\t}\n\n\tdataDeleted(it) {\n\t\tthis.remove(it);\n\t}\n\n\t/**\n\t *\n\t * @param {GameState} gs\n\t */\n\trevive(gs, reviver=null ){\n\n\t\tsuper.revive(gs, reviver );\n\n\t\tevents.add( DELETE_ITEM, this.dataDeleted, this );\n\n\t}\n\n}","import Stat from \"../values/rvals/stat\";\nimport Base, {mergeClass} from '../items/base';\nimport Item from \"../items/item\";\n\nimport { itemRevive } from \"../modules/itemgen\";\nimport { Changed } from \"../techTree\";\n\n/**\n * Option for saveMap which will full-save instanced items\n * and save ids for standard items.\n * @param {*} v\n */\nexport const SaveInstanced = (v=>v.instanced ? v : v.id);\n\nexport const SAVE_FULL = 'full';\nexport const SAVE_IDS = 'ids';\n\nexport default class Inventory {\n\n\t/**\n\t * @property {number} length - number of items in inventory.\n\t */\n\tget count() { return this.items.length; }\n\n\tvalueOf() { return this.items.length; }\n\n\ttoJSON(){\n\n\t\treturn {\n\t\t\titems:this.saveMode ===  SAVE_FULL ? this.items : (\n\t\t\t\t( this.saveMode === SAVE_IDS || !this.saveMap ) ? this.items.map(v=>v.id ) :\n\t\t\t\tthis.items.map( this.saveMap, this )\n\t\t\t),\n\t\t\tmax:(this.max)\n\t\t}\n\t}\n\n\t/**\n\t * @property {string} [saveMode='full'] - how to save inventory items,\n\t * as 'full', 'ids' objects, or 'custom'\n\t * custum save modes must implement a saveMap function to pass to items.map()\n\t * Default is 'full'\n\t */\n\tget saveMode(){return this._saveMode;}\n\tset saveMode(v){\n\t\tthis._saveMode = v;\n\t}\n\n\t/**\n\t * @property {(*)=>*} saveMap\n\t */\n\tget saveMap(){return this._saveMap}\n\tset saveMap(v){this._saveMap=v}\n\n\t/**\n\t * @property {string} spaceProp - property of items that counts\n\t * toward filling the inventory space.\n\t * The property must be defined on every item or 0 is counted.\n\t * If no property is defined, each item counts as 1.\n\t */\n\tget spaceProp() { return this._spaceProp; }\n\tset spaceProp(v) {\n\t\tthis._spaceProp = v;\n\t}\n\n\t/**\n\t * @property {string} countProp - property that represents the count of an object.\n\t * Not the same as inventory.count which is separate items in inventory.\n\t */\n\tget countProp(){return this._cProp;}\n\tset countProp(v){this._cProp=v}\n\n\t/**\n\t * @property {number} used - spaces used by items in inventory.\n\t * if no space prop is defined, this is just the number of items.\n\t */\n\tget used() { return this._used; }\n\tset used(v) { this._used = v; }\n\n\t/**\n\t * @property {string} name - display name of inventory.\n\t */\n\tget name() {return this._name || this.id; }\n\tset name(v) { this._name = v; }\n\n\tget max() { return this._max; }\n\tset max(v) {\n\t\tthis._max = v instanceof Stat ? v : new Stat(v, 'max', true);\n\t}\n\n\t/**\n\t * @property {boolean} removeDupes - whether to remove duplicate ids from inventory.\n\t */\n\tget removeDupes(){ return this._removeDupes; }\n\tset removeDupes(v){this._removeDupes = v;}\n\n\t/**\n\t * @property {Object[]}\n\t */\n\tget items(){ return this._items; }\n\tset items(v){\n\n\t\tif ( v ) {\n\n\t\t\tfor( let i = v.length-1; i>= 0; i--) {\n\t\t\t\tif ( v[i] === null || v[i] === undefined ) {\n\t\t\t\t\tv.splice(i,1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._items = v;\n\n\t}\n\n\t/**\n\t * @property {boolean} saveIds - if true, only save item ids, and not\n\t */\n\tget saveIds(){ return this._saveIds }\n\tset saveIds(v){ this._saveIds=v; }\n\n\t[Symbol.iterator](){\n\t\treturn this.items[Symbol.iterator]();\n\t}\n\n\t/**\n\t * @returns {Array} returns reversed Array of items.\n\t */\n\treverse(){ return this._items.reverse(); }\n\ttoArray(){return this._items.slice(0)}\n\n\tconstructor(vars=null){\n\n\t\tif ( vars ) {\n\n\t\t\tif ( typeof vars === 'string') {\n\t\t\t\tthis.items = vars.split(',');\n\t\t\t} else if ( Array.isArray(vars)){\n\t\t\t\tthis.items = vars;\n\t\t\t}\n\t\t\telse Object.assign(this,vars);\n\n\t\t}\n\t\tif ( !this.items ) this.items = [];\n\t\tif ( this._cProp ) this._cProp = 'value';\n\n\t\tif ( !this.saveMode ) this.saveMode = SAVE_FULL;\n\t\tthis.type = 'inventory';\n\t\tif (!this.id) this.id = this.type;\n\n\t\tif ( !this.max ) this.max = 0;\n\n\t}\n\n\t/**\n\t * Call begin on any items once Game is loaded with data.\n\t * (Prior to restore mods.)\n\t * @param {Context} g - game context.\n\t */\n\tbegin(g){\n\t\tfor( let i = this.items.length-1; i>= 0; i-- ) {\n\t\t\tif ( typeof this.items[i].begin === 'function' ) this.items[i].begin(g);\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param {GameState} gs\n\t * @param {(gs,*)=>object} [reviver=null] optional item reviver.\n\t */\n\trevive( gs, reviver ){\n\n\t\tlet len = this.items.length;\n\t\tlet loads = this.items.splice(0, len );\n\n\t\tfor( let i = 0; i < len; i++ ) {\n\n\t\t\tvar it = loads[i];\n\t\t\tif ( reviver ) {\n\t\t\t\tit = reviver(gs, it);\n\t\t\t} else if ( typeof it === 'object' ) {\n\n\t\t\t\tit = itemRevive( gs, it );\n\n\t\t\t} else if ( typeof it === 'string') it = gs.getData(it);\n\n\t\t\tthis.add(it);\n\n\t\t}\n\t\tthis.calcUsed();\n\n\t}\n\n\t/**\n\t * Add item to inventory\n\t * @param {object} it\n\t */\n\tadd(it){\n\n\t\tif ( it === null || it === undefined || typeof it !== 'object' ) return false;\n\n\t\tif ( Array.isArray(it) ) {\n\n\t\t\tfor( let i = it.length-1; i>=0; i-- ) {\n\t\t\t\tthis.add(it[i]);\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( !it.id ) return false;\n\n\t\t\tif ( it.stack && this.addStack(it) ) {\n\t\t\t\treturn;\n\t\t\t} else if ( this.full() ) return false;\n\t\t\telse if ( this.removeDupes && this.find(it.id ) ) {\n\t\t\t\tconsole.log('removing: ' + it.id );\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis._items.push( it );\n\t\t\tthis.used += this.spaceCost( it );\n\n\t\t\t//console.warn('CUR USED: ' + this.used + '/' + this.max.value );\n\n\t\t}\n\t\tChanged.add(this);\n\n\t}\n\n\t/**\n\t * Force-add an item if possible by removing existing items.\n\t * @param {GData} it\n\t * @returns {boolean}\n\t */\n\tcycleAdd(it) {\n\n\t\tconst cost = this.spaceCost(it);\n\n\t\tif ( this.max && (cost > this.max) ) return false;\n\n\t\twhile ( this.items.length > 0 && (this.used + cost > this.max) ) {\n\t\t\tthis.removeAt(0);\n\t\t}\n\n\t\treturn this.add(it);\n\n\n\t}\n\n\t/**\n\t * Get the space cost of an item according to spaceProp.\n\t * @param {GData} it\n\t * @returns {number}\n\t */\n\tspaceCost(it) { return this.spaceProp ? ( it[this.spaceProp] || 0) : 1; }\n\n\t/**\n\t * Determine if item fits in inventory.\n\t * @param {Item} it\n\t * @returns {boolean}\n\t */\n\tcanAdd(it) {\n\n\t\tif ( !this.max || this.max.value === 0 ) return true;\n\t\treturn this.used + this.spaceCost(it) <= this.max.value;\n\n\t}\n\n\tincludes(it) {\n\t\treturn this.items.includes(it);\n\t}\n\n\t/**\n\t * @returns {number} number of free spaces left.\n\t */\n\tfreeSpace() {\n\t\treturn this.max ? this.max - this.used : Number.MAX_SAFE_INTEGER;\n\t}\n\n\t/**\n\t * @returns {boolean} true if inventory full.\n\t */\n\tfull(){\n\t\treturn this.max >0 && this.used >= Math.floor(this.max.value );\n\t}\n\n\t/**\n\t * @returns {GData} random item or null.\n\t */\n\trandItem() {\n\n\t\tif ( this.items.length <= 0 ) return null;\n\t\treturn this.items[ Math.floor( Math.random()*this.items.length) ];\n\n\t}\n\n\t/**\n\t * Remove all items from inventory.\n\t * splice is used for vue reactivity.\n\t */\n\tremoveAll(){\n\t\tthis.used = 0;\n\t\treturn this.items.splice(0, this.items.length);\n\t}\n\n\t/**\n\t *\n\t * @param {Item} it\n\t */\n\tremove( it ){\n\n\t\tlet ind = this.items.indexOf( it );\n\t\tif ( ind < 0 ) return;\n\t\tthis.removeAt(ind);\n\t}\n\n\tremoveAt(ind) {\n\n\t\tlet it = this.items[ind];\n\t\tthis.used -= this.spaceCost(it);\n\t\tthis.items.splice(ind,1);\n\n\t}\n\n\t/**\n\t * Remove quantity of item and only drop from inventory\n\t * if remaining is 0.\n\t * @param {Item} it\n\t * @param {number} count\n\t */\n\tremoveCount( it, count) {\n\n\t\tit[this._cProp] -= count;\n\t\tif ( it[this._cProp] <= 0 ) this.remove(it);\n\n\t}\n\n\t/**\n\t * Filter inventory items.\n\t * @param {*} p\n\t */\n\tfilter(p) {\n\t\treturn this.items.filter(p);\n\t}\n\n\t/**\n\t * Determine if quantity of item is available.\n\t * @param {GData} it\n\t * @param {number} count\n\t */\n\thasCount( it, count ) {\n\n\t\tit = this.findMatch(it);\n\t\tif ( !it ) return false;\n\t\treturn count === 1 || ( it.stack && it[this._cProp] >= count );\n\t}\n\n\t/**\n\t * Add count to stackable item, if found.\n\t * @param {GData} it\n\t * @param {number} [count=1]\n\t * @returns {?GData} item found, or null.\n\t */\n\taddStack(it, count=1) {\n\t\tlet orig = this.findMatch(it);\n\t\tif (orig) {\n\t\t\tif(orig.count.value < 1) orig.count.value = 1;\n\t\t\torig.count++;\n\t\t\treturn orig;\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tfindMatch(it){\n\n\t\tlet id = it.id;\n\t\tlet rec = it.recipe;\n\n\t\treturn this.items.find( v=>v.id===id || (rec&&v.recipe===rec));\n\n\t}\n\n\t/**\n\t * Attempt to find item in inventory.\n\t * @param {string} id,\n\t * @param {boolean} proto - whether to find any item instanced from the prototype id.\n\t * If false, only an exact id match is returned.\n\t * @returns {?object}\n\t */\n\tfind(id, proto=false ) {\n\n\t\treturn proto === true ? this.items.find( v=>v.id===id||v.recipe===id) :\n\t\t\tthis.items.find( v=>v.id===id);\n\n\t}\n\n\t/**\n\t * Recalculate used spaces.\n\t * This is only done in the event of an error.\n\t */\n\tcalcUsed() {\n\n\t\tlet used = 0;\n\t\tlet prop = this.spaceProp;\n\n\t\tfor( let i = this.items.length-1; i >= 0; i-- ) {\n\n\t\t\tvar it = this.items[i];\n\t\t\tif ( !it ) console.warn( this.id + ' null Item in Inv: ' + it );\n\t\t\telse used += prop ? ( it[prop] || 0 ) : 1;\n\n\t\t}\n\n\t\tthis.used = used;\n\n\t}\n\n}\n\nmergeClass( Inventory, Base );","import {changes, jsonify, cloneClass, getDescs  } from 'objecty';\nimport Game from '../game';\nimport Stat from '../values/rvals/stat';\nimport Mod from '../values/mods/mod';\nimport { TYP_MOD } from '../values/consts';\nimport RValue, { SubPath } from '../values/rvals/rvalue';\nimport { Changed } from '../techTree';\nimport { ParseMods } from '../modules/parsing';\nimport { canWriteProp } from '../util/util';\n\nexport const SetModCounts = ( m, v)=>{\n\n\tif ( m instanceof Mod ) {\n\t\t//console.log('setting mod count: ' + m.id + ' val: ' + v );\n\t\tm.count = v;\n\t}\n\telse if ( typeof m ==='object') {\n\t\tfor( let p in m ){ SetModCounts(m[p], v); }\n\t}\n\n}\n\n\nexport const mergeClass = ( destClass, src ) => {\n\n\tlet proto = destClass.prototype || destClass;\n\tlet srcDescs = Object.getOwnPropertyDescriptors( src );\n\tlet protoDescs = getDescs(proto);\n\n\t// NOTE: valueOf not overwritten.\n\tfor( let p in srcDescs ) {\n\t\tif ( !protoDescs.has(p) ) Object.defineProperty( proto, p, srcDescs[p]);\n\t}\n\n\treturn destClass;\n\n}\n\n\n /**\n  * @todo shorten list by implementing better base/defaults logic.\n  * @const {Set.<string>} JSONIgnore - ignore these properties by default when saving.\n  */\n const JSONIgnore = new Set( ['template', 'id', 'type', 'defaults', 'module', 'sname',\n\t 'sym', 'warn', \"effect\", \"length\", 'runmod', 'name', 'desc', 'running', 'current', 'warnMsg',\n\t 'once', 'context', 'enemies', 'encs', 'boss', 'spawns','targets','only',\n\t 'locked', 'locks', 'value', 'exp', 'delta', 'tags', 'mod', 'progress','need', 'require','action' ]);\n\n/**\n * Base class of all Game Objects.\n */\nexport default {\n\n\ttoJSON() {\n\n\t\tif ( this.save && (this.value>0||this.owned)) return this.forceSave();\n\n\t\tlet vars = jsonify(this, JSONIgnore );\n\t\tif ( this.template ) vars = changes( vars, this.template );\n\n\t\tif ( this.locked === false && this.template && this.template.locked !== false ){\n\t\t\tvars = vars || {};\n\t\t\tvars.locked = this.locked;\n\t\t}\n\t\tif ( vars && vars.name ) vars.name = this.sname;\n\n\t\treturn vars || undefined;\n\n\t},\n\n\tforceSave(){\n\n\t\tlet data = jsonify(this);\n\t\tif ( this.mod ) data.mod = this.mod;\n\t\tif ( this.slot ) data.slot = this.slot;\n\t\tif ( this.effect) data.effect = this.effect;\n\t\tif ( this.use ) data.use = this.use;\n\n\t\tif ( data.template && typeof data.template === 'object' ) data.template = data.template.id;\n\t\tif ( data.val ) data.value = undefined;\n\t\tdata.name = this.sname;\n\n\t\treturn data;\n\n\t},\n\n\t/**\n\t * @property {string} id\n\t */\n\tget id() { return this._id; },\n\tset id(v) { this._id = v;},\n\n\t/**\n\t * @property {Object} template - original data used to create the Item.\n\t * Should be raw, immutable data.\n\t */\n\tget template() { return this._template; },\n\tset template(v) { this._template = v;},\n\n\t/**\n\t * @property {string} type\n\t */\n\tget type() { return this._type },\n\tset type(v) { this._type =v;},\n\n\tget typeName(){return this._type;},\n\n\t/**\n\t * @property {string} id - internal id.\n\t */\n\ttoString(){return this.id;},\n\n\t/**\n\t * @property {string} sname - Simple name without symbol.\n\t */\n\tget sname(){ return this._name || this.id; },\n\n\t/**\n\t * @property {string} name - displayed name.\n\t */\n\tget name() { return (( this._actname && this._value < 1 ) ? this.actname\n\t\t: (this.sym||'') + (this._name||this.id));\n\t},\n\tset name(v) {\n\n\t\tif ( v&&this.sym ) {\n\n\t\t\tthis._name = v.split(this.sym).join( '').trim();\n\n\t\t} else this._name = v;\n\n\n\t},\n\n\t/**\n\t * @property {boolean} repeat - whether the item is repeatable.\n\t */\n\tget repeat(){return this._repeat;},\n\tset repeat(v) { this._repeat=v},\n\n\t/**\n\t * @property {string} desc\n\t */\n\tget desc() { return ( this.actdesc && this._value < 1 ) ? this.actdesc : (this._desc || null ); },\n\tset desc(v) { this._desc=v;},\n\n\t/**\n\t * @property {number} current - displayable value; override in subclass for auto rounding, floor, etc.\n\t */\n\tget current() { return this.value },\n\n\t/**\n\t * @property {number} ex - save/load alias for exp without triggers.\n\t */\n\tget ex(){return this._exp; },\n\tset ex(v) { this._exp = v;},\n\n\t/**\n\t * @property {number} val - saving/loading from json without triggers.\n\t */\n\tget val() { return this._value },\n\tset val(v) { this._value = v; },\n\n\t/**\n\t * @property {number} value\n\t */\n\tget value() { return this._value; },\n\tset value(v) {\n\t\tthis._value = v;\n\t},\n\tvalueOf() { return this._value; },\n\n\t/**\n\t * @property {number} delta - value change this frame.\n\t * added to value at end of frame.\n\t */\n\tget delta(){return 0;},\n\n\t/**\n\t * @property {string[]} tags - tag to distinguish between\n\t * item subtypes.\n\t */\n\tget tags() { return this._tags;},\n\tset tags(v) {\n\n\t\tif ( typeof v === 'string') {\n\t\t\tthis._tags = v.split(',');\n\t\t} else if ( Array.isArray(v) ) {\n\n\t\t\tthis._tags = v;\n\n\t\t} else this._tags = null;\n\n\t},\n\n\tpermVars( mods, targ=this ) {\n\n\t\t//console.log( 'PERM VARS: ' + typeof mods);\n\t\t//console.log('eNC TARG: ' + typeof targ);\n\t\tif ( typeof targ === 'number') {\n\n\t\t\t// error.\n\n\t\t} else if ( typeof mods === 'object') {\n\n\t\t\tfor( let p in mods ) {\n\n\t\t\t\tvar mod = mods[p];\n\t\t\t\tvar sub = targ[p];\n\n\t\t\t\tif ( sub === undefined || sub === null ) {\n\n\t\t\t\t\tsub = targ[p] = cloneClass( mod );\n\n\t\t\t\t} else if ( typeof sub === 'number' ) {\n\n\t\t\t\t\ttarg[p] = (sub||0) + mods[p].valueOf();\n\n\t\t\t\t} else if ( typeof mod === 'object' ) {\n\n\t\t\t\t\tif ( mod.constructor !== Object ) sub.perm( mod );\n\t\t\t\t\telse this.permVars( mod, sub );\n\n\t\t\t\t}\n\t\t\t\telse console.log( this.id + ' UNKNOWN PERM VAR: ' + p + ' typ: ' + (typeof sub ));\n\n\n\t\t\t}\n\n\t\t\tif ( targ === this && mods.mod ) {\n\t\t\t\tParseMods( this.mod, this.id, this );\n\t\t\t\t//SetModIds( targ.mod, targ.id );\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/**\n\t *\n\t * @param {Object} vars - values to change/add.\n\t * @param {number} amt - factor of base amount added\n\t * ( fractions of full amount due to tick time. )\n\t */\n\tapplyVars( vars, amt=1 ) {\n\n\t\tif ( typeof vars === 'number') {\n\n\t\t\t//deprec( this.id + ' mod: ' + mods );\n\t\t\tthis.value.add( vars*amt );\n\n\t\t} else if ( vars.isRVal ) {\n\n\t\t\tthis.amount( amt*vars.getApply( Game.state, this ) );\n\t\t\t//this.value.add( amt*vars.getApply( Game.state, this ) );\n\n\n\t\t} else if ( typeof vars === 'object' ) {\n\n\t\t\tif ( vars.mod ) this.changeMod( vars.mod, amt );\n\n\t\t\tfor( let p in vars ) {\n\n\t\t\t\t// add any final value last.\n\t\t\t\tif (  p === 'skipLocked' || p === 'value') continue;\n\n\t\t\t\tlet targ = this[p];\n\t\t\t\tlet sub = vars[p];\n\n\t\t\t\tif ( targ instanceof RValue ) {\n\n\t\t\t\t\t//console.log('APPLY ' + vars[p] + ' to stat: '+ this.id + '.'+ p + ': ' + amt*vars[p] + ' : ' + (typeof vars[p]) );\n\n\t\t\t\t\ttarg.apply( sub, amt );\n\n\t\t\t\t} else if ( typeof sub === 'object' ) {\n\n\t\t\t\t\tif ( sub.type === TYP_MOD ) {\n\n\t\t\t\t\t\tsub.applyTo( this, p, amt );\n\n\t\t\t\t\t} else if ( typeof targ === 'number' || sub.isRVal ) {\n\n\t\t\t\t\t\t//deprec( this.id + ' targ: ' + p + ': ' + targ );\n\t\t\t\t\t\tthis[p] += Number(sub)*amt;\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t//console.log( this.id + ' subapply: ' + p);\n\t\t\t\t\t\tthis.subeffect( targ, sub, amt );\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( targ !== undefined ) {\n\n\t\t\t\t\t//console.log( this.id + ' adding vars: ' + p );\n\t\t\t\t\tthis[p] += Number(sub)*amt;\n\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('NEW SUB: ' + p );\n\t\t\t\t\tthis.newSub( this, p, sub, amt )\n\t\t\t\t}\n\n\t\t\t}\n\t\t\tif ( vars.value ) {\n\t\t\t\tthis.amount( vars.value*amt);\n\t\t\t\t//this.value += (vars.value)*amt;\n\t\t\t}\n\n\t\t}\n\n\n\t\tChanged.add(this);\n\n\t},\n\n\t/**\n\t *\n\t * @param {Mod|Object} mods\n\t * @param {number} [amt=1]\n\t * @param {Object} [targ=null]\n\t */\n\tapplyMods( mods, amt=1, targ=this ) {\n\n\t\tChanged.add(this);\n\n\t\tif ( mods instanceof Mod ) {\n\n\t\t\tmods.applyTo( targ, 'value', amt );\n\n\t\t} else if ( mods.constructor === Object ) {\n\n\t\t\tthis.applyObj( mods, amt, targ );\n\t\t\tif ( mods.mod ) this.changeMod( mods.mod, 0 , targ);\n\n\n\t\t} else if ( typeof mods === 'number') {\n\n\t\t\tconsole.warn( mods + ' RAW NUM MOD ON: ' + this.id );\n\n\t\t\t/*if ( targ instanceof Stat ) {\n\n\t\t\t\tconsole.error( '!!!!! ' + mods + ' number apply to: ' + this.id );\n\t\t\t\ttarg.add( mods*amt );\n\n\t\t\t} else if ( typeof targ === 'object') {\n\n\t\t\t\tconsole.warn( this.id + ' TARG is RAW OBJECT: ' + mods );\n\t\t\t\ttarg.value = (targ.value || 0 ) + amt*mods;\n\n\t\t\t} else {\n\t\t\t\t// nothing can be done if targ is a number. no parent object.\n\t\t\t\tconsole.error( this.id + ' !!invalid mod: ' + mods );\n\t\t\t}*/\n\n\t\t} else console.warn( this.id + ' unknown mod type: ' + mods );\n\n\t},\n\n\t/**\n\t * Apply a mod when the mod is recursive object.\n\t * @param {Object} mod\n\t * @param {number} amt - percent of mod added.\n\t * @param {Object} targ - target of mods.\n\t * @param {boolean} [isMod=false] - whether target is subobject of a mod object.\n\t */\n\tapplyObj( mods, amt, targ, isMod=false ) {\n\n\t\tfor( let p in mods ) {\n\n\t\t\tvar subMod = mods[p];\n\t\t\tvar subTarg = targ[p];\n\n\t\t\tif ( (subTarg === undefined || subTarg === null) ) {\n\n\t\t\t\tif( !canWriteProp(targ, p ) ) continue;\n\n\t\t\t\tif ( subMod.constructor === Object ) {\n\n\t\t\t\t\tthis.applyObj( subMod, amt, targ[p]={}, p==='mod'|| isMod );\n\n\t\t\t\t} else {\n\t\t\t\t\tsubTarg = targ[p] = isMod ? new Mod( 0 ) : new Stat( 0 );\n\n\t\t\t\t\t\t\t\t\t\t//@todo use more accurate subpath.\n\t\t\t\t\tsubTarg.id = SubPath(this.id, p );\n\n\t\t\t\t\tsubTarg.source = this;\n\n\t\t\t\t\tsubTarg.addMod( subMod, amt );\n\t\t\t\t\t//console.log( this.id + '.' + p  + ': ' + subMod + ': targ null: ' + subTarg.valueOf() + ' mod? ' + isMod );\n\t\t\t\t}\n\n\n\t\t\t} else if ( subTarg.applyMods ) {\n\n\t\t\t\tsubTarg.applyMods( subMod, amt, subTarg );\n\n\t\t\t} else if ( subMod.constructor === Object ) {\n\n\t\t\t\tthis.applyObj( subMod, amt, subTarg, p==='mod'||isMod );\n\n\t\t\t} else if ( subMod instanceof Mod ) {\n\n\t\t\t\tif ( subTarg.isRVal ) subTarg.addMod( subMod, amt );\n\t\t\t\telse subMod.applyTo( targ, p, amt );\n\n\t\t\t}else if ( typeof subMod === 'number' ) {\n\t\t\t\tconsole.warn( 'RAW NUMBER MOD on: ' + this.id + ': ' + p + ': ' + subMod );\n\t\t\t}\n\t\t\t/*else if ( typeof subMod === 'number' ) {\n\n\t\t\t\tif ( typeof subTarg === 'number') {\n\n\t\t\t\t\tconsole.warn('MOD OF RAW NUM: ' + p + ' : ' + (m*amt ) );\n\t\t\t\t\ttarg[p] = new Stat( targ[p] + subMod*amt, SubPath(this.id, p) );\n\n\t\t\t\t} else this.applyMods( subMod, amt, subTarg);\n\n\t\t\t}*/else {\n\n\t\t\t\tconsole.warn( `UNKNOWN Mod to ${this.id}.${p}: ${subMod}` + '  ' + typeof subMod);\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/**\n\t *\n\t * @param {Mod|Object} mods\n\t * @param {Object} [targ=null]\n\t */\n\tremoveMods( mods, targ=this ) {\n\n\t\tif ( targ === this ) Changed.add(this);\n\t\telse if ( !targ ) return;\n\n\t\tif ( mods instanceof Mod ) {\n\n\t\t\tif ( typeof targ === 'object') {\n\n\t\t\t\tif ( targ.isRVal ) targ.removeMods( mods );\n\t\t\t\telse this.removeMods(mods, targ.value );\n\t\t\t}\n\n\t\t} else if ( mods.constructor === Object ) {\n\n\t\t\tfor( let p in mods ) {\n\t\t\t\tthis.removeMods( mods[p], targ[p] );\n\t\t\t}\n\n\t\t} else if ( typeof mods === 'number') {\n\n\t\t\tconsole.warn( this.id + ' REMOVED NUMBER MOD: ' + mods );\n\n\t\t} else console.warn( this.id + ' unknown mod type: ' + mods );\n\n\t},\n\n\t/**\n\t * Perform a subobject assignment.\n\t * @param {Object} obj - base object being assigned to.\n\t * @param {Object} m - object with subobjects representing assignment paths.\n\t * @param {number} amt - amount multiplier for any assignments.\n\t */\n\tsubeffect( obj, m, amt ) {\n\n\t\tif ( typeof obj !== 'object' ) {\n\t\t\t//console.warn( 'invalid assign: ' + obj + ' = ' + m );\n\t\t\treturn;\n\t\t}\n\n\t\tfor( let p in m ) {\n\n\t\t\t//console.log('SUBEFFECT(): ' + p + '=' + m[p]);\n\n\t\t\tif ( typeof m[p] === 'object' ) {\n\t\t\t\tthis.subeffect( obj[p], m[p], amt );\n\t\t\t} else {\n\n\t\t\t\tif ( typeof obj[p] === 'object') {\n\n\t\t\t\t\tobj[p].value = ( obj[p].value || 0 ) + Number(m[p])*amt;\n\n\t\t\t\t} else obj[p] += Number(m[p])*amt;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Add new sub-object to this object.\n\t * Vue reactivity??\n\t * @todo\n\t * @param {Object} obj - parent object.\n\t * @param {string} key - prop key to set.\n\t * @param {Object} mod - modify amount.\n\t * @param {number} [amt=1] - times modifier applied.\n\t */\n\tnewSub( obj, key, mod, amt=1 ) {\n\n\t\tconsole.warn( 'ADD SUB: ' + this.id + ' ' + key + ' stat: ' + (amt*mod.value) );\n\n\t\tlet s = obj[key] = new Stat( typeof mod === 'number' ? mod*amt : 0, 'key' );\n\t\tif ( mod instanceof Mod ) s.apply( mod, amt );\n\n\t},\n\n\t/**\n\t * Modify a mod applied by the Item.\n\t * @param {Object|Mod|number} mod\n\t * @param {number} amt - percent of change applied to modifier.\n\t */\n\tchangeMod( mod, amt ) {\n\n\t\t// apply change to modifier for existing item amount.\n\t\tGame.applyMods( mod, amt*this.value );\n\n\t},\n\n\t/**\n\t * Add tag to object.\n\t * @param {string} tag\n\t */\n\taddTag( tag ) {\n\t\tif ( this._tags === null || this._tags === undefined) this._tags = [ tag ];\n\t\telse if ( !this._tags.includes(tag) ) this._tags.push(tag);\n\t},\n\n\t/**\n\t *\n\t * @param {string} t - tag to test.\n\t * @returns {boolean}\n\t */\n\thasTag( t ) { return this.tags && this.tags.includes(t); },\n\n\t/**\n\t * Test if item has every tag in list.\n\t * @param {string[]} a - array of tags to test.\n\t * @returns {boolean}\n\t*/\n\thasTags( a ) {\n\n\t\tif ( !this._tags ) return false;\n\t\tfor( let i = a.length-1; i >= 0; i-- ) if ( !this._tags.includes(a[i]) ) return false;\n\n\t\treturn true;\n\n\t},\n\n\tcanUse(){return true;},\n\n\t/**\n\t * Test if tag has any tag in the list.\n\t * @param {string[]} a - array of tags to test.\n\t * @returns {boolean}\n\t */\n\t/*anyTag( a ) {\n\n\t\tif ( !this._tags ) return false;\n\t\tfor( let i = a.length-1; i >= 0; i-- ) if ( !this._tags.includes(a[i]) ) return true;\n\n\t\treturn false;\n\n\t},*/\n\n}","import GData from \"./gdata\";\nimport Game from '../game';\nimport { ENCOUNTER } from \"../values/consts\";\n\nconst defaults = {\n\tlocked:false\n}\n\n/**\n * Sublocation of a Locale\n */\nexport default class Encounter extends GData {\n\n\ttoJSON(){\n\n\t\tif ( this.exp != 0 ) {\n\n\t\t\treturn {\n\t\t\t\tvalue:this.value,\n\t\t\t\texp:this.exp\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn this.value > 0 ? { value:this.value } : undefined;\n\t\t}\n\n\t}\n\n\t/**\n\t * @property {number} exp\n\t */\n\tget exp() { return this._exp;}\n\tset exp(v) { this._exp = v;}\n\n\t/**\n\t *\n\t */\n\tget length() { return this._length; }\n\tset length(v) { this._length = v;}\n\n\t/**\n\t * @property {boolean} done\n\t */\n\tget done() { return this._exp >= this.length; }\n\n\tconstructor( vars=null, save=null ) {\n\n\t\tsuper( vars, defaults );\n\n\t\tif ( save ) Object.assign( this, save );\n\n\t\tthis.type = ENCOUNTER;\n\n\t\tthis._exp = this._exp || 0;\n\n\t\tif ( !this.level ) this.level = 1;\n\t\tif ( !this.length ) this.length = 5*this.level;\n\n\t}\n\n\tupdate( dt ){\n\n\t\tthis._exp += dt;\n\t\tif ( this.effect ) {\n\t\t\tGame.applyVars( this.effect, dt );\n\t\t}\n\n\t}\n\n\t/**\n\t * @returns {false}\n\t */\n\tmaxed() { return false; }\n\n}","import { defineExcept, cloneClass } from 'objecty';\nimport Stat from '../values/rvals/stat';\nimport Base, {mergeClass } from './base';\nimport {arrayMerge} from '../util/array';\nimport { assignPublic } from '../util/util';\nimport Events, { CHAR_ACTION, EVT_EVENT, EVT_UNLOCK } from '../events';\nimport Game, { TICK_LEN } from '../game';\nimport { WEARABLE, WEAPON } from '../values/consts';\nimport RValue, { InitRVals } from '../values/rvals/rvalue';\nimport { Changed } from '../techTree';\n\n/**\n * @typedef {Object} Effect\n * @property {?number} duration\n */\n\n/**\n * @const {Set} NoDefine - properties not to set to default values.\n */\nconst NoDefine = new Set( ['require', 'rate', 'current', 'need', 'value', 'buy', \"on\",\n\t'cost', 'id', 'name', 'warn', 'effect', 'slot', 'exp', 'delta'] )\n\n/**\n * Game Data base class.\n */\nexport default class GData {\n\n\t/**\n\t * @property {string} module - source module.\n\t */\n\tget module(){return this._module;}\n\tset module(v){this._module =v;}\n\n\t/**\n\t * @property {boolean} disabled - whether the item has been\n\t * disabled / is no longer available.\n\t */\n\tget disabled() { return this._disabled; }\n\tset disabled(v) { this._disabled = v;}\n\n\t/**\n\t * @property {string} sym - optional unicode symbol.\n\t */\n\tget sym() { return this._sym; }\n\tset sym(v) { this._sym=v;}\n\n\t/**\n\t * @property {Stat} max\n\t */\n\tget max() { return this._max; }\n\tset max(v) {\n\n\t\tif ( v === null || v === undefined ) return;\n\n\t\tif ( this._max ) {\n\n\t\t\tif ( v instanceof Stat ) this._max.base = v.base;\n\t\t\telse if ( !isNaN(v) ) this._max.base = v;\n\n\t\t} else this._max = v instanceof Stat ? v : new Stat(v, this.id + '.max', true);\n\t}\n\n\t/**\n\t * @property {Stat} rate - rate of stat change in value/second.\n\t */\n\tget rate() { return this._rate; }\n\tset rate(v){\n\n\t\tif ( v instanceof Stat ) {\n\n\t\t\tv.id = this.id + '.rate';\n\t\t\tthis._rate = v;\n\n\t\t} else if ( this._rate ) {\n\n\t\t\tif ( typeof v === 'object' ) Object.assign( this._rate, v);\n\t\t\telse this._rate.base = v;\n\n\t\t} else this._rate = new Stat( v, this.id + '.rate' );\n\n\t}\n\n\t/**\n\t * @property {.<string,object>} on - actions to take on string triggers.\n\t */\n\tget on() { return this._on; }\n\tset on(v) { this._on = v; }\n\n\tget triggers(){return this._triggers;}\n\tset triggers(v){this._triggers=v; }\n\n\t/**\n\t * @property {.<string,number>} cost\n\t */\n\tget cost() { return this._cost; }\n\tset cost(v) {\n\n\t\tif ( typeof v !== 'object' || v instanceof RValue ) {\n\t\t\tthis._cost = {\n\t\t\t\tgold:v\n\t\t\t}\n\t\t} else this._cost=v;\n\t}\n\n\t/**\n\t * @property {string|Object}\n\t */\n\tget require() { return this._require; }\n\tset require(v) { this._require =v;}\n\n\t/**\n\t * @property {boolean} warn - whether to display a warning before\n\t * purchasing or using item.\n\t */\n\tget warn() { return this._warn; }\n\tset warn(v) { this._warn =v;}\n\n\t/**\n\t * @property {string} warnMsg - warning message to display\n\t * before purchasing item.\n\t */\n\tget warnMsg(){return this._warnMsg; }\n\tset warnMsg(v) { this._warnMsg = v; }\n\n\t/**\n\t * @property {object} mod - mods applied by object.\n\t */\n\tget mod(){return this._mod;}\n\tset mod(v){this._mod=v;}\n\n\t/**\n\t * @property {Object|Array|string|function} effect\n\t */\n\tget effect() { return this._effect; }\n\tset effect(v) { this._effect=v;}\n\n\t/**\n\t * @property {number} locks - number of locks preventing item from\n\t * being used or unlocked.\n\t */\n\tget locks() { return this._locks||0;}\n\tset locks(v) {\n\t\tthis._locks = v;\n\t}\n\n\t/**\n\t * @property {boolean} locked\n\t */\n\tget locked() { return this._locked; }\n\tset locked(v) { this._locked = v; }\n\n\t/**\n\t * @property {boolean} owned\n\t */\n\tget owned() { return this._owned;}\n\tset owned(v) { this._owned = v; }\n\n\t/**\n\t * @property {boolean} usable - cached usable variable.\n\t * recalculated using canUse()\n\t */\n\t/*get usable() {return this._usable;}\n\tset usable(v) { this._usable = v}*/\n\n\t/**\n\t * @property {number} delta - Amount to add at end of frame.\n\t */\n\tget delta(){return this._delta;}\n\tset delta(v) {\n\t\tthis._delta = v;\n\t}\n\n\t/**\n\t * @property {Stat} value\n\t */\n\tget value() { return this._value; }\n\tset value(v) {\n\n\t\t//if ( this.id === 'space') console.log('setting space: ' + v );\n\t\tif ( v instanceof Stat ) {\n\n\t\t\tif ( this._value === null || this._value === undefined ) this._value = v;\n\t\t\telse if ( v !== this._value ) {\n\n\t\t\t\tthis._value.base = v.base;\n\t\t\t\tthis._value.basePct = v.basePct;\n\n\t\t\t}\n\n\t\t} else if ( this._value !== undefined ) {\n\n\n\t\t\tthis._value.base = (typeof v === 'object') ? v.value : v;\n\t\t\t//if ( this.id === 'space') console.log('setting BASE SPACE: ' + v );\n\n\t\t} else this._value = new Stat( v, this.id );\n\n\t}\n\n\t/**\n\t * @property {Stat} val - value assignment from save data.\n\t * assigns value without triggering game events.\n\t */\n\tget val() { return this.value; }\n\tset val(v) { this.value = v; }\n\n\tvalueOf(){ return this._value.valueOf(); }\n\n\t/**\n\t *\n\t * @param {?Object} [vars=null]\n\t * @param {?defaults} [defaults=null]\n\t */\n\tconstructor( vars=null, defaults=null ){\n\n\t\tif ( vars ) {\n\n\t\t\tif ( typeof vars === 'object'){\n\t\t\t\tif ( vars.id ) this.id = vars.id;\t// used to assign sub-ids.\n\t\t\t\tassignPublic( this, vars );\n\t\t\t}\n\t\t\telse if ( !isNaN(vars) ) this.val = vars;\n\t\t}\n\t\tif ( defaults ) this.setDefaults( defaults );\n\n\t\tif ( this._locked === undefined || this._locked === null ) this.locked = true;\n\n\t\t/**\n\t\t * recomputed at game start.\n\t\t * @property {number} locks - locks applied by items.\n\t\t */\n\t\tthis.locks = 0;\n\n\t\tif ( this._value === null || this._value === undefined ) this.val = 0;\n\n\t\tthis.delta = 0;\n\t\tdefineExcept( this, null, NoDefine );\n\n\t\tInitRVals( this, this );\n\n\t}\n\n\t/**\n\t * Tests whether item fills unlock requirement.\n\t * @returns {boolean}\n\t */\n\tfillsRequire(){\n\t\treturn this.locked === false && this.value > 0;\n\t}\n\n\t/**\n\t * Determines whether an item can be run as a continuous task.\n\t * @param {Game} g\n\t * @param {number} dt - minimum length of time item would run.\n\t * @returns {boolean}\n\t */\n\tcanRun( g, dt=TICK_LEN ) {\n\n\t\tif ( this.disabled || this.maxed() || this.locks > 0 ||\n\t\t\t(this.need && !g.unlockTest( this.need, this )) ) return false;\n\n\t\tif ( this.buy && !this.owned && !g.canPay(this.buy ) ) return false;\n\n\t\t// cost only paid at _start_ of runnable task.\n\t\tif ( this.cost && (this.exp == 0) && !g.canPay(this.cost ) ) return false;\n\n\t\tif ( this.fill && g.filled( this.fill, this ) ) return false;\n\n\t\treturn !this.run || g.canPay( this.run, dt );\n\n\t}\n\n\t/**\n\t * Determine if this resource can pay the given amount of value.\n\t * Made a function for reverseStats, among other things.\n\t * @param {number} amt\n\t */\n\tcanPay( amt ) { return this.value >= amt; }\n\tremove( amt ) { this.value.base -= amt; }\n\n\t/**\n\t * Determine if an item can be used. Ongoing/perpetual tasks\n\t * test with 'canRun' instead.\n\t * @param {Context} g\n\t */\n\tcanUse( g=Game ){\n\n\t\tif ( this.perpetual || this.length>0 ) return this.canRun(g, TICK_LEN);\n\n\t\tif ( this.disabled || this.locks>0|| this.maxed() ||\n\t\t\t\t(this.need && !g.unlockTest( this.need, this )) ) return false;\n\t\tif ( this.buy && !this.owned && !g.canPay(this.buy) ) return false;\n\n\t\tif ( this.slot && g.state.getSlot(this.slot, this.type ) === this) return false;\n\n\t\tif ( this.fill && g.filled( this.fill, this ) ) return false;\n\n\t\tif ( this.mod && !g.canMod(this.mod, this )) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !this.cost || g.canPay(this.cost);\n\t}\n\n\tcanBuy(g){\n\n\t\tif ( this.disabled || this.locked || this.locks > 0 || this.maxed() ) return false;\n\n\t\treturn ( !this.buy || g.canPay(this.buy) );\n\n\t}\n\n\t/**\n\t * Add or remove amount from Item, after min/max bounds are taken into account.\n\t * @param {number} amt\n\t * @returns {number} - change in final value.\n\t */\n\tadd( amt ) {\n\n\t\tlet prev = this.value.valueOf();\n\n\t\tif ( amt <= 0 ) {\n\n\t\t\tif ( prev <= 0 || amt === 0 ) return 0;\n\t\t\telse if ( prev + amt <= 0 ) {\n\t\t\t\t/** @todo **/\n\t\t\t\tthis.value.base = 0;\n\t\t\t\treturn -prev;\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( this.repeat !== true && !this.max &&\n\t\t\t\tthis.value > 1 &&\n\t\t\t\t(!this.buy || this.owned===true) ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tif ( this.max && (prev + amt) >= this.max.value ) {\n\n\t\t\t\tamt = this.max.value - prev;\n\t\t\t}\n\n\t\t}\n\n\t\tthis.value.base += amt;\n\t\treturn this.value.valueOf() - prev;\n\n\t}\n\n\t/**\n\t * Get or lose quantity.\n\t * @returns {boolean} true if some amount was actually added.\n\t */\n\tamount( count=1 ) {\n\n\t\tthis.delta += count;\n\n\t\tChanged.add(this);\n\n\t}\n\n\t/**\n\t * Process an actual change amount in data. This is after Stat Mods\n\t * have been applied to the base value.\n\t * @param {Game} g\n\t * @param {number} count - total change in value.\n\t */\n\tchanged( g, count) {\n\n\t\tthis.delta = 0;\n\t\tcount = this.add(count);\n\t\tif ( count === 0 ) return;\n\n\t\tif ( this.isRecipe ) { return g.create( this, true, count ); }\n\n\t\tif ( this.once && this.valueOf() === 1 ) g.applyVars( this.once );\n\n\t\tif ( this.cd ) {\n\t\t\tthis.timer = Number(this.cd );\n\t\t\tg.addTimer( this );\n\t\t}\n\t\tif ( this.loot ) { g.getLoot( this.loot ); }\n\n\t\tif ( this.title ) g.self.setTitle( this.title );\n\t\tif ( this.result ) {\n\n\t\t\tg.applyVars( this.result, count );\n\t\t}\n\t\tif ( this.create ) g.create( this.create );\n\n\t\tif ( this.mod ) { g.applyMods( this.mod ); }\n\n\t\tif ( this.lock ) g.lock( this.lock );\n\t\tif ( this.dot ) {\n\t\t\tg.self.addDot( this.dot, this );\n\t\t}\n\n\t\tif ( this.disable ) g.disable( this.disable );\n\n\t\tif ( this.log ) Events.emit( EVT_EVENT, this.log );\n\n\t\tif ( this.attack || this.action ) {\n\t\t\tif (this.type !== WEARABLE && this.type !== WEAPON ) Events.emit( CHAR_ACTION, this, g );\n\t\t}\n\n\t}\n\n\tdoLock(amt){\n\n\t\tthis.locks += amt;\n\t\tChanged.add(this);\n\n\t}\n\n\tdoUnlock(){\n\n\t\tif ( this.disabled || this.locked === false || this.locks>0 ) return;\n\n\t\tthis.locked = false;\n\t\tif ( this.start ) Events.emit( EVT_EVENT, this.start );\n\t\telse Events.emit( EVT_UNLOCK, this );\n\n\t\tChanged.add(this);\n\t}\n\n\t/**\n\t * Default implementation of onUse() is to add 1.\n\t * @param {Context} g\n\t */\n\tonUse( g ) {\n\n\t\tif ( this.slot ) g.setSlot( this );\n\t\telse this.amount( 1 );\n\n\t}\n\n\t/**\n\t * Determine whether the item is filled relative to a filling rate.\n\t * if the filling rate + natural item rate can't fill the item\n\t * it is considered filled to avoid getting stuck.\n\t * @param {number} rate\n\t */\n\tfilled( rate=0 ) {\n\t\treturn (this._max && this.value >= this._max.value) ||\n\t\t(this.rate && (this.rate + rate.valueOf() ) <= 0); }\n\n\t/**\n\t * @returns {boolean} true if an unlocked item is at maximum value.\n\t*/\n\tmaxed() {\n\n\t\tif ( this._max ) return this.value >= Math.floor( this._max.value);\n\n\t\treturn !(this.repeat||this.owned) && this.value > 0;\n\n\t}\n\n\tsetDefaults(defaults ) {\n\n\t\tvar obj;\n\n\t\tfor( let p in defaults ) {\n\n\t\t\tvar cur = this[p];\n\t\t\tif ( cur === undefined || cur === null ) {\n\n\t\t\t\tobj = defaults[p];\n\t\t\t\tif ( typeof obj === 'function' ) this[p] = obj( this );\n\t\t\t\telse if ( typeof obj === 'object' ) {\n\t\t\t\t\tconsole.log('clone: ' + this.id );\n\t\t\t\t\tthis[p] = cloneClass( obj );\n\t\t\t\t}\n\t\t\t\telse this[p] = obj;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @note currently unused.\n\t * @unused\n\t * shorthand for locked||disabled||locks>0\n\t */\n\tblocked() {\n\t\treturn this.locked || this.disabled || this.locks>0;\n\t}\n\n\t/**\n\t * Perform cost scaling based on current value.\n\t * @todo @unused\n\t * @param {*} s\n\t */\n\t/*scaleCost( s ) {\n\n\t\tlet cost = this.cost;\n\t\tif (!cost) return;\n\n\t\tlet type = typeof cost;\n\t\tif ( type === 'string') return;\n\t\telse if ( !isNaN(type)) {\n\n\t\t}\n\n\t}*/\n\n\t/**\n\t * Add a requirement for unlocking this data.\n\t * @param {string|string[]} item\n\t */\n\taddRequire( item ) {\n\n\t\tif ( !this.require ) {\n\n\t\t\tthis.require = item;\n\n\t\t} else if ( this.require === item ||\n\t\t\t\t(Array.isArray(this.require) && this.require.includes(item)) ) {\n\t\t\t\t\treturn;\n\t\t} else {\n\t\t\tthis.require = arrayMerge( this.require, item );\n\t\t}\n\n\t}\n\n}\n\nmergeClass( GData, Base );","/**\n * Functions/properties shared by instances.\n */\nexport default {\n\n\tget instanced() { return true; },\n\n\t/**\n\t * @property {string} recipe - id of item template used to instance this item.\n\t */\n\tget recipe() { return this.template?  this.template.id : this._id; },\n\tset recipe(v) { if ( !this.template ) this.template = v},\n\n\tget template(){ return this._template;},\n\tset template(v){this._template=v;},\n\n\tget mod(){return this._mod;},\n\tset mod(v){this._mod =v;},\n\n\t/**\n\t * @property {Alter[]} alters - alterations applied to object.\n\t */\n\tget alters(){ return this._alters; },\n\tset alters(v){ this._alters=v; },\n\n\t/**\n\t * Map property strings to source property objects.\n\t */\n\tinitAlters( g ){\n\n\t\tlet alters = this.alters || [];\n\t\tif ( typeof alters === 'string') {\n\t\t\talters = alters.split(',');\n\t\t}\n\n\t\tlet len = alters.length;\n\t\tlet a = [];\n\t\tfor( let i = 0; i < len; i++ ) {\n\n\t\t\tlet p = g.getData( alters[i] );\n\t\t\tif (!p || (typeof p !== 'object') ) continue;\n\t\t\telse {\n\n\t\t\t\ta.push(p);\n\n\t\t\t\tif ( p.alter ) {\n\t\t\t\t\tconsole.log(this.id + ' INIT ALTER: ' + p.id );\n\t\t\t\t\tthis.applyMods( p.alter, 1, this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tthis.alters = a;\n\t},\n\n\t/**\n\t * Add an alteration to the base instance.\n\t * @param {Alter} alter\n\t */\n\tdoAlter( alter ) {\n\n\t\tif (!alter) {\n\t\t\tconsole.log('NO ALTER. NULL RETURN');\n\t\t\treturn;\n\t\t}\n\n\t\tif ( alter.alter ) this.applyMods( alter.alter, 1, this );\n\n\t\tif ( !Array.isArray(this.alters ) ) this.alters = [];\n\t\telse if ( this.alters.includes(alter) ) return;\n\n\t\tthis.addAdj( alter.adj || alter.name, alter );\n\t\tthis.alters.push(alter);\n\n\t},\n\n\t/**\n\t * Apply an adjective to the item's name.\n\t * @param {string} adj\n\t * @param {object} src - adjective source.\n\t * @param {?string} [fallback=null] - fallback prefix to apply.\n\t */\n\taddAdj( adj, src, fallback=null ) {\n\n\t\tif ( adj ) {\n\n\t\t\tif ( adj.includes( '%' ) ) {\n\n\t\t\t\tthis.name = adj.replace( '%s', src.name ).replace( '%i', this.name );\n\t\t\t\treturn;\n\n\t\t\t} else if ( !this.name.includes(adj) ) {\n\n\t\t\t\tthis.name = adj + ' ' + this.name;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( fallback ) this.addAdj( fallback, src );\n\n\t},\n\n\tis( k ) {\n\t\treturn this.type === k || this.kind === k || this.hasTag(k) || this.name === k;\n\t}\n\n\n}","import Base, {mergeClass} from './base';\nimport {assign, cloneClass } from 'objecty';\nimport { ParseMods } from 'modules/parsing';\nimport Instance from './instance';\nimport RValue from '../values/rvals/rvalue';\n\nconst ItemDefaults = {\n\tstack:true,\n\tconsume:true\n}\n\n/**\n * @class Item\n * Carryable or equippable instanced Item.\n * An instanced item can be created, destroyed, discarded, etc.\n */\nexport default class Item {\n\n\t/**\n\t * @property {object} onuse - effect to apply on 'use' action.\n\t * might be replaced with 'effect' since it seems to be the same.\n\t */\n\n\ttoJSON() {\n\n\t\tlet data = Base.toJSON.call(this);\n\n\t\tif ( !this.template && !this.recipe ) {\n\n\t\t\t//console.warn('MISSING TEMPLATE: ' + this.id );\n\t\t\tdata.type = this.type;\n\n\t\t}\n\n\t\tif ( this.alters && this.alters.length>0){\n\n\t\t\tthis.alters = this.alters.filter(function (el) \n\t\t\t{\n\t\t\t  return el != null;\n\t\t\t});\n\t\t\tdata.alters = this.alters.map( v=>v.id );\n\t\t}\n\n\t\tdata.cnt = this.count || undefined;\n\n\t\tdata.id = this.id;\n\t\tdata.recipe = this.recipe;\n\n\t\treturn data ? data : undefined;\n\n\t}\n\n\t/**\n\t * @property {boolean} consume - whether to consume the item on use.\n\t */\n\tget consume() { return this._consume; }\n\tset consume(v) { this._consume = v;}\n\n\t/**\n\t * @property {RValue} count - count of item held.\n\t */\n\tget count(){ return this._count; }\n\tset count(v){this._count = new RValue(v); }\n\n\t/**\n\t * @property {boolean} stack - whether the item can stack.\n\t */\n\tget stack() { return this._stack; }\n\tset stack(v) { this._stack = v; }\n\n\tget defaults() { return this._defaults || ItemDefaults }\n\tset defaults(v) { this._defaults = v;}\n\n\tconstructor( vars=null, save=null ) {\n\n\t\tif ( vars ) { cloneClass( vars, this ); }\n\t\tif ( save ) assign(this,save);\n\n\t\tif ( !this.count ) {\n\n\t\t\tif ( vars ) {\n\t\t\t\tif ( vars.cnt ) this.count = vars.cnt;\n\t\t\t\telse if ( vars.val ) this.count = vars.val;\n\t\t\t}\n\t\t\tif ( !this.count ) this.count = 1;\n\n\t\t}\n\t\tthis.value = 0;\n\n\t\tif ( this.consume === null || this.consume === undefined ) this.consume = this.defaults.consume;\n\t\tif ( this.stack === null || this.stack === undefined ) this.stack = this.defaults.stack;\n\n\t}\n\n\tcanPay(cost) { return this.count >= cost; }\n\n\tcanUse(g) { return this.consume || this.use; }\n\n\tonUse( g, inv ) {\n\n\t\tif ( this.consume === true ) {\n\t\t\tthis.count--;\n\t\t\tif ( this.count <= 0 ) ( inv || g.state.inventory ).remove( this );\n\t\t}\n\n\t\tif ( this.use ) {\n\n\t\t\tif (this.use.dot ) {\n\t\t\t\tg.state.player.addDot( this.use.dot, this );\n\t\t\t}\n\t\t\tg.applyVars( this.use );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Non-stacking. Does not apply.\n\t * @param {*} g\n\t */\n\tamount(g) {\n\t}\n\n\tmaxed(){\n\t\treturn (this.stack === false &&this.count>0) || ( this.max && this.count >= this.max );\n\t}\n\n\trevive( gs ){\n\n\t\tif ( typeof this.template ==='string' ) this.template = gs.getData( this.template );\n\t\t/*if ( this.template ) {\n\t\t\t//console.log('it revive from: ' + this.template );\n\t\t\t//cloneClass( this.template, this );\n\t\t}*/\n\n\t\tif ( this.mod ) this.mod = ParseMods( this.mod, this.id, this );\n\n\t\t//this.initAlters(gs);\n\n\t}\n\n\tbegin(g){\n\t\t//console.log('BEGIN CALLED: ' + this.id );\n\t\tthis.initAlters(g);\n\t}\n\n}\n\nmergeClass( Item, Base );\nmergeClass( Item, Instance );","import { CreateNpc } from \"../items/monster\";\nimport { ENCOUNTER } from \"../values/consts\";\nimport Game from \"../game\";\n\n/**\n * Create Npc from string or SpawnInfo object.\n * @param {string} e\n * @param {number} [pct=1]\n * @returns {Encounter|Npc|null}\n */\nconst MakeSpawn = ( e ) => {\n\n\te = Game.getData(e);\n\t//console.log('spawn: ' + e + '  unique? ' + Game.state.hasUnique(e) + '  type? ' + e.type );\n\t//console.log('spawn: ' + e + '  locked? ' + e.locked + '  disabled ' + e.disabled + ' locks: ' + e.locks  );\n\n\tif ( !e || Game.state.hasUnique(e) || ( e.locked || e.disabled || e.locks>0 )) return null;\n\n\tif ( e.type === ENCOUNTER ) return e;\n\n\treturn CreateNpc(e, Game);\n\n}\n\nexport default class SpawnGroup {\n\n\ttoJSON(){\n\n\t\tif ( this._w === 1 ) {\n\t\t\treturn this.ids;\n\t\t} else {\n\n\t\t\treturn {\n\t\t\t\tids:this.ids,\n\t\t\t\tw:this._w\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @property {number} w - arbitrary weight of this spawn group (any number)\n\t */\n\tget w(){ return this._w; }\n\tset w(v){ this._w=v; }\n\n\t/**\n\t * @property {string|string[]} ids\n\t */\n\tget ids(){return this._ids;}\n\tset ids(v){\n\t\tif ( typeof v === 'string' && v.includes(',') ) this._ids = v.split(',');\n\t\telse this._ids = v;\n\t}\n\n\t/**\n\t *\n\t * @param {string|string[]|object} vars\n\t * @param {?number} vars.weight\n\t * @param {?number} vars.w\n\t * @param {?string[]} vars.spawns\n\t */\n\tconstructor( vars ){\n\n\t\tif ( typeof vars === 'string' || Array.isArray(vars)){\n\n\t\t\tthis.ids = vars;\n\n\t\t} else if ( typeof vars === 'object') {\n\n\t\t\tthis.ids = vars.ids;\n\t\t\tthis.w = vars.weight || vars.w;\n\n\t\t}\n\n\t\tif ( !this.w ) this.w = 1;\n\n\t}\n\n\t/**\n\t * Create npcs from group parameters.\n\t * @note this could probably be done before raid call.\n\t * @param {number} pct - percent of the way through dungeon.\n\t * @returns {Npc[]|Encounter} instantiated npcs from group.\n\t */\n\tinstantiate( pct=0 ){\n\n\t\tlet e;\n\n\t\tif ( typeof this.ids === 'string') {\n\n\t\t\t//console.log('TRY SPAWN: '  + this.spawns );\n\n\t\t\te = MakeSpawn( this.ids, pct );\n\t\t\tif ( e === null ) return null;\n\t\t\telse if ( e.type === ENCOUNTER ) return e;\n\n\t\t\treturn [e];\n\n\t\t} else {\n\n\t\t\tlet a = [];\n\t\t\tif(typeof this.ids !== \"undefined\"){\n\t\t\t\tfor ( let i = 0; i < this.ids.length; i++ ) {\n\n\t\t\t\t\t\te = MakeSpawn( this.ids[i], pct );\n\t\t\t\t\t\tif ( e ) a.push(e);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\n\t\t\treturn a.length > 0 ? a : null;\n\n\t\t}\n\n\n\t}\n\n\n}","import Game from \"../game\";\nimport { ENCOUNTER } from \"../values/consts\";\n\n/**\n * @class SpawnParams\n * Object describing the parameters of a random spawn.\n */\nexport class SpawnParams {\n\n\t/**\n\t * @property {string} type - object to spawn, NPC or ENCOUNTER.\n\t */\n\tget type(){return this._type}\n\tset type(v){this._type =v}\n\n\t/**\n\t * @property {Range} level - level range of the spawn from start of Dungeon to end.\n\t */\n\tget level() { return this._level}\n\tset level(v) {this._level =v}\n\n\t/**\n\t * @property {number} range - individual level variation in any given spawn.\n\t */\n\tget range() {return this._range;}\n\tset range(v) {this._range = v;}\n\n\t/**\n\t *\n\t * @param {object} vars\n\t * @param {Range} vars.level\n\t * @param {number} vars.range\n\t */\n\tconstructor( vars ){\n\n\t\tif ( vars ) {\n\t\t\tthis.level = vars.level;\n\t\t\tthis.range = vars.range;\n\t\t} else console.warn('NO SPAWN PARAMS: ' + vars );\n\n\t}\n\n\t/**\n\t * Allows potential recursive stacking of spawn groups.\n\t * @param {} pct\n\t * @returns {Npc|Encounter|null}\n\t */\n\tinstantiate(pct=0) {\n\t\treturn this.random(pct);\n\t}\n\n\t/**\n\t *\n\t * @param {number} pct - 1 based percent. progress through dungeon.\n\t * @returns {Npc|Encounter|null}\n\t */\n\trandom( pct=0 ) {\n\t\tif ( this.type !== ENCOUNTER ) return [ Game.itemGen.randEnemy( this, null, pct ) ];\n\t\treturn Game.itemGen.randEncounter( this, null, pct );\n\n\t}\n\n}","import SpawnGroup from \"./spawngroup\";\nimport { SpawnParams } from \"./spawnparams\";\n\n\n/**\n * Parse Dungeon/Locale spawning information.\n * @param {object|Array} spawnData\n */\nexport const ParseSpawns = ( spawnData ) => {\n\n\tif ( typeof spawnData === 'object') {\n\t\tif ( Array.isArray(spawnData) ) return new Spawns( spawnData );\n\t\treturn new SpawnParams( spawnData );\n\t}\n\n}\n\n/**\n * Describes possible spawns for a dungeon.\n */\nexport default class Spawns {\n\n\t/**\n\t * @property {SpawnGroup[]} groups\n\t */\n\tget groups(){return this._groups;}\n\tset groups(v){this._groups =v;}\n\n\t/**\n\t * @private\n\t * @property {number} weightTot\n\t */\n\tget weightTot(){ return this._weightTot; }\n\tset weightTot(v) { this._weightTot = v}\n\n\t/**\n\t *\n\t * @param {Array} arr\n\t */\n\tconstructor( arr ){\n\n\t\tthis.initGroups(arr);\n\n\t}\n\n\t/**\n\t * Get a random spawn group.\n\t * @note faster would be sorted groups and binary search.\n\t * @param {number} [pct=0] - 1-base percent. progress through dungeon.\n\t * @returns {Npc[]|null}\n\t */\n\trandom( pct=0 ) {\n\n\t\tlet grp = this.randGroup();\n\t\tif ( grp === null ) return null;\n\n\t\treturn grp.instantiate(pct);\n\n\t}\n\n\t/**\n\t * Get random group from groups list.\n\t * @returns {SpawnGroup|null}\n\t */\n\trandGroup(){\n\n\t\tlet p = Math.random()*this.weightTot;\n\t\tlet tot = 0;\n\n\t\tlet len = this.groups.length;\n\t\tfor( let i =0; i < len; i++ ) {\n\n\t\t\ttot += this.groups[i].w;\n\t\t\tif ( p <= tot ) return this.groups[i];\n\n\t\t}\n\n\t\t// shouldn't happen. weight total should account for all groups.\n\t\treturn len > 0 ? this.groups[0] : null;\n\n\t}\n\n\t/**\n\t *\n\t * @param { Array } list\n\t */\n\tinitGroups( list ){\n\n\t\tvar tot = 0;\n\n\t\tfor( let i = list.length-1; i>= 0; i-- ) {\n\n\t\t\tvar g = list[i];\n\n\t\t\tif ( !(g instanceof SpawnGroup)) g = list[i] = new SpawnGroup(g);\n\n\t\t\ttot += g.w;\n\n\n\t\t}\n\n\t\tthis.weightTot = tot;\n\t\tthis.groups = list;\n\t}\n\n}","import Task from \"./task\";\nimport { EXPLORE, LOCALE } from \"../values/consts\";\nimport { ParseSpawns } from '../classes/spawns';\nimport SpawnGroup from '../classes/spawngroup';\n\n/**\n * Default dist per level function. Also currently used by dungeon.\n * @param {number} lvl\n * @returns {number}\n */\nexport const getDist = (lvl)=> {\n\treturn Math.ceil( 4.4*Math.exp( 0.30*lvl ) );\n};\n\n/**\n *\n * @param {object} g - all game data.\n * @param {*} s\n * @returns {boolean}\n */\nexport const distTest = (g,s) => {\n\treturn g.dist >= s.dist;\n}\n\n/**\n *\n * @param {*} g\n * @param {*} s\n * @returns {boolean}\n */\nexport const levelTest = (g, s) => {\n\treturn g.player.level >= (s.level-1);\n}\n\nexport class Locale extends Task {\n\n\t/**\n\t * @property {object|string} once - result to happen only once.\n\t */\n\tget once() { return this._once; }\n\tset once(v) { this._once = v; }\n\n\t/**\n\t * @property {Spawns} encs - alias for Spawns\n\t * @alias spawns\n\t */\n\tget encs() { return this._spawns; }\n\tset encs(v) { this.spawns = v; }\n\n\t/**\n\t * @property {Spawns} spawns\n\t */\n\tget spawns() { return this._spawns; }\n\tset spawns(v) {\n\t\tthis._spawns = ParseSpawns(v);\n\t}\n\n\t/**\n\t * @property {string[]} bars - list of progress bars to display in locale.\n\t */\n\tget bars() { return this._bars; }\n\tset bars(v) {\n\t\tthis._bars = typeof v === 'string' ? v.split(',') : v;\n\t}\n\n\t/**\n\t * @property {SpawnGroup|Object.<number,SpawnGroup>} boss\n\t */\n\tget boss(){ return this._boss; }\n\tset boss(v) {\n\n\t\tif ( v === null || v instanceof SpawnGroup ) this._boss = v;\n\t\telse if ( typeof v === 'object' && Array.isArray(v) ) {\n\n\t\t\tfor( let p in v ) {\n\n\t\t\t\tif ( this.id === 'mustylibrary') console.log('BOSS SUB: ' + p );\n\t\t\t\tv[p] = new SpawnGroup(v);\n\t\t\t}\n\t\t\tthis._boss = v;\n\n\t\t} else this._boss = new SpawnGroup(v);\n\n\t}\n\n\t/**\n\t * @property {string} proxy - id of actual runner.\n\t */\n\tget controller() { return EXPLORE }\n\n\tconstructor(vars=null) {\n\n\t\tsuper(vars);\n\n\t\tif ( this.level === null || this.level === undefined ) this.level = 1;\n\t\tthis.type = LOCALE;\n\n\t\t/**\n\t\t * @property {number} progress\n\t\t */\n\t\tthis.ex = this.ex || 0;\n\t\tif (!this.length) this.length = 20*this.level;\n\n\t\t// default require for dungeon is player-level.\n\t\tif ( !this.require ) this.require = levelTest;\n\n\t\tif ( this.dist === undefined || this.dist === null ) this.dist = getDist(this.level);\n\n\t\tif ( !this.need ) this.need = distTest;\n\n\t\t//console.log(this.id + ' dist: ' + this.dist );\n\n\t}\n\n\t/**\n\t * Get next group of enemies, or next Encounter.\n\t * @returns {Encounter|Npc[]|null}\n\t */\n\tgetEncounter() {\n\n\t\tlet spawn = null;\n\n\t\tif ( this.hasBoss( this.boss, this.exp ) ) {\n\t\t\tspawn = this.getBoss( this.boss );\n\t\t\t// unique bosses might result in empty arrays.\n\t\t\tif ( spawn ) return spawn;\n\t\t}\n\n\t\treturn this.spawns.random( this.percent()/100 );\n\n\t}\n\n\n\t/**\n\t * Checks if there is a boss at the given position in dungeon.\n\t * @param {string|object|Array} boss\n\t * @param {number} at\n\t * @returns {boolean}\n\t */\n\thasBoss( boss, at ) {\n\n\t\tif ( boss == null ) return false;\n\n\t\tat = Math.floor(at + 1 );\n\t\tif ( (boss instanceof SpawnGroup) ) {\n\t\t\t// last enemy in dungeon.\n\t\t\treturn ( at == this.length);\n\t\t}\n\t\treturn boss.hasOwnProperty( at );\n\n\t}\n\n\t/**\n\t * Instantiates a boss Npc.\n\t * @param {string|string[]|object} boss\n\t * @returns {Npc[]|Explore|null}\n\t */\n\tgetBoss( boss ) {\n\n\t\tif ( !boss ) return null;\n\n\t\tif ( boss instanceof SpawnGroup ) {\n\n\t\t\treturn boss.instantiate();\n\n\t\t} else {\n\n\t\t\tlet ind = Math.floor( this.exp + 1 );\n\t\t\tif ( boss.hasOwnProperty( ind ) ) {\n\t\t\t\t// mid-level boss\n\t\t\t\treturn boss[ind].instantiate();\n\t\t\t}\n\t\t}\n\t\treturn null;\n\n\t}\n\n\n}","import GData from \"./gdata\";\nimport { MONSTER, TEAM_PLAYER } from \"../values/consts\";\nimport Npc from \"../chars/npc\";\nimport Attack from '../chars/attack';\nimport { NpcLoreLevels } from '../values/craftVars';\n\n/**\n *\n * @param {object} proto\n * @param {Game} g\n * @returns {Npc}\n */\nexport const CreateNpc = (proto, g ) => {\n\n\tlet it = new Npc( proto );\n\tit.value = 1;\n\t//\n\tit.name = proto.name;\n\tit.id = g.state.nextId(proto.id);\n\treturn it;\n\n}\n\nexport default class Monster extends GData {\n\n\t/**\n\t * @property {true} isRecipe\n\t */\n\tget isRecipe() {return true; }\n\n\t/**\n\t * @returns {object}\n\t */\n\ttoJSON() {\n\t\tif ( this.value > 0 ) return { value:this.value};\n\t\telse return undefined;\n\t}\n\tget attack() { return this._attack; }\n\tset attack(v) {\n\n\t\tif ( Array.isArray(v)) {\n\n\t\t\tlet a = [];\n\t\t\tfor( let i = v.length-1; i>=0; i-- ) {\n\n\t\t\t\ta.push( (v[i] instanceof Attack) ? v[i] :\n\t\t\t\t\tnew Attack(v[i])\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tthis._attack = a;\n\n\t\t} else this._attack = ( v instanceof Attack) ? v : new Attack(v);\n\n\t}\n\t/**\n\t *\n\t * @param {object} [vars=null]\n\t */\n\tconstructor(vars=null) {\n\n\t\tsuper(vars );\n\n\t\tthis.type = MONSTER;\n\n\t\tif ( !this.level ) this.level = 1;\n\n\t\tthis.hp = this.hp || (2*this.level);\n\t\tthis.speed = this.speed || this.level;\n\t\tthis.tohit = this.tohit || this.level;\n\t\tthis.defense = ( this.defense === null || this.defense === undefined )\n\t\t\t\t\t\t\t\t? this.level : this.defense;\n\n\t\tthis.locked = this.require ? true : false;\n\n\t}\n\n\t/**\n\t *\n\t * @param {Game} g\n\t * @returns {boolean}\n\t */\n\tcanUse( g ){\n\n\t\tif ( this.value < 10 ) return false;\n\n\t\tlet npcSkills = NpcLoreLevels( this.kind, g);\n\t\tif ( npcSkills < this.level ) return false;\n\n\t\treturn super.canUse( g );\n\n\t}\n\n\t/**\n\t *\n\t * @param {Game} g\n\t * @param {number} [count=1]\n\t */\n\tamount( g, count ) {\n\t\tif(!count) count = 1;\n\t\tlet minions = g.getData('minions');\n\t\tg.create( this, minions.shouldKeep(this), count );\n\n\t}\n\n\t/**\n\t *\n\t * @param {Game} g\n\t * @param {number} [team=TEAM_PLAYER]\n\t * @param {boolean} [keep=false]\n\t */\n\tonCreate( g, team = TEAM_PLAYER, keep=false ){\n\n\t\t//if ( team === TEAM_PLAYER ) console.log('create npc: ' + this.id );\n\n\t\tlet it = CreateNpc(this, g);\n\t\tit.team = team;\n\t\tit.active = !keep;\n\n\t\tif ( keep ) {\n\n\t\t\tg.state.minions.add( it );\n\n\t\t} else {\n\t\t\tif (g.state.combat){\n\t\t\t\tg.state.combat.addNpc( it );\n\t\t\t\t\n\t\t\t}\n\t\t\telse if (g.state.state){\n\t\t\t\tg.state.state.combat.addNpc( it );\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * @returns {false}\n\t */\n\tmaxed() { return false; }\n\n}","import GData from './gdata';\nimport { RESOURCE } from '../values/consts';\n\n\nexport default class Resource extends GData {\n\n\tget require() {\n\t\treturn super.require ||\n\t\t( this._locked ? ()=>this.positive() : null );\n\t}\n\tset require(v){super.require = v;}\n\n\tget group(){return this._group;}\n\tset group(v){this._group=v}\n\n\t/**\n\t * @note NEED 'this' so webpack doesn't change 's', hiding the self-reference\n\t * require from 'unlock'. messy and bad.\n\t* @returns {boolean} true if resource value is positive.\n\t*/\n\tpositive() {\n\t\treturn (super.value > 0 || (this.rate.value>0&&( !this.max ||this.max.value>0) ) );\n\t}\n\n\t/**\n\t * @property {number} current - identical to value except uses floor of values.\n\t */\n\tget current() { return this.unit ? Math.floor(super.value.valueOf() ) : super.value.valueOf(); }\n\n\tget val(){ return super.value; }\n\tset val(v){ super.value = v; }\n\n\t/**\n\t * @property {number} value\n\t */\n\tget value() { return super.value; }\n\tset value(v) {\n\n\t\tif ( v > this.max ) {\n\n\t\t\tif ( v < super.value.base ) super.value = v;\n\n\t\t\t//\n\t\t\telse super.value = Math.max( this.max.value, super.value.valueOf() );\n\n\t\t} else super.value = (v >= 0 ) ? v :0;\n\n\t}\n\n\tremove( amt ) {\n\t\tif ( amt >= this.value ) {\n\t\t\tthis.value.base = 0;\n\t\t} else this.value.base -= amt;\n\t}\n\n\n\t/**\n\t * @property {string} color - optional color override.\n\t */\n\tget color(){return this._color; }\n\tset color(v) {this._color=v;}\n\n\t/**\n\t *\n\t * @param {?Object} [vars=null]\n\t */\n\tconstructor( vars=null ){\n\n\t\tsuper(vars);\n\n\t\t//if ( this._value != vars.val ) console.log( 'this.valu: ' + this._value );\n\n\t\tif ( this.repeat !== false ) this.repeat = true;\n\n\t\t/**\n\t\t * @property {boolean} unit - true if current value is reported in integer amounts.\n\t\t */\n\t\tif ( this.unit === null || this.unit === undefined ) this.unit = true;\n\n\t\tif ( this.rate === null || this.rate === undefined ) this.rate = 0;\n\n\t\tthis.type = this.type || RESOURCE;\n\n\t}\n\n\t/**\n\t * Tests whether item fills unlock requirement.\n\t * @returns {boolean}\n\t */\n\tfillsRequire(){\n\t\treturn this.locked === false && this.value > 0;\n\t}\n\n\tempty(){ return this.value <= 0; }\n\n\t/**\n\t * @returns {boolean} true if item at maximum value.\n\t */\n\tmaxed() {\n\t\treturn this.max ? (this.value >= this.max) : false;\n\t}\n\n}","import Resource from \"./resource\";\n\n/**\n * A reversed Resource is empty/used up at max, and 'filled' (usable)\n * at 0.\n * this.value is the amount used out of max.\n */\nexport default class RevStat extends Resource {\n\n\tconstructor( vars ){\n\n\t\tsuper(vars);\n\n\t\tif ( !this._max ) this.max = 0;\n\n\t}\n\n\tfree(){ return this.max - this.value; }\n\n\tempty(){ return this.value>=this.max.value; }\n\n\t/**\n\t * Determine if this resource can pay the given amount of value.\n\t * Made a function for reverseStats, among other things.\n\t * @param {number} amt\n\t */\n\tcanPay( amt ) {\n\t\treturn this.value - amt <= this.max.value;\n\t}\n\tremove( amt ) {\n\t\tthis.value.base += amt;\n\t}\n\n\tdoFill(){ this.value = 0; }\n\n\t/**\n\t * Determine whether the item is filled relative to a filling rate.\n\t * if the filling rate + natural item rate can't fill the item\n\t * it is considered filled to avoid getting stuck.\n\t * @param {number} rate\n\t */\n\tfilled( rate=0 ) { return this.value <= 0 || (this.rate && (this.rate+rate) >=0); }\n\n\tmaxed() { return this.value<=0; }\n\n}","import Task from './task';\nimport Stat from '../values/rvals/stat';\nimport { SKILL } from '../values/consts';\nimport Scaler from '../values/rvals/scaler';\n\n/**\n * @const {number} EXP_RATIO - ratio of skill experience cap increase.\n */\nconst EXP_RATIO = 0.35;\n\n/**\n * Starting exp length for skills of various level.\n * @param {number} n\n */\nconst levLength = (n)=>{ return 50*Math.pow( (1+EXP_RATIO), n ) }\n\nexport default class Skill extends Task {\n\n\t/**\n\t * Skill levels are actually value.\n\t */\n\tshowLevel(){return Math.floor( this.value ); }\n\n\t/**\n\t *\n\t * @param {?Object} [vars=null]\n\t */\n\tconstructor( vars=null){\n\n\t\tsuper(vars);\n\n\t\tthis.type = SKILL;\n\n\t\tif ( !this.length || this.value == 0 ) this.length = levLength( this.level +this.value );\n\t\telse if ( this.value >= 1 ){\n\n\t\t\t// recheck percent lengths. (allow percent formula to change.)\n\t\t\tlet len = levLength( this.level + this.value );\n\t\t\tif ( this.length > len ) this.length = len;\n\n\t\t}\n\n\t\tif ( !this.buy ) this.buy = { sp:1 };\n\n\t\tif ( !this.rate ) this.rate = new Stat( 0.5, this.id + '.rate' );\n\t\tif ( !this.rate.base ) this.rate.base = 0.5;\n\n\t\tif ( !(this.exp instanceof Scaler) ) this.ex = 0;\n\n\t\tif (  !this.max ) this.max = new Stat(5, this.id + '.max', true );\n\n\t}\n\n\t/**\n\t * Allow buying a skill even when maxed.\n\t * @param {Game} g\n\t * @returns {boolean}\n\t */\n\tcanBuy(g){\n\n\t\tif ( this.disabled || this.locked || this.locks > 0 ) return false;\n\n\t\tif ( this.buy && !g.canPay(this.buy) ) return false;\n\n\t\treturn true;\n\n\t}\n\n\tchanged(g, count) {\n\n\t\tsuper.changed(g, count);\n\n\t\tif ( this.value > Math.floor(this._max.value) ) {\n\t\t\tthis.value = Math.floor(this.max.value);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._length += this._length*EXP_RATIO;\n\n\t}\n\n}","import GData from './gdata';\nimport Game from '../game';\nimport Events, { TASK_DONE, TASK_IMPROVED } from '../events';\nimport Stat from '../values/rvals/stat';\nimport Scaler from '../values/rvals/scaler';\nimport { TASK } from '../values/consts';\nimport { ParseMods } from '../modules/parsing';\nimport { SetModCounts } from './base';\nimport { Changed } from '../techTree'\n\n/*function ShowModTotals( mods ){\n\n\tif ( mods instanceof Mod ) {\n\t\tconsole.log( mods.id + ': ' + mods.bonusTot );\n\t\treturn;\n\t}\n\n\tfor( let p in mods ) {\n\n\t\tlet it = mods[p];\n\t\tif ( it instanceof Mod ) console.log( it.id + ': ' + it.bonusTot );\n\t\telse ShowModTotals( it );\n\n\t}\n\n}*/\n\nexport default class Task extends GData {\n\n\tvalueOf(){ return this.locked ? 0 : this.value.valueOf(); }\n\n\ttoJSON(){\n\n\t\tlet d = super.toJSON();\n\t\tif ( this.timer > 0 ) d.timer = this.timer;\n\n\t\treturn d;\n\n\t}\n\n\tget level() {return this._level;}\n\tset level(v) { this._level = v;}\n\n\tget typeName() { return this.type === TASK ? 'action' : this.type }\n\n\t/**\n\t * @property {Mods} runmod - mods to apply while task is being actively used.\n\t */\n\tget runmod(){return this._runmod;}\n\tset runmod(v){this._runmod = v;}\n\n\tget ex(){ return this._exp; }\n\tset ex(v){\n\t\tthis._exp = v instanceof Scaler ? v : new Scaler( v, this.id + ' .exp', this._rate );\n\t}\n\n\t/**\n\t * @property {number} exp - alias ex data files.\n\t */\n\tget exp() { return this._exp; }\n\tset exp(v){\n\n\t\tif ( this.locked || this.disabled || this.maxed() || (this.buy &&!this.owned) ) return;\n\n\t\t//@compat only\n\t\tif ( this._exp === null || this._exp === undefined ) this.ex = v;\n\n\t\tif ( v < 0 ) {\n\t\t\tconsole.warn( this.id + ' exp: ' + v );\n\t\t\treturn;\n\t\t}\n\t\tthis._exp.set(v);\n\n\n\t\tthis.tryComplete();\n\n\n\t}\n\n\tget rate(){ return this._rate; }\n\tset rate(v){\n\n\t\tthis._rate = ( v instanceof Stat ? v : new Stat(v, this.id + '.rate' ) );\n\t\tif ( this.ex !== undefined ) this.ex.scale = this._rate;\n\t}\n\n\tget length() { return this._length; }\n\tset length(v) {\n\n\t\tif ( v === null || v === undefined ) this._length = null;\n\t\telse this._length = v instanceof Stat ? v : new Stat(v);\n\n\t}\n\n\tget running() { return this._running; }\n\tset running(v) { this._running = v;}\n\n\tpercent() { return 100*( this._exp / this._length ); }\n\n\tconstructor( vars=null ){\n\n\t\tsuper(vars);\n\n\t\tthis.repeat = this.repeat === false ? false : true;\n\t\tthis.type = 'task';\n\n\t\tif ( this.at ) {\n\t\t\tif ( this.id === 'magicmissile') console.log('MAGIC MISSILE AT MODS');\n\t\t\tthis.at = ParseMods( this.at, this.id, 1 );\n\t\t}\n\n\t\tif ( this.every ) this.every = ParseMods( this.every, this.id, this );\n\n\t\tif ( (this.length || this.perpetual)) {\n\t\t\tthis.ex = this.ex || 0;\n\t\t}\n\n\t\tthis.running = this.running || false;\n\n\t\tthis.applyImproves();\n\t\tSetModCounts(this.runmod, 1);\n\n\t}\n\n\t/**\n\t * Tests whether item fills unlock requirement.\n\t * @returns {boolean}\n\t */\n\tfillsRequire(){\n\t\treturn this.locked === false && this.value > 0;\n\t}\n\n\tapplyImproves() {\n\n\t\tlet v = this.valueOf();\n\t\tif ( this.at ) {\n\n\t\t\t//if ( v > 0 ) console.log(this.id + ' TOTAL: ' + v );\n\n\t\t\tfor( let p in this.at) {\n\n\t\t\t\tif ( v >= Number(p) ) {\n\n\t\t\t\t\t//ShowModTotals( this.at[p] );\n\t\t\t\t\tthis.applyMods( this.at[p] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.every ) {\n\n\t\t\tfor( let p in this.every ) {\n\n\t\t\t\tvar amt = Math.floor( v / p );\n\t\t\t\tif ( amt > 0 ) {\n\t\t\t\t\tthis.applyMods( this.every[p] );\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcanUse(g){\n\t\treturn (!this.timer ) && super.canUse(g);\n\t}\n\n\tcanRun(g){ return (!this.timer ) && super.canRun(g);}\n\n\ttryComplete() {\n\n\t\tif ( (this._length && this._exp>=this._length )\n\t\t\t|| (!this._length && this.perpetual && this._exp >= 1 ) ) {\n\n\t\t\tthis.complete( Game );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Update a running task.\n\t * @param {number} dt - elapsed time.\n\t */\n\tupdate( dt ) {\n\t\tthis.exp.set( this._exp + (this.rate||1)*dt );\n\t\tthis.tryComplete();\n\t}\n\n\tonStart(){\n\n\t\tif ( this.runmod ) {\n\t\t\tGame.applyMods( this.runmod );\n\t\t}\n\n\t}\n\n\tonStop(){\n\n\t\tif ( this.runmod ) {\n\t\t\tGame.removeMods( this.runmod );\n\t\t}\n\n\t}\n\n\t/**\n\t * completion of ongoing task.\n\t * @param {Game} [g=Game]\n\t */\n\tcomplete(g=Game) {\n\n\t\t/**\n\t\t * @note value has to be incremented first\n\t\t * so the applied mods see the current value.\n\t\t */\n\t\tthis.changed(g, 1);\n\t\tChanged.add(this);\n\n\t\tthis._exp.set(0);\n\n\t\tEvents.emit( TASK_DONE, this );\n\n\t}\n\n\t/**\n\t * task value changed.\n\t * No value increment because that is currently done by game (@todo fix)\n\t */\n\tchanged( g, count ) {\n\n\t\tsuper.changed(g,count);\n\n\t\tvar improve = false;\n\n\t\tif ( this.at ) {\n\n\t\t\tlet cur = this.at[ this.valueOf() ];\n\t\t\tif ( cur ) {\n\n\t\t\t\timprove = true;\n\t\t\t\tthis.applyMods( cur );\n\n\t\t\t}\n\n\t\t} else if ( this.every ) {\n\n\t\t\tlet v = this.valueOf();\n\t\t\tfor( let p in this.every ) {\n\n\t\t\t\tif ( v % p === 0 ) {\n\n\t\t\t\t\timprove = true;\n\t\t\t\t\tthis.applyMods( this.every[p] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tif ( improve ) Events.emit( TASK_IMPROVED, this );\n\n\t}\n\n\t/**\n\t * Perform cd timer tick.\n\t * @param {number} dt - elapsed time.\n\t * @returns {boolean} true if timer is complete.\n\t */\n\ttick(dt) {\n\n\t\tthis.timer -= dt;\n\t\t//console.log('TIME TICK: ' + this.timer );\n\t\tif ( this.timer < 0 ) {\n\n\t\t\t//console.log('timer: ' + this.timer );\n\t\t\tthis.timer = 0;\n\t\t\treturn true;\n\n\t\t}\n\t\treturn false;\n\n\t}\n\n}","import {randElm, randFrom, propSort, randWhere} from './util/array';\n\n/**\n * Category to assign items with no property value\n * on the filter dimension.\n * e.g. filters['biome'] = { none:[npcs without biomes] }\n */\nconst BLANK_CATEGORY = 'none';\n\n/**\n * Item generation group for a given item type.\n */\nexport default class GenGroup {\n\n\t/**\n\t *\n\t * @param {GData[]} items\n\t */\n\tconstructor( items ){\n\n\t\tthis.items= items.filter( v=>!v.unique&&!v.noproc );\n\n\t\t/**\n\t\t * Data split/grouped by a variable/subcategory of the data\n\t\t * @property {.<string,<string,Array>>} groupBy\n\t\t */\n\t\tthis.filterBy = {};\n\n\t}\n\n\tsubgroup(){\n\t}\n\n\t/**\n\t * Get a random item at or below the given level.\n\t * @property {number} level - max item level.\n\t * @property {(object)=>boolean} pred - optional filter predicate.\n\t * @returns {GData}\n\t */\n\trandBelow( max=1, pred) {\n\n\t\tlet levels = this.filterBy.level;\n\n\t\tlet st = 1 + Math.floor( Math.random()*max );\n\t\tlet lvl = st;\n\n\t\tdo {\n\n\t\t\tlet list = levels[lvl];\n\t\t\tlet it;\n\t\t\tif ( list ) {\n\n\t\t\t\tit = pred ? randWhere( list, pred ) : randElm( list );\n\t\t\t\tif ( it ) return it;\n\n\t\t\t}\n\n\t\t\tif ( --lvl < 0 ) lvl = max;\n\n\t\t} while ( lvl !== st );\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t *\n\t * @param {number} level\n\t * @param {boolean} fallback - if item of given level not found,\n\t * fall back to a lower level.\n\t */\n\trandAt( level, fallback=true ) {\n\n\t\tlet levels = this.filterBy.level;\n\t\tlet a = levels[level];\n\n\t\tif ( !a || a.length===0 ) {\n\t\t\treturn fallback ? this.randBelow(level-1) : null;\n\t\t}\n\n\t\treturn randElm(a);\n\n\t}\n\n\t/**\n\t * Get random item with no restriction.\n\t * @returns {object}\n\t */\n\trand(){\n\t\tif ( this.items.length === 0) return null;\n\t\treturn this.items[Math.floor(Math.random()*this.items.length)];\n\t}\n\n\t/**\n\t * Get a filtered sublist.\n\t * @param {string} filter - filter type 'level', 'biome' etc.\n\t * @param {string} match - property value to match.\n\t * @param {boolean} allowBlank - accept items with null value on property. e.g. biome:null\n\t * @returns {Array}\n\t */\n\tfiltered( filter, match, allowBlank=false ) {\n\n\t\tlet f = this.filterBy[filter];\n\n\t\tlet res = f[match] || [];\n\t\tif ( allowBlank && f.hasOwnProperty(BLANK_CATEGORY) ) return res.concat( f[BLANK_CATEGORY ] );\n\n\t\treturn res;\n\n\t}\n\n\t/**\n\t * Get an array of categories under a filter.\n\t * @param {string} filter\n\t * @param {string|string[]} matches\n\t * @param {boolean} allowBlank\n\t * @returns {Array[]}\n\t */\n\tgetCategories( filter, matches, allowBlank ) {\n\n\t\tconst subs = this.filterBy[filter];\n\t\tlet res = [];\n\n\t\tif ( subs === undefined ) return res;\n\t\tif ( allowBlank && subs.hasOwnProperty(BLANK_CATEGORY)) res.push( subs[BLANK_CATEGORY]);\n\t\tif ( typeof matches === 'string') {\n\n\t\t\tif ( subs.hasOwnProperty(matches) ) res.push( subs[matches]);\n\n\t\t} else if ( Array.isArray(matches)) {\n\n\t\t\tfor( let i = matches.length-1; i>= 0; i--) {\n\t\t\t\tvar sub = subs[matches[i] ];\n\t\t\t\tif ( sub ) res.push(sub);\n\t\t\t}\n\n\t\t}\n\n\t\treturn res;\n\n\t}\n\n\t/**\n\t * Get a random item from a filtered subcategory.\n\t * @param {string} filter - level/biome, etc.\n\t * @param {string} matches - valid property matches.\n\t * @param {boolean} allowBlank - accept items with no prop value on filter. e.g. biome:null\n\t */\n\trandBy( filter, matches, allowBlank=false ) {\n\n\t\tvar subs = this.filterBy[filter];\n\t\tif ( subs === undefined ) return null;\n\n\t\tif ( Array.isArray( matches ) ) {\n\n\t\t\treturn randFrom( this.getCategories(filter, matches, allowBlank) );\n\n\t\t} else {\n\n\t\t\treturn randElm( this.filtered( filter, matches, allowBlank) );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Create a new named item category based on the 'prop' property\n\t * of the items.\n\t * @param {string} name - category name.\n\t * @param {?string} prop - prop to sort on. defaults to name.\n\t * @param {?string} [sortBy=level] property to sort filtered lists by.\n\t */\n\tmakeFilter( name, prop, sortBy='level') {\n\n\t\tconst group = this.filterBy[name] = {};\n\t\tprop = prop || name;\n\n\t\tfor( let i = this.items.length-1; i>= 0; i-- ) {\n\n\t\t\tvar it = this.items[i];\n\t\t\tvar cat = it[prop] || BLANK_CATEGORY;\n\n\t\t\tvar list = group[ cat ];\n\t\t\tif ( list === undefined ) {\n\n\t\t\t\tgroup[ cat ] = [ it ];\n\n\t\t\t} else {\n\t\t\t\tlist.push( it );\n\t\t\t}\n\n\t\t}\n\n\t\t// sort all lists.\n\t\tif ( sortBy && sortBy !== prop) {\n\n\t\t\tfor( let p in group ) {\n\t\t\t\tpropSort( group[p], sortBy );\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n}","import Npc from '../chars/npc';\nimport Wearable from \"../chars/wearable\";\nimport { includesAny} from 'objecty';\nimport Percent from '../values/percent';\nimport Item from '../items/item';\nimport GenGroup from '../genGroup';\nimport { pushNonNull } from '../util/array';\nimport GData from '../items/gdata';\nimport { WEARABLE, MONSTER, ARMOR, WEAPON, TYP_PCT, EVENT, ITEM, POTION, TYP_RANGE, NPC, TASK, ENCOUNTER } from '../values/consts';\nimport { CreateNpc } from '../items/monster';\nimport TagSet from '../composites/tagset';\nimport ProtoItem from '../protos/protoItem';\n\n/**\n* Hacky implementation of flatMap since stupid browsers don't support.\n* @param {*} p\n* @param {*} t\n*/\nconst flatMap = ( p, t )=>{\n\n\tlet a = [];\n\tlet len = this.length;\n\tfor( let i = 0; i < len; i++ ) {\n\n\t\tlet v = this[i];\n\n\t\tif ( Array.isArray( v ) ) {\n\n\t\t\tv = v.flatMap( p, t );\n\t\t\tfor( let j = 0; j < v.length; j++) {\n\t\t\t\ta.push(v[j]);\n\t\t\t}\n\n\t\t} else {\n\t\t\ta.push( p.call( t, v ) );\n\t\t}\n\n\t}\n\treturn a;\n\n}\n\n/**\n * Revive an instanced item based on save data.\n * converts template string to actual template object before instancing/revive.\n * @param {GameState} gs\n * @param {object} save\n */\nexport function itemRevive( gs, save ) {\n\n\tif ( !save ) {\n\t\tconsole.warn('Missing gen item: ' + save );\n\t\treturn null;\n\t}\n\n\tvar orig = save.template || save.recipe;\n\n\tif ( typeof orig === 'string') orig = gs.getData( orig );\n\tvar type = orig !== undefined ? ( orig.type || save.type ) : save.type;\n\n\tif ( !type) {\n\n\t\tif ( !save.id ) return null;\n\n\t\tconsole.warn( save.id + ' unknown type: ' + type + ' -> ' + save.template + ' -> ' + save.recipe );\n\t\ttype = 'item';\n\n\t}\n\n\tif ( type === ARMOR || type === WEAPON || type === WEARABLE) {\n\n\t\tsave = new Wearable( orig,save);\n\n\t} else if ( type === MONSTER || type === NPC ) {\n\n\t\t//it.template = orig;\n\t\tsave = new Npc( orig, save );\n\n\t} else {\n\t\t//console.log('default revive: ' + it.id );\n\t\tsave = new Item( orig, save );\n\t}\n\tsave.owned = true;\n\n\tsave.revive( gs );\n\n\treturn save;\n\n}\n\n/**\n * Generates random Equipment from Item data, and instantiates Items from prototypes.\n */\nexport default class ItemGen {\n\n\tconstructor( game ){\n\n\t\tthis.game = game;\n\t\tthis.state = game.state;\n\n\t\t/**\n\t\t * Groups of item types to generate. 'armor', 'weapon', 'monster' etc.\n\t\t */\n\t\tthis.groups = {};\n\n\t\tthis.luck = this.state.getData('luck');\n\n\t\t/*this.initGroup( ARMOR, this.state.armors );\n\t\tthis.initGroup( WEAPON, this.state.weapons );*/\n\n\t\tthis.initGroup( WEARABLE, this.state.weapons.concat(this.state.armors ) );\n\t\tthis.initGroup( 'materials', this.state.materials );\n\t\tthis.initGroup( 'properties', this.state.properties );\n\n\t}\n\n\t/**\n\t * Retrieve a random encounter matching criteria.\n\t * @param {object} data\n\t * @param {string} biome\n\t * @param {number} pct - percent through locale.\n\t */\n\trandEncounter( data, biome, pct=1 ) {\n\n\t\tvar level = data.level || 1;\n\t\tif ( typeof level ==='object') {\n\n\t\t\tif ( level.type === TYP_RANGE ) level = level.percent(pct);\n\t\t\telse level = level.value*pct;\n\n\t\t}\n\n\t\tif ( data.range ) level += (data.range*( -1 + 2*Math.random() ) );\n\t\tlevel = Math.ceil(level);\n\n\t\tif ( !this.groups.hasOwnProperty(ENCOUNTER)) this.initGroup( ENCOUNTER, this.state.encounters );\n\t\treturn this.groups[ENCOUNTER].randAt( level );\n\n\t}\n\n\t/**\n\t * Generate an enemy from rand definition.\n\t * @param {object} data\n\t * @param {string|string[]} biome\n\t * @param {number} [pct=1] level modifier / progress within dungeon.\n\t */\n\trandEnemy( data, biome, pct=1 ) {\n\n\t\tif ( !this.groups.hasOwnProperty(MONSTER) ) this.initGroup( MONSTER, this.state.monsters, ['biome','kind'] );\n\n\t\tif ( biome ) {\n\t\t\treturn randByBiome( data, biome, pct );\n\t\t}\n\n\t\tvar level = data.level || 1;\n\t\tif ( typeof level ==='object') {\n\n\t\t\tif ( level.type === TYP_RANGE ) level = level.percent(pct);\n\t\t\telse level = level.value*pct;\n\n\t\t}\n\n\t\tif ( data.range ) level += (data.range*( -1 + 2*Math.random() ) );\n\t\tlevel = Math.ceil(level);\n\n\t\tlet npc = this.groups[ MONSTER ].randAt( level );\n\t\treturn npc ? CreateNpc( npc, this.game ) : null;\n\n\t}\n\n\t/**\n\t *\n\t * @param {object} data\n\t * @param {string|string[]} biome\n\t * @param {number} level\n\t */\n\trandByBiome( data, biome, level ) {\n\n\n\t}\n\n\t/**\n\t * Instantiate a prototypical item.\n\t * @param {object} proto\n\t * @returns {Item|Wearable} the item created, or null on failure.\n\t */\n\tinstance( proto ) {\n\n\t\tlet it;\n\n\t\tif ( proto.disabled || proto.locked || this.state.hasUnique(proto) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( proto.type === ARMOR || proto.type === WEAPON || proto.type === WEARABLE ) {\n\n\t\t\tconsole.log('itgen wearable: ' + proto.id );\n\t\t\tit = this.fromProto(proto);\n\n\t\t} else if ( proto.type === POTION ) {\n\n\t\t\tit = new Item(proto);\n\n\t\t} else if ( proto.type === ITEM) {\n\n\t\t\tit = new Item( proto );\n\n\t\t} else if ( proto.type === MONSTER || proto.type === NPC ) {\n\t\t\treturn CreateNpc(proto, this.game);\n\t\t}\n\n\t\tif ( it === undefined ) return null;\n\n\t\tit.id = this.state.nextId(it.id);\n\n\t\t//this.state.addInstance(it);\n\t\tit.value = 1;\n\t\tit.owned = true;\n\n\t\treturn it;\n\n\t}\n\n\t/**\n\t * Generate loot from looting info.\n\t * @param {string|Wearable|Object|Array} info\n\t * @returns {?Wearable|Wearable[]}\n\t */\n\tgetLoot( info, amt=1 ) {\n\n\t\tif ( amt instanceof Percent ) {\n\n\t\t\tif ( !amt.roll( this.luck.value ) ) return null;\n\t\t\tamt = 1;\n\n\t\t} else if ( amt.value ) amt = amt.value;\n\n\t\tif ( Array.isArray(info) ) {\n\t\t\treturn info.flatMap ?  info.flatMap( this.getLoot, this )\n\t\t\t\t: flatMap.call( info, this.getLoot, this )\n\t\t}\n\n\t\tif ( typeof info === 'string' ) info = this.state.getData(info);\n\t\tif (!info) return null;\n\n\t\tif ( info[TYP_PCT] && (100*Math.random() > info[TYP_PCT]) ) return null;\n\t\tif ( info instanceof GData || info instanceof TagSet ) return this.getGData( info, amt );\n\t\telse if ( info.id ) return this.instance(info);\n\n\t\telse if ( info.level || info.maxlevel ) return this.randLoot( info, amt );\n\n\t\treturn this.objLoot( info );\n\n\t}\n\n\t/**\n\t * Loot specified by subobject.\n\t * @param {object} info\n\t */\n\tobjLoot( info ){\n\n\t\tlet items = [];\n\t\tfor( let p in info ) {\n\t\t\t//console.log('GETTING SUB LOOT: ' + p);\n\t\t\tvar it = this.getLoot( p, info[p] );\n\t\t\tif ( !it ) continue;\n\t\t\telse if ( Array.isArray(it)) items = pushNonNull( items, it );\n\t\t\telse items.push(it );\n\t\t}\n\n\t\treturn items;\n\n\t}\n\n\t/**\n\t * Get some amount of non-instanced gameData.\n\t * @param {GData} it\n\t * @param {number} [amt=1]\n\t */\n\tgetGData( it, amt=1 ) {\n\n\t\tif ( !it ) return null;\n\n\t\tif ( it instanceof TagSet ) it = it.random();\n\t\tif ( this.state.hasUnique(it) ) return null;\n\n\t\tif ( it.instanced || it.isRecipe ) return this.instance( it );\n\n\t\tif ( typeof amt === 'number' || typeof amt === 'boolean') {\n\n\t\t\tif ( it.type === 'upgrade' || it.type === TASK || it.type === 'furniture' || it.type === EVENT) it.doUnlock( this.game );\n\t\t\telse {\n\t\t\t\tit.amount( amt );\n\t\t\t\tif ( amt > 0 ) return it.name;\n\t\t\t}\n\n\t\t} else console.warn('bad amount: '+ it + ' -> ' + amt );\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Return loot from an object of random parameters.\n\t * @param {object} info\n\t */\n\trandLoot( info ) {\n\n\t\tif ( (100+this.luck/2)*Math.random() < 50 ) return null;\n\n\t\tlet material = info.material;\n\t\tlet type = info.type;\n\n\t\tif ( material ) { material = this.state.getData(material); }\n\t\tif ( type ) { type = this.state.getData(type); }\n\n\t\tif ( !type && !material ) {\n\t\t\ttype = this.groups[WEARABLE].randBelow( info.maxlevel || info.level );\n\t\t}\n\n\t\tif ( material && !type ) {\n\t\t\ttype = this.getCompatible( this.groups[WEARABLE], material, info.maxlevel||info.level );\n\n\t\t} else if ( type && !material ) {\n\t\t\tmaterial = this.getCompatible( this.groups.materials, type, info.maxlevel||info.level );\n\t\t}\n\n\t\treturn this.fromProto( type, material );\n\n\t}\n\n\t/**\n\t * Return a random item of the given level.\n\t * @param {number} [level=0]\n\t * @param {?string} [type=null]\n\t * @param {?string|Material} [mat=null] - item material.\n\t */\n\trandAt( level=0, type=null, mat=null ){\n\n\t\ttype = type || WEARABLE;\n\n\t\tlet g = this.groups[type];\n\n\t\tif ( g ) {\n\n\t\t\tlet it = g.randBy('level', level );\n\t\t\tif (it ) return this.fromProto( it, mat || level );\n\n\t\t} else console.warn('No group: ' + type);\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * Get random item of given level or below.\n\t * @param {number} [maxlevel=1] - maximum level of item to return.\n\t * @param {?string} [type=null] - kind of item to generate.\n\t * @param {?string|Material} [mat=null] - item material.\n\t * @returns {Wearable|null}\n\t */\n\trandBelow( maxlevel=1, type=null, mat=null ){\n\n\t\ttype = type || WEARABLE;\n\t\tlet g = this.groups[type];\n\n\t\tmaxlevel = Math.floor( 1 + Math.random()*maxlevel );\n\n\t\tlet it = g.randBelow( maxlevel );\n\t\treturn it ? this.fromProto( it, mat || maxlevel ) : null;\n\n\t}\n\n\t/**\n\t * Get an item from a Group compatible with the given item.\n\t * Used to pick a Material for a Wearable, or a Wearable for a material.\n\t * @param {GenGroup} group - group to pick an item from.\n\t * @param {Item} item - chosen item must be compatible with item.\n\t * @returns {object|null}\n\t */\n\tgetCompatible( group, item, level=1 ) {\n\n\t\tlet only = item.only;\n\t\tlet exclude = item.exclude;\n\n\t\tlet mat = item.material ? item.material.id : null;\n\n\t\treturn group.randBelow( Math.max( item.level+1, level ),\n\t\t\tv=>{\n\n \t\t\t\tif ( only && !includesAny(only, v.type, v.kind, v.id ) ) return false;\n\t\t\t\tif ( exclude && includesAny(exclude, v.type, v.kind, v.id) ) return false;\n\n\t\t\t\tif ( v.only && !includesAny( v.only, item.type, item.kind, item.id, mat ) ) return false;\n\t\t\t\tif ( v.exclude && includesAny( v.exclude, item.type, item.kind, item.id, mat ) ) return false;\n\t\t\t\treturn true;\n\n\t\t\t}\n\t\t);\n\n\t}\n\n\t/**\n\t * @private\n\t * Generate a new item from a template item.\n\t * @param {Wearable} data\n\t * @param {string|Material|number} material - material or material level.\n\t */\n\tfromProto( data, material=null ) {\n\n\t\t//console.log('wearable from data');\n\t\tif ( data === null || data === undefined ) return null;\n\n\t\tlet mat = data.material || material;\n\t\tif ( typeof mat ==='number' ) mat = this.getCompatible( this.groups.materials, data, mat );\n\t\telse if ( typeof mat === 'string' ) mat = this.state.getData( mat );\n\n\t\treturn this.makeWearable( data, mat );\n\n\t}\n\n\tgenProperties( it, count ) {\n\n\t\tlet propGroup = this.groups.properties;\n\n\t\tif ( typeof count === 'object') count = Math.round(count.value);\n\t\tif ( count <= 0 ) return;\n\n\t\tconsole.log( it.name + ' props lvl: ' +  it.level + '  kind: ' + it.kind );\n\n\t\tfor( count; count > 0; count-- ) {\n\t\t\t//it.addProperty( this.getCompatible( propGroup, it, it.level ) );\n\t\t}\n\n\t}\n\n\t/**\n\t * @private\n\t * @param {ProtoItem} data\n\t * @param {*} material\n\t */\n\tmakeWearable( data, material ) {\n\n\t\tlet item = new Wearable( data );\n\n\t\tif ( material ) {\n\n\t\t\titem.applyMaterial( material );\n\n\t\t} else item.name = (data.name || data.id );\n\n\t\tif ( data.properties ){\n\t\t\tthis.genProperties( item, data.properties );\n\t\t}\n\n\t\titem.id = this.state.nextId(item.id);\n\t\t//this.state.addInstance( item );\n\n\t\treturn item;\n\t}\n\n\t/**\n\t * Create a group of Generable objects. All groups have a level filter by default\n\t * and additional filters can be created.\n\t * @param {string} name - group name.\n\t * @param {Item[]} items - items to add to group.\n\t * @param {?string[]} [filters=null] additional filters to use in group creation.\n\t * @returns {GenGroup}\n\t */\n\tinitGroup( name, items, filters=null ) {\n\n\t\tif ( !items ) {\n\t\t\tconsole.warn( 'group undefined: ' + name );\n\t\t\treturn;\n\t\t}\n\n\t\tlet g = this.groups[name] = new GenGroup(items);\n\t\tg.makeFilter('level');\n\n\t\tif ( filters ) {\n\t\t\tfor( let i = filters.length-1; i >= 0; i--) g.makeFilter( filters[i]);\n\t\t}\n\t\treturn g;\n\n\t}\n\n}","import dataLoader, { loadFiles, freezeData } from '../dataLoader';\n\n/**\n * Class for loading and storing json plugin in a well-defined format.\n */\nexport default class Module {\n\n\t/**\n\t * @property {.<string,object>} objects - raw untyped object templates.\n\t * used for reloading and comparing for data save.\n\t */\n\tget objects() { return this._objects; }\n\tset objects(v) { this._objects =v; }\n\n\t/**\n\t * Lists of items by type of data.\n\t * @property {Object.<string,object[]>}\n\t*/\n\tget lists(){return this._lists; }\n\tset lists(v){this._lists=v;}\n\n\t/**\n\t * @property {string} name\n\t */\n\tget name() {return this._name;}\n\tset name(v) { this._name=v;}\n\n\t/**\n\t * @property {string} sym\n\t */\n\tget sym(){return this._sym; }\n\tset sym(v) {this._sym =v;}\n\n\tget author() {return this._author;}\n\tset author(v) { this._author=v;}\n\n\tget email() {return this._email;}\n\tset email(v) { this._email=v;}\n\n\tget git() {return this._git;}\n\tset git(v) { this._git=v;}\n\n\t/**\n\t * @property {object.<string,GData>} items - index of instanced items.\n\t */\n\t/*get items() { return this._items; }\n\tset items(v){this._items=v;}*/\n\n\t/**\n\t *\n\t */\n\tconstructor() {\n\n\t\tthis.objects = {};\n\t\tthis.lists = {};\n\n\t}\n\n\t/**\n\t * Directly set module data in json-module format.\n\t * @param {object} data\n\t */\n\tsetData( data ) {\n\t\tthis.fileLoaded(data);\n\t}\n\n\t/**\n\t * Load module data file.\n\t * Resolves to the module on load.\n\t * @property {string|string[]} file\n\t * @property {string} dir - loading subdirectory.\n\t * @returns {Promise.<GModule>} - this module.\n\t */\n\tload( file, dir ) {\n\n\t\tif ( Array.isArray(file) ) {\n\n\t\t\treturn loadFiles( file, dir ).then( (v)=>this.typesLoaded(v) );\n\n\t\t} else {\n\t\t\tthis.name = file;\n\t\t\t// files returned as string->file data mapping. get the file data itself.\n\t\t\treturn loadFiles( [ file ], dir ).then( (v)=>this.fileLoaded( v[file] ) );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Separate module files loaded. Each file is a list of objects\n\t * of the same type.\n\t * @param {.<string,object[]>} files - filename to file data.\n\t * @returns {GModule} this module.\n\t */\n\ttypesLoaded(files) {\n\n\t\t// modules can only be merged after all lists have been made.\n\t\tlet modules = [];\n\t\tfor( let p in files ) {\n\n\t\t\tvar file = files[p];\n\t\t\tif ( !file ) {\n\t\t\t\tconsole.warn('no file: ' + p );\n\n\t\t\t} else if ( file.module ) {\n\n\t\t\t\tlet mod = new Module();\n\t\t\t\tmod.setData( file );\n\t\t\t\tmodules.push(mod);\n\n\t\t\t} else {\n\t\t\t\tthis.lists[p] = this.parseList( files[p] );\n\t\t\t}\n\n\t\t}\n\n\t\t// merge in submodules.\n\t\tfor( let i = modules.length-1; i>= 0; i-- ) {\n\t\t\tthis.merge( modules[i] );\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Single Module file loaded.\n\t * @param {object} mod\n\t * @returns {GModule} this module.\n\t */\n\tfileLoaded( mod ) {\n\n\t\t//console.log('File Loaded: ' + mod.module );\n\t\tthis.lists = mod.data;\n\n\t\tthis.name = mod.module || this.name;\n\t\tthis.sym = mod.sym;\n\n\t\tif ( mod.data ){\n\t\t\tthis.parseLists( mod.data );\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Parse named lists of objects.\n\t * @param {.<string,object[]} lists\n\t */\n\tparseLists( lists ){\n\n\t\tfor( let p in lists ) {\n\t\t\tthis.parseList( lists[p] );\n\t\t}\n\n\t}\n\n\t/**\n\t * Perform initial parsing of a list of untyped data objects.\n\t * @param {object[]} arr\n\t */\n\tparseList( arr ){\n\n\t\tlet sym = this.sym;\n\t\tlet modName = this.name;\n\n\t\tfor( let i = arr.length-1; i >= 0; i-- ) {\n\n\t\t\tvar it = arr[i];\n\t\t\tif ( !it.id ){\n\t\t\t\tconsole.warn('missing id: ' + it.name );\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif ( modName ) it.module = modName;\n\t\t\tif ( sym ) it.sym = it.sym || sym;\n\n\t\t\tthis.objects[ it.id ] = freezeData( it );\n\n\t\t}\n\n\t\treturn arr;\n\n\t}\n\n\t/**\n\t * Merge module into this module.\n\t * @param {GModule} mod - module to merge.\n\t * @param {*} insertLists\n\t */\n\tmerge( mod ) {\n\n\t\tlet items = mod.objects;\n\t\tlet dest = this.objects;\n\n\t\tfor( let p in items ) {\n\t\t\t/** @note merge overwrites */\n\t\t\tdest[p] = items[p];\n\t\t}\n\n\t\tfor( let p in mod.lists ) {\n\n\t\t\tlet list = mod.lists[p];\n\t\t\tdest = this.lists[p];\n\n\t\t\tif ( !Array.isArray(dest)) {\n\n\t\t\t\tthis.lists[p] = list.slice(0);\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tfor( let i = list.length-1; i >= 0; i-- ) {\n\t\t\t\tdest.push( list[i] );\n\t\t\t}\n\n\n\t\t}\n\n\n\t}\n\n\t/**\n\t * Use module templates to create instanced data and instanced data lists.\n\t * @param {object} saveData\n\t * @returns {object} - game data, items, standard loaded lists.\n\t */\n\tinstance( saveData={} ){\n\t\treturn dataLoader.instance( this.objects, this.lists, saveData );\n\t}\n\n}","import Mod from \"./mod\";\n\nconst PER_SYM = ':';\nconst PerRegEx = /^(\\d+\\.?\\d*)?\\:(\\d+)$/;\n\n/**\n *\n * @param {string} v\n * @returns {boolean}\n */\nexport const IsPerMod = (v)=>{\n\treturn PerRegEx.test(v);\n}\n\n/**\n * Apply modifier per quantity of source object.\n */\nexport default class PerMod extends Mod {\n\n\ttoJSON(){ return this.value + PER_SYM + this.per; }\n\n\t/**\n\t * @property {number} count - apply modulus mod once per modulus factor.\n\t */\n\tget count(){\n\t\treturn this.source ? Math.floor(this.source.value / this.per ) : 0;\n\t}\n\n\t/**\n\t * @property {number} per - value applied only once for every per unit\n\t * of count.\n\t */\n\tget per(){return this._per;}\n\tset per(v){this._per = v;}\n\n\ttoString(){ return this.value + PER_SYM + this.per }\n\n\tconstructor(vars, id, source ) {\n\n\t\tsuper( 0, id, source );\n\n\t\tif ( typeof vars === 'number') {\n\n\t\t\tthis.value = 1;\n\t\t\tthis.per = vars;\n\n\t\t} else if ( typeof vars === 'string') {\n\n\t\t\tlet parts = vars.split( PER_SYM );\n\n\t\t\tif ( parts.length === 2 ) {\n\n\t\t\t\tthis.value =  Number(parts[0]) || 1\n\t\t\t\tthis.per = Number(parts[1]) || 1;\n\n\t\t\t} else {\n\t\t\t\tconsole.warn('bad PerMod: ' + vars );\n\t\t\t\tthis.value = 0;\n\t\t\t\tthis.per = 1;\n\t\t\t}\n\n\t\t} else {\n\t\t\tconsole.log('bad PerMod: ' + vars );\n\t\t\tthis.value = Number(vars);\n\t\t}\n\n\t\t//console.log( this.id + ' PERVAL: ' + this.toString() );\n\t}\n\n\t/**\n\t *\n\t * @param {*} gs\n\t * @param {*} targ\n\t */\n\tgetApply(gs, targ) {\n\t\treturn this.source && (( this.source.value % this.per ) === 0) ? this.count*this.value : 0;\n\t}\n\n\n}","import Mod from \"./mod\";\n\nconst AT_SYM = '?';\nconst AtRegEx = /^([<>]=?)?(-?[0-9.]+)?\\?(-?[0-9.]+)$/;\n\nconst EQ = 1;\nconst GT = 2;\nconst LT = 4;\nconst GTE = GT + EQ;\nconst LTE = LT + EQ;\n\nconst ParseOp = ( s ) => {\n\n\tif ( s === '=' ) return EQ;\n\telse if ( s === '<') return LT;\n\telse if ( s === '<=') return LTE;\n\telse if ( s === '>') return GT;\n\n\treturn GTE;\n\n}\n\n/**\n *\n * @param {string} v\n * @returns {boolean}\n */\nexport const IsAtMod = (v)=>{ return AtRegEx.test(v); }\n\n/**\n * Apply modifier only once, or not at all.\n */\nexport default class AtMod extends Mod {\n\n\ttoJSON(){ return this.at + AT_SYM + this.value; }\n\n\t/**\n\t * @property {number} at = source value at which mod value will be applied.\n\t */\n\tget at(){ return this._at; }\n\tset at(v) { this._at = v}\n\n\t/**\n\t * @property {number} op - comparison operator to use when testing 'at' value.\n\t */\n\tget op(){return this._op;}\n\tset op(v){this._op = v}\n\n\t/**\n\t * @property {number} count - apply once max.\n\t */\n\tget count(){\n\n\t\tif (!this.source ) return 0;\n\n\t\tswitch ( this.op ) {\n\n\t\t\tcase GTE:\n\t\t\t\tif ( this.source.value >= this.at ) return 1;\n\t\t\t\tbreak;\n\t\t\tcase GT:\n\t\t\t\tif ( this.source.value > this.at ) return 1;\n\t\t\t\tbreak;\n\t\t\tcase LTE:\n\t\t\t\tif ( this.source.value <= this.at ) return 1;\n\t\t\t\tbreak;\n\t\t\tcase LT:\n\t\t\t\tif ( this.source.value < this.at ) return 1;\n\t\t\t\tbreak;\n\t\t\tcase EQ:\n\t\t\t\tif ( this.source.value == this.at ) return 1;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\ttoString(){ return this.value  + ' (once)'; }\n\n\tconstructor(vars, id, source ) {\n\n\t\tsuper( 0, id, source );\n\n\t\tif ( typeof vars === 'string') {\n\n\t\t\tlet res = AtRegEx.exec( vars );\n\t\t\tif ( res ) {\n\n\t\t\t\tthis.op = ParseOp( res[1] );\n\n\t\t\t\tthis.at = Number(res[2]) || 1;\n\t\t\t\tthis.value = Number(res[3]) || 0;\n\n\t\t\t}\n\n\n\t\t} else {\n\t\t\tthis.op = GTE;\n\t\t\tthis.value = Number(vars) || 0;\n\t\t\tconsole.log('bad AtMod: ' + vars );\n\t\t}\n\n\t\tif ( this.at === null || this.at === undefined ) this.at = 1;\n\n\t}\n\n\t/**\n\t *\n\t * @param {GameState} gs\n\t * @param {*} targ\n\t */\n\tgetApply(gs, targ) {\n\t\t//if ( this.source && this.source.id === 'breath') console.log('breathe count: ' + this.count + '  value: ' + this.value );\n\t\treturn this.count ? this.value : 0;\n\t}\n\n\n}","import Mod, { ModTest } from '../values/mods/mod';\nimport PerMod, { IsPerMod } from '../values/mods/permod';\nimport { splitKeys, logObj, splitKeyPath } from '../util/util';\nimport RValue, { SubPath } from '../values/rvals/rvalue';\nimport Stat from '../values/rvals/stat';\n\nimport { MakeDmgFunc } from '../values/combatVars';\n\nimport Range, {RangeTest} from '../values/range';\nimport Percent, {PercentTest} from '../values/percent';\nimport AtMod, { IsAtMod } from '../values/mods/atmod';\n\n/**\n * @const {RegEx} IdTest - Test for a simple id name.\n */\nconst IdTest = /^[A-Za-z_]+\\w*$/;\n\n/**\n * Parse object into modifiers.\n * @param {} mods\n * @returns {Object} parsed modifiers.\n */\nexport const ParseMods = ( mods, id, source ) => {\n\n\tif ( !mods ) return null;\n\tif (!id && source && (typeof source ==='object')) {\n\t\tid = source.id;\n\t\tif ( !id ) {\n\t\t\tid = '';\n\t\t\tlogObj( mods, 'No Mod Id: ' + source + ': ' + id );\n\t\t}\n\t}\n\n\tmods = SubMods( mods, id, source );\n\tif ( !mods ) console.warn('mods is null: ' + id );\n\n\t// @todo: no more key splitting. item tables?\n\tsplitKeys(mods);\n\n\treturn mods;\n\n}\n\n/**\n * Parse a string source into a Mod class.\n * @param {string} str - mod str.\n * @param {string} id - mod id.\n * @param {object} src - mod source.\n * @returns {Mod|string}\n */\nexport const StrMod = ( str, id, src ) => {\n\n\tif ( ModTest.test(str) || !isNaN(str) ) return new Mod(str,id,src);\n\tif ( IsPerMod(str ) ) return new PerMod( str, id, src );\n\telse if ( IsAtMod(str) ) return new AtMod(str, id, src );\n\treturn str;\n\n}\n\n/**\n *\n */\nconst SubMods = ( mods, id, source )=>{\n\n\tif ( mods === null || mods === undefined ) return null;\n\n\tif ( typeof mods === 'string' ) {\n\n\t\treturn StrMod( mods, id, source );\n\n\t} else if ( typeof mods === 'number') {\n\n\t\treturn new Mod( mods, id, source );\n\n\t} else if ( typeof mods !== 'object' ) {\n\t\t// @note includes boolean (unlock) mods.\n\t\t//console.log( id + ' unknown mod type: ' + (typeof mods) + ' source: ' + source )\n\t\treturn mods;\n\t}\n\n\t// @note str is @compat\n\tif ( mods.id || mods.base || mods.str ) return new Mod( mods, id, source );\n\n\tfor( let s in mods ) {\n\n\t\tlet val = mods[s];\n\t\tif ( val === 0 ) {\n\t\t\tdelete mods[s];\n\t\t\tcontinue;\n\t\t}\n\t\t// @note this includes 0 as well.\n\t\tif ( !val) continue;\n\n\n\t\tif ( val instanceof Mod ) {\n\n\t\t\tif ( id ) val.id = SubPath(id, s);\n\t\t\t//console.log('NEW MOD ID: ' +SubPath(id, s) );\n\t\t\tval.source = source;\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tmods[s] = SubMods( val, SubPath(id, s), source );\n\n\t}\n\treturn mods;\n\n}\n\n/**\n * Prepared data is instance-level data, but classes have not been instantiated.\n * @param {*} sub\n * @param {*} id\n */\nexport const PrepData = ( sub, id='' ) => {\n\n\tif (Array.isArray(sub) ) {\n\n\t\tfor( let i = sub.length-1; i >= 0; i-- ) sub[i] = PrepData( sub[i], id );\n\n\t} else if ( typeof sub === 'object' ) {\n\n\t\tfor( let p in sub ) {\n\n\t\t\tif ( p === 'mod' || p === 'runmod' || p === 'alter' ) {\n\n\t\t\t\tsub[p] = ParseMods( sub[p],  SubPath(id, p) );\n\t\t\t\tcontinue;\n\t\t\t} else if ( p ==='effect' || p === 'result' ) {\n\n\t\t\t\tsub[p] = ParseEffects( sub[p], MakeEffectFunc );\n\n\t\t\t} else if ( p === 'cost' || p === 'buy' ) {\n\n\t\t\t\t\tsub[p] = ParseEffects( sub[p], MakeCostFunc );\n\n\t\t\t} else if ( p === 'require' || p === 'need' ) {\n\n\t\t\t\tsub[p] = ParseRequire( sub[p] );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( p.includes('.')) splitKeyPath( sub, p );\n\n\t\t\tvar obj = sub[p];\n\t\t\tvar typ = typeof obj;\n\t\t\tif ( typ === 'string' ){\n\n\t\t\t\tif ( PercentTest.test(obj) ) {\n\n\t\t\t\t\tsub[p] = new Percent(obj);\n\n\t\t\t\t} else if ( RangeTest.test(obj) ) sub[p] = new Range(obj);\n\t\t\t\telse if ( IsPerMod(obj) ) sub[p] = new PerMod( obj, SubPath(id,p) );\n\t\t\t\telse if ( !isNaN(obj) ) {\n\t\t\t\t\tif ( obj !== '') console.warn('string used as Number: ' + p + ' -> ' + obj );\n\t\t\t\t\tsub[p] = Number(obj);\n\t\t\t\t}\n\t\t\t\telse if ( p === 'damage' || p === 'dmg') sub[p] = MakeDmgFunc(obj);\n\n\t\t\t} else if ( typ === 'object' ) PrepData(obj, id);\n\t\t\telse if (typ === 'number') {\n\n\t\t\t\t//sub[p] = new RValue(obj);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// split AFTER parse so items can be made into full classes first.\n\t\t/*for( let p in sub ) {\n\t\t\tif ( p.includes('.')) splitKeyPath( sub, p );\n\t\t}*/\n\n\t} else if ( typeof sub === 'string') {\n\t\treturn ParseRVal(sub);\n\t}\n\n\treturn sub;\n\n}\n\n/**\n * Attempt to convert a string to RValue.\n * @param {string} str\n * @returns {RValue|number|str}\n */\nexport const ParseRVal = ( str ) => {\n\n\tif ( RangeTest.test(str) ) return new Range(str);\n\telse if ( PercentTest.test(str) ) return new Percent(str);\n\telse if ( IsPerMod(str ) ) return new PerMod( str );\n\telse if ( IsAtMod(str) ) return new AtMod(str);\n\treturn str;\n\n}\n/**\n *\n * @param {object|string|Array|Number} effects\n * @param {Function} funcMaker - Function that returns a new function to use in any function RValues.\n * (cost func, effect func, attack func, etc.)\n */\nexport const ParseEffects = ( effects, funcMaker ) => {\n\n\tif ( Array.isArray(effects) ) {\n\n\t\tfor( let i = effects.length-1; i>= 0; i-- ){\n\t\t\teffects[i] = ParseEffects( effects[i], funcMaker );\n\t\t}\n\n\t} else if ( typeof effects === 'string') {\n\n\t\tif ( RangeTest.test(effects) ) return new Range(effects);\n\t\telse if ( PercentTest.test(effects) ) return new Percent(effects);\n\t\telse if ( IsPerMod(effects ) ) return new PerMod( effects );\n\t\telse if ( IsAtMod(effects) ) return new AtMod( effects );\n\t\telse if ( effects.includes( '.' ) ) return funcMaker(effects);\n\n\t\treturn effects;\n\n\t} else if ( typeof effects === 'object' ) {\n\n\t\tfor( let p in effects ) {\n\t\t\teffects[p] = ParseEffects( effects[p], funcMaker );\n\t\t}\n\n\t} else if ( typeof effects === 'number' ) return new Stat( effects );\n\n\treturn effects;\n\n}\n\n/**\n * Parse a requirement-type object.\n * currently: 'require' or 'need'\n */\nexport const ParseRequire = ( sub ) => {\n\n\t// REQUIRE\n\tif ( sub === null || sub === undefined || sub === false || sub === '') return undefined;\n\tif ( Array.isArray(sub) ) {\n\n\t\tfor( let i = sub.length-1; i>= 0; i-- )sub[i] = ParseRequire( sub[i] );\n\n\t} else if ( typeof sub === 'string' && !IdTest.test(sub )) return MakeTestFunc( sub );\n\n\treturn sub;\n\n}\n\n/**\n * Create a boolean testing function from a data string.\n * @param {string} text - function text.\n */\nexport function MakeTestFunc( text ) {\n\n\t/**\n\t * g - game data\n\t * i - item being tested for unlock.\n\t * s - game state\n\t */\n\treturn new Function( \"g\", 'i', 's', 'return ' + text );\n}\n\n/**\n * Cost function. params: GameState, Actor.\n * @param {*} text\n */\nexport function MakeCostFunc(text) {\n\treturn new Function( 'g,a', 'return ' + text );\n}\n\n/**\n * Create a function which performs an arbitrary effect.\n * player and target params are given for simplicity.\n * target is the current target (of a dot), if any.\n * @param {string} text\n */\nexport function MakeEffectFunc( text ) {\n\treturn new Function( 'g,t,a', 'return ' + text );\n}","/**\n * Character stub for Hall of Wizards.\n */\nexport default class CharInfo {\n\n\ttoJSON(){\n\n\t\tif ( this.empty ) return undefined;\n\n\t\treturn {\n\t\t\tname:this.name,\n\t\t\tpid:this.pid,\n\t\t\tlevel:this.level,\n\t\t\tgclass:this.gclass,\n\t\t\ttitle:this.title||undefined,\n\t\t\ttitles:this.titles||undefined,\n\t\t\tgender:this.gender||undefined,\n\t\t\tschool:this.school||undefined,\n\t\t\tfame:this.fame||undefined,\n\t\t\tpoints:this.points||undefined\n\t\t}\n\n\t}\n\n\tget name() { return this._name; }\n\tset name(v) { this._name =v;}\n\n\t/**\n\t * @deprecated @compat\n\t */\n\tget hid(){return this._pid}\n\tset hid(v){this.pid = v}\n\n\tget pid(){ return this._pid;}\n\tset pid(v){this._pid=v;}\n\n\tget level(){return this._level;}\n\tset level(v) {this._level=v;}\n\n\tget title(){return this._title;}\n\tset title(v){ this._title =v;}\n\n\tget fame() { return this._fame; }\n\tset fame(v){this._fame=v;}\n\n\t/**\n\t * @property {number} - number of titles earned.\n\t */\n\tget titles(){return this._titles; }\n\tset titles(v){this._titles =v;}\n\n\tget gender(){return this._gender;}\n\tset gender(v){ this._gender =v;}\n\n\tget school() { return this._school; }\n\tset school(v) { this._school = v; }\n\n\tget points() { return this._points; }\n\tset points(v) { this._points=v;}\n\n\tconstructor( vars=null ){\n\n\t\tif ( vars ) {\n\n\t\t\tObject.assign( this,vars );\n\t\t\tif ( vars.empty || !vars.name )this.empty = true;\n\t\t\telse this.empty = false;\n\n\t\t} else {\n\n\t\t\tthis.empty = true;\n\t\t}\n\n\t\tif ( !this.points ) this.points = 0;\n\t\tif ( !this.fame ) this.fame = 0;\n\t\tif ( !this.titles ) this.titles = 0;\n\t\tif (!this.level ) {this.level = 0; }\n\n\n\t}\n\n\t/**\n\t * Update player information.\n\t * @param {Player} p\n\t */\n\tupdate( p ) {\n\n\t\tif ( !p ) {\n\t\t\tthis.empty = true;\n\t\t\tretur\n\t\t}\n\n\t\tthis.name = p.name;\n\t\tthis.level = p.level ? p.level.valueOf() : 0;\n\n\t\t//this.pid = p.hid;\n\n\t\tthis.title = p.title;\n\t\tthis.titles = p.titles ? p.titles.length : 0;\n\t\tthis.fame = p.fame ? p.fame.valueOf() : 0;\n\t\tthis.points = p.points ? p.points.valueOf() : 0;\n\t\tthis.gclass = p.gclass;\n\t\tthis.empty = false;\n\n\t}\n\n\t/**\n\t * @returns {number} - calculate point contribution from char stats.\n\t */\n\tgetPoints(){\n\t\tif ( this.empty ) return 0;\n\n\t\tif ( isNaN( this.points ) ) console.warn( this.name + 'points: NaN: ' + this.points );\n\t\tif ( isNaN( this.fame ) ) console.warn( this.name + 'fame: NaN: ' + this.fame );\n\t\tif ( isNaN( this.titles ) ) console.warn( this.name + 'titles: NaN: ' + this.titles );\n\t\tif ( isNaN( this.level ) ) {\n\t\t\tconsole.warn( this.name + 'level: NaN: ' + this.level );\n\t\t\tthis.level = 0;\n\t\t}\n\n\t\treturn this.points + this.fame + ( this.titles + this.level ) /10;\n\t}\n\n}","import CharInfo from \"./charinfo\";\nimport { TimeId } from \"../values/consts\";\n\n/**\n * Wizards hall.\n */\nexport default class Hall {\n\n\ttoJSON(){\n\n\t\t//for( let p in this.items ) console.log('SAVING HALL ITEM: '+ p);\n\n\t\treturn {\n\n\t\t\tid:this.id,\n\t\t\tname:this.name,\n\t\t\tchars:this.chars,\n\t\t\tcurId:this.curId,\n\t\t\titems:this.items\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @property {string} id\n\t */\n\tget id(){return this._id;}\n\tset id(v){this._id = v;}\n\n\t/**\n\t * @property {string} name - name of hall.\n\t */\n\tget name() { return this._name; }\n\tset name(v) { this._name = v; }\n\n\t/**\n\t * @property {number} active - zero-indexed slot of active char.\n\t */\n\tget curSlot() { return this._curSlot; }\n\tset curSlot(v) {\n\t\tthis._curSlot = v;\n\t}\n\n\t/**\n\t * @public @property {string} activeId - pid of active character.\n\t */\n\tget curId(){\n\t\treturn this._curId;\n\t}\n\t/**\n\t * @private @property {string} activeId\n\t */\n\tset curId(v){\n\t\tthis._curId=v;\n\t}\n\n\t/**\n\t * @property {CharInfo[]} chars\n\t */\n\tget chars() { return this._chars; }\n\tset chars(v) {\n\n\t\tfor( let i = v.length-1; i >= 0; i-- ) {\n\t\t\tv[i] = new CharInfo(v[i]);\n\t\t}\n\n\t\tthis._chars = v;\n\t}\n\n\t/**\n\t * @property {StatData} prestige\n\t */\n\tget prestige() { return this._prestige; }\n\tset prestige(v) { this._prestige = v;\n\n\t}\n\n\t/**\n\t * @property {StatData} points - player point total.\n\t */\n\tget points(){return this._points;}\n\tset points(v){this._points=v;}\n\n\t/**\n\t * GData specific to hall.\n\t * @property {Object.<string,GData>} items\n\t */\n\tget items() {return this._items;}\n\tset items(v){\n\n\t\t/*for( let p in v ){ console.log( 'hall: ' + p); }*/\n\t\tthis._items=v;\n\t}\n\n\t/**\n\t * @property {Stat} max - maximum char slots.\n\t * slots are zero-based indices.\n\t */\n\tget max() {return this._max; }\n\tset max(v) { this._max = v; }\n\n\t/**\n\t *\n\t * @param {object} vars - merged hall saved and module data,\n\t * all hall items, and standard hall lists.\n\t */\n\tconstructor(vars=null ){\n\n\t\tif ( vars ) Object.assign(this, vars);\n\n\t\tif (!this.id ) {\n\t\t\tthis.id = TimeId('h');\n\t\t\tconsole.log('NEW HALL ID: ' + this.id );\n\t\t} else console.log('HALL ID: ' + this.id );\n\n\t\tif ( !this.chars ) this.chars = [];\n\n\t\tthis.findCur(vars);\n\n\t\tif ( !this.name ) this.name = \"Wizard's Hall\";\n\n\t\t/*if ( this.items ) {\n\t\t\tconsole.log( 'EVT HALL: ' + this.items.evt_hall.value );\n\t\t} else console.warn('HALL NOT YET OWNED');*/\n\t\tthis.max = this.items.hallSize;\n\n\t\tthis.points = this.items.hallPoints;\n\n\t\t//There seems to be no logical difference between hallPoints and prestige\n\t\t//But hallPoints achieves that by applying a temporary \"+1 prestige\" mod that\n\t\t// applies too late for the initially loaded character to apply to skills\n\t\tconst prestige = this.items.prestige && this.items.prestige.value.value || 0;\n\t\tconst hallPoints = this.items.hallPoints && this.items.hallPoints.value.value || 0;\n\n\t\tthis.prestige = this.items.prestige;\n\t\tthis.items.prestige.value.set(hallPoints+prestige > 0 ? hallPoints+prestige : 0);\n\t\tthis.items.hallPoints.value.set(0);\n\n\n\t\tthis.initChars();\n\n\t}\n\n\t/**\n\t * Set curId/active index based on save.\n\t * @param {object} vars\n\t */\n\tfindCur(vars){\n\n\t\tif ( vars.active ) {\n\n\t\t\tconsole.log('LEGACY HALL SLOT: ' + vars.active );\n\n\t\t\tthis.legacy = true;\n\t\t\tthis.setActive( vars.active );\n\n\t\t} else {\n\n\t\t\tlet pid = this.curId = vars.curId;\n\t\t\tthis.curSlot = this.chars.findIndex(c=>c.pid===pid);\n\n\t\t\tconsole.log('CUR HALL CHAR: ' + pid + '  AT SLOT: '+this.curSlot )\n\n\t\t}\n\n\t\tif ( !this.curId ||  this.curSlot < 0 ) {\n\t\t\tthis.curId = null;\n\t\t\tthis.curSlot = 0;\n\t\t}\n\n\t}\n\n\t/**\n\t * @returns {boolean} true if hall is owned.\n\t */\n\towned() { return this.items.evt_hall > 0; }\n\n\t/**\n\t *\n\t * @param {string} slot\n\t * @returns {boolean} false on invalid slot.\n\t */\n\tdismiss( slot ) {\n\n\t\tif ( slot < 0 || slot >= this.chars.length ) return false;\n\n\t\tthis.chars[slot].empty = true;\n\t\tthis.chars[slot].name = null;\n\t\tthis.chars[slot].pid = null;\n\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * Creates char objects and calculates points.\n\t */\n\tinitChars(){\n\n\t\tlet max = this.max.value;\n\t\tfor( let i = 0; i < max; i++ ) {\n\n\t\t\tvar c = this.chars[i];\n\t\t\tif ( c === undefined ) {\n\t\t\t\tthis.chars.push( new CharInfo() );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Checks that current char array is bounded to max, and returns chars.\n\t * Also creates new CharInfo for uninstantiated seats.\n\t * @returns {CharInfo[]} available chars.\n\t */\n\tgetChars(){\n\n\t\tlet max = this.max.value;\n\t\tfor( let i = 0; i < max; i++ ) {\n\n\t\t\tif ( this.chars[i] === undefined ) {\n\t\t\t\tthis.chars.push( new CharInfo() );\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.chars.length > max ) this.chars = this.chars.slice( 0, Math.floor(max) );\n\n\t\treturn this.chars;\n\n\t}\n\n\t/**\n\t * Sets the active slot index so the specified slot will be used\n\t * on next store/load.\n\t * Does not perform any actual loading or data changes.\n\t * @param {number} slot\n\t * @returns {boolean} false on invalid slot.\n\t */\n\tsetActive( slot ) {\n\n\t\tif ( slot < 0 || slot >= this.chars.length ) {\n\t\t\tconsole.warn('invalid char slot: '+ slot);\n\t\t\treturn false;\n\t\t}\n\t\tthis.curSlot = slot;\n\n\t\tlet char = this.getSlot(slot);\n\t\tthis.curId = char.pid;\n\n\t\treturn true;\n\n\t}\n\n\t/**\n\t * Player data loaded. Copy information into the active slot.\n\t * @param {Player} p\n\t */\n\tupdateChar( p, pid=null ) {\n\n\t\tlet char = this.getSlot(this.curSlot);\n\n\t\tif ( !char ) char = this.chars[ this.curSlot  ] = new CharInfo();\n\t\tchar.update( p );\n\t\tif ( pid ) {\n\t\t\tthis.curId = char.pid = pid;\n\t\t}\n\n\t}\n\n\tsetLevel( player, lvl ){\n\n\t\tlet char = this.getSlot( this.curSlot );\n\t\tif ( char) char.level = lvl;\n\n\t}\n\n\tsetName(name, slot=-1 ){\n\n\t\tlet char = this.getSlot(slot);\n\t\tif ( char) char.name = name;\n\n\t}\n\n\t/**\n\t * @param {number} pid - character pid to search for.\n\t * @returns {number} slot of character with given pid, or -1.\n\t */\n\tpidSlot( pid ){ return this.chars.findIndex( v=>v.pid==pid); }\n\n\tsetTitle( title, slot=-1 ){\n\t\tlet char = this.getSlot(slot);\n\t\tif ( char) char.title = title;\n\t}\n\n\t/**\n\t * Gets id of character at slot.\n\t * @param {number} slot\n\t * @returns {string}\n\t */\n\tcharId( slot=-1) {\n\t\tif ( slot > this.chars.length ) return null;\n\t\treturn this.chars[slot].pid;\n\t}\n\n\t/**\n\t * CharacterInfo by slot.\n\t * @param {*} slot\n\t * @returns {CharInfo}\n\t */\n\tgetSlot(slot=-1) {\n\t\treturn this.chars[ slot < 0 ? this.curSlot : slot ];\n\t}\n\n\t/**\n\t * Remove character by slot.\n\t * @param {number} slot\n\t */\n\trmChar( slot ) {\n\t\tthis.chars[ slot ] = undefined;\n\t}\n\n}","const SAVE_DIR = '';\nconst CHARS_DIR = 'chars/';\n\nexport const Local = {\n\n\t/**\n\t * Clear all stored data.\n\t */\n\tclearAll(){ window.localStorage.clear(); },\n\n\tdeleteChar( charid ) {\n\n\t\twindow.localStorage.setItem( this.charLoc(charid), null );\n\n\t},\n\n\tsaveChar( data, charid ) {\n\t\tconsole.log('LOCAL SAVE AT: ' + this.charLoc(charid ));\n\t\twindow.localStorage.setItem( this.charLoc( charid ), data );\n\t},\n\n\tloadChar( charid ){\n\t\tlet str = window.localStorage.getItem( this.charLoc( charid ) );\n\n\t\tconsole.log('LOCAL LOAD CHAR: ' + this.charLoc(charid) );\n\t\tif ( str ) {\n\t\t\tconsole.log('loading LOCAL: ' + charid );\n\t\t\treturn JSON.parse(str);\n\t\t}\n\t\tconsole.log('CHAR NOT FOUND');\n\t\treturn null;\n\t},\n\n\t/**\n\t *\n\t * @param {string} data\n\t */\n\tsaveHall( data, hid ){\n\t\twindow.localStorage.setItem( this.hallLoc( hid ), data );\n\t},\n\n\tloadHall( hid ){\n\t\tlet str = window.localStorage.getItem( this.hallLoc( hid ) );\n\t\tconsole.log('LOCAL LOAD HALL: ' + this.hallLoc(hid) );\n\t\tif ( str) return JSON.parse(str);\n\t\tconsole.log('LOCAL HALL NOT FOUND');\n\t\treturn null;\n\t},\n\n\n\tcharLoc( charid ) { return SAVE_DIR + CHARS_DIR + charid },\n\n\thallLoc( hid ){ return (SAVE_DIR + hid); }\n\n}","import { Local } from \"./persistLocal\";\n\n/**\n * @const {number} LOCAL_FAIL - error indicating local io failure.\n */\nexport const LOCAL_FAIL = 1;\n/**\n * @const {number} REMOTE_FAIL - error indicating remote io failure.\n */\nexport const REMOTE_FAIL = 2;\n\nconst HALL_FILE = 'hall';\nconst SETTINGS_DIR = 'settings/';\n\n/**\n * Handles persisting data to various sources: local, remote, file.\n */\nexport const Persist = {\n\n\t/**\n\t * @property {boolean} remoteFirst - attempt to load from remote sources\n\t * before local.\n\t */\n\tremoteFirst:false,\n\n\tloggedIn(){return Remote && Remote.loggedIn;},\n\n\tlogout(){\n\t\tif(Remote && Remote.loggedIn ) Remote.logout();\n\t},\n\n\t/**\n\t * Clear all data.\n\t */\n\tasync clearAll(){\n\n\t\tLocal.clearAll();\n\t\tif ( Remote) return Remote.clearAll();\n\n\t},\n\n\tasync deleteChar( charid ) {\n\n\t\tvar file = this.charFile(charid);\n\n\t\tLocal.deleteChar(file);\n\t\tif ( Remote) return Remote.deleteChar(file);\n\n\t\twindow.localStorage.setItem( this.settingsLoc(charid), null);\n\n\t},\n\n\t/**\n\t * @param {string} data\n\t * @param {string} charid\n\t *\n\t * @returns {Promise.<object>}\n\t */\n\tasync saveChar( data, charid ) {\n\n\t\tvar file = this.charFile(charid);\n\n\t\tLocal.saveChar( data, file );\n\t\tconsole.log('SAVING CHAR');\n\n\t\tif ( Remote) return Remote.saveChar( data, file );\n\n\t},\n\n\n\t/**\n\t * @param {string} data\n\t * @param {?string} [hid=HALL_FILE]\n\t */\n\tasync saveHall( data, hid=HALL_FILE ){\n\n\t\thid = HALL_FILE;\n\t\tLocal.saveHall( data, hid );\n\t\tif ( Remote) return Remote.saveHall( data, hid );\n\n\t},\n\n\t/**\n\t *\n\t * @param {string} charid\n\t * @returns {Promise<object>}\n\t */\n\tasync loadChar( charid ){\n\n\t\tvar file = this.charFile(charid);\n\n\t\tif ( this.remoteFirst && Remote ) {\n\n\t\t\tconsole.log('TRY REMOTE LOAD: ' + file);\n\t\t\tlet res = await Remote.loadChar( file );\n\t\t\tif (res ) return res;\n\t\t\tconsole.log('REMOTE LOAD FAILED');\n\t\t\treturn Local.loadChar( file );\n\n\t\t} else {\n\n\t\t\tconsole.log('TRY LOCAL LOAD: ' + file );\n\t\t\tlet res = Local.loadChar( file );\n\n\t\t\tif ( res || !Remote || !Remote.loggedIn ) return res;\n\t\t\tconsole.log('Returning Remote');\n\t\t\treturn Remote.loadChar( file );\n\n\t\t}\n\n\n\t},\n\n\t/**\n\t * @returns {Promise.<object>}\n\t */\n\tasync loadHall( hid=HALL_FILE, type=null ){\n\n\t\thid = HALL_FILE;\n\t\tif ( Remote && (type==='remote' ||this.remoteFirst) ) {\n\n\t\t\tconsole.log('REMOTE FIRST');\n\t\t\tlet res = await Remote.loadHall( hid );\n\t\t\tif ( res ) return res;\n\t\t\treturn Local.loadHall( hid );\n\n\t\t} else {\n\n\t\t\tlet res = Local.loadHall( hid );\n\t\t\tif ( !res ) console.log('LOCAL HALL NOT FOUND');\n\t\t\tif ( res || !Remote ) return res;\n\n\t\t\treturn Remote.loadHall( hid );\n\t\t}\n\n\t},\n\n\tcharFile: ( charid ) => {return charid},\n\n\tsaveSettings( data, charid ) {\n\t\twindow.localStorage.setItem( this.settingsLoc(charid), data );\n\t},\n\n\tloadSettings(charid){\n\t\treturn window.localStorage.getItem( this.settingsLoc(charid) );\n\t},\n\n\t/**\n\t * Path of settings file for character.\n\t * @param {string} charid\n\t * @returns {string} path to settings file.\n\t */\n\tsettingsLoc(charid){ return SETTINGS_DIR + '/'+charid +'/' },\n\n};\n\nvar Remote = null;\nif ( __CLOUD ) {\n\n\timport( /* webpackChunkName: \"remote\" */ './persistRemote' ).then( mod=>{\n\t\tRemote = mod.Remote;\n\t});\n\n}\n","import Hall from \"./hall\";\nimport Settings from './settings';\nimport Events, { LEVEL_UP, CHAR_NAME, CHAR_TITLE, CHAR_CLASS } from \"../events\";\n\nimport Module from \"./module\";\nimport { Persist } from \"./persist/persist\";\n\nconst HALL_FILE = 'hall';\n\n/**\n * Control access to all local storage and profile information.\n */\nexport default {\n\n\t/**\n\t * @const {number}\n\t */\n\tVERSION:__VERSION,\n\n\t/**\n\t * @const {boolean}\n\t */\n\tCLOUD:__CLOUD,\n\n\t/**\n\t * @property {Hall} hall\n\t */\n\thall:null,\n\n\t/**\n\t * Reactive information about active profile.\n\t * @property {Object} active - reactive profile information for Vue.\n\t */\n\tactive:{\n\t\tloggedIn:false\n\t},\n\n\tget loggedIn(){return this.active.loggedIn},\n\tset loggedIn(v){this.active.loggedIn=v},\n\n\tlogout(){\n\t\tPersist.logout();\n\t},\n\n\t/**\n\t * @property {boolean} remoteFirst - prefer remote save over local.\n\t */\n\tset remoteFirst(v){ Persist.remoteFirst =v;},\n\n\t/**\n\t * Load Hall information.\n\t */\n\tasync loadHall( type=null ){\n\n\t\tvar save = await Persist.loadHall( HALL_FILE, type );\n\t\tvar data = await this.loadHallData( save );\n\n\t\tthis.hall = new Hall(data);\n\t\tif ( this.hall.legacy ) await this.resaveLegacy();\n\n\t},\n\n\t/**\n\t * Load legacy char locations and resave with new\n\t * naming scheme.\n\t * @compatibility\n\t */\n\tasync resaveLegacy(){\n\n\t\tconsole.log('RESAVING LEGACY FILES');\n\n\t\tlet max = this.hall.max.value;\n\t\tfor( let i = 0; i < max; i++ ) {\n\n\t\t\tvar c = this.hall.getSlot(i);\n\t\t\tif ( c.empty ) continue;\n\n\t\t\tconsole.log('load (to save) legacy: ' + i );\n\t\t\tlet data = await Persist.loadChar( i );\n\t\t\t// parse to avoid double string encoding.\n\t\t\tif ( data ) {\n\t\t\t\tconsole.log('save: ' + i + ' to: ' + c.pid );\n\t\t\t\tawait Persist.saveChar( JSON.stringify(data), c.pid );\n\n\t\t\t} else console.log('NO LEGACY FOUND: ' + i );\n\n\n\t\t}\n\t\tthis.hall.legacy = false;\n\n\t},\n\n\t/**\n\t * Load data files for hall.\n\t * @param {object} save - save data of hall.\n\t * @returns {Promise.<HallData>}\n\t */\n\tloadHallData( save ) {\n\n\t\tlet module = new Module();\n\t\treturn module.load( HALL_FILE ).then( ()=>module.instance( save ));\n\n\t},\n\n\t/**\n\t * active player info changed.\n\t * update and save hall data.\n\t * @returns {Promise.<>}\n\t */\n\tonCharLevel( player, lvl ) {\n\n\t\tthis.hall.setLevel( player, lvl );\n\t\treturn this.saveHall();\n\n\t},\n\n\t/**\n\t * active player info changed.\n\t * update and save hall data.\n\t * @returns {Promise}\n\t */\n\tupdateChar( player ) {\n\n\t\tthis.hall.updateChar( player );\n\t\treturn this.saveHall();\n\n\t},\n\n\t/**\n\t * Set name of Wizards hall.\n\t * @param {*} s\n\t * @returns {Promise}\n\t */\n\tsetHallName(s){\n\n\t\tthis.hall.name = s;\n\t\treturn this.saveHall();\n\n\t},\n\n\t/**\n\t * set active player index.\n\t * @param {number} slot - slot to load.\n\t * @param {GameState} state - current state, for saving current.\n\t * sort of stupid to have this here?\n\t */\n\tsetActive( slot, state ) {\n\n\t\tthis.hall.updateChar( state.player );\n\n\t\tif ( this.saveActive( state ) ) {\n\n\t\t\tthis.hall.setActive( slot );\n\t\t\tthis.saveHall();\n\n\t\t} else console.error( 'CUR CHAR NOT SAVED');\n\n\t},\n\n\t/**\n\t * @returns {.<string,GData>} special hall data items.\n\t */\n\tgetHallItems(){ return this.hall.items; },\n\n\t/**\n\t * Game of current player/game loaded.\n\t * @param {Game} game\n\t */\n\tgameLoaded(game) {\n\n\t\tlet gs = game.state;\n\t\tlet p = gs.player;\n\n\t\tlet id = gs.pid || p.hid;\n\t\tconsole.log('player id: ' + id );\n\n\t\tlet slot = this.hall.pidSlot( id );\n\n\t\tif ( slot >= 0 ) {\n\t\t\tthis.hall.setActive( slot );\n\t\t}\n\t\tthis.hall.updateChar( p, id );\n\n\t\tthis.saveHall();\n\t\t//this.hall.calcPoints( game );\n\n\t\tEvents.add( LEVEL_UP, this.onCharLevel, this );\n\t\tEvents.add( CHAR_NAME, this.updateChar, this );\n\t\tEvents.add( CHAR_TITLE, this.updateChar, this );\n\t\tEvents.add( CHAR_CLASS, this.updateChar, this );\n\n\n\t},\n\n\t/**\n\t * Dismiss character by character slot.\n\t * @param {number} slot\n\t */\n\tdismiss( slot ) {\n\n\t\tif ( this.hall.dismiss(slot) ) {\n\n\t\t\tPersist.deleteChar( this.hall.charId(slot) );\n\t\t\tthis.saveHall();\n\n\t\t}\n\n\t},\n\n\t/**\n\t * @returns {string} - returns the JSON string for the current\n\t * player slot, or null.\n\t */\n\tasync loadActive(){\n\n\t\ttry {\n\n\t\t\tif ( this.hall.curId ) console.log('loading hall char: ' + this.hall.curId);\n\t\t\telse if ( this.hall.curSlot ) console.log('loading slot: '+ this.hall.curSlot );\n\n\t\t\treturn Persist.loadChar( this.hall.curId || this.hall.curSlot );\n\n\t\t} catch (e ) {\n\n\t\t\tconsole.error( e.message + '\\n' + e.stack );\n\t\t\treturn null;\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Get JSON for complete save of hall and all wizrobes in it.\n\t * @returns {object}\n\t */\n\tasync getHallSave(){\n\n\t\tlet data = {\n\t\t\ttype:HALL_FILE,\n\t\t\thall:this.hall,\n\t\t\tchars:[]\n\t\t};\n\n\t\tlet max = Math.floor( this.hall.max );\n\n\t\tlet chars = data.chars;\n\t\tfor( let i = 0; i < max; i++ ) {\n\n\t\t\tlet char = await Persist.loadChar( this.hall.charId(i) );\n\n\t\t\t// parse to avoid double string encoding.\n\t\t\t//if ( char ) char = JSON.parse(char);\n\n\t\t\tchars.push( char || null );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\t/**\n\t * Set the complete hall data from save file.\n\t * Loads the data as the current hall.\n\t * @param {FullHall} save\n\t */\n\tasync setHallSave( save ) {\n\n\t\tawait this.setCharDatas( save.chars );\n\t\tconsole.dir( save.hall, 'Hall Save' );\n\n\t\t/** @compat */\n\t\tif ( save.hall.active ) {\n\n\t\t\tlet active = save.hall.active;\n\t\t\tconsole.log('active: ' + active );\n\t\t\tlet cur = save.hall.chars[active];\n\t\t\tif ( cur ) {\n\t\t\t\tsave.hall.curId = cur.pid || cur.hid;\n\t\t\t\tconsole.log('switching to cur: ' + save.hall.curId );\n\t\t\t} else console.warn('cur not found: ' + cur );\n\t\t\tdelete save.hall.active;\n\n\t\t}\n\t\treturn Persist.saveHall( JSON.stringify(save.hall), save.hall.id );\n\n\t},\n\n\t/**\n\t * Used to save all the character data when a hall\n\t * is loaded from file.\n\t * @param {*} chars\n\t */\n\tasync setCharDatas( chars ) {\n\n\t\tif ( !chars ) return;\n\n\t\tvar id;\n\n\t\tfor( let i = chars.length-1; i >= 0; i-- ) {\n\n\t\t\tvar char = chars[i];\n\t\t\tif ( char ) {\n\n\t\t\t\t console.log( `HALL SAVE ${i}: ${char.name}` );\n\n\t\t\t\tid = char.pid;\n\t\t\t\tif ( !id ) {\n\n\t\t\t\t\tvar p = char.items.player;\n\t\t\t\t\t// @compat hid\n\t\t\t\t\tif ( p ) id = p.pid || p.hid\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tconsole.log('EMPTY HALL SLOT: ' + i );\n\n\t\t\t}\n\n\t\t\tawait Persist.saveChar( JSON.stringify(chars[i]), id );\n\t\t\tid = null;\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Save GameState of active wizard.\n\t * @param {GameState} state\n\t * @returns {string} json save data.\n\t */\n\tasync saveActive( state ){\n\n\t\ttry {\n\n\t\t\tconsole.log('cur char id: ' + this.hall.curId );\n\t\t\tlet json = JSON.stringify(state);\n\t\t\tif ( json ) {\n\t\t\t\tawait Persist.saveChar( json, this.hall.curId );\n\t\t\t}\n\n\t\t\tthis.saveSettings();\n\n\t\t\treturn json;\n\n\t\t} catch(e) {\n\t\t\tconsole.error( e.message + '\\n' + e.stack );\n\t\t\treturn null;\n\t\t}\n\n\t},\n\n\n\t/**\n\t * Wipe current player data and settings.\n\t */\n\tasync clearActive(){\n\t\treturn Persist.deleteChar( this.curId );\n\t},\n\n\t/**\n\t * Load settings for active wizard.\n\t * @returns {object}\n\t */\n\tloadSettings() {\n\n\t\ttry {\n\n\t\t\tlet str = Persist.loadSettings();\n\t\t\tlet data = JSON.parse( str );\n\n\t\t\tSettings.setSettings( data );\n\n\t\t\treturn Settings.getAll();\n\n\t\t} catch (e ) {\n\t\t\tconsole.error( e.message + '\\n' + e.stack );\n\t\t}\n\n\t},\n\n\t/**\n\t * Save settings for active wizard.\n\t */\n\tsaveSettings(){\n\n\t\ttry {\n\n\t\t\tlet data = JSON.stringify( Settings );\n\t\t\tif ( data ) {\n\t\t\t\tPersist.saveSettings( data, this.curId );\n\t\t\t}\n\n\t\t} catch (e){\n\t\t\tconsole.error( e.message + '\\n' + e.stack );\n\t\t}\n\n\t},\n\n\thasHall() { return this.hall && this.hall.owned() },\n\n\t/**\n\t * Clear all stored data.\n\t */\n\tclearAll(){\n\t\tPersist.clearAll();\n\t},\n\n\tasync saveHall(){\n\n\t\ttry {\n\n\t\t\tlet data = JSON.stringify( this.hall );\n\t\t\tif ( data ) {\n\t\t\t\tawait Persist.saveHall( data, this.hall.id );\n\t\t\t}\n\n\t\t} catch(e){\n\n\t\t\tconsole.error( e.message + '\\n' + e.stack );\n\n\t\t}\n\n\t}\n\n}","const Defaults = {\n\n\tsaves:{\n\t\tautosave:true,\n\t\tremoteFirst:false,\n\t\tsaveTime:30\n\t},\n\tdarkMode:false,\n\tcompactMode:false,\n\tcurview:null,\n\tspells:{\n\n\t},\n\tskills:{\n\t\thideMaxed:false\n\t}\n\n}\n\nObject.freeze( Defaults );\n\n\nexport default {\n\n\ttoJSON(){\n\t\treturn this.vars;\n\t},\n\n\t/**\n\t * @property {Object} vars - variables saved to browser.\n\t */\n\tvars: {\n\n\t\tdarkMode:false,\n\t\tcompactMode:false,\n\t\tspells:{\n\n\t\t}\n\n\t},\n\n\tgetAll(){return this.vars;},\n\n\t/**\n\t * Set value of a subkeyed object.\n\t * @param {string} type\n\t * @param {string} key\n\t * @param {*} val\n\t * @returns {*} the value set, for chaining.\n\t */\n\tsetSubVar( type, key, val) {\n\n\t\tlet p = this.vars[type];\n\t\tif ( !p ) this.vars[type] = p = {};\n\n\t\tp[key] = val;\n\n\t\treturn val;\n\n\t},\n\n\t/**\n\t * Get subkeyed variable value.\n\t * @param {string} type\n\t * @param {string} key,\n\t * @returns {*}\n\t */\n\tgetSubVar( type, key ) {\n\n\t\tlet p = this.vars[type];\n\t\tif (!p )return null;\n\t\treturn p[key];\n\n\t},\n\n\t/**\n\t * Set base setting.\n\t * @param {string} key\n\t * @param {*} val\n\t */\n\tset( key, val) { this.vars[key] = val; },\n\n\tget(key){ return this.vars[key] },\n\n\t/**\n\t * Get vars sub-object.\n\t * @param {*} type\n\t */\n\tgetSubVars( type ) {\n\n\t\tlet vars = this.vars[type];\n\t\tif ( vars === undefined ) vars = this.vars[type] = {};\n\n\t\treturn vars;\n\n\t},\n\n\t/**\n\t * Set stored settings for the current wizard save.\n\t * @param {*} data\n\t */\n\tsetSettings( data ) {\n\n\t\tthis.vars = Object.assign( {}, Defaults );\n\n\t\tfor ( let p in data ) {\n\t\t\tthis.vars[p] = data[p];\n\t\t}\n\n\t}\n\n};","import GData from \"../items/gdata\";\nimport { ARMOR, WEAPON, WEARABLE } from \"../values/consts\";\nimport Wearable from \"../chars/wearable\";\nimport Item from \"../items/item\";\nimport { ParseRVal } from \"../modules/parsing\";\n\n/**\n * Generic prototype for a wearable item.\n */\nexport default class ProtoItem extends GData {\n\n\ttoJSON() {\n\n\t\treturn this.value > 0 ? this.value : undefined;\n\n\t}\n\n\t/**\n\t * @property {boolean} hide - don't display unlock messages.\n\t */\n\tget hide() { return true; }\n\tget isRecipe() { return true; }\n\n\tget material() { return this._material; }\n\tset material(v) { this._material=v;}\n\n\tget properties(){return this._properties;}\n\tset properties(v){\n\t\tthis._properties = ParseRVal(v);\n\t}\n\n\t/**\n\t * @property {} armor\n\t */\n\tget armor(){ return this._armor; }\n\tset armor(v) { this._armor = v; }\n\n\tget attack() { return this._attack; }\n\tset attack(v) { this._attack = v; }\n\n\t/**\n\t * @property {string} kind - subtype of wearable.\n\t */\n\tget kind() { return this._kind; }\n\tset kind(v) { this._kind = v; }\n\n\t/**\n\t * @property {string} slot\n\t */\n\tget slot(){return this._slot;}\n\tset slot(v){ this._slot=v }\n\n\tconstructor(vars=null){\n\n\t\tsuper(vars);\n\n\t\tthis.level = this.level || 1;\n\n\t\tif ( !this.enchants ) {\n\t\t\tthis.enchants = 1;\n\t\t}\n\n\t\tif ( !this.require && !this.need ) this.locked = false;\n\t\tif ( this.attack ) {\n\t\t\tif ( !this.attack.damage ) this.attack.damage = this.attack.dmg;\n\t\t}\n\n\t}\n\n\t/**\n\t * Tests whether item fills unlock requirement.\n\t * @returns {boolean}\n\t */\n\tfillsRequire(g){\n\t\treturn g.state.findInstance(this.id) != null;\n\t}\n\n\t/**\n\t *\n\t */\n\tinstantiate(){\n\t\tif ( this.type === ARMOR || this.type === WEAPON || this.type === WEARABLE ) return new Wearable( this.template );\n\t\telse return new Item(this.template);\n\t}\n\n}","import Game from './game';\nimport { quickSplice } from './util/array';\nimport TagSet from './composites/tagset';\n\n/**\n * @const {RegExp} FuncRE - regular expression to identify tree relationships\n * in requirement/need functions.\n */\nconst FuncRE = /[^\\.]\\b\\w+\\.((?:\\w|\\.)+\\b)/gi;\n\n/**\n * @property {Set<GData>} NextChanges - changes for next frame.\n * Used to loop on changes from current frame while marking changes\n * for next frame.\n */\nvar NextChanges = new Set();\n\n/**\n * @property {Set<GData>} Changed - items changed on previous frame.\n */\nexport var Changed = new Set();\n\nexport const GetChanged = ()=>{\n\n\tvar temp = Changed;\n\n\tNextChanges.clear();\n\tChanged = NextChanges;\n\n\tNextChanges = temp;\n\n\treturn temp;\n\n\n}\n\n/**\n * @property {Set<GData>} UnlockQueue - items to check for unlocks.\n */\n//const UnlockQueue = new Set();\n\n/**\n * @const {Set<GData>} UseQueue - queue of items to check for usable.\n * Used to queue checks of use changes.\n */\n//const UseQueue = new Set();\n\nexport default class TechTree {\n\n\t/**\n\t *\n\t * @param {Object} [datas=null]\n\t */\n\tconstructor( datas ) {\n\n\t\tChanged.clear();\n\n\t\t/**\n\t\t * @property {object.<string,GData>} items - used to check if items\n\t\t * locked/unlocked etc in unlock links.\n\t\t */\n\t\tthis.datas = datas;\n\n\t\t/**\n\t\t * @property {<string,GData[]>} unlocks - maps item id to Items potentially\n\t\t * unlocked by changes in Item.\n\t\t */\n\t\tthis.unlocks = {};\n\n\t\t/**\n\t\t * @property {.<string,Array>} needs - maps item ids to items which might need\n\t\t * that item in order to both unlock and run.\n\t\t * includes both item 'need' object, and other variables required to run.\n\t\t */\n\t\tthis.needs = {};\n\n\t\tfor( let p in this.datas ) {\n\t\t\tthis.mapUnlocks( this.datas[p]);\n\t\t}\n\n\t}\n\n\t/**\n\t * Force an initial check of possible unlocks.\n\t */\n\tforceCheck() {\n\n\t\tlet links;\n\n\t\tfor( let p in this.datas ) {\n\n\t\t\tlet it = this.datas[p];\n\t\t\tif ( it instanceof TagSet ) continue;\n\t\t\tif ( !it.disabled && !it.locked ) {\n\n\t\t\t\tlinks = this.unlocks[p];\n\t\t\t\tif ( links ) this.changed( links );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n\t/**\n\t * Item was unlocked. Add to fringe if it potentially unlocks other items.\n\t * @param {GData} it\n\t */\n\t/*unlocked( it ) {\n\n\t\tif ( this.unlocks[it.id] !== undefined ){\n\t\t\t// if duplicate entry in fringe, should be weeded out naturally anyway.\n\t\t\tthis.fringe.push( it );\n\t\t}\n\n\t}*/\n\n\t/**\n\t * Check fringe items for potential unlock events.\n\t */\n\tupdateTech( changes ){\n\n\t\tfor( let it of changes ){\n\n\t\t\tlet links = this.unlocks[it.id];\n\n\t\t\tif ( links !== undefined ) {\n\n\t\t\t\tif ( this.changed( links ) === false ) {\n\t\t\t\t\tthis.unlocks[it.id] = undefined;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/*updateUnlocks(){\n\n\t\tfor( let it of UnlockQueue ) {\n\t\t\tGame.tryUnlock(it);\n\t\t}\n\t}*/\n\n\t/*updateUsables(){\n\n\t\tfor( let it of UseQueue ) {\n\t\t\tit.usable = it.canUse( Game );\n\t\t}\n\t\tUseQueue.clear();\n\n\t}\n\n\tcheckUsables( links ){\n\n\t\tfor( let i = links.length-1; i>= 0; i--) {\n\n\t\t\tlet it = this.datas[ links[i] ];\n\t\t\tif ( !it || it.disabled === true || it.locks > 0 ) {\n\t\t\t\tquickSplice( links, i );\n\t\t\t} else if ( it.locked !== false ) {\n\t\t\t\tcontinue;\n\t\t\t} else {\n\n\t\t\t\tUseQueue.add(it);\n\t\t\t}\n\n\t\t}\n\n\t}*/\n\n\t/**\n\t * Call when src Item changes.\n\t * Test unlocks on all variables linked by a possible unlock chain.\n\t * @param {string} src - id of changed Item.\n\t*/\n\tchanged( links ){\n\n\t\tlet it;\n\t\tfor( let i = links.length-1; i>= 0; i--) {\n\n\t\t\tit = this.datas[ links[i] ];\n\n\t\t\tif ( !it || it.locked === false || it.disabled === true || it.locks>0 ) {\n\t\t\t\tquickSplice( links, i );\n\t\t\t} else if ( Game.tryUnlock(it) ) {\n\n\t\t\t\t// remove unlock link.\n\t\t\t\tquickSplice( links, i );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn links.length > 0;\n\n\t}\n\n\n\t/**\n\t * Mark all Items which might potentially unlock this item.\n\t * @param {GData} item\n\t */\n\tmapUnlocks( item ) {\n\n\t\t// function maps unlockers OF item. TagSets are collections of items\n\t\t// and do not have unlockers.\n\t\tif ( !item.locked || item.disabled || item instanceof TagSet ) return;\n\n\t\tif ( item.require ) this.mapRequirement( item, item.require, this.unlocks );\n\t\tif ( item.need ) this.mapRequirement( item, item.need, this.unlocks );\n\n\t\t/*if ( item.need ) this.mapRequirement( item, item.need, this.needs );\n\t\tif ( item.cost ) this.mapRequirement( item, item.cost, this.needs );\n\t\tif ( item.fill ) this.mapRequirement( item, item.fill, this.needs );\n\t\tif ( item.buy ) this.mapRequirement( item, item.buy, this.needs );\n\t\tif ( item.buy ) this.mapRequirement( item, item.run, this.needs );*/\n\n\n\t}\n\n\t/**\n\t * Mark an item's possible requirements.\n\t * @param {GData} item\n\t * @param {string|function|Array} requires\n\t * @param {.<string,GData>[]} graph - maps id to dependent items.\n\t */\n\tmapRequirement( item, requires, graph ) {\n\n\t\tlet type = typeof requires;\n\n\t\tif ( type === 'string') {\n\n\t\t\tthis.mapIdRequire( item, requires, graph );\n\n\t\t} else if ( type === 'function' ) {\n\n\t\t\tthis.mapFuncRequire( item, requires, graph );\n\n\t\t} else if (  Array.isArray(requires) ) return requires.forEach( v=>this.mapRequirement(item,v, graph), this );\n\t\telse if ( type === 'object' ) {\n\n\t\t\tthis.mapObjRequire(item, requires, graph );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Mark unlock links from a requirement function.\n\t * @param {GData} targ - item being unlocked.\n\t * @param {function} func - function testing if item can be unlocked.\n\t * @param {<string,GData[]>} graph - maps item id to dependent items.\n\t */\n\tmapFuncRequire( targ, func, graph ) {\n\n\t\tlet text = func.toString();\n\t\tlet results;\n\n\t\twhile ( results = FuncRE.exec( text )) {\n\n\t\t\t//var varPath = results[1];\n\t\t\t//console.log( item.id + 'require: ' + varPath );\n\n\t\t\tlet unlocker = results[1].split('.')[0];\n\t\t\tif ( unlocker === 'mod' || unlocker === 'slot' ) continue;\n\t\t\tthis.mapIdRequire( targ, unlocker, graph );\n\n\t\t}\n\t\tif ( text.includes('this') || text.includes('s.') ) this.mapIdRequire( targ, targ.id, graph );\n\n\t}\n\n\t/**\n\t *\n\t * @param {GData} targ\n\t * @param {object} vars\n\t * @param {<string,GData[]>} graph\n\t */\n\tmapObjRequire( targ, vars, graph ) {\n\n\t\tfor( let p in vars ) {\n\t\t\tthis.mapIdRequire( targ, p, graph );\n\t\t}\n\n\t}\n\n\t/**\n\t * Map unlocker as a potential unlocker of targ.\n\t * @param {GData} targ - target of the unlock attempt.\n\t * @param {string} unlocker\n\t * @param {<string,GData[]>} graph - the tech tree being mapped, needs or unlocks.\n\t */\n\tmapIdRequire( targ, unlocker, graph ) {\n\n\t\tif ( !unlocker) return;\n\t\tlet it = this.datas[unlocker];\n\n\t\tif ( it === undefined ) return;\n\t\telse if ( it instanceof TagSet ) {\n\t\t\treturn it.forEach( v=>{\n\t\t\t\t//console.log( it.id + ': ' +v.id + ' unlock: ' + targ.id );\n\t\t\t\tthis.mapIdRequire( targ, v.id, graph)}\n\t\t\t);\n\t\t}\n\n\t\tlet map = graph[unlocker];\n\t\tif ( map === undefined ) graph[unlocker] = map = [];\n\t\tif ( !map.includes( targ.id ) ) map.push( targ.id );\n\n\t}\n\n}","/**\n * Base view for all item lists.\n */\nimport { floor } from '../util/format';\n\nimport Game from '../game';\n\nexport default {\n\n\tmethods:{\n\n\t\tfloor:floor,\n\n\t\tslottable(it){\n\n\t\t\tif ( it.disabled || (it.need && !Game.unlockTest( it.need, it )) ) return false;\n\t\t\tif ( it.buy && !it.owned && !Game.canPay(it.buy) ) return false;\n\t\t\tif ( it.slot && Game.state.getSlot(it.slot, it.type ) === it) return false;\n\t\t\treturn true;\n\n\t\t},\n\n\t\treslocked( it ) {\n\t\t\treturn it.disabled === true || it.locks > 0 || it.locked !== false;\n\t\t},\n\n\t\tlocked(it) {\n\n\t\t\treturn (it.disabled === true) || it.maxed() || it.locks>0 || (it.locked !== false);\n\n\t\t}\n\n\t}\n\n}","const PADDING = 20;\n\n/**\n *\n * @param {*} elm\n * @param {DOMRect} targRect\n */\nconst getTop = ( elm, targRect) => {\n\n\tlet y = targRect.top - 40;\n\n\treturn ( y < PADDING ) ? PADDING : (\n\n\t\ty + elm.offsetHeight > ( window.innerHeight - PADDING) ?\n\t\t\t(window.innerHeight - PADDING - elm.offsetHeight) : y\n\n\t);\n\n}\n\nexport const centerX = elm => {\n\n\tlet style = elm.style;\n\tstyle.left = (( window.innerWidth - elm.offsetWidth )/2) + 'px'\n\n};\n\nexport const centerXY = (elm, pctY) => {\n\n\tlet style = elm.style;\n\tstyle.left = (( window.innerWidth - elm.offsetWidth )/2) + 'px'\n\tstyle.top = ( (pctY||0.5)*(window.innerHeight-elm.offsetHeight) ) + 'px';\n\n};\n\n/**\n *\n * @param {HTMLElement} elm - element being positioned\n * @param {HTMLElement} target - target being rolled over.\n * @param {number} [pad=32] - padding distance between element and popup.\n */\nexport const positionAt = (elm, target, pad=32 ) =>{\n\n\tlet style = elm.style;\n\tlet rect = target.getBoundingClientRect();\n\t//let myBox = this.$el.getBoundingClientRect();\n\n\tlet left = rect.left;\n\tif ( left < window.innerWidth/2 ) {\n\n\t\t\t//\tconsole.log('left: ' + left);\n\t\tstyle['left'] = ( left + target.offsetWidth + pad ) + 'px';\n\n\t\t} else {\n\n\t\t//console.log('width: ' + myBox.width + ' , ' + myBox.right );\n\t\tstyle['left'] = ( left- elm.offsetWidth - pad ) + 'px';\n\t}\n\n\tstyle.top = getTop( elm, rect ) + 'px';\n\n};\n\nexport const getChild = (targ) => {\n\n\t/**\n\t * Give priority to buttons so popup wont be on click.\n\t */\n\tif ( targ.children ) {\n\n\t\tlet c = targ.children[0];\n\n\t\tfor( let t of targ.children ) {\n\n\t\t}\n\t}\n\n\treturn targ;\n\n};","/**\n * Helpers for hiding item selections.\n */\nexport default {\n\n\tdata(){\n\t\treturn {\n\t\t\tinConfig:false,\n\t\t\thide:{}\n\t\t}\n\t},\n\n\tmounted(){\n\n\t\tlet btnHides = this.$refs.btnHides;\n\t\tif ( btnHides) {\n\n\t\t\tbtnHides.addEventListener( 'click', (e)=>{\n\n\t\t\t\te.preventDefault();\n\t\t\t\tif ( this.inConfig ) {\n\n\t\t\t\t\tthis.stopHides();\n\n\t\t\t\t\tthis.hide = this.newHides;\n\t\t\t\t\tthis.newHides = null;\n\n\t\t\t\t\te.target.classList.remove('inConfig');\n\n\t\t\t\t}\n\t\t\t\telse {\n\n\t\t\t\t\tthis.inConfig = true;\n\t\t\t\t\te.target.classList.add('inConfig');\n\n\t\t\t\t\tthis.newHides = this.hide;\n\t\t\t\t\tthis.hide={};\n\n\t\t\t\t\tthis.$nextTick( ()=>this.configHides());\n\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t},\n\n\tmethods: {\n\n\t\tshow(it){\n\t\t\treturn this.inConfig || !this.hide[it.id];\n\t\t},\n\n\t\tconfigHides(){\n\n\t\t\t// containing element.\n\t\t\tvar sel = this.$refs.hidables || this.$el;\n\t\t\tvar hideElms = sel.querySelectorAll('.hidable');\n\t\t\tif ( !hideElms) return;\n\n\t\t\t/**\n\t\t\t * @property {(Event)=>null} onTogHide - listens to click events.\n\t\t\t */\n\t\t\tthis.onTogHide = (e)=>this.hideToggle(e);\n\n\t\t\tfor( let i = hideElms.length-1; i>= 0; i--) {\n\n\t\t\t\tvar h = hideElms[i];\n\t\t\t\tif ( this.newHides[h.dataset.key] ) h.classList.add( 'inConfig', 'configHiding');\n\t\t\t\telse h.classList.add('inConfig');\n\n\t\t\t\th.addEventListener('pointerdown', this.onTogHide, true );\n\n\t\t\t}\n\n\n\t\t},\n\n\t\t/**\n\t\t * Stop toggling hide on elements.\n\t\t */\n\t\tstopHides(){\n\n\t\t\t// containing element.\n\t\t\tvar sel = this.$refs.hidables || this.$el;\n\t\t\tvar hideElms = sel.querySelectorAll('.hidable');\n\t\t\tif (!hideElms) return;\n\n\t\t\t// remove event listeners.\n\t\t\tfor( let i = hideElms.length-1; i>= 0; i--) {\n\n\t\t\t\tvar h = hideElms[i];\n\n\t\t\t\th.removeEventListener('pointerdown', this.onTogHide, true );\n\t\t\t\th.classList.remove('configHiding', 'inConfig');\n\n\t\t\t}\n\n\t\t\tthis.onTogHide = null;\n\t\t\tthis.inConfig = false;\n\n\t\t},\n\n\t\t/**\n\t\t * Toggle the hidden status of a button.\n\t\t * @param {*} it\n\t\t */\n\t\thideToggle( e ) {\n\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\n\t\t\tlet targ = e.currentTarget;\n\t\t\tlet id = targ.dataset.key;\n\n\t\t\tif ( !id) return;\n\n\t\t\tlet v = this.newHides[id];\n\t\t\tif ( v === undefined || v === null) {\n\t\t\t\tthis.newHides[id] = true;\n\t\t\t}\n\t\t\telse this.newHides[id] = !v;\n\n\t\t\tif ( !v ) targ.classList.add('configHiding');\n\t\t\telse targ.classList.remove('configHiding');\n\n\n\n\t\t},\n\n\t\tbeforeDestroy() {\n\t\t\tthis.onTogHide = null;\n\t\t}\n\n\t}\n\n}","/**\n * Array utilities.\n */\n\nexport const swap = ( a, i, j ) => {\n\n\tif ( i < 0 || j < 0 || i >= a.length || j >= a.length ) return;\n\n\tlet t = a[j];\n\ta[j] = a[i];\n\ta[i] = t;\n\n}\n\n/**\n * Merges items from b into array a for all items in b\n * passing predicate p.\n * @param {array} a\n * @param {array} b\n * @param {*=>boolean} p - merge test.\n * @returns {array} returns a\n */\nexport const mergeInto = ( a, b, p ) => {\n\n\tif ( !b || !a ) return a;\n\n\tfor( let i = b.length-1; i>= 0; i-- ) {\n\t\tif ( p(b[i]) ) a.push(b[i]);\n\t}\n\n\treturn a;\n\n}\n\n/**\n * Return a random element from any of a number of arrays.\n * @param {Array[]} arrs - array of arrays.\n */\nexport const randFrom = (arrs)=>{\n\n\tlet tot = 0;\n\tfor( let i = arrs.length-1; i >= 0; i-- ) tot += arrs[i].length;\n\tif ( tot === 0 ) return null;\n\n\tlet j = Math.floor( Math.random()*tot );\n\tfor( let i = arrs.length-1; i>=0; i-- ) {\n\n\t\tif ( arrs[i].length >= j ) return arrs[i][j];\n\t\tj -= arrs[i].length;\n\n\t}\n\n\treturn null;\n\n}\n\n/**\n * Return random array element between two indices.\n * @param {array} a\n * @param {number} i - lower inclusive limit of random.\n * @param {number} j - upper exclusive limit of random.\n * @returns {*}\n */\nexport const randBetween = (a,i,j)=>{\n\n\treturn a[ Math.floor( i + Math.random()*(j-i)) ]\n\n}\n\n/**\n * Map Array into non-null elements of a predicate.\n * @param {Arrray} a\n * @param {function} p\n */\nexport const mapNonNull = (a,p) => {\n\n\tlet len = a.length;\n\tlet b = [];\n\tfor( let i = 0; i < len; i++ ) {\n\n\t\tvar elm = p( a[i]);\n\t\tif ( elm !== null && elm !== undefined) b.push(elm);\n\n\t}\n\n\treturn b;\n\n}\n\n/**\n *\n * @param {array} a\n * @param {array} b\n */\nexport const pushNonNull = (a,b) => {\n\n\tlet len = b.length;\n\tfor( let i = 0; i < len; i++ ) {\n\t\tvar e = b[i];\n\t\tif ( e !== null && e !== undefined ) a.push( e );\n\t}\n\treturn a;\n\n}\n\n/**\n * Return first non-null element of array.\n * @param {Array} a\n */\nexport const first = (a) =>{\n\n\tlet len = a.length;\n\tfor( let i = 0; i < len; i++) {\n\t\tvar e = a[i];\n\t\tif ( e !== null && e !== undefined ) return i;\n\t}\n\n}\n\n/**\n * Find an item in an array matching predicate, remove and return it.\n * @param {Array} a\n * @param {*} pred\n * @returns {object|null} Item removed or null.\n */\nexport const findRemove = (a,pred) => {\n\n\tfor( let i = a.length-1; i>= 0; i-- ) {\n\n\t\tif ( pred(a[i] ) ) {\n\n\t\t\tlet res = a[i];\n\t\t\ta.splice( i, 1 );\n\t\t\treturn res;\n\n\t\t}\n\n\t}\n\treturn null;\n\n}\n\n/**\n * Return first array element fufilling predicate.\n * @param {*} arr\n * @param {*=>boolean} pred\n * @returns {*}\n */\nexport const randWhere = (arr, pred)=>{\n\n\tif ( arr === null || arr === undefined ) return null;\n\n\tlet st = Math.floor( Math.random()*arr.length );\n\tlet i = st;\n\n\twhile ( !pred( arr[i] ) ) {\n\n\t\tif ( --i < 0 ) i = arr.length-1;\n\t\tif ( i === st ) return null;\n\n\t}\n\n\treturn arr[i];\n\n}\n\n/**\n * Return a random element from the array.\n * @param {Array} arr\n * @returns {*}\n */\nexport const randElm = (arr)=>{\n\tif ( arr === null || arr === undefined ) return null;\n\n\tconst ind = Math.floor( Math.random()*(arr.length));\n\treturn arr[ind];\n}\n\n/**\n * NOTE: Not reactive with Vue.\n * @param {*} a\n * @param {*} i\n */\nexport const quickSplice = ( a, i ) => {\n\n\ta[i] = a[ a.length-1 ];\n\ta.pop();\n\n}\n\n/**\n * Merge two items which may or may not be arrays,\n * and return a ray containing the flattened result of both.\n * If either a or b is already an array, it will be used to join\n * the results in-place.\n * @param {*} a\n * @param {*} b\n * @return {Array}\n */\nexport const arrayMerge = ( a, b ) => {\n\n\tif ( Array.isArray(a) ) {\n\n\t\tif ( Array.isArray(b) ) return a.concat(b);\n\n\t\ta.push(b);\n\n\t\treturn a;\n\n\t} else if ( Array.isArray(b) ) {\n\n\t\t// a is not array:\n\t\tb.push(a);\n\t\treturn b;\n\n\t} else return [a,b];\n\n}\n\n/**\n * sort array by numeric by numeric property values\n * of object entries. null entries are treated as 0.\n * array entries must be objects.\n * @param {object[]} arr\n * @param {string} prop - numeric property to sort on.\n */\nexport const propSort = (arr,prop) => {\n\n\tarr.sort( (a,b)=>{\n\t\treturn ( a[prop] || 0 ) - ( b[prop] || 0 );\n\t});\n\n}\n\n/**\n * Binary search array when values at prop are numeric.\n * @param {object[]} arr\n * @param {string} prop\n */\nexport const binarySearch = (arr, prop, v ) => {\n\n\tlet min = 0;\n\tlet max = arr.length;\n\n\twhile ( min < max ) {\n\n\t\tlet mid = Math.floor(min+max)/2;\n\t\tlet cur = arr[mid][prop];\n\n\t\tif ( v < cur ) {\n\n\t\t\tmax = mid;\n\n\t\t} else if ( v > cur ) {\n\n\t\t\tmin = mid + 1;\n\n\t\t} else return arr[mid];\n\n\t}\n\n\treturn null;\n\n}","import Stat from \"../values/rvals/stat\";\nimport RValue from \"../values/rvals/rvalue\";\n\n/**\n * Find and return first element of set matching predicate.\n * @param {Iterator} s\n * @param {*=>boolean} p\n * @returns {*} matched element, or null.\n */\nexport const iterableFind = (s,p)=>{\n\n\tfor( let t of s ) if ( p(t) ) return t;\n\treturn null;\n\n}\n\n/**\n * Map elements of iterator to an array.\n * @param {Iterator} it\n * @param {*=>*} p\n * @returns {Array}\n */\nexport const iterableMap = (it,p)=>{\n\n\tlet a = [];\n\tfor( let t of it ) {\n\t\ta.push( p(t) );\n\t}\n\n\treturn a;\n}\n\n/**\n * Clear set and add all items from an iterable.\n * @param {Set} s\n * @param {Iteratable} items\n */\nexport const setReplace = (s,items)=>{\n\n\ts.clear();\n\tfor( let it of items ) s.add(it);\n\n}\n\n/**\n * Map the elements of a set to new values.\n * Creates a new Set to match Array function.\n * @param {Set.<*>} s\n * @param {(*)=>*} p - mapping function.\n * @returns {Set.<*>}\n */\nexport const mapSet = (s, p) => {\n\n\tlet a = [];\n\tfor( let t of s ) {\n\t\ta.push( p(t) );\n\t}\n\n\treturn new Set( a );\n\n}\n\n/**\n * Utilities specific to merging game data.\n */\n\n/**\n * Use total values as mod values in cumulative stats?\n * Any stat can be used as a component in another aggregate stat?\n */\n\n/**\n * Convert object entries to Stat-values.\n * @param {object} obj\n * @returns {object} the object.\n */\nexport const toStats = (obj) => {\n\n\tfor( let p in obj ) {\n\t\tvar s = obj[p];\n\t\tobj[p] = s instanceof Stat ? s : new Stat( s, p);\n\t\t//console.log('NEW STAT: ' + p + ': ' + s.valueOf() );\n\t}\n\treturn obj;\n\n}\n\n/**\n *\n * @param {object} dest\n * @param {string} prop\n * @param {*} v\n */\nconst addValue = ( dest, prop, v ) => {\n\n\tvar cur = dest[prop];\n\tif ( cur === undefined ) dest[prop] = new RValue( v.valueOf() );\n\telse {\n\n\t\tif ( typeof cur === 'object') {\n\n\t\t\tcur.value = ( cur.value || 0 ) + v;\n\n\t\t} else dest[prop] = new RValue( cur + v );\n\n\t}\n\n}\n\n/**\n * Write numeric values into a destination object.\n * If the destination target for a keyed number is an object,\n * the keyed number is added to the object's 'value' property.\n * @param {object} dest\n * @param {*} vals\n */\nexport const addValues = (dest, vals) => {\n\n\tif ( typeof dest !== 'object' || dest.constructor !== Object ) {\n\t\tdest = { value:dest};\n\t}\n\n\tif ( typeof vals === 'string') {\n\n\t\t// value is one unit of id'd item.\n\t\taddValue(dest, vals, 1 );\n\n\t} else if ( typeof vals === 'object') {\n\n\t\tfor( let p in vals ) {\n\n\t\t\tlet cur = dest[p];\n\t\t\tlet src = vals[p];\n\n\t\t\tif ( typeof src === 'object') {\n\n\t\t\t\tif ( src.constructor !== Object ) {\n\t\t\t\t\taddValue( dest, p, src );\n\t\t\t\t} else {\n\t\t\t\t\tdest[p] = addValues( cur || {}, src );\n\t\t\t\t}\n\n\n\t\t\t} else if ( typeof cur === 'object') {\n\n\t\t\t\t// src is not object.\n\t\t\t\tconsole.log('cur: object; src: ' + typeof src );\n\t\t\t\taddValue( cur, 'value', src );\n\n\t\t\t} else {\n\n\t\t\t\taddValue(dest, p, src );\n\t\t\t}\n\n\n\t\t}\n\n\t}\n\n\treturn dest;\n\n}","/**\n * Postfixes to use for every 10^3 group of large numbers.\n */\nconst PostFixes = [\n\t'', 'K', 'M', 'B', 'T'\n];\n\nconst FuncRE = /(^[^]*\\{|return|\\}$)|\\w\\.(\\w+)|(\\!)|(\\&\\&)|(\\|\\|)/gi;\n\n/**\n * Converts a function to some semblance of plain text.\n * @param {function} f\n */\nexport const funcText = (f, lookup )=>{\n\n\tlet it;\n\n\treturn f.toString().replace( FuncRE, (match,skips,name,not,and,or)=>{\n\n\t\tif ( name ) {\n\n\t\t\tit = lookup.getData(name);\n\t\t\tif ( it ) return it.name;\n\n\t\t\treturn name;\n\n\t\t} else if ( skips ) {\n\t\t\treturn '';\n\t\t}\n\t\tif ( not ) return ' not ';\n\t\tif ( and) return ' and ';\n\t\tif ( or ) return ' or ';\n\n\t});\n\n};\n\nexport const toInt = Math.floor;\n\n/**\n * Format a large number.\n * @param {number} v\n * @returns {string}\n */\nexport const toLarge = (v) => {\n\n\tlet sgn = 1;\n\tif ( v < 0 ) {\n\t\tsgn = -1;\n\t\tv = -v;\n\t}\n\t// log negative.\n\tif ( v <= 1 ) return sgn;\n\n\t// index cutoff is every multiple of 1000, plus 2 digits over the next higher.\n\t// e.g. the 'hundreds' category extends to 99,999; K extends to 99,999K\n\tlet ex = Math.floor( (Math.log10(v)-1)/3 );\n\tif ( ex < 1 ) return sgn*v;\n\n\treturn ( sgn*Math.round( v / Math.pow(10,3*ex) ) )+PostFixes[ex];\n\n}\n\n/**\n * Formatting helpers for HTML/Display.\n */\nexport const precise = (v, n=2) => {\n\n\tlet r = Number(v);\n\tif ( Number.isNaN(r) ) return v;\n\n\tif ( r === Math.floor(r) ) return r;\n\n\tlet maxDivide = Math.pow(10,n);\n\n\tlet abs = Math.abs(r);\n\n\tlet divide = 1;\n\twhile ( (abs < maxDivide) && abs !== Math.floor(abs) ) {\n\n\t\tabs *= 10;\n\t\tdivide *= 10;\n\n\t}\n\n\tabs = Math.round(abs)/divide;\n\treturn r >= 0 ? abs : -abs;\n\n}\n\n\n/**\n * Returns abbreviation of an item based on first letters.\n * @param {*} it\n */\nexport const abbr = (it)=>{\n\n\tif ( !it ) return '';\n\n\tlet s = it.name;\n\tif ( !s) {\n\t\t//console.warn( it + ' missing name');\n\t\treturn it;\n\t}\n\n\tlet ind = s.indexOf(' ');\n\tif ( ind >= 0 && ind+1 < s.length ) return s[0] + s[ind+1];\n\treturn s.slice(0,2);\n\n}\n\n/**\n * Returns fixed point, rounding down.\n * @param {number} v\n * @param {number} n\n */\nexport const lowFixed = (v, n=2) => {\n\n\tlet pow = Math.pow(10,n);\n\treturn Math.floor( v*pow )/pow;\n\n}\n\n/**\n * Floor function checks for NaN and null values.\n * @param {*} v\n */\nexport const floor = ( v ) => {\n\treturn (v === null || isNaN(v)) ? 0 : Math.floor(v);\n}\n\n/**\n * Adds seconds 's' to number.\n * @param {*} v\n */\n/*export const seconds = (v) => {\n\treturn Math.ceil(v) + ' s';\n}*/\n\n/*export const decimal = (v, n=2) => {\n\n\tlet r = Number(v);\n\tif ( Number.isNaN(r) ) return v;\n\n\tif ( r === Math.floor(r) ) return r;\n\tif ( Math.abs(r)>=1 || r === 0) return r.toPrecision(n);\n\n\tif ( Math.pow(10,n)*r < 1 ) n += 2;\n\treturn r.toFixed(n);\n\n}*/\n\n/*export const ceil = ( v ) => {\n\treturn (v === null || isNaN(v)) ? 0 : Math.ceil(v);\n}*/\n\n\n/*export const round = ( v ) => {\n\treturn (v === null || isNaN(v)) ? 0 : Math.round(v);\n}*/","/**\n * Build JSON request info for windows.fetch()\n*/\nexport const RequestInfo = (creds) => {\n\n\tlet headers = new Headers();\n\t//headers.append( 'Content-Type', 'text/plain');\n\t//headers.append( 'Content-Type', 'application/octet-stream');\n\t//headers.append( 'Origin', 'http://localhost');\n\n\treturn {\n\t\tmethod:'GET',\n\t\theaders:headers,\n\t\tmode:'cors',\n\n\t\t/**\n\t\t * send user credentials? 'omit', 'same-origin' or 'include'\n\t\t */\n\t\tcredentials: creds ? 'include' : 'same-origin'\n\t};\n\n}\n\n/**\n *\n * @param {string} url\n * @param {boolean} creds\n */\nexport const JSONLoad = (url, creds)=>{\n\n\treturn window.fetch( url, RequestInfo(creds) ).then( r=>{\n\n\t\tif ( r.status !== 200 ) {\n\t\t\tconsole.warn('Status: ' + r.status );\n\t\t\treturn null;\n\t\t} else return r.json();\n\n\t}, err=>null );\n\n}\n\nexport default class JSONLoader {\n\n\tget results() {\n\t\treturn this._results;\n\t}\n\n\t/**\n\t * Loading promise.\n\t */\n\tget promise(){\n\t\treturn this._promise;\n\t}\n\n\t/**\n\t *\n\t * @param {string[]} files\n\t */\n\tconstructor( baseDir, files ){\n\n\t\tif ( baseDir && baseDir.length > 0 && baseDir[baseDir.length-1] !== '/' ) baseDir += '/';\n\n\t\tthis._dir = baseDir || '/';\n\t\tif ( files ) this.setFiles(files);\n\n\t}\n\n\t/**\n\t *\n\t * @param {string[]} files\n\t */\n\tsetFiles( files ) {\n\n\t\tthis._files = files;\n\n\t\tlet obj = {};\n\t\tfor( let i = files.length-1; i>= 0; i-- ) {\n\n\t\t\tobj[ files[i] ] = null;\n\n\t\t}\n\n\t\tthis._loads = obj;\n\n\t}\n\n\t/**\n\t *\n\t * @param {?string[]} [files=null]\n\t * @returns {Promise.<object.<string,object>>} - Promise with an object with fileName\n\t * keys mapping to loaded JSON objects.\n\t */\n\tload( files=null ) {\n\n\t\tif ( files ) this.setFiles(files);\n\n\t\tlet loads = this._loads;\n\t\tlet req = RequestInfo();\n\n\t\tlet promiseArr = [];\n\t\tfor( let p in loads ) {\n\n\t\t\tpromiseArr.push( window.fetch( this._dir + p + '.json', req ).then( r=>{\n\n\t\t\t\t\tif ( r.status !== 200 ) {\n\t\t\t\t\t\tconsole.warn('Bad Status: ' + r.status );\n\t\t\t\t\t\tloads[p] = null;\n\t\t\t\t\t\treturn loads[p];\n\t\t\t\t\t} else return r.json().then( json=>loads[p] = json );\n\n\t\t\t\t}, e=>(loads[p]=null))\n\n\t\t\t);\n\n\t\t\t//promiseArr.push( loads[p]);\n\n\t\t}\n\n\t\treturn this._promise = Promise.all( promiseArr ).then( ()=>loads, e=>{\n\t\t\tconsole.error( e.message + '\\n' + e.stack );\n\t\t});\n\n\t}\n\n}","import {getPropDesc} from 'objecty';\n\n/**\n * alphabetical sort by name property.\n * @param {*} a\n * @param {*} b\n */\nexport const alphasort = (a,b)=> a.name < b.name ? -1 : 1;\n\n/**\n * sort by level property.\n * @param {*} a\n * @param {*} b\n */\nexport const levelsort = (a,b)=>{\n\n\tlet v = a.level - b.level;\n\tif ( v === 0 ) {\n\t\treturn a.name < b.name ? -1 : 1;\n\t}\n\treturn v;\n\n};\n\n/**\n * Ensure the existence of props on an object.\n * Mostly for Vue reactivity.\n * @property {Object} obj\n * @property {string[]} props - props to set.\n */\nexport const ensure = ( obj, props ) => {\n\n\tfor( let i = props.length-1; i>= 0; i-- ) {\n\t\tvar s = props[i];\n\t\tif ( !obj.hasOwnProperty(s) ) obj[s] = null;\n\t}\n\n}\n\n/**\n * Attempt to add a property to object.\n * @param {object} targ\n * @param {string} prop\n * @param {object} v - property value.\n*/\nexport const tryAddProp = ( targ, prop, v ) => {\n\n\tlet desc = getPropDesc( targ, prop );\n\tif ( !desc || !desc.set && !desc.writable ) return null;\n\n\treturn targ[prop] = v;\n\n}\n\n/**\n * Determine if property can be safely added to target.\n * Does not check sealed/frozen object status.\n * @param {object} targ\n * @param {string} prop\n*/\nexport const canWriteProp = ( targ, prop ) => {\n\n\tlet desc = getPropDesc( targ, prop );\n\treturn !desc || desc.set || desc.writable;\n\n}\n\n\n/**\n * Only assign values already defined in dest's protochain.\n * @param {*} dest\n * @param {*} src\n */\nexport const assignOwn = (dest, src ) => {\n\n\tvar vars = Object.getPrototypeOf(dest);\n\twhile ( vars !== Object.prototype ) {\n\n\t\tfor( let p of Object.getOwnPropertyNames(vars) ) {\n\n\t\t\tvar desc = getPropDesc(dest, p);\n\t\t\tif ( desc && (!desc.writable && desc.set === undefined) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( src[p] !== undefined ) dest[p] = src[p];\n\n\t\t}\n\t\tvars = Object.getPrototypeOf(vars);\n\n\t}\n\n\treturn dest;\n\n}\n\n\n/**\n * Log all public properties.\n * @param {*} src\n */\n/*export const logPublic = ( src ) => {\n\n\tlet a = [];\n\n\twhile ( src !== Object.prototype ) {\n\n\t\tfor( let p of Object.getOwnPropertyNames(src) ) {\n\n\t\t\tif ( p[0] === '_'){continue; }\n\t\t\ta.push(p);\n\t\t}\n\t\tsrc = Object.getPrototypeOf(src);\n\n\t}\n\n\tconsole.log('PUBLIC: ' + a.join(',' ) );\n\n}*/\n\n/**\n * Like assignNoFunc() but without recursion.\n * @param {object} dest\n * @param {object} src\n */\nexport const assignPublic = ( dest, src ) => {\n\n\tfor( let p of Object.getOwnPropertyNames(src) ) {\n\n\t\tif ( p[0] === '_' ){\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar desc = getPropDesc(dest, p);\n\t\tif ( desc ) {\n\n\t\t\tif ( desc.set ) {\n\n\t\t\t\tif ( typeof dest[p] === 'function') console.log('OVERWRITE: '+p);\n\n\t\t\t} else if ( !desc.writable ) continue;\n\t\t\telse if ( typeof dest[p] ==='function') {\n\t\t\t\t//console.log('skipping func: ' + p);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t}\n\n\t\tdest[p ] = src[p];\n\n\t}\n\n\n\treturn dest;\n\n}\n\n/*export const assignPublic = ( dest, src ) => {\n\n\tvar vars = src;\n\twhile ( vars !== Object.prototype ) {\n\n\t\tfor( let p of Object.getOwnPropertyNames(vars) ) {\n\n\t\t\tif ( p[0] === '_'){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar desc = getPropDesc(dest, p);\n\t\t\tif ( desc && (!desc.writable && desc.set === undefined) ) {\n\t\t\t\t//console.log('SKIPPING: ' + p);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tdest[p ] = src[p];\n\n\t\t}\n\t\tvars = Object.getPrototypeOf(vars);\n\n\t}\n\n\treturn dest;\n\n}*/\n\nexport const assignNoFunc = ( dest, src ) => {\n\n\tvar vars = src;\n\twhile ( vars !== Object.prototype ) {\n\n\t\tfor( let p of Object.getOwnPropertyNames(vars) ) {\n\n\t\t\tif ( p[0] === '_' ){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar desc = getPropDesc(dest, p);\n\t\t\tif ( desc ) {\n\n\t\t\t\tif ( desc.set ) {\n\n\t\t\t\t\tif ( typeof dest[p] === 'function') console.log('OVERWRITE: '+p);\n\n\t\t\t\t} else if ( !desc.writable ) continue;\n\t\t\t\telse if ( typeof dest[p] ==='function') {\n\t\t\t\t\t//console.log('skipping func: ' + p);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tdest[p ] = src[p];\n\n\t\t}\n\t\tvars = Object.getPrototypeOf(vars);\n\n\t}\n\n\treturn dest;\n\n}\n\n/**\n * Only split NON-class keys. Classes shouldn't be\n * grouped into key-paths.\n * @param {*} obj\n */\nexport const splitKeys = (obj)=>{\n\n\tif ( !obj || typeof obj !== 'object' ) return;\n\n\tfor( let s in obj ){\n\n\t\tvar sub = obj[s];\n\t\tif ( s.includes('.')){\n\t\t\tsplitKeyPath( obj, s );\n\t\t}\n\t\tif ( sub && typeof sub === 'object' && (\n\t\t\tObject.getPrototypeOf(sub) === Object.prototype )\n\t\t) splitKeys( sub );\n\n\t}\n\n}\n\n\t/**\n\t * For an object variable path key, the key is expanded\n\t * into subojects with keys from the split key path.\n\t * This is done to allow object props to represent variable paths\n\t * without changing all the code to use Maps (with VarPath keys) and not Objects.\n\t * @param {Object} obj - object containing the key to expand.\n\t * @param {string} prop - key being split into subobjects.\n\t */\n\texport const splitKeyPath = ( obj, prop ) => {\n\n\t\tlet val = obj[prop];\n\t\tdelete obj[prop];\n\n\t\tlet keys = prop.split('.');\n\n\t\tlet max = keys.length-1;\n\n\t\t// stops before length-1 since last assign goes to val.\n\t\tfor( let i = 0; i < max; i++ ) {\n\n\t\t\tvar cur = obj[ keys[i] ];\n\n\t\t\tif ( cur === null || cur === undefined ) cur = {};\n\t\t\telse if ( (typeof cur) !== 'object' || Object.getPrototypeOf(cur) !== Object.prototype ) cur = { value:cur };\n\n\t\t\tobj = (obj[ keys[i] ] = cur);\n\n\t\t}\n\n\t\tobj[ keys[max] ] = val;\n\n\t}\n\n/**\n * Log deprecation warning.\n * @param {*} msg\n */\nexport const deprec = ( msg ) => {\n\tconsole.trace( 'deprecated: ' + msg );\n}\n\nexport const showObj = (obj) => {\n\n\tif ( Array.isArray(obj)){\n\n\t\treturn '[ \\n' + obj.map(v=>showObj(v)).join(', ') + '\\n ]';\n\n\t} else if ( typeof obj === 'object') {\n\n\t\tlet s = '{ ';\n\t\tfor( let p in obj ) {\n\n\t\t\ts += `\\n${p}: ` + showObj(obj[p] );\n\n\t\t}\n\t\ts += '\\n}';\n\n\t\treturn s;\n\n\t} else return '' + obj;\n\n\n}\n\nexport const logObj = ( obj, msg='' ) => {\n\tconsole.log( (msg ? msg + ': ' : '' ) + showObj(obj) );\n}\n\n\n/**\n * Returns a random number between [min,max]\n * @param {number} min\n * @param {number} max\n */\nexport const random = (min, max)=>{\n\treturn min + Math.round( Math.random()*(max-min) );\n}\n\n\nexport const uppercase = (s) => {\n\treturn !s ? '' : (s.length > 1 ? s[0].toUpperCase() + s.slice(1) : s[0].toUpperCase());\n}\n\nexport const indexAfter = ( s, k ) => {\n\n\tlet i = s.indexOf(k);\n\treturn i >= 0 ? i + k.length : i;\n\n}\n\nString.prototype.toTitleCase = function () {\n\tlet string = this.trim().toLowerCase().replace(/\\w\\S*/g, (w) => (w.replace(/^\\w/, (c) => c.toUpperCase())))\n\tlet prefix = string.substr(0, string.lastIndexOf(\" \"))\n\tlet suffix = string.substr(string.lastIndexOf(\" \")+1)\n\t//This accounts for roman numerals.\n\tif (suffix.toLowerCase() == \"ii\") {\n\t\tsuffix = \"II\"\n\t} else if (suffix.toLowerCase() == \"iii\") {\n\t\tsuffix = \"III\"\n\t} else if (suffix.toLowerCase() == \"iv\") {\n\t\tsuffix = \"IV\"\n\t} else if (suffix.toLowerCase() == \"v\") {\n\t\tsuffix = \"V\"\n\t}\n\tstring = prefix + \" \" + suffix\n\t//This makes sure the words 'of' and 'the' are not capittalized.\n\tstring=string.replace(\" Of \",\" of \");\n\tstring=string.replace(\" The \",\" the \");\n\treturn prefix + \" \" + suffix\n}","import RValue from \"./rvalue\";\nimport { TYP_FUNC } from \"../consts\";\nimport Game from \"../../game\"\n\n/**\n * Create a function that returns a cost.\n * function params are g (GameState), a (Actor), c (Context)\n * @param {*} s\n * @returns {FValue.<(g,a,c)=>number>}\n */\nexport const MkCostFunc = s => {\n\treturn new FValue( 'g,a,c', s );\n}\n\n/**\n * Wraps a function in an object so modifiers can be applied.\n */\nexport default class FValue extends RValue {\n\n\ttoJSON(){\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * @property {function} fn - function that serves as the base value.\n\t */\n\tget fn(){return this._fn;}\n\tset fn(v) { this._fn=v;}\n\n\tget type() { return TYP_FUNC }\n\n\ttoString(){\n\t\treturn Game.state.player.hp.value;\n\t}\n\n\tconstructor( params, src, path ){\n\n\t\tsuper( 0, path );\n\t\tthis._src = src;\n\n\t\tthis._fn = new Function( params, 'return ' + src );\n\n\t}\n\n\tapply( params ) {\n\t\treturn this._fn.apply( null, params );\n\t}\n\n\t/**\n\t * Get value of a result or effect.\n\t * NOTE: this applies the standard effect/result params.\n\t * Damage funcs use different function param assignments.\n\t * @param {GameState} gs\n\t * @param {*} targ\n\t */\n\tgetApply( gs, targ ) {\n\t\treturn this._fn( gs, targ );\n\t}\n}","import FValue from \"./rvals/fvalue\";\nimport Range, { RangeTest } from \"./range\";\nimport Events, { IS_IMMUNE, CHAR_DIED, COMBAT_HIT, EVT_COMBAT } from \"../events\";\nimport { TYP_FUNC } from \"./consts\";\nimport RValue from \"./rvals/rvalue\";\n\n/**\n * @const {number} TARGET_SELF - target self.\n */\nexport const TARGET_SELF = 1;\n\n/**\n * @const {number} TARGET_ENEMY - target one enemy.\n */\nexport const TARGET_ENEMY = 2;\n\n/**\n * @const {number} TARGET_ALLY - target single ally.\n */\nexport const TARGET_ALLY = 4;\n\n/**\n * @const {number} TARGET_RAND - random target.\n */\nexport const TARGET_RAND = 8;\n\nexport const TARGET_GROUP = 16;\n\n\n/**\n * @const {number} TARGET_ANY - not necessarily useful but\n * included for consistency with targetting flags.\n */\nexport const TARGET_ANY = 32;\n\n/**\n * @const {number} TARGET_PRIMARY - target leader of targetted group.\n */\nexport const TARGET_PRIMARY = 64;\n\nexport const TARGET_ALL = TARGET_ANY + TARGET_GROUP;\n\n\nexport const TARG_RAND_ENEMY = TARGET_RAND + TARGET_ENEMY;\n\n\n\nexport const TARGET_LEADER = TARGET_ALLY + TARGET_PRIMARY;\n\n\n/**\n * @const {number} TARGET_ENEMIES - target all enemies.\n */\nexport const TARGET_ENEMIES = TARGET_GROUP + TARGET_ENEMY;\n\n/**\n * @const {number} TARGET_ALLIES - target all allies.\n */\nexport const TARGET_ALLIES = TARGET_GROUP + TARGET_ALLY;\n\n/**\n * @const TARGET_RANDG - target random group.\n */\nexport const TARGET_RANDG = TARGET_RAND + TARGET_GROUP;\n\n/**\n * Determine if target can target type.\n * @param {number} targs\n */\nexport const CanTarget = (targs, target ) => {\n\treturn targs & target > 0;\n}\n\n/**\n * @const {object.<string,string>} Targets - targetting constants.\n */\nexport const Targets = {\n\n\tall:TARGET_ALL,\n\n\t/**\n \t* @const {string} TARGET_SELF - target self.\n \t*/\n\tself:TARGET_SELF,\n\n\t/**\n\t * @property {string} ENEMY - target one enemy.\n \t */\n\tenemy:TARGET_ENEMY,\n\n\t/**\n\t * @const {string} ENEMIES - target all enemies.\n\t */\n\tenemies:TARGET_ENEMIES,\n\t/**\n\t* @const {string} ALLIES - target all allies.\n\t */\n\tallies:TARGET_ALLIES,\n\n\t/**\n \t* @const TARGET_RANDG - target random group.\n\t */\n\trandomgroup:TARGET_RANDG,\n\n\t /**\n \t* @const {string} TARGET_RAND - random target.\n \t*/\n\trandom:TARGET_RAND,\n\n\trandomenemy:TARG_RAND_ENEMY,\n\n\t/**\n\t * @const {number} TARGET_PRIMARY - target opposing leader.\n\t */\n\tenemyleader:TARGET_PRIMARY,\n\n\t/**\n\t * @const {number} TARGET_LEADER - target (same-team) leader.\n\t */\n\tleader:TARGET_LEADER,\n\n\t/**\n \t* @const {string} TARGET_ALLY - target single ally.\n \t*/\n\tally:TARGET_ALLY,\n\n};\n\n/**\n * @param {Char[]} a - array of targets.\n * @returns {Char} next attack target\n */\nexport const RandTarget = (a) => {\n\treturn a[Math.floor( Math.random()*a.length)];\n}\n\n/**\n * @param {*} a\n * @returns {Char} highest priority ( lowest index ) living target.\n */\nexport const PrimeTarget = (a) => {\n\tfor( let i = 0; i<a.length; i++ ) {\n\t\tif ( a[i].alive ) return a[i];\n\t}\n}\n\n/**\n * @param {Char[]} a - array of targets.\n * @returns {Char} next attack target\n */\nexport const NextTarget = ( a ) => {\n\n\tfor( let i = a.length-1; i>=0; i-- ) {\n\t\tif ( a[i].alive ) return a[i];\n\t}\n}\n\n\n/**\n * Parse string target into integer target for flag checking.\n * @param {string|string[]} s\n * @returns {number}\n */\nexport const ParseTarget = (s)=>{\n\n\tlet a = s.split(',');\n\tlet t = 0;\n\tfor( let i = a.length-1; i>=0; i-- ) {\n\n\t\tt |= ( Targets[ a[i] ] || 0 );\n\t}\n\n\treturn t || Targets.enemy;\n\n}\n\n/**\n * Create a function that returns a numeric damage value.\n * function has format: (a)ctor, (t)arget, (g)ameState\n * @param {string} s\n * @returns {(a,t,c,g)=>number}\n */\nexport const MakeDmgFunc = (s)=>{\n\treturn new FValue( 'a,t,g', s );\n};\n\nexport const ParseDmg = (v)=>{\n\n\tif ( v === null || v === undefined || v === '' ) return null;\n\n\tif ( (typeof v === 'string') && !RangeTest.test(v) && isNaN(v) ) return MakeDmgFunc(v);\n\telse if ( v instanceof RValue ) return v;\n\treturn new Range(v);\n\n}\n\n/**\n* Apply an attack. Attack is already assumed to have hit, but immunities,\n* resistances, can still be applied.\n* @param {Char} target\n* @param {Object} action\n*/\nexport const ApplyAction = ( target, action, attacker = null) => {\n\n\tif ( !target || !target.alive ) return;\n\tif ( target.isImmune(action.kind) ) {\n\n\t\tEvents.emit( IS_IMMUNE, target, action.kind );\n\t\treturn false;\n\t}\n\n\n\tif ( action.damage ) ApplyDamage( target, action, attacker );\n\tif ( action.cure ) {\n\n\t\ttarget.cure( action.cure );\n\t}\n\tif ( action.state ) {\n\t\ttarget.addDot( action.state, action );\n\t}\n\n\tif ( action.result ) {\n\t\t//console.log('APPLY ON: '+ target.name );\n\t\t//if ( attacker && action.name ) Events.emit(EVT_COMBAT, attacker.name + ' uses ' + action.name );\n\t\ttarget.applyVars( action.result );\n\t}\n\tif ( action.dot ) {\n\t\ttarget.addDot( action.dot, action );\n\t}\n\n\treturn true;\n\n}\n\nexport const ApplyDamage = ( target, attack, attacker ) => {\n\n\tlet dmg = attack.damage;\n\tif ( !dmg) return;\n\n\tif ( dmg.type === TYP_FUNC ) {\n\t\t//let f = dmg.fn;\n\t\tdmg = dmg.fn( attacker, target, target.context );\n\t}\n\telse dmg = dmg.value;\n\n\tif ( attacker && attacker.getBonus ) dmg += attacker.getBonus( attack.kind );\n\tif ( attack.bonus ) dmg += attack.bonus;\n\n\n\tlet resist = target.getResist(attack.kind);\n\tif (resist !== 0) {\n\t\tdmg *= (1 - resist);\n\n\t}\n\n\tlet dmg_reduce = 0\n\tif ( (resist === 0 || resist < 1) && !attack.nodefense ) {\n\n\t\tdmg_reduce = target.defense/(target.defense + (10/3)*dmg*( attack.duration || 1 ) );\n\t\tdmg *= ( 1 - dmg_reduce );\n\n\t}\n\n\ttarget.hp -= dmg;\n\n\n\tEvents.emit( COMBAT_HIT, target, dmg, resist, dmg_reduce, (attack.name || (attacker ? attacker.name : '') ) );\n\tif ( target.hp <= 0 ) { Events.emit( CHAR_DIED, target, attack ); }\n\n\tif ( attack.leech && attacker && dmg > 0 ) {\n\t\tlet amt = Math.floor(100 * attack.leech * dmg) / 100;\n\t\tattacker.hp +=( amt );\n\t\tEvents.emit(EVT_COMBAT, null, attacker.name.toTitleCase() + ' Steals ' + amt + ' Life');\n\t}\n\n}\n\n/**\n * @note currently unused.\n * Convert damage object to raw damage value.\n * @param {number|function|Range} dmg\n * @returns {number}\n*/\nexport function getDamage( dmg ) {\n\n\tlet typ = typeof dmg;\n\n\tif ( typ === 'object') return dmg.value;\n\telse if ( typ === 'number') return dmg;\n\telse if ( typeof dmg === 'function') {\n\t}\n\n\tconsole.warn('Invalid damage: ' + dmg);\n\treturn 0;\n\n}","/**\n * @property {object.<string,string|object>} - maps school to skill determining school level.\n */\nconst skillMap = {\n\tmana:{\n\t\tid:'lore',\n\t\treqs:2\t// requirements doubled when unlocking with skill\n\t}\n}\n\nskillMap.arcane = skillMap.lore = skillMap.mana;\n\n\n\n/**\n * @property {.<string,string>} schoolName - maps school to display name.\n */\nconst schoolNames = {\n\tmana:'arcane'\n}\n\n/**\n * Identifier based on current time and a random suffix that is extremely unlikely to be duplicated.\n * @param {string} prefix\n */\nexport const TimeId = (prefix)=>( prefix + Date.now().toString(36).slice(3) + (4096*Math.random()).toString(36) );\n\n/**\n * @const TYP_PCT - object key to indicate a percentile in the given effect/result.\n * Also 'type' of a Percent type object.\n */\nexport const TYP_PCT = '%';\nexport const TYP_RANGE = 'range';\nexport const TYP_STAT = 'stat';\nexport const TYP_MOD = 'mod';\nexport const TYP_RVAL = 'rval';\nexport const TYP_FUNC = 'func';\nexport const TYP_DOT = 'dot';\nexport const TYP_TAG = 'tagset';\n\nexport const TYP_RUN = 'runnable';\nexport const TYP_STATE = 'state';\n\nexport const ENCHANTSLOTS = 'enchantslots';\n\nexport const P_TITLE = 'title';\nexport const P_LOG = 'log';\n\nconst POTION = 'potion';\nconst ITEM = 'item';\nconst NPC = 'npc';\n\nexport { POTION, ITEM };\n\nconst RESOURCE = 'resource';\nconst ACTION = 'action';\nconst SKILL = 'skill';\nconst ENCOUNTER = 'enc';\nconst MONSTER = 'monster';\nconst WEARABLE = 'wearable';\nexport const ENCHANT = 'enchant';\nconst HOME = 'home';\nconst EVENT = 'event';\nconst PURSUITS = 'pursuits';\nconst ARMOR = 'armor', WEAPON = 'weapon';\n\nexport const REST_TAG = 't_rest';\n\nexport const TASK = 'task';\nconst DUNGEON = 'dungeon';\nconst LOCALE = 'locale';\nconst EXPLORE = 'explore';\n\n/**\n * @const {number} TEAM_PLAYER - team constant for allies.\n */\nexport const TEAM_PLAYER = 1;\n\n/**\n * @const {number} TEAM_NPC - constant for NPC team.\n * Might allow additional teams in future.\n */\nexport const TEAM_NPC = 0;\n\n/**\n * @const {number} TEAM_ALL - not an actual team; indicates\n * an effect to apply to all teams.\n */\nexport const TEAM_ALL = 2;\n\nexport { DUNGEON, EXPLORE, LOCALE };\nexport { HOME, RESOURCE, NPC, SKILL, ACTION, ENCOUNTER, WEARABLE, MONSTER, ARMOR, WEAPON, PURSUITS, EVENT };\n\n/**\n * @constant {number} DELAY_RATE - speed to attack delay conversion constant.\n */\nexport const DELAY_RATE = 3.5;\nexport function getDelay(s) {\n\treturn 0.5 + DELAY_RATE*Math.exp(-s/8);\n}\n\n/**\n * Determine if the given target allows targetting of item.\n * @param {string|string[]} targs - tags, names, or or id list.\n * @param {GData} it\n * @returns {boolean} true if targs can target it.\n */\nexport const canTarget = (targs, it ) => {\n\n\tif ( Array.isArray(targs) ) {\n\n\t\tfor( let i = targs.length-1; i >= 0; i-- ) {\n\n\t\t\tvar t = targs[i];\n\t\t\tif ( t && t == it.type || t === it.kind || t === it.slot || it.hasTag(t) ) return true;\n\n\t\t}\n\t\treturn false;\n\n\t}\n\n\treturn targs === it.type || targs === it.kind || targs === it.slot || it.hasTag(targ);\n\n}","/**\n * Skills required to understand/buy npcs.\n */\nconst NpcLoreSkills = {\n\n\tbeast:[\"animals\",\"naturelore\",\"summoning\"],\n\tmagicbeast:[\"magicbeasts\",\"naturelore\",\"summoning\"],\n\tdemon:[\"demonology\",\"bloodlore\",\"summoning\",\"languages\"],\n\thumanoid:[\"charms\",\"languages\",\"history\"],\n\tundead:[\"necromancy\",\"reanimation\"],\n\tkell:[\"naturelore\",\"runelore\"],\n\tcelestial:[\"lightlore\",\"astrallore\", \"divination\"],\n\tconstruct:\"crafting\",\n\telemental:[\"waterlore\",\"firelore\",\"earthlore\",\"airlore\",\"summoning\"],\n\tgiant:[\"charms\",\"summoning\",\"trickery\"],\n\tghost:[\"spiritlore\",\"conjuration\"],\n\tspirit:[\"spiritlore\",\"divination\",\"summoning\"],\n\tdeity:[\"spiritlore\",\"divination\"]\n\n\n\n}\n\n\n\n/**\n * @property {object.<string,string|object>} - maps school to skill determining school level.\n */\nconst skillMap = {\n\tmana:{\n\t\tid:'lore',\n\t\treqs:2\t// requirements doubled when unlocking with skill\n\t}\n}\n\nskillMap.arcane = skillMap.lore = skillMap.mana;\n\n\n\n/**\n * @property {.<string,string>} schoolName - maps school to display name.\n */\nconst schoolNames = {\n\tmana:'arcane'\n}\n\n\n/**\n * @const {number[]} TierTable - levels when given tiers start.\n */\nconst TierTable = [0, 3, 6, 11, 20];\n\n/**\n * @const {.<string,string|string[]>} SchoolTable - converts type/kind to associated school.\n */\nexport const SchoolTable = {\n\n\tarcane:'mana',\n\tswamp:['shadow','water'],\n\tplains:'light',\n\twoods:'nature',\n\tholy:'light',\n\tmountains:['fire','earth','air'],\n\thills:['earth','air'],\n\tcave:['shadow','earth'],\n\tsea:'water',\n\ttown:[ 'blood', 'mana'],\n\thumanoid:'blood',\n\tundead:'shadow',\n\tghost:'spirit',\n\tconstruct:'craft',\n\tdragon:'fire',\n\tbeast:'nature',\n\tmagicbeast:['mana','nature']\n\n};\n\n/**\n * get level when given tier begins.\n * @param {number} tier\n * @returns {number}\n */\nexport const tierLevel = (tier)=>{\n\n\tif ( tier >= TierTable.length ) return TierTable[ TierTable.length-1 ];\n\telse if ( tier <= 0 ) return 0;\n\n\treturn TierTable[tier];\n\n}\n\n/**\n * Returns number of levels over tier start\n * a given level is.\n * For assigning higher counters within a tier.\n * @param {number} lvl\n * @returns {number}\n */\nexport const tierOffset = (lvl)=>{\n\n\tfor( let i = TierTable.length-1; i>=0; i-- ) {\n\t\tif ( lvl >= TierTable[i] ) return lvl - TierTable[i];\n\t}\n}\n\n/**\n * Get loot tier/general item tier for level.\n * @param {number} [lvl=1]\n * @returns {number}\n */\nexport const getTier = (lvl=1) => {\n\n\tfor( let i = TierTable.length-1; i>=0; i-- ) {\n\t\tif ( lvl >= TierTable[i] ) return i;\n\t}\n\n}\n\n/**\n * Get total skill levels associated with a kind/name/type string.\n * @param {object} map - map of string (kind/name/type) to appropriate skill.\n * @param {string} s\n * @param {Context} c\n */\nexport const SkillLevels = (map, s,c) => {\n\n\tlet skill = map[s];\n\tif ( skill === undefined ) return 0;\n\n\tif ( typeof skill === 'string') {\n\n\t\tlet data = c.getData(skill);\n\t\treturn data ? data.value : 0;\n\n\t} else {\n\n\t\tlet tot = 0;\n\t\tfor( let i = skill.length-1; i >= 0; i-- ) {\n\n\t\t\tlet data = c.getData(skill[i]);\n\t\t\tif ( data ) tot += data.value\n\t\t}\n\n\t\treturn tot;\n\n\t}\n\n}\n\n/**\n * Total skill levels for monster type.\n * @param {string} kind - monster type.\n * @param {Context} c\n */\nexport const NpcLoreLevels = ( kind, c )=>{\n\treturn SkillLevels( NpcLoreSkills, kind, c );\n}\n\n\n/**\n * Return book-type-resource cost for school.\n * @param {*} s\n */\nexport const getBookCost = (s)=>{ return BookCostTable[s]; }\n\n/**\n * Get skill associated with a school.\n * @param {string} s\n * @returns {string|object}\n */\nexport const schoolSkill = (s)=>{ return skillMap[s] || s; }\n\n/**\n *\n * @param {string} s\n * @returns {string|string[]}\n */\nexport const getSchool = s=>{ return SchoolTable[s] || s; }\n\n/**\n * Get display name for a school.\n * @param {string} s\n */\nexport const schoolName = (s)=> { return schoolNames[s] || s; }\n\n/**\n * base resource to buy item by school/kind.\n * @param {string} school\n * @param {number} tier\n */\nexport const schoolResource = ( school, lvl ) =>{\n\n\tlvl = getTier(lvl);\n\n\tlet table = SchoolCostTable[school];\n\tif ( table ) {\n\n\t\ttable = table[lvl];\n\t\tif ( table ) return table;\n\n\t}\n\n\t// default\n\ttable = SchoolCostTable['other'];\n\treturn table[lvl] || 'gems';\n\n}\n\n/**\n * @const {.<number,string>} BookCostTable - cost of basic research item, per tier.\n */\nconst BookCostTable = {\n\n\t0:'scrolls',\n\t1:'codices',\n\t2:'tomes',\n\t3:'runestones'\n\n}\n\n/**\n * @const SchoolCostTable School-> Loot Tier-> Base Resource Cost.\n */\nexport const SchoolCostTable = {\n\n\tshadow:{\n\n\t\t0:'bonedust',\n\t\t1:'bones',\n\t\t2:'shadowgem',\n\t\t3:'bodies'\n\n\t},\n\tnature:{\n\n\t\t0:'herbs',\n\t\t1:'naturegem'\n\n\t},\n\tfire:{\n\n\t\t1:'firegem',\n\t\t5:'firerune'\n\n\t},\n\tearth:{\n\n\t\t1:'earthgem',\n\t\t5:'earthrune'\n\n\t},\n\twater:{\n\n\t\t1:'watergem',\n\t\t5:'waterrune'\n\n\t},\n\tair:{\n\n\t\t1:'airgem',\n\t\t5:'airrune'\n\n\t},\n\tspirit:{\n\n\t\t1:'bonedust',\n\t\t2:'spiritgem',\n\t\t3:'souls'\n\n\t},\n\tlight:{\n\t\t1:'lightgem',\n\t\t4:'sindel'\n\n\t},\n\tblood:{\n\n\t\t2:'bloodgem',\n\t\t3:'souls',\n\t\t5:'ichor'\n\n\t},\n\tother:{\n\n\t\t0:'gold',\n\t\t1:'gems',\n\t\t2:'managem',\n\t\t3:'runestones'\n\t}\n\n\n}\n/**\n *\n * @param {*} b - monster/npc\n * @param {Context} c - context for data.\n */\n/*export const NpcSkillLevels = (b, c)=>{\n\treturn SkillLevels( NpcInfoSkills, b.kind, c );\n}*/\n","import Stat from \"./rvals/stat\";\n\n/**\n * @class\n * Combines Stat with a max value.\n */\nexport default class MaxStat {\n\n\ttoJSON(){\n\n\t\tlet v = this._value.toJSON();\n\t\tlet m = this.max.toJSON();\n\n\t\tif ( v === m ) return v;\n\n\t\treturn {\n\t\t\tv:this._value,\n\t\t\tmax:this.max\n\t\t};\n\n\t}\n\n\tget base() {\n\t\treturn this._value.base;\n\t}\n\tset base(v) {\n\n\t\tif ( v && typeof v === 'object') {\n\t\t\tthis._value.base = v.base || v.value;\n\t\t} else this._value.base = v;\n\t}\n\n\tget value(){ return this._value.value; }\n\tset value(v) {\n\n\t\tif ( v > this._max.value ) v = this._max.value;\n\n\t\tif ( this._value ) {\n\t\t\tthis._value.set(v);\n\t\t} else {\n\t\t\tthis.v = v;\n\t\t}\n\n\t}\n\n\tset v(v){\n\t\tthis._value = new Stat(v,this.path +'.value');\n\t}\n\n\tget max(){ return this._max; }\n\tset max(v){\n\t\tthis._max = v instanceof Stat ? v : new Stat(v, this.path + '.max', true );\n\t}\n\n\tvalueOf(){ return this._value.value; }\n\n\n\t/**\n\t *\n\t * @param {number} v\n\t */\n\tset(v) {\n\n\t\tif ( v > this.max.value ) v = this.max.value;\n\t\tthis._value.set(v);\n\t}\n\n\t/**\n\t *\n\t * @param {number} v\n\t */\n\tamount(v) {\n\n\t\tthis._value.base += v;\n\t\tif ( this._value.value > this.max.value ) this._value.base = this.max.value;\n\n\t}\n\n\t/**\n\t * @returns {boolean} true if stat is maxed.\n\t */\n\tmaxed(){ return this._value >= this.max; }\n\n\t/**\n\t *\n\t * @param {object|number} vars\n\t * @param {boolean} empty - whether to init empty by default.\n\t * ignored if vars defines both a max and value.\n\t */\n\tconstructor(vars=null, empty=false ){\n\n\n\t\tif ( vars && typeof vars === 'object') {\n\n\t\t\tif ( vars.isRVal ) {\n\n\t\t\t\tthis.max = vars.value;\n\t\t\t\tthis.v = empty ? 0 : this.max.value;\n\n\t\t\t} else {\n\n\t\t\t\tif ( vars.max ) this.max = vars.max;\n\t\t\t\telse if ( vars.v) this.max = vars.v;\n\t\t\t\telse this.max = 0;\n\n\t\t\t\tif ( vars.v ) this.v = vars.v;\n\t\t\t\telse this.v = empty || !vars.max ? 0 : vars.max;\n\n\t\t\t}\n\n\t\t} else if ( typeof vars === 'number' ) {\n\n\t\t\tthis.max = vars;\n\t\t\tthis.v = empty ? 0 : vars;\n\n\t\t} else {\n\n\t\t\tthis.max = 0;\n\t\t\tthis.v = 0;\n\n\t\t}\n\n\t}\n\n}","import Percent from '../percent';\nimport Stat from '../rvals/stat';\nimport { precise } from '../../util/format';\nimport { TYP_MOD } from '../consts';\nimport { assign } from 'objecty';\nimport RValue from '../rvals/rvalue';\nimport { canWriteProp } from '../../util/util';\n//import Emitter from 'eventemitter3';\n\nexport const ModTest = /^([\\+\\-]?\\d+\\.?\\d*\\b)?(?:([\\+\\-]?\\d+\\.?\\d*)\\%)?$/;\n\n/**\n * Modifier for mod without id.\n */\nexport const DEFAULT_MOD = 'all';\n\nexport const SetModIds = (mods, id ) => {\n\n\tif ( mods instanceof Mod ) mods.id = id;\n\telse if ( typeof mods === 'object') {\n\t\tfor( let p in mods ) {\n\t\t\tSetModIds( mods[p], id);\n\t\t}\n\t}\n}\n\nexport default class Mod extends Stat {\n\n\ttoJSON(){\n\n\t\tif ( this._basePct === 0 ) return this.base;\n\n\t\tvar val = (this.base || '') + (( this._basePct > 0 ? '+' : '') + (100*this.basePct)  + '%');\n\n\t\treturn val;\n\n\t}\n\n\ttoString() {\n\n\t\tlet s = ( this.bonus !== 0 ?\n\t\t precise( this.bonus.toString() )\n\t\t: '' );\n\n\n\t\tif ( this.pctTot !== 0 ) {\n\n\t\t\tif ( this.bonus !== 0 ) s += ', ';\n\t\t\ts += ( this.pctTot > 0 ? '+' : '' ) + precise(100*this.pctTot) + '%';\n\t\t}\n\t\treturn s;\n\t}\n\n\t/**\n\t * @property {number} [count=0] - number of times mod is applied.\n\t */\n\tget count() {\n\n\t\tif ( this._count !== null && this._count !== undefined ) {\n\t\t\treturn this._count;\n\t\t}\n\n\t\tif ( this.source === null || this.source === undefined ) console.warn(this.id+ ' No Source');\n\t\treturn this.source;\n\n\t}\n\tset count(v) {\n\n\t\t/**\n\t\t * @compat only\n\t\t * @note - rare recursive save bug. count:{ str:{ str:{str:\"\"}}\n\t\t */\n\t\tif ( v && (typeof v === 'object') ) {\n\n\t\t\tif ( v.str) this.count = v.str;\n\t\t\telse this._count = v;\n\t\t\t//else if ( v.value ) this.count = v.value;\n\n\t\t} else this._count = v;\n\t\t//console.log(this.id + ' Setting Count: ' + v );\n\n\t}\n\n\t/**\n\t * @property {number} basePct - decimal percent\n\t */\n\tget basePct() { return this._basePct; }\n\tset basePct(v) { this._basePct = v; }\n\n\t/**\n\t * @property {number} bonus - bonus of mod after percent mods.\n\t * basePct not added because basePct works on target of mod.\n\t */\n\tget bonus(){return (this.base + this.mBase)*(1+this.mPct); }\n\n\t/**\n\t * @property {number} pctTot - modified percent bonus of mod.\n\t */\n\tget pctTot(){return this.basePct * (1+ this.mPct); }\n\n\t/**\n\t * @property {number} countPct - base percent multiplied by number of times\n\t * mod is applied.\n\t */\n\tget countPct(){return this.pctTot*this.count;}\n\n\t/**\n\t * @property {number} bonusTot - base bonus multiplied by number of times\n\t * mod is applied.\n\t */\n\tget countBonus(){return this.bonus*this.count;}\n\n\t/**\n\t * @compat\n\t */\n\tget str() { return this.value; }\n\tset str(v) {\n\n\t\tif ( typeof v ==='string' ){\n\n\t\t\tlet res = ModTest.exec( v);\n\n\t\t\tif ( res ) {\n\n\t\t\t\tif ( res.length === 3 ) {\n\t\t\t\t\t//console.log('res len 3: ' + v );\n\t\t\t\t\t//res.forEach((v,i)=>console.log('reg['+i+']: ' + v ));\n\t\t\t\t\tthis.base = Number(res[1]) || 0;\n\t\t\t\t\tthis.basePct = Number(res[2])/100 || 0;\n\t\t\t\t} else if ( res.length === 2 ) {\n\t\t\t\t\tconsole.log('RES LEN IS 2: ' + v );\n\t\t\t\t\tthis.base = res[1] || 0;\n\t\t\t\t\tthis.basePct = 0;\n\t\t\t\t}\n\n\t\t\t} else console.error( this.id + ' no mod regex: ' + v );\n\n\n\t\t} else if ( v instanceof Percent ) {\n\n\t\t\tthis.basePct = v.pct;\n\n\t\t} else if ( !isNaN(v) ) {\n\n\t\t\tthis.base = v;\n\t\t} else if ( typeof v === 'object') {\n\n\t\t\t/**\n\t\t\t * @note check for recursive str assign.\n\t\t\t */\n\t\t\tif ( v && (typeof v === 'object') && v.str) {\n\t\t\t\tthis.str = v.str;\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tget type(){ return TYP_MOD }\n\n\t/**\n\t *\n\t * @param {?Object} [vars=null]\n\t */\n\tconstructor( vars=null, id=null, source=null ){\n\n\t\tsuper( null, id );\n\n\t\tif ( typeof source === 'number' ) {\n\t\t\tthis.count = source;\n\t\t} else this.source = source;\n\n\t\tif ( typeof vars === 'number') this.base = vars;\n\t\telse if ( typeof vars === 'string') this.str = vars;\n\t\telse if ( vars ) {\n\n\t\t\tif ( vars.value ) {\n\t\t\t\t/** @compat */\n\t\t\t\tthis.str = vars.value;\n\t\t\t} else assign( this, vars );\n\n\n\t\t}\n\n\t\tthis.base = this.base || 0;\n\t\tthis.basePct = this.basePct || 0;\n\n\t\tif ( !this.id ) this.id = DEFAULT_MOD;\n\n\t}\n\n\tclone() {\n\t\treturn new Mod({base:this.base, basePct:this.basePct }, this.id, this.source ); }\n\n\t/**\n\t * Apply this modifier to a given target.\n\t * This is a one-time modify and doesnt use count total.\n\t * @param {Object} obj - owner of the property being modified.\n\t * @param {string} p - target property to which mod is being applied.\n\t * @param {number} amt\n\t */\n\tapplyTo( obj, p, amt, isMod=false ) {\n\n\t\tlet targ = obj[p];\n\n\t\tif ( targ instanceof RValue ) targ.addMod( this, amt );\n\t\telse if ( typeof targ === 'number') {\n\n\t\t\tif ( !canWriteProp(obj, p ) ) {\n\t\t\t\tconsole.log('NOT WRITABLE: ' + p );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconsole.log( p + ': STAT FROM NUMBER: ' + obj[p] );\n\n\t\t\tlet s = obj[p] = new Stat( targ || 0, (obj.id ? obj.id +'.'  : '' ) + p );\n\t\t\ts.addMod( this, amt );\n\n\t\t\t/*if ( isMod ) console.log('SHOULD BE MOD: ' + s.id );\n\t\t\telse console.log( this.id + ' NEW STAT: ' +  s.id );*/\n\n\t\t} else if ( targ === null || targ === undefined ){\n\n\t\t\tconsole.error('DEPRECATED: MOD.applyTo() NEW MOD AT TARGET: ' + p );\n\n\t\t} else if ( typeof targ === 'object') {\n\n\t\t\t//console.dir( targ,  this.id + ' UNKNOWN MOD TARGET')\n\t\t\tif ( Array.isArray(targ) ) {\n\n\t\t\t\tfor( let i = targ.length-1; i>= 0; i--) this.applyTo( targ[i], p, amt );\n\n\t\t\t} else {\n\n\t\t\t\tif ( targ.value ) {\n\n\t\t\t\t\tthis.applyTo( targ, 'value', amt );\n\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn( this.id + ': ' + targ.id + ' !!Mod Targ: ' + targ.constructor.name);\n\t\t\t\t\ttarg.value = amt*this.bonus*( 1 + amt*this.pctTot );\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}","import { precise } from \"../util/format\";\nimport { TYP_PCT } from \"./consts\";\n\nexport const PercentTest = /^(\\d+(?:\\.\\d+)?)\\%$/i\n\n/**\n * Represents a percentage probability.\n */\nexport default class Percent {\n\n\ttoJSON(){ return (100*this.pct) + '%'; }\n\n\t/**\n\t * @property {number} pct - decimal percent.\n\t */\n\n\t/**\n\t * @property {number} value - 1 if a random roll\n\t * is below the percentile.\n\t */\n\tget value() { return (Math.random() < this.pct) ? 1 : 0; }\n\n\t/**\n\t * Perform a percent roll with a percent-percent modifier.\n\t * @param {number} [mod=0] - 100-based percent.\n\t * @returns {boolean} - true if roll succeeds.\n\t */\n\troll( mod=0 ) { return 100*Math.random() < this.pct*( 100 + mod ); }\n\n\tget type() { return TYP_PCT }\n\n\ttoString() { return  precise( 100*this.pct ) + '%';}\n\n\tconstructor( val ) {\n\n\t\tif ( typeof val === 'string') {\n\n\t\t\tlet res = PercentTest.exec( val );\n\t\t\tif ( res ) {\n\n\t\t\t\tthis.pct = res[1];\n\n\t\t\t} else this.pct = Number(val);\n\n\t\t} else if ( !isNaN(val) ) this.pct = val;\n\n\t\tthis.pct = ( this.pct || 0 )/100;\n\n\t}\n\n\tclone() {\n\t\treturn new Percent( 100*this.pct);\n\t}\n\n}","import { TYP_RANGE } from \"./consts\";\nimport { precise } from \"../util/format\";\nimport Stat from \"./rvals/stat\";\nimport { SubPath } from \"./rvals/rvalue\";\n\nexport const RangeTest = /^\\-?\\d+\\.?\\d*\\~\\-?\\d+\\.?\\d*$/i;\n\nconst SPLIT_CHAR = '~';\n\nexport default class Range {\n\n\ttoJSON() {\n\t\treturn (typeof this.min === 'number' ? this.min : this.min.base ) + SPLIT_CHAR +\n\t\t\t\t( typeof this.max === 'number' ? this.max : this.max.base );\n\n\t}\n\n\ttoString() {\n\t\treturn ( this.min == this.max ) ? precise( this.min ) :\n\t\tprecise( this.min ) + ' ' + SPLIT_CHAR + ' ' + precise(this.max );\n\t}\n\n\t/**\n\t * @property {string} id\n\t */\n\tget id() { return this._id; }\n\tset id(v) { this._id = v; }\n\n\t/**\n\t * @property {string} type - type constant.\n\t */\n\tget type(){ return TYP_RANGE; }\n\n\tget min(){return this._min;}\n\tset min(v){this._min=v}\n\n\tget max(){return this._max}\n\tset max(v){this._max=v;}\n\n\t/**\n\t * @property {number} value - getting a range value\n\t * returns a random number in the range, max exclusive.\n\t */\n\tget value() {\n\t\treturn this.min + Math.random()*( this.max - this.min );\n\t}\n\tset value(v){\n\t\tthis.min = this.max = v;\n\t}\n\n\t/**\n\t * @property {boolean} isRVal - simple test for RVal interface.\n\t * @todo rvalue as interface base object with no values?\n\t */\n\tget isRVal(){return true;}\n\n\tvalueOf(){ return this.value; }\n\n\t/**\n\t *\n\t * @param {Object|number|string} min\n\t * @param {?number} max\n\t */\n\tconstructor(min, max) {\n\n\t\tif ( typeof min === 'string' ) {\n\n\t\t\tlet parts = min.split( SPLIT_CHAR );\n\t\t\tthis.min = Number( parts[0] );\n\t\t\tthis.max = Number( parts[1] );\n\n\t\t} else if ( typeof min ==='object') Object.assign( this, min );\n\t\telse {\n\n\t\t\tthis.min = Number( min );\n\t\t\tthis.max = Number( max === undefined ? min : max );\n\n\t\t}\n\n\t\tif ( typeof this.min !== 'number') console.log('min: ' + this.min + ' -> ' + this.max );\n\n\t}\n\n\t/**\n\t * Test if a number is within the range, endpoints included.\n\t * @param {number} v\n\t * @returns {boolean}\n\t */\n\tcontains(v) {\n\t\treturn v >= this.min && v <= this.max;\n\t}\n\n\t/**\n\t * Return a percent of the range value.\n\t * @param {number} pct - decimal percent.\n\t */\n\tpercent( pct ) {\n\t\treturn this.min + pct*( this.max - this.min );\n\t}\n\n\taddMod( mod, amt ) {\n\n\t\tif ( !(this.min instanceof Stat) ) this.min = new Stat( this.min, SubPath(this.id, 'min') );\n\t\tif ( !(this.max instanceof Stat) ) this.max = new Stat(this.max, SubPath( this.id, 'max') );\n\n\t\tthis.min.addMod(mod, amt);\n\t\tthis.max.addMod(mod, amt);\n\n\t}\n\n\tremoveMods( mod ){\n\n\t\tif ( this.min instanceof Stat ) this.min.removeMods(mod);\n\t\tif ( this.max instanceof Stat ) this.max.removeMods(mod);\n\t}\n\n\t/**\n\t * Add amount to range.\n\t * @param {number|Range} amt\n\t */\n\tadd( amt ) {\n\n\t\t//console.log('ADDING RANGE: ' + amt );\n\n\t\tif ( typeof amt === 'number' ) {\n\t\t\tthis.min += amt;\n\t\t\tthis.max += amt;\n\t\t} else if ( amt && typeof amt ==='object') {\n\n\t\t\tif ( amt.type === TYP_RANGE ){\n\t\t\t\tthis.min += amt.min;\n\t\t\t\tthis.max += amt.max;\n\t\t\t} else if ( amt.value ) {\n\t\t\t\tthis.min += amt.value;\n\t\t\t\tthis.max += amt.value;\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Necessary for RValue compatibility.\n\t * @param {*} state - ignored\n\t * @param {*} target - ignored\n\t */\n\tgetApply() {\n\t\treturn this.valueOf();\n\t}\n\n\n}","import { TYP_RVAL } from \"../consts\";\nimport { precise } from '../../util/format';\n\nexport const PercentTest = /^(\\d+(?:\\.?\\d+)?)\\%$/i\nexport const RangeTest = /^\\-?\\d+\\.?\\d*\\~\\-?\\d+\\.?\\d*$/i;\n\n\n/**\n * Recursively set source property for RValues.\n * @param {*} obj\n * @param {*} source\n * @param {*} recur\n */\nexport const InitRVals = ( obj=this, source, recur=new Set() ) => {\n\n\t\trecur.add(obj);\n\n\t\tfor( let p in obj ) {\n\n\t\t\tvar s = obj[p];\n\t\t\tif ( s === null || s=== undefined ) continue;\n\t\t\tif ( Array.isArray(s) ) {\n\n\t\t\t\tfor( let i = s.length-1; i>= 0; i-- ) {\n\t\t\t\t\tvar t = s[i];\n\t\t\t\t\tif ( typeof t === 'object' && !recur.has(t)) InitRVals( t, source, recur);\n\t\t\t\t}\n\n\t\t\t} else if ( typeof s === 'object' && !recur.has(s)) {\n\n\t\t\t\tif ( s instanceof RValue  && !s.source ) {\n\t\t\t\t\ts.source = source;\n\t\t\t\t} else InitRVals( s, source, recur );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\n/**\n * Form sub-path.\n * @param {string} id\n * @param {string} child\n * @returns {string}\n */\nexport const SubPath = ( id, child ) => {\n\treturn id + '.' + child;\n}\n\nexport default class RValue {\n\n\ttoJSON(){return this._value;}\n\n\tclone(){\n\n\t\tlet r = new RValue( this._value, this._id );\n\t\tr.source = this.source;\n\n\t\treturn r;\n\n\t}\n\n\t/**\n\t * @property {object} source - object that defined the value,\n\t * and may affect how the RValue is counted.\n\t */\n\tget source(){return this._source;}\n\tset source(v) {\n\t\tthis._source = v;\n\t\t//if ( !v ) this._source = null;\n\t\t//else this._source = v instanceof RValue ? v : v.value;\n\t}\n\n\t/**\n\t * @property {boolean} isRVal - simple test for RVal interface.\n\t */\n\tget isRVal(){ return true; }\n\n\t/**\n\t * @property {string} id\n\t */\n\tget id() { return this._id; }\n\tset id(v) { this._id = v; }\n\n\t/**\n\t * @property {number} value\n\t */\n\tget value() { return this._value; }\n\tset value(v) { this._value = v; }\n\n\t/**\n\t * @property {string} type\n\t */\n\tget type(){ return TYP_RVAL }\n\n\t/**\n\t * @returns {string}\n\t */\n\ttoString(){ return precise( this.value ); }\n\n\t/**\n\t * @returns {number}\n\t */\n\tvalueOf(){\n\t\treturn this._value;\n\t}\n\n\t/**\n\t *\n\t * @param {number} vars\n\t * @param {?string} path\n\t */\n\tconstructor( vars=0, path=null ){\n\n\t\tthis.id = path;\n\t\tthis._value = vars || 0;\n\n\t}\n\n\tadd(v) { this.value += v }\n\tset(v){ this.value = Number(v); }\n\n\tapply(mod,amt=1){\n\t\tthis.add(mod.value*amt);\n\t}\n\n\t/**\n\t * Apply standard modifier.\n\t * @param {Mod} mod\n\t * @param {number} amt\n\t */\n\taddMod( mod, amt ){\n\t\t// base rvalue does not accept modifiers.\n\t\tconsole.warn('ATTEMPT TO MOD RVAL: ' + this.id + ' mod: ' + mod.id );\n\t}\n\n\t/**\n\t * Get amount when applied as an effect.\n\t * @returns {number} this.valueOf() by default.\n\t */\n\tgetApply() {\n\t\t//console.log( this.id + ' getApply: ' + this.value );\n\t\treturn this.valueOf();\n\t}\n\n\t/**\n\t * Apply an unknown modifier.\n\t * @param {*} mod\n\t * @param {number} amt\n\t */\n\tapply(mod, amt) {\n\t\t// base rvalue does not accept modifiers.\n\t}\n\n\t/**\n\t * Get the new value if base and percent are changed\n\t * by the given amounts.\n\t * @param {number} delBonus - delta base.\n\t * @param {number} delPct - delta percent. ignored.\n\t * @returns {number} - new stat value.\n\t */\n\tdelValue( delBonus=0 ) {\n\t\treturn this._value + delBonus;\n\t}\n\n\t/**\n\t * Remove a standard modifier.\n\t * @param {Mod} mod\n\t */\n\tremoveMods( mod ){\n\t\t// ignored.\n\t}\n\n}","import RValue from \"./rvalue\";\n\n/**\n * @class {Scaler} Scaler -NOT a Scalar.\n * Scales input values before being added to raw RValues.\n * @note Scaler can only function properly if changes in value\n * are added with add()\n */\nexport default class Scaler extends RValue {\n\n\tget value(){return super.value;}\n\tset value(v){\n\t\t/** super.value +  necessary for Edge. :/ */\n\t\tsuper.value = super.value + (v - super.value)*(1+this.scale.pctTot);\n\t}\n\n\t/**\n\t * @property {Stat} scale - RValue percent that scales\n\t * positive numbers before adding to base value.\n\t */\n\tget scale(){return this._scale; }\n\tset scale(v){this._scale =v}\n\n\tconstructor( vars=0, path, scale=null ){\n\n\t\tsuper( Number(vars), path );\n\n\t\tthis.scale = scale || new RValue( 0, this.id + '.scale' );\n\n\t}\n\n\t/**\n\t * Set value with no scaling.\n\t * @param {number} v\n\t */\n\tset(v){\n\t\tsuper.value = typeof v === 'number' ? v : v.valueOf();\n\t}\n\n\t/**\n\t * add value without delta scaling.\n\t * @param {*} v\n\t */\n\taddUnscaled(v) {\n\t\tsuper.value += v;\n\t}\n\n\tapply(v) {\n\t\tthis.value = this.value + v;\n\t}\n\n}","import { TYP_STAT, TYP_RVAL } from '../consts';\nimport RValue from './rvalue';\n\nimport { precise } from '../../util/format';\n\n// number of times all stats recalculated this frame.\n/*var LoopCount = 0;\n\nexport function ShowLoops(){\n\n\tif ( LoopCount > 10 ) console.log('Loops: ' + LoopCount);\n\tLoopCount=0;\n}*/\n\n/**\n * Stat with a list of modifiers.\n */\nexport default class Stat extends RValue {\n\n\ttoJSON(){\n\t\treturn this._value;\n\t}\n\n\t/**\n\t * @returns {string}\n\t */\n\ttoString(){ return precise( this.value ); }\n\n\t/** @todo */\n\tset value(v){\n\t\tthis._value = v;\n\t}\n\t/**\n\t * @property {number} value\n\t */\n\tget value() {\n\n\t\t//let abs = Math.abs( this._base + this._mBase );\n\n\t\tlet bTot = this._value + this._mBase;\n\n\t\tif ( this._pos === true ) {\n\n\t\t\treturn Math.max( bTot + Math.abs(bTot)*(this._mPct ),0);\n\n\t\t} else return bTot + Math.abs(bTot)*(this._mPct);\n\n\t}\n\n\n\t/**\n\t * @returns {number}\n\t */\n\tvalueOf() {\n\n\t\tlet bTot = this._value + this._mBase;\n\n\t\tif ( this._pos === true ) {\n\n\t\t\treturn Math.max( bTot + Math.abs(bTot)*(this._mPct ),0);\n\n\t\t} else return bTot + Math.abs(bTot)*(this._mPct);\n\n\t}\n\n\t/**\n\t * @property {number} base\n\t */\n\tget base() { return this._value; }\n\tset base(v) { this._value = v; }\n\n\t/**\n\t * @property {number} bonus - total bonus to base, computed from mods.\n\t * @protected\n\t */\n\tget mBase(){return this._mBase; }\n\n\tset mBase(v){this._mBase = v; }\n\n\t/**\n\t * @property {number} mPct - mod pct bonuses, as decimal.\n\t * Does not count implicit starting 1\n\t * @protected\n\t */\n\tget mPct() { return this._mPct };\n\n\t/**\n\t * @property {number} pctTot - total percent added by mods.\n\t * Same as mPct for Stat, but different in Mod\n\t */\n\tget pctTot(){\n\t\treturn this._mPct;\n\t}\n\n\t/**\n\t * @property {.<string,Mod>} mods - mods applied to object.\n\t */\n\tget mods() { return this._mods; }\n\tset mods(v) {\n\n\t\tlet mods = {};\n\t\tfor( let p in v ) {\n\n\t\t\tvar mod = v[p];\n\t\t\tmods[p] = (mod instanceof Mod ) ? mod : new Mod( v[p] );\n\t\t}\n\t\tthis._mods = mods;\n\t}\n\n\t/**\n\t * @property {boolean} pos - restrict stat to positive values after mods.\n\t */\n\tget pos(){return this._pos; }\n\tset pos(v) { this._pos = v;}\n\n\tget type(){ return TYP_STAT }\n\n\n\t/**\n\t *\n\t * @param {Object|number} vars\n\t * @param {string} path\n\t */\n\tconstructor( vars=null, path, pos ) {\n\n\t\tsuper( 0, path );\n\n\t\tif ( vars ) {\n\n\t\t\tif ( typeof vars === 'object') {\n\n\t\t\t\tif ( vars.type === TYP_RVAL ) {\n\t\t\t\t\tthis.base = vars.value;\n\t\t\t\t} else {\n\t\t\t\t\tthis.base = vars.base;\n\t\t\t\t}\n\n\t\t\t} else if ( !isNaN(vars) ) this.base = Number(vars);\n\n\t\t}\n\n\t\tif ( pos ) this.pos = pos;\n\n\t\tif ( !this.base ) this.base = 0;\n\n\t\tthis._mBase = this._mPct = 0;\n\n\t\tif ( !this.mods ) this.mods = {};\n\n\t\tthis.recalc();\n\n\t}\n\n\t/**\n\t * @todo set modded value to match exactly?\n\t * @param {number|Stat} v\n\t */\n\tset(v) {\n\t\tthis.base = typeof v === 'number' ? v : v.base;\n\t}\n\n\t/**\n\t * Add amount to base stat.\n\t * @param {number} amt\n\t */\n\tadd( amt ) {\n\t\tsuper.value += amt;\n\t}\n\n\t/**\n\t * Apply a modifier to Stat, if the applied value can be a modifier.\n\t * If not, the stat is permanently modified by the mod value.\n\t * @param {Mod|number|Percent|Object} val\n\t * @param {number} [amt=1]\n\t */\n\tapply( val, amt=1 ) {\n\n\t\tif ( (val instanceof Stat) && val.id ) \n\t\t\treturn this.addMod( val, amt );\n\n\t\tif ( ( val instanceof Stat ) ) {\n\t\t\tconsole.log('STAT WITHOUT ID: ' + val );\n\t\t\tval = val._value + val._mBase;\n\t\t}\n\n\t\tif ( typeof val ==='number' ) {\n\n\t\t\tthis.base += amt*val;\n\t\t\t//deprec( this.id + ' mod: ' + mod );\n\t\t\tconsole.warn( this.id + ' adding: ' + val +'  DEPRECATED NEW base: ' + this.value );\n\n\t\t\treturn;\n\n\t\t} else if ( typeof val === 'object') {\n\n\t\t\t/// when an object has no id, must apply to base.\n\t\t\tthis.base += amt*( val.bonus || val.value || 0 );\n\n\t\t\tconsole.warn( this.id + ' DEPRECATED APPLY: ' + val + '  type: ' + val.constructor.name );\n\n\t\t\t//console.dir( val );\n\n\t\t} else {\n\t\t\tconsole.dir( val, 'unknown mod: ' + typeof val );\n\t\t}\n\n\n\t}\n\n\t/**\n\t * Apply permanent modifier to stat.\n\t * Used for instances.\n\t * @param {Stat} mod\n\t */\n\tperm( mod ) {\n\n\t\tconsole.warn( this.id + ' PERM MOD: ' + mod )\n\t\tif ( mod.countBonus ){\n\t\t\tthis.base += mod.countBonus;\n\t\t} else if ( typeof mod === 'number') {\n\t\t\tthis.base += mod;\n\t\t} else {\n\n\t\t}\n\n\t}\n\n\t/**\n\t *\n\t * @param {Mod} mod\n\t * @param {number} amt\n\t */\n\taddMod( mod, amt=1 ) {\n\n\t\tif ( !mod.id ) {\n\t\t\tconsole.dir( mod, 'NO MOD ID' );\n\t\t\tthis.apply(mod, amt );\n\t\t\treturn;\n\t\t}\n\n\t\t//this._mPct += amt*mod.pct;\n\t\t//this._mBase += amt*mod.bonus;\n\n\t\tif (amt != 0) this.mods[mod.id] = mod;\n\t\tthis.recalc();\n\n\t\t/*let cur = this.mods[ mod.id ];\n\t\tif ( cur === undefined ) {\n\t\t\tcur = this.mods[mod.id] = mod;\n\t\t}*/\n\n\n\t}\n\n\t/**\n\t *\n\t * @param {*} mod\n\t */\n\tremoveMods( mod ){\n\n\t\tconsole.log('REMOVE MOD: ' + mod.id);\n\n\t\tlet cur = this.mods[mod.id];\n\t\tif ( cur === undefined) return;\n\n\t\tthis.mods[mod.id] = undefined;\n\n\t\tthis.recalc();\n\n\t}\n\n\t/**\n\t * Get the new stat value if base and percent are changed\n\t * by the given amounts.\n\t * @param {number} delBonus - delta base.\n\t * @param {number} delPct - delta percent.\n\t * @returns {number} - new stat value.\n\t */\n\tdelValue( delBonus=0, delPct=0 ) {\n\t\treturn ( this._value + this._mBase + delBonus )*( 1 + this._mPct + delPct );\n\t}\n\n\t/**\n\t * Recalculate the total bonus and percent applied to stat.\n\t * @protected\n\t */\n\trecalc(){\n\n\t\tlet bonus = 0, pct = 0;\n\n\t\tfor( let p in this._mods ) {\n\n\t\t\tvar mod = this._mods[p];\n\t\t\tif (mod === undefined ) continue;\n\n\t\t\tpct += mod.countPct || 0;\n\t\t\tbonus += mod.countBonus || 0;\n\n\t\t}\n\n\t\tthis._mPct = pct;\n\t\tthis._mBase = bonus;\n\n\n\t}\n\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + ({\"102\":\"hall-ui\",\"123\":\"scraft-ui\",\"125\":\"minions-ui\",\"215\":\"bestiary-ui\",\"225\":\"raid-ui\",\"398\":\"bars-ui\",\"532\":\"spells-ui\",\"765\":\"skills-ui\",\"767\":\"inv-ui\",\"797\":\"remote\",\"811\":\"popups-ui\",\"812\":\"player-ui\",\"841\":\"home-ui\",\"887\":\"enchant-ui\",\"902\":\"potions-ui\",\"971\":\"equip-ui\"}[chunkId] || chunkId) + \".bundle.js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"js/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t543: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_name_\"] = self[\"webpackChunk_name_\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","/*!\n * Vue.js v2.6.14\n * (c) 2014-2021 Evan You\n * Released under the MIT License.\n */\n/*  */\n\nvar emptyObject = Object.freeze({});\n\n// These helpers produce better VM code in JS engines due to their\n// explicitness and function inlining.\nfunction isUndef (v) {\n  return v === undefined || v === null\n}\n\nfunction isDef (v) {\n  return v !== undefined && v !== null\n}\n\nfunction isTrue (v) {\n  return v === true\n}\n\nfunction isFalse (v) {\n  return v === false\n}\n\n/**\n * Check if value is primitive.\n */\nfunction isPrimitive (value) {\n  return (\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    // $flow-disable-line\n    typeof value === 'symbol' ||\n    typeof value === 'boolean'\n  )\n}\n\n/**\n * Quick object check - this is primarily used to tell\n * Objects from primitive values when we know the value\n * is a JSON-compliant type.\n */\nfunction isObject (obj) {\n  return obj !== null && typeof obj === 'object'\n}\n\n/**\n * Get the raw type string of a value, e.g., [object Object].\n */\nvar _toString = Object.prototype.toString;\n\nfunction toRawType (value) {\n  return _toString.call(value).slice(8, -1)\n}\n\n/**\n * Strict object type check. Only returns true\n * for plain JavaScript objects.\n */\nfunction isPlainObject (obj) {\n  return _toString.call(obj) === '[object Object]'\n}\n\nfunction isRegExp (v) {\n  return _toString.call(v) === '[object RegExp]'\n}\n\n/**\n * Check if val is a valid array index.\n */\nfunction isValidArrayIndex (val) {\n  var n = parseFloat(String(val));\n  return n >= 0 && Math.floor(n) === n && isFinite(val)\n}\n\nfunction isPromise (val) {\n  return (\n    isDef(val) &&\n    typeof val.then === 'function' &&\n    typeof val.catch === 'function'\n  )\n}\n\n/**\n * Convert a value to a string that is actually rendered.\n */\nfunction toString (val) {\n  return val == null\n    ? ''\n    : Array.isArray(val) || (isPlainObject(val) && val.toString === _toString)\n      ? JSON.stringify(val, null, 2)\n      : String(val)\n}\n\n/**\n * Convert an input value to a number for persistence.\n * If the conversion fails, return original string.\n */\nfunction toNumber (val) {\n  var n = parseFloat(val);\n  return isNaN(n) ? val : n\n}\n\n/**\n * Make a map and return a function for checking if a key\n * is in that map.\n */\nfunction makeMap (\n  str,\n  expectsLowerCase\n) {\n  var map = Object.create(null);\n  var list = str.split(',');\n  for (var i = 0; i < list.length; i++) {\n    map[list[i]] = true;\n  }\n  return expectsLowerCase\n    ? function (val) { return map[val.toLowerCase()]; }\n    : function (val) { return map[val]; }\n}\n\n/**\n * Check if a tag is a built-in tag.\n */\nvar isBuiltInTag = makeMap('slot,component', true);\n\n/**\n * Check if an attribute is a reserved attribute.\n */\nvar isReservedAttribute = makeMap('key,ref,slot,slot-scope,is');\n\n/**\n * Remove an item from an array.\n */\nfunction remove (arr, item) {\n  if (arr.length) {\n    var index = arr.indexOf(item);\n    if (index > -1) {\n      return arr.splice(index, 1)\n    }\n  }\n}\n\n/**\n * Check whether an object has the property.\n */\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwn (obj, key) {\n  return hasOwnProperty.call(obj, key)\n}\n\n/**\n * Create a cached version of a pure function.\n */\nfunction cached (fn) {\n  var cache = Object.create(null);\n  return (function cachedFn (str) {\n    var hit = cache[str];\n    return hit || (cache[str] = fn(str))\n  })\n}\n\n/**\n * Camelize a hyphen-delimited string.\n */\nvar camelizeRE = /-(\\w)/g;\nvar camelize = cached(function (str) {\n  return str.replace(camelizeRE, function (_, c) { return c ? c.toUpperCase() : ''; })\n});\n\n/**\n * Capitalize a string.\n */\nvar capitalize = cached(function (str) {\n  return str.charAt(0).toUpperCase() + str.slice(1)\n});\n\n/**\n * Hyphenate a camelCase string.\n */\nvar hyphenateRE = /\\B([A-Z])/g;\nvar hyphenate = cached(function (str) {\n  return str.replace(hyphenateRE, '-$1').toLowerCase()\n});\n\n/**\n * Simple bind polyfill for environments that do not support it,\n * e.g., PhantomJS 1.x. Technically, we don't need this anymore\n * since native bind is now performant enough in most browsers.\n * But removing it would mean breaking code that was able to run in\n * PhantomJS 1.x, so this must be kept for backward compatibility.\n */\n\n/* istanbul ignore next */\nfunction polyfillBind (fn, ctx) {\n  function boundFn (a) {\n    var l = arguments.length;\n    return l\n      ? l > 1\n        ? fn.apply(ctx, arguments)\n        : fn.call(ctx, a)\n      : fn.call(ctx)\n  }\n\n  boundFn._length = fn.length;\n  return boundFn\n}\n\nfunction nativeBind (fn, ctx) {\n  return fn.bind(ctx)\n}\n\nvar bind = Function.prototype.bind\n  ? nativeBind\n  : polyfillBind;\n\n/**\n * Convert an Array-like object to a real Array.\n */\nfunction toArray (list, start) {\n  start = start || 0;\n  var i = list.length - start;\n  var ret = new Array(i);\n  while (i--) {\n    ret[i] = list[i + start];\n  }\n  return ret\n}\n\n/**\n * Mix properties into target object.\n */\nfunction extend (to, _from) {\n  for (var key in _from) {\n    to[key] = _from[key];\n  }\n  return to\n}\n\n/**\n * Merge an Array of Objects into a single Object.\n */\nfunction toObject (arr) {\n  var res = {};\n  for (var i = 0; i < arr.length; i++) {\n    if (arr[i]) {\n      extend(res, arr[i]);\n    }\n  }\n  return res\n}\n\n/* eslint-disable no-unused-vars */\n\n/**\n * Perform no operation.\n * Stubbing args to make Flow happy without leaving useless transpiled code\n * with ...rest (https://flow.org/blog/2017/05/07/Strict-Function-Call-Arity/).\n */\nfunction noop (a, b, c) {}\n\n/**\n * Always return false.\n */\nvar no = function (a, b, c) { return false; };\n\n/* eslint-enable no-unused-vars */\n\n/**\n * Return the same value.\n */\nvar identity = function (_) { return _; };\n\n/**\n * Check if two values are loosely equal - that is,\n * if they are plain objects, do they have the same shape?\n */\nfunction looseEqual (a, b) {\n  if (a === b) { return true }\n  var isObjectA = isObject(a);\n  var isObjectB = isObject(b);\n  if (isObjectA && isObjectB) {\n    try {\n      var isArrayA = Array.isArray(a);\n      var isArrayB = Array.isArray(b);\n      if (isArrayA && isArrayB) {\n        return a.length === b.length && a.every(function (e, i) {\n          return looseEqual(e, b[i])\n        })\n      } else if (a instanceof Date && b instanceof Date) {\n        return a.getTime() === b.getTime()\n      } else if (!isArrayA && !isArrayB) {\n        var keysA = Object.keys(a);\n        var keysB = Object.keys(b);\n        return keysA.length === keysB.length && keysA.every(function (key) {\n          return looseEqual(a[key], b[key])\n        })\n      } else {\n        /* istanbul ignore next */\n        return false\n      }\n    } catch (e) {\n      /* istanbul ignore next */\n      return false\n    }\n  } else if (!isObjectA && !isObjectB) {\n    return String(a) === String(b)\n  } else {\n    return false\n  }\n}\n\n/**\n * Return the first index at which a loosely equal value can be\n * found in the array (if value is a plain object, the array must\n * contain an object of the same shape), or -1 if it is not present.\n */\nfunction looseIndexOf (arr, val) {\n  for (var i = 0; i < arr.length; i++) {\n    if (looseEqual(arr[i], val)) { return i }\n  }\n  return -1\n}\n\n/**\n * Ensure a function is called only once.\n */\nfunction once (fn) {\n  var called = false;\n  return function () {\n    if (!called) {\n      called = true;\n      fn.apply(this, arguments);\n    }\n  }\n}\n\nvar SSR_ATTR = 'data-server-rendered';\n\nvar ASSET_TYPES = [\n  'component',\n  'directive',\n  'filter'\n];\n\nvar LIFECYCLE_HOOKS = [\n  'beforeCreate',\n  'created',\n  'beforeMount',\n  'mounted',\n  'beforeUpdate',\n  'updated',\n  'beforeDestroy',\n  'destroyed',\n  'activated',\n  'deactivated',\n  'errorCaptured',\n  'serverPrefetch'\n];\n\n/*  */\n\n\n\nvar config = ({\n  /**\n   * Option merge strategies (used in core/util/options)\n   */\n  // $flow-disable-line\n  optionMergeStrategies: Object.create(null),\n\n  /**\n   * Whether to suppress warnings.\n   */\n  silent: false,\n\n  /**\n   * Show production mode tip message on boot?\n   */\n  productionTip: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to enable devtools\n   */\n  devtools: process.env.NODE_ENV !== 'production',\n\n  /**\n   * Whether to record perf\n   */\n  performance: false,\n\n  /**\n   * Error handler for watcher errors\n   */\n  errorHandler: null,\n\n  /**\n   * Warn handler for watcher warns\n   */\n  warnHandler: null,\n\n  /**\n   * Ignore certain custom elements\n   */\n  ignoredElements: [],\n\n  /**\n   * Custom user key aliases for v-on\n   */\n  // $flow-disable-line\n  keyCodes: Object.create(null),\n\n  /**\n   * Check if a tag is reserved so that it cannot be registered as a\n   * component. This is platform-dependent and may be overwritten.\n   */\n  isReservedTag: no,\n\n  /**\n   * Check if an attribute is reserved so that it cannot be used as a component\n   * prop. This is platform-dependent and may be overwritten.\n   */\n  isReservedAttr: no,\n\n  /**\n   * Check if a tag is an unknown element.\n   * Platform-dependent.\n   */\n  isUnknownElement: no,\n\n  /**\n   * Get the namespace of an element\n   */\n  getTagNamespace: noop,\n\n  /**\n   * Parse the real tag name for the specific platform.\n   */\n  parsePlatformTagName: identity,\n\n  /**\n   * Check if an attribute must be bound using property, e.g. value\n   * Platform-dependent.\n   */\n  mustUseProp: no,\n\n  /**\n   * Perform updates asynchronously. Intended to be used by Vue Test Utils\n   * This will significantly reduce performance if set to false.\n   */\n  async: true,\n\n  /**\n   * Exposed for legacy reasons\n   */\n  _lifecycleHooks: LIFECYCLE_HOOKS\n});\n\n/*  */\n\n/**\n * unicode letters used for parsing html tags, component names and property paths.\n * using https://www.w3.org/TR/html53/semantics-scripting.html#potentialcustomelementname\n * skipping \\u10000-\\uEFFFF due to it freezing up PhantomJS\n */\nvar unicodeRegExp = /a-zA-Z\\u00B7\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u203F-\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD/;\n\n/**\n * Check if a string starts with $ or _\n */\nfunction isReserved (str) {\n  var c = (str + '').charCodeAt(0);\n  return c === 0x24 || c === 0x5F\n}\n\n/**\n * Define a property.\n */\nfunction def (obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true\n  });\n}\n\n/**\n * Parse simple path.\n */\nvar bailRE = new RegExp((\"[^\" + (unicodeRegExp.source) + \".$_\\\\d]\"));\nfunction parsePath (path) {\n  if (bailRE.test(path)) {\n    return\n  }\n  var segments = path.split('.');\n  return function (obj) {\n    for (var i = 0; i < segments.length; i++) {\n      if (!obj) { return }\n      obj = obj[segments[i]];\n    }\n    return obj\n  }\n}\n\n/*  */\n\n// can we use __proto__?\nvar hasProto = '__proto__' in {};\n\n// Browser environment sniffing\nvar inBrowser = typeof window !== 'undefined';\nvar inWeex = typeof WXEnvironment !== 'undefined' && !!WXEnvironment.platform;\nvar weexPlatform = inWeex && WXEnvironment.platform.toLowerCase();\nvar UA = inBrowser && window.navigator.userAgent.toLowerCase();\nvar isIE = UA && /msie|trident/.test(UA);\nvar isIE9 = UA && UA.indexOf('msie 9.0') > 0;\nvar isEdge = UA && UA.indexOf('edge/') > 0;\nvar isAndroid = (UA && UA.indexOf('android') > 0) || (weexPlatform === 'android');\nvar isIOS = (UA && /iphone|ipad|ipod|ios/.test(UA)) || (weexPlatform === 'ios');\nvar isChrome = UA && /chrome\\/\\d+/.test(UA) && !isEdge;\nvar isPhantomJS = UA && /phantomjs/.test(UA);\nvar isFF = UA && UA.match(/firefox\\/(\\d+)/);\n\n// Firefox has a \"watch\" function on Object.prototype...\nvar nativeWatch = ({}).watch;\n\nvar supportsPassive = false;\nif (inBrowser) {\n  try {\n    var opts = {};\n    Object.defineProperty(opts, 'passive', ({\n      get: function get () {\n        /* istanbul ignore next */\n        supportsPassive = true;\n      }\n    })); // https://github.com/facebook/flow/issues/285\n    window.addEventListener('test-passive', null, opts);\n  } catch (e) {}\n}\n\n// this needs to be lazy-evaled because vue may be required before\n// vue-server-renderer can set VUE_ENV\nvar _isServer;\nvar isServerRendering = function () {\n  if (_isServer === undefined) {\n    /* istanbul ignore if */\n    if (!inBrowser && !inWeex && typeof global !== 'undefined') {\n      // detect presence of vue-server-renderer and avoid\n      // Webpack shimming the process\n      _isServer = global['process'] && global['process'].env.VUE_ENV === 'server';\n    } else {\n      _isServer = false;\n    }\n  }\n  return _isServer\n};\n\n// detect devtools\nvar devtools = inBrowser && window.__VUE_DEVTOOLS_GLOBAL_HOOK__;\n\n/* istanbul ignore next */\nfunction isNative (Ctor) {\n  return typeof Ctor === 'function' && /native code/.test(Ctor.toString())\n}\n\nvar hasSymbol =\n  typeof Symbol !== 'undefined' && isNative(Symbol) &&\n  typeof Reflect !== 'undefined' && isNative(Reflect.ownKeys);\n\nvar _Set;\n/* istanbul ignore if */ // $flow-disable-line\nif (typeof Set !== 'undefined' && isNative(Set)) {\n  // use native Set when available.\n  _Set = Set;\n} else {\n  // a non-standard Set polyfill that only works with primitive keys.\n  _Set = /*@__PURE__*/(function () {\n    function Set () {\n      this.set = Object.create(null);\n    }\n    Set.prototype.has = function has (key) {\n      return this.set[key] === true\n    };\n    Set.prototype.add = function add (key) {\n      this.set[key] = true;\n    };\n    Set.prototype.clear = function clear () {\n      this.set = Object.create(null);\n    };\n\n    return Set;\n  }());\n}\n\n/*  */\n\nvar warn = noop;\nvar tip = noop;\nvar generateComponentTrace = (noop); // work around flow check\nvar formatComponentName = (noop);\n\nif (process.env.NODE_ENV !== 'production') {\n  var hasConsole = typeof console !== 'undefined';\n  var classifyRE = /(?:^|[-_])(\\w)/g;\n  var classify = function (str) { return str\n    .replace(classifyRE, function (c) { return c.toUpperCase(); })\n    .replace(/[-_]/g, ''); };\n\n  warn = function (msg, vm) {\n    var trace = vm ? generateComponentTrace(vm) : '';\n\n    if (config.warnHandler) {\n      config.warnHandler.call(null, msg, vm, trace);\n    } else if (hasConsole && (!config.silent)) {\n      console.error((\"[Vue warn]: \" + msg + trace));\n    }\n  };\n\n  tip = function (msg, vm) {\n    if (hasConsole && (!config.silent)) {\n      console.warn(\"[Vue tip]: \" + msg + (\n        vm ? generateComponentTrace(vm) : ''\n      ));\n    }\n  };\n\n  formatComponentName = function (vm, includeFile) {\n    if (vm.$root === vm) {\n      return '<Root>'\n    }\n    var options = typeof vm === 'function' && vm.cid != null\n      ? vm.options\n      : vm._isVue\n        ? vm.$options || vm.constructor.options\n        : vm;\n    var name = options.name || options._componentTag;\n    var file = options.__file;\n    if (!name && file) {\n      var match = file.match(/([^/\\\\]+)\\.vue$/);\n      name = match && match[1];\n    }\n\n    return (\n      (name ? (\"<\" + (classify(name)) + \">\") : \"<Anonymous>\") +\n      (file && includeFile !== false ? (\" at \" + file) : '')\n    )\n  };\n\n  var repeat = function (str, n) {\n    var res = '';\n    while (n) {\n      if (n % 2 === 1) { res += str; }\n      if (n > 1) { str += str; }\n      n >>= 1;\n    }\n    return res\n  };\n\n  generateComponentTrace = function (vm) {\n    if (vm._isVue && vm.$parent) {\n      var tree = [];\n      var currentRecursiveSequence = 0;\n      while (vm) {\n        if (tree.length > 0) {\n          var last = tree[tree.length - 1];\n          if (last.constructor === vm.constructor) {\n            currentRecursiveSequence++;\n            vm = vm.$parent;\n            continue\n          } else if (currentRecursiveSequence > 0) {\n            tree[tree.length - 1] = [last, currentRecursiveSequence];\n            currentRecursiveSequence = 0;\n          }\n        }\n        tree.push(vm);\n        vm = vm.$parent;\n      }\n      return '\\n\\nfound in\\n\\n' + tree\n        .map(function (vm, i) { return (\"\" + (i === 0 ? '---> ' : repeat(' ', 5 + i * 2)) + (Array.isArray(vm)\n            ? ((formatComponentName(vm[0])) + \"... (\" + (vm[1]) + \" recursive calls)\")\n            : formatComponentName(vm))); })\n        .join('\\n')\n    } else {\n      return (\"\\n\\n(found in \" + (formatComponentName(vm)) + \")\")\n    }\n  };\n}\n\n/*  */\n\nvar uid = 0;\n\n/**\n * A dep is an observable that can have multiple\n * directives subscribing to it.\n */\nvar Dep = function Dep () {\n  this.id = uid++;\n  this.subs = [];\n};\n\nDep.prototype.addSub = function addSub (sub) {\n  this.subs.push(sub);\n};\n\nDep.prototype.removeSub = function removeSub (sub) {\n  remove(this.subs, sub);\n};\n\nDep.prototype.depend = function depend () {\n  if (Dep.target) {\n    Dep.target.addDep(this);\n  }\n};\n\nDep.prototype.notify = function notify () {\n  // stabilize the subscriber list first\n  var subs = this.subs.slice();\n  if (process.env.NODE_ENV !== 'production' && !config.async) {\n    // subs aren't sorted in scheduler if not running async\n    // we need to sort them now to make sure they fire in correct\n    // order\n    subs.sort(function (a, b) { return a.id - b.id; });\n  }\n  for (var i = 0, l = subs.length; i < l; i++) {\n    subs[i].update();\n  }\n};\n\n// The current target watcher being evaluated.\n// This is globally unique because only one watcher\n// can be evaluated at a time.\nDep.target = null;\nvar targetStack = [];\n\nfunction pushTarget (target) {\n  targetStack.push(target);\n  Dep.target = target;\n}\n\nfunction popTarget () {\n  targetStack.pop();\n  Dep.target = targetStack[targetStack.length - 1];\n}\n\n/*  */\n\nvar VNode = function VNode (\n  tag,\n  data,\n  children,\n  text,\n  elm,\n  context,\n  componentOptions,\n  asyncFactory\n) {\n  this.tag = tag;\n  this.data = data;\n  this.children = children;\n  this.text = text;\n  this.elm = elm;\n  this.ns = undefined;\n  this.context = context;\n  this.fnContext = undefined;\n  this.fnOptions = undefined;\n  this.fnScopeId = undefined;\n  this.key = data && data.key;\n  this.componentOptions = componentOptions;\n  this.componentInstance = undefined;\n  this.parent = undefined;\n  this.raw = false;\n  this.isStatic = false;\n  this.isRootInsert = true;\n  this.isComment = false;\n  this.isCloned = false;\n  this.isOnce = false;\n  this.asyncFactory = asyncFactory;\n  this.asyncMeta = undefined;\n  this.isAsyncPlaceholder = false;\n};\n\nvar prototypeAccessors = { child: { configurable: true } };\n\n// DEPRECATED: alias for componentInstance for backwards compat.\n/* istanbul ignore next */\nprototypeAccessors.child.get = function () {\n  return this.componentInstance\n};\n\nObject.defineProperties( VNode.prototype, prototypeAccessors );\n\nvar createEmptyVNode = function (text) {\n  if ( text === void 0 ) text = '';\n\n  var node = new VNode();\n  node.text = text;\n  node.isComment = true;\n  return node\n};\n\nfunction createTextVNode (val) {\n  return new VNode(undefined, undefined, undefined, String(val))\n}\n\n// optimized shallow clone\n// used for static nodes and slot nodes because they may be reused across\n// multiple renders, cloning them avoids errors when DOM manipulations rely\n// on their elm reference.\nfunction cloneVNode (vnode) {\n  var cloned = new VNode(\n    vnode.tag,\n    vnode.data,\n    // #7975\n    // clone children array to avoid mutating original in case of cloning\n    // a child.\n    vnode.children && vnode.children.slice(),\n    vnode.text,\n    vnode.elm,\n    vnode.context,\n    vnode.componentOptions,\n    vnode.asyncFactory\n  );\n  cloned.ns = vnode.ns;\n  cloned.isStatic = vnode.isStatic;\n  cloned.key = vnode.key;\n  cloned.isComment = vnode.isComment;\n  cloned.fnContext = vnode.fnContext;\n  cloned.fnOptions = vnode.fnOptions;\n  cloned.fnScopeId = vnode.fnScopeId;\n  cloned.asyncMeta = vnode.asyncMeta;\n  cloned.isCloned = true;\n  return cloned\n}\n\n/*\n * not type checking this file because flow doesn't play well with\n * dynamically accessing methods on Array prototype\n */\n\nvar arrayProto = Array.prototype;\nvar arrayMethods = Object.create(arrayProto);\n\nvar methodsToPatch = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'sort',\n  'reverse'\n];\n\n/**\n * Intercept mutating methods and emit events\n */\nmethodsToPatch.forEach(function (method) {\n  // cache original method\n  var original = arrayProto[method];\n  def(arrayMethods, method, function mutator () {\n    var args = [], len = arguments.length;\n    while ( len-- ) args[ len ] = arguments[ len ];\n\n    var result = original.apply(this, args);\n    var ob = this.__ob__;\n    var inserted;\n    switch (method) {\n      case 'push':\n      case 'unshift':\n        inserted = args;\n        break\n      case 'splice':\n        inserted = args.slice(2);\n        break\n    }\n    if (inserted) { ob.observeArray(inserted); }\n    // notify change\n    ob.dep.notify();\n    return result\n  });\n});\n\n/*  */\n\nvar arrayKeys = Object.getOwnPropertyNames(arrayMethods);\n\n/**\n * In some cases we may want to disable observation inside a component's\n * update computation.\n */\nvar shouldObserve = true;\n\nfunction toggleObserving (value) {\n  shouldObserve = value;\n}\n\n/**\n * Observer class that is attached to each observed\n * object. Once attached, the observer converts the target\n * object's property keys into getter/setters that\n * collect dependencies and dispatch updates.\n */\nvar Observer = function Observer (value) {\n  this.value = value;\n  this.dep = new Dep();\n  this.vmCount = 0;\n  def(value, '__ob__', this);\n  if (Array.isArray(value)) {\n    if (hasProto) {\n      protoAugment(value, arrayMethods);\n    } else {\n      copyAugment(value, arrayMethods, arrayKeys);\n    }\n    this.observeArray(value);\n  } else {\n    this.walk(value);\n  }\n};\n\n/**\n * Walk through all properties and convert them into\n * getter/setters. This method should only be called when\n * value type is Object.\n */\nObserver.prototype.walk = function walk (obj) {\n  var keys = Object.keys(obj);\n  for (var i = 0; i < keys.length; i++) {\n    defineReactive$$1(obj, keys[i]);\n  }\n};\n\n/**\n * Observe a list of Array items.\n */\nObserver.prototype.observeArray = function observeArray (items) {\n  for (var i = 0, l = items.length; i < l; i++) {\n    observe(items[i]);\n  }\n};\n\n// helpers\n\n/**\n * Augment a target Object or Array by intercepting\n * the prototype chain using __proto__\n */\nfunction protoAugment (target, src) {\n  /* eslint-disable no-proto */\n  target.__proto__ = src;\n  /* eslint-enable no-proto */\n}\n\n/**\n * Augment a target Object or Array by defining\n * hidden properties.\n */\n/* istanbul ignore next */\nfunction copyAugment (target, src, keys) {\n  for (var i = 0, l = keys.length; i < l; i++) {\n    var key = keys[i];\n    def(target, key, src[key]);\n  }\n}\n\n/**\n * Attempt to create an observer instance for a value,\n * returns the new observer if successfully observed,\n * or the existing observer if the value already has one.\n */\nfunction observe (value, asRootData) {\n  if (!isObject(value) || value instanceof VNode) {\n    return\n  }\n  var ob;\n  if (hasOwn(value, '__ob__') && value.__ob__ instanceof Observer) {\n    ob = value.__ob__;\n  } else if (\n    shouldObserve &&\n    !isServerRendering() &&\n    (Array.isArray(value) || isPlainObject(value)) &&\n    Object.isExtensible(value) &&\n    !value._isVue\n  ) {\n    ob = new Observer(value);\n  }\n  if (asRootData && ob) {\n    ob.vmCount++;\n  }\n  return ob\n}\n\n/**\n * Define a reactive property on an Object.\n */\nfunction defineReactive$$1 (\n  obj,\n  key,\n  val,\n  customSetter,\n  shallow\n) {\n  var dep = new Dep();\n\n  var property = Object.getOwnPropertyDescriptor(obj, key);\n  if (property && property.configurable === false) {\n    return\n  }\n\n  // cater for pre-defined getter/setters\n  var getter = property && property.get;\n  var setter = property && property.set;\n  if ((!getter || setter) && arguments.length === 2) {\n    val = obj[key];\n  }\n\n  var childOb = !shallow && observe(val);\n  Object.defineProperty(obj, key, {\n    enumerable: true,\n    configurable: true,\n    get: function reactiveGetter () {\n      var value = getter ? getter.call(obj) : val;\n      if (Dep.target) {\n        dep.depend();\n        if (childOb) {\n          childOb.dep.depend();\n          if (Array.isArray(value)) {\n            dependArray(value);\n          }\n        }\n      }\n      return value\n    },\n    set: function reactiveSetter (newVal) {\n      var value = getter ? getter.call(obj) : val;\n      /* eslint-disable no-self-compare */\n      if (newVal === value || (newVal !== newVal && value !== value)) {\n        return\n      }\n      /* eslint-enable no-self-compare */\n      if (process.env.NODE_ENV !== 'production' && customSetter) {\n        customSetter();\n      }\n      // #7981: for accessor properties without setter\n      if (getter && !setter) { return }\n      if (setter) {\n        setter.call(obj, newVal);\n      } else {\n        val = newVal;\n      }\n      childOb = !shallow && observe(newVal);\n      dep.notify();\n    }\n  });\n}\n\n/**\n * Set a property on an object. Adds the new property and\n * triggers change notification if the property doesn't\n * already exist.\n */\nfunction set (target, key, val) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot set reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.length = Math.max(target.length, key);\n    target.splice(key, 1, val);\n    return val\n  }\n  if (key in target && !(key in Object.prototype)) {\n    target[key] = val;\n    return val\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid adding reactive properties to a Vue instance or its root $data ' +\n      'at runtime - declare it upfront in the data option.'\n    );\n    return val\n  }\n  if (!ob) {\n    target[key] = val;\n    return val\n  }\n  defineReactive$$1(ob.value, key, val);\n  ob.dep.notify();\n  return val\n}\n\n/**\n * Delete a property and trigger change if necessary.\n */\nfunction del (target, key) {\n  if (process.env.NODE_ENV !== 'production' &&\n    (isUndef(target) || isPrimitive(target))\n  ) {\n    warn((\"Cannot delete reactive property on undefined, null, or primitive value: \" + ((target))));\n  }\n  if (Array.isArray(target) && isValidArrayIndex(key)) {\n    target.splice(key, 1);\n    return\n  }\n  var ob = (target).__ob__;\n  if (target._isVue || (ob && ob.vmCount)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      'Avoid deleting properties on a Vue instance or its root $data ' +\n      '- just set it to null.'\n    );\n    return\n  }\n  if (!hasOwn(target, key)) {\n    return\n  }\n  delete target[key];\n  if (!ob) {\n    return\n  }\n  ob.dep.notify();\n}\n\n/**\n * Collect dependencies on array elements when the array is touched, since\n * we cannot intercept array element access like property getters.\n */\nfunction dependArray (value) {\n  for (var e = (void 0), i = 0, l = value.length; i < l; i++) {\n    e = value[i];\n    e && e.__ob__ && e.__ob__.dep.depend();\n    if (Array.isArray(e)) {\n      dependArray(e);\n    }\n  }\n}\n\n/*  */\n\n/**\n * Option overwriting strategies are functions that handle\n * how to merge a parent option value and a child option\n * value into the final value.\n */\nvar strats = config.optionMergeStrategies;\n\n/**\n * Options with restrictions\n */\nif (process.env.NODE_ENV !== 'production') {\n  strats.el = strats.propsData = function (parent, child, vm, key) {\n    if (!vm) {\n      warn(\n        \"option \\\"\" + key + \"\\\" can only be used during instance \" +\n        'creation with the `new` keyword.'\n      );\n    }\n    return defaultStrat(parent, child)\n  };\n}\n\n/**\n * Helper that recursively merges two data objects together.\n */\nfunction mergeData (to, from) {\n  if (!from) { return to }\n  var key, toVal, fromVal;\n\n  var keys = hasSymbol\n    ? Reflect.ownKeys(from)\n    : Object.keys(from);\n\n  for (var i = 0; i < keys.length; i++) {\n    key = keys[i];\n    // in case the object is already observed...\n    if (key === '__ob__') { continue }\n    toVal = to[key];\n    fromVal = from[key];\n    if (!hasOwn(to, key)) {\n      set(to, key, fromVal);\n    } else if (\n      toVal !== fromVal &&\n      isPlainObject(toVal) &&\n      isPlainObject(fromVal)\n    ) {\n      mergeData(toVal, fromVal);\n    }\n  }\n  return to\n}\n\n/**\n * Data\n */\nfunction mergeDataOrFn (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    // in a Vue.extend merge, both should be functions\n    if (!childVal) {\n      return parentVal\n    }\n    if (!parentVal) {\n      return childVal\n    }\n    // when parentVal & childVal are both present,\n    // we need to return a function that returns the\n    // merged result of both functions... no need to\n    // check if parentVal is a function here because\n    // it has to be a function to pass previous merges.\n    return function mergedDataFn () {\n      return mergeData(\n        typeof childVal === 'function' ? childVal.call(this, this) : childVal,\n        typeof parentVal === 'function' ? parentVal.call(this, this) : parentVal\n      )\n    }\n  } else {\n    return function mergedInstanceDataFn () {\n      // instance merge\n      var instanceData = typeof childVal === 'function'\n        ? childVal.call(vm, vm)\n        : childVal;\n      var defaultData = typeof parentVal === 'function'\n        ? parentVal.call(vm, vm)\n        : parentVal;\n      if (instanceData) {\n        return mergeData(instanceData, defaultData)\n      } else {\n        return defaultData\n      }\n    }\n  }\n}\n\nstrats.data = function (\n  parentVal,\n  childVal,\n  vm\n) {\n  if (!vm) {\n    if (childVal && typeof childVal !== 'function') {\n      process.env.NODE_ENV !== 'production' && warn(\n        'The \"data\" option should be a function ' +\n        'that returns a per-instance value in component ' +\n        'definitions.',\n        vm\n      );\n\n      return parentVal\n    }\n    return mergeDataOrFn(parentVal, childVal)\n  }\n\n  return mergeDataOrFn(parentVal, childVal, vm)\n};\n\n/**\n * Hooks and props are merged as arrays.\n */\nfunction mergeHook (\n  parentVal,\n  childVal\n) {\n  var res = childVal\n    ? parentVal\n      ? parentVal.concat(childVal)\n      : Array.isArray(childVal)\n        ? childVal\n        : [childVal]\n    : parentVal;\n  return res\n    ? dedupeHooks(res)\n    : res\n}\n\nfunction dedupeHooks (hooks) {\n  var res = [];\n  for (var i = 0; i < hooks.length; i++) {\n    if (res.indexOf(hooks[i]) === -1) {\n      res.push(hooks[i]);\n    }\n  }\n  return res\n}\n\nLIFECYCLE_HOOKS.forEach(function (hook) {\n  strats[hook] = mergeHook;\n});\n\n/**\n * Assets\n *\n * When a vm is present (instance creation), we need to do\n * a three-way merge between constructor options, instance\n * options and parent options.\n */\nfunction mergeAssets (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  var res = Object.create(parentVal || null);\n  if (childVal) {\n    process.env.NODE_ENV !== 'production' && assertObjectType(key, childVal, vm);\n    return extend(res, childVal)\n  } else {\n    return res\n  }\n}\n\nASSET_TYPES.forEach(function (type) {\n  strats[type + 's'] = mergeAssets;\n});\n\n/**\n * Watchers.\n *\n * Watchers hashes should not overwrite one\n * another, so we merge them as arrays.\n */\nstrats.watch = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  // work around Firefox's Object.prototype.watch...\n  if (parentVal === nativeWatch) { parentVal = undefined; }\n  if (childVal === nativeWatch) { childVal = undefined; }\n  /* istanbul ignore if */\n  if (!childVal) { return Object.create(parentVal || null) }\n  if (process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = {};\n  extend(ret, parentVal);\n  for (var key$1 in childVal) {\n    var parent = ret[key$1];\n    var child = childVal[key$1];\n    if (parent && !Array.isArray(parent)) {\n      parent = [parent];\n    }\n    ret[key$1] = parent\n      ? parent.concat(child)\n      : Array.isArray(child) ? child : [child];\n  }\n  return ret\n};\n\n/**\n * Other object hashes.\n */\nstrats.props =\nstrats.methods =\nstrats.inject =\nstrats.computed = function (\n  parentVal,\n  childVal,\n  vm,\n  key\n) {\n  if (childVal && process.env.NODE_ENV !== 'production') {\n    assertObjectType(key, childVal, vm);\n  }\n  if (!parentVal) { return childVal }\n  var ret = Object.create(null);\n  extend(ret, parentVal);\n  if (childVal) { extend(ret, childVal); }\n  return ret\n};\nstrats.provide = mergeDataOrFn;\n\n/**\n * Default strategy.\n */\nvar defaultStrat = function (parentVal, childVal) {\n  return childVal === undefined\n    ? parentVal\n    : childVal\n};\n\n/**\n * Validate component names\n */\nfunction checkComponents (options) {\n  for (var key in options.components) {\n    validateComponentName(key);\n  }\n}\n\nfunction validateComponentName (name) {\n  if (!new RegExp((\"^[a-zA-Z][\\\\-\\\\.0-9_\" + (unicodeRegExp.source) + \"]*$\")).test(name)) {\n    warn(\n      'Invalid component name: \"' + name + '\". Component names ' +\n      'should conform to valid custom element name in html5 specification.'\n    );\n  }\n  if (isBuiltInTag(name) || config.isReservedTag(name)) {\n    warn(\n      'Do not use built-in or reserved HTML elements as component ' +\n      'id: ' + name\n    );\n  }\n}\n\n/**\n * Ensure all props option syntax are normalized into the\n * Object-based format.\n */\nfunction normalizeProps (options, vm) {\n  var props = options.props;\n  if (!props) { return }\n  var res = {};\n  var i, val, name;\n  if (Array.isArray(props)) {\n    i = props.length;\n    while (i--) {\n      val = props[i];\n      if (typeof val === 'string') {\n        name = camelize(val);\n        res[name] = { type: null };\n      } else if (process.env.NODE_ENV !== 'production') {\n        warn('props must be strings when using array syntax.');\n      }\n    }\n  } else if (isPlainObject(props)) {\n    for (var key in props) {\n      val = props[key];\n      name = camelize(key);\n      res[name] = isPlainObject(val)\n        ? val\n        : { type: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"props\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(props)) + \".\",\n      vm\n    );\n  }\n  options.props = res;\n}\n\n/**\n * Normalize all injections into Object-based format\n */\nfunction normalizeInject (options, vm) {\n  var inject = options.inject;\n  if (!inject) { return }\n  var normalized = options.inject = {};\n  if (Array.isArray(inject)) {\n    for (var i = 0; i < inject.length; i++) {\n      normalized[inject[i]] = { from: inject[i] };\n    }\n  } else if (isPlainObject(inject)) {\n    for (var key in inject) {\n      var val = inject[key];\n      normalized[key] = isPlainObject(val)\n        ? extend({ from: key }, val)\n        : { from: val };\n    }\n  } else if (process.env.NODE_ENV !== 'production') {\n    warn(\n      \"Invalid value for option \\\"inject\\\": expected an Array or an Object, \" +\n      \"but got \" + (toRawType(inject)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Normalize raw function directives into object format.\n */\nfunction normalizeDirectives (options) {\n  var dirs = options.directives;\n  if (dirs) {\n    for (var key in dirs) {\n      var def$$1 = dirs[key];\n      if (typeof def$$1 === 'function') {\n        dirs[key] = { bind: def$$1, update: def$$1 };\n      }\n    }\n  }\n}\n\nfunction assertObjectType (name, value, vm) {\n  if (!isPlainObject(value)) {\n    warn(\n      \"Invalid value for option \\\"\" + name + \"\\\": expected an Object, \" +\n      \"but got \" + (toRawType(value)) + \".\",\n      vm\n    );\n  }\n}\n\n/**\n * Merge two option objects into a new one.\n * Core utility used in both instantiation and inheritance.\n */\nfunction mergeOptions (\n  parent,\n  child,\n  vm\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    checkComponents(child);\n  }\n\n  if (typeof child === 'function') {\n    child = child.options;\n  }\n\n  normalizeProps(child, vm);\n  normalizeInject(child, vm);\n  normalizeDirectives(child);\n\n  // Apply extends and mixins on the child options,\n  // but only if it is a raw options object that isn't\n  // the result of another mergeOptions call.\n  // Only merged options has the _base property.\n  if (!child._base) {\n    if (child.extends) {\n      parent = mergeOptions(parent, child.extends, vm);\n    }\n    if (child.mixins) {\n      for (var i = 0, l = child.mixins.length; i < l; i++) {\n        parent = mergeOptions(parent, child.mixins[i], vm);\n      }\n    }\n  }\n\n  var options = {};\n  var key;\n  for (key in parent) {\n    mergeField(key);\n  }\n  for (key in child) {\n    if (!hasOwn(parent, key)) {\n      mergeField(key);\n    }\n  }\n  function mergeField (key) {\n    var strat = strats[key] || defaultStrat;\n    options[key] = strat(parent[key], child[key], vm, key);\n  }\n  return options\n}\n\n/**\n * Resolve an asset.\n * This function is used because child instances need access\n * to assets defined in its ancestor chain.\n */\nfunction resolveAsset (\n  options,\n  type,\n  id,\n  warnMissing\n) {\n  /* istanbul ignore if */\n  if (typeof id !== 'string') {\n    return\n  }\n  var assets = options[type];\n  // check local registration variations first\n  if (hasOwn(assets, id)) { return assets[id] }\n  var camelizedId = camelize(id);\n  if (hasOwn(assets, camelizedId)) { return assets[camelizedId] }\n  var PascalCaseId = capitalize(camelizedId);\n  if (hasOwn(assets, PascalCaseId)) { return assets[PascalCaseId] }\n  // fallback to prototype chain\n  var res = assets[id] || assets[camelizedId] || assets[PascalCaseId];\n  if (process.env.NODE_ENV !== 'production' && warnMissing && !res) {\n    warn(\n      'Failed to resolve ' + type.slice(0, -1) + ': ' + id,\n      options\n    );\n  }\n  return res\n}\n\n/*  */\n\n\n\nfunction validateProp (\n  key,\n  propOptions,\n  propsData,\n  vm\n) {\n  var prop = propOptions[key];\n  var absent = !hasOwn(propsData, key);\n  var value = propsData[key];\n  // boolean casting\n  var booleanIndex = getTypeIndex(Boolean, prop.type);\n  if (booleanIndex > -1) {\n    if (absent && !hasOwn(prop, 'default')) {\n      value = false;\n    } else if (value === '' || value === hyphenate(key)) {\n      // only cast empty string / same name to boolean if\n      // boolean has higher priority\n      var stringIndex = getTypeIndex(String, prop.type);\n      if (stringIndex < 0 || booleanIndex < stringIndex) {\n        value = true;\n      }\n    }\n  }\n  // check default value\n  if (value === undefined) {\n    value = getPropDefaultValue(vm, prop, key);\n    // since the default value is a fresh copy,\n    // make sure to observe it.\n    var prevShouldObserve = shouldObserve;\n    toggleObserving(true);\n    observe(value);\n    toggleObserving(prevShouldObserve);\n  }\n  if (\n    process.env.NODE_ENV !== 'production' &&\n    // skip validation for weex recycle-list child component props\n    !(false)\n  ) {\n    assertProp(prop, key, value, vm, absent);\n  }\n  return value\n}\n\n/**\n * Get the default value of a prop.\n */\nfunction getPropDefaultValue (vm, prop, key) {\n  // no default, return undefined\n  if (!hasOwn(prop, 'default')) {\n    return undefined\n  }\n  var def = prop.default;\n  // warn against non-factory defaults for Object & Array\n  if (process.env.NODE_ENV !== 'production' && isObject(def)) {\n    warn(\n      'Invalid default value for prop \"' + key + '\": ' +\n      'Props with type Object/Array must use a factory function ' +\n      'to return the default value.',\n      vm\n    );\n  }\n  // the raw prop value was also undefined from previous render,\n  // return previous default value to avoid unnecessary watcher trigger\n  if (vm && vm.$options.propsData &&\n    vm.$options.propsData[key] === undefined &&\n    vm._props[key] !== undefined\n  ) {\n    return vm._props[key]\n  }\n  // call factory function for non-Function types\n  // a value is Function if its prototype is function even across different execution context\n  return typeof def === 'function' && getType(prop.type) !== 'Function'\n    ? def.call(vm)\n    : def\n}\n\n/**\n * Assert whether a prop is valid.\n */\nfunction assertProp (\n  prop,\n  name,\n  value,\n  vm,\n  absent\n) {\n  if (prop.required && absent) {\n    warn(\n      'Missing required prop: \"' + name + '\"',\n      vm\n    );\n    return\n  }\n  if (value == null && !prop.required) {\n    return\n  }\n  var type = prop.type;\n  var valid = !type || type === true;\n  var expectedTypes = [];\n  if (type) {\n    if (!Array.isArray(type)) {\n      type = [type];\n    }\n    for (var i = 0; i < type.length && !valid; i++) {\n      var assertedType = assertType(value, type[i], vm);\n      expectedTypes.push(assertedType.expectedType || '');\n      valid = assertedType.valid;\n    }\n  }\n\n  var haveExpectedTypes = expectedTypes.some(function (t) { return t; });\n  if (!valid && haveExpectedTypes) {\n    warn(\n      getInvalidTypeMessage(name, value, expectedTypes),\n      vm\n    );\n    return\n  }\n  var validator = prop.validator;\n  if (validator) {\n    if (!validator(value)) {\n      warn(\n        'Invalid prop: custom validator check failed for prop \"' + name + '\".',\n        vm\n      );\n    }\n  }\n}\n\nvar simpleCheckRE = /^(String|Number|Boolean|Function|Symbol|BigInt)$/;\n\nfunction assertType (value, type, vm) {\n  var valid;\n  var expectedType = getType(type);\n  if (simpleCheckRE.test(expectedType)) {\n    var t = typeof value;\n    valid = t === expectedType.toLowerCase();\n    // for primitive wrapper objects\n    if (!valid && t === 'object') {\n      valid = value instanceof type;\n    }\n  } else if (expectedType === 'Object') {\n    valid = isPlainObject(value);\n  } else if (expectedType === 'Array') {\n    valid = Array.isArray(value);\n  } else {\n    try {\n      valid = value instanceof type;\n    } catch (e) {\n      warn('Invalid prop type: \"' + String(type) + '\" is not a constructor', vm);\n      valid = false;\n    }\n  }\n  return {\n    valid: valid,\n    expectedType: expectedType\n  }\n}\n\nvar functionTypeCheckRE = /^\\s*function (\\w+)/;\n\n/**\n * Use function string name to check built-in types,\n * because a simple equality check will fail when running\n * across different vms / iframes.\n */\nfunction getType (fn) {\n  var match = fn && fn.toString().match(functionTypeCheckRE);\n  return match ? match[1] : ''\n}\n\nfunction isSameType (a, b) {\n  return getType(a) === getType(b)\n}\n\nfunction getTypeIndex (type, expectedTypes) {\n  if (!Array.isArray(expectedTypes)) {\n    return isSameType(expectedTypes, type) ? 0 : -1\n  }\n  for (var i = 0, len = expectedTypes.length; i < len; i++) {\n    if (isSameType(expectedTypes[i], type)) {\n      return i\n    }\n  }\n  return -1\n}\n\nfunction getInvalidTypeMessage (name, value, expectedTypes) {\n  var message = \"Invalid prop: type check failed for prop \\\"\" + name + \"\\\".\" +\n    \" Expected \" + (expectedTypes.map(capitalize).join(', '));\n  var expectedType = expectedTypes[0];\n  var receivedType = toRawType(value);\n  // check if we need to specify expected value\n  if (\n    expectedTypes.length === 1 &&\n    isExplicable(expectedType) &&\n    isExplicable(typeof value) &&\n    !isBoolean(expectedType, receivedType)\n  ) {\n    message += \" with value \" + (styleValue(value, expectedType));\n  }\n  message += \", got \" + receivedType + \" \";\n  // check if we need to specify received value\n  if (isExplicable(receivedType)) {\n    message += \"with value \" + (styleValue(value, receivedType)) + \".\";\n  }\n  return message\n}\n\nfunction styleValue (value, type) {\n  if (type === 'String') {\n    return (\"\\\"\" + value + \"\\\"\")\n  } else if (type === 'Number') {\n    return (\"\" + (Number(value)))\n  } else {\n    return (\"\" + value)\n  }\n}\n\nvar EXPLICABLE_TYPES = ['string', 'number', 'boolean'];\nfunction isExplicable (value) {\n  return EXPLICABLE_TYPES.some(function (elem) { return value.toLowerCase() === elem; })\n}\n\nfunction isBoolean () {\n  var args = [], len = arguments.length;\n  while ( len-- ) args[ len ] = arguments[ len ];\n\n  return args.some(function (elem) { return elem.toLowerCase() === 'boolean'; })\n}\n\n/*  */\n\nfunction handleError (err, vm, info) {\n  // Deactivate deps tracking while processing error handler to avoid possible infinite rendering.\n  // See: https://github.com/vuejs/vuex/issues/1505\n  pushTarget();\n  try {\n    if (vm) {\n      var cur = vm;\n      while ((cur = cur.$parent)) {\n        var hooks = cur.$options.errorCaptured;\n        if (hooks) {\n          for (var i = 0; i < hooks.length; i++) {\n            try {\n              var capture = hooks[i].call(cur, err, vm, info) === false;\n              if (capture) { return }\n            } catch (e) {\n              globalHandleError(e, cur, 'errorCaptured hook');\n            }\n          }\n        }\n      }\n    }\n    globalHandleError(err, vm, info);\n  } finally {\n    popTarget();\n  }\n}\n\nfunction invokeWithErrorHandling (\n  handler,\n  context,\n  args,\n  vm,\n  info\n) {\n  var res;\n  try {\n    res = args ? handler.apply(context, args) : handler.call(context);\n    if (res && !res._isVue && isPromise(res) && !res._handled) {\n      res.catch(function (e) { return handleError(e, vm, info + \" (Promise/async)\"); });\n      // issue #9511\n      // avoid catch triggering multiple times when nested calls\n      res._handled = true;\n    }\n  } catch (e) {\n    handleError(e, vm, info);\n  }\n  return res\n}\n\nfunction globalHandleError (err, vm, info) {\n  if (config.errorHandler) {\n    try {\n      return config.errorHandler.call(null, err, vm, info)\n    } catch (e) {\n      // if the user intentionally throws the original error in the handler,\n      // do not log it twice\n      if (e !== err) {\n        logError(e, null, 'config.errorHandler');\n      }\n    }\n  }\n  logError(err, vm, info);\n}\n\nfunction logError (err, vm, info) {\n  if (process.env.NODE_ENV !== 'production') {\n    warn((\"Error in \" + info + \": \\\"\" + (err.toString()) + \"\\\"\"), vm);\n  }\n  /* istanbul ignore else */\n  if ((inBrowser || inWeex) && typeof console !== 'undefined') {\n    console.error(err);\n  } else {\n    throw err\n  }\n}\n\n/*  */\n\nvar isUsingMicroTask = false;\n\nvar callbacks = [];\nvar pending = false;\n\nfunction flushCallbacks () {\n  pending = false;\n  var copies = callbacks.slice(0);\n  callbacks.length = 0;\n  for (var i = 0; i < copies.length; i++) {\n    copies[i]();\n  }\n}\n\n// Here we have async deferring wrappers using microtasks.\n// In 2.5 we used (macro) tasks (in combination with microtasks).\n// However, it has subtle problems when state is changed right before repaint\n// (e.g. #6813, out-in transitions).\n// Also, using (macro) tasks in event handler would cause some weird behaviors\n// that cannot be circumvented (e.g. #7109, #7153, #7546, #7834, #8109).\n// So we now use microtasks everywhere, again.\n// A major drawback of this tradeoff is that there are some scenarios\n// where microtasks have too high a priority and fire in between supposedly\n// sequential events (e.g. #4521, #6690, which have workarounds)\n// or even between bubbling of the same event (#6566).\nvar timerFunc;\n\n// The nextTick behavior leverages the microtask queue, which can be accessed\n// via either native Promise.then or MutationObserver.\n// MutationObserver has wider support, however it is seriously bugged in\n// UIWebView in iOS >= 9.3.3 when triggered in touch event handlers. It\n// completely stops working after triggering a few times... so, if native\n// Promise is available, we will use it:\n/* istanbul ignore next, $flow-disable-line */\nif (typeof Promise !== 'undefined' && isNative(Promise)) {\n  var p = Promise.resolve();\n  timerFunc = function () {\n    p.then(flushCallbacks);\n    // In problematic UIWebViews, Promise.then doesn't completely break, but\n    // it can get stuck in a weird state where callbacks are pushed into the\n    // microtask queue but the queue isn't being flushed, until the browser\n    // needs to do some other work, e.g. handle a timer. Therefore we can\n    // \"force\" the microtask queue to be flushed by adding an empty timer.\n    if (isIOS) { setTimeout(noop); }\n  };\n  isUsingMicroTask = true;\n} else if (!isIE && typeof MutationObserver !== 'undefined' && (\n  isNative(MutationObserver) ||\n  // PhantomJS and iOS 7.x\n  MutationObserver.toString() === '[object MutationObserverConstructor]'\n)) {\n  // Use MutationObserver where native Promise is not available,\n  // e.g. PhantomJS, iOS7, Android 4.4\n  // (#6466 MutationObserver is unreliable in IE11)\n  var counter = 1;\n  var observer = new MutationObserver(flushCallbacks);\n  var textNode = document.createTextNode(String(counter));\n  observer.observe(textNode, {\n    characterData: true\n  });\n  timerFunc = function () {\n    counter = (counter + 1) % 2;\n    textNode.data = String(counter);\n  };\n  isUsingMicroTask = true;\n} else if (typeof setImmediate !== 'undefined' && isNative(setImmediate)) {\n  // Fallback to setImmediate.\n  // Technically it leverages the (macro) task queue,\n  // but it is still a better choice than setTimeout.\n  timerFunc = function () {\n    setImmediate(flushCallbacks);\n  };\n} else {\n  // Fallback to setTimeout.\n  timerFunc = function () {\n    setTimeout(flushCallbacks, 0);\n  };\n}\n\nfunction nextTick (cb, ctx) {\n  var _resolve;\n  callbacks.push(function () {\n    if (cb) {\n      try {\n        cb.call(ctx);\n      } catch (e) {\n        handleError(e, ctx, 'nextTick');\n      }\n    } else if (_resolve) {\n      _resolve(ctx);\n    }\n  });\n  if (!pending) {\n    pending = true;\n    timerFunc();\n  }\n  // $flow-disable-line\n  if (!cb && typeof Promise !== 'undefined') {\n    return new Promise(function (resolve) {\n      _resolve = resolve;\n    })\n  }\n}\n\n/*  */\n\n/* not type checking this file because flow doesn't play well with Proxy */\n\nvar initProxy;\n\nif (process.env.NODE_ENV !== 'production') {\n  var allowedGlobals = makeMap(\n    'Infinity,undefined,NaN,isFinite,isNaN,' +\n    'parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,' +\n    'Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,' +\n    'require' // for Webpack/Browserify\n  );\n\n  var warnNonPresent = function (target, key) {\n    warn(\n      \"Property or method \\\"\" + key + \"\\\" is not defined on the instance but \" +\n      'referenced during render. Make sure that this property is reactive, ' +\n      'either in the data option, or for class-based components, by ' +\n      'initializing the property. ' +\n      'See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.',\n      target\n    );\n  };\n\n  var warnReservedPrefix = function (target, key) {\n    warn(\n      \"Property \\\"\" + key + \"\\\" must be accessed with \\\"$data.\" + key + \"\\\" because \" +\n      'properties starting with \"$\" or \"_\" are not proxied in the Vue instance to ' +\n      'prevent conflicts with Vue internals. ' +\n      'See: https://vuejs.org/v2/api/#data',\n      target\n    );\n  };\n\n  var hasProxy =\n    typeof Proxy !== 'undefined' && isNative(Proxy);\n\n  if (hasProxy) {\n    var isBuiltInModifier = makeMap('stop,prevent,self,ctrl,shift,alt,meta,exact');\n    config.keyCodes = new Proxy(config.keyCodes, {\n      set: function set (target, key, value) {\n        if (isBuiltInModifier(key)) {\n          warn((\"Avoid overwriting built-in modifier in config.keyCodes: .\" + key));\n          return false\n        } else {\n          target[key] = value;\n          return true\n        }\n      }\n    });\n  }\n\n  var hasHandler = {\n    has: function has (target, key) {\n      var has = key in target;\n      var isAllowed = allowedGlobals(key) ||\n        (typeof key === 'string' && key.charAt(0) === '_' && !(key in target.$data));\n      if (!has && !isAllowed) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return has || !isAllowed\n    }\n  };\n\n  var getHandler = {\n    get: function get (target, key) {\n      if (typeof key === 'string' && !(key in target)) {\n        if (key in target.$data) { warnReservedPrefix(target, key); }\n        else { warnNonPresent(target, key); }\n      }\n      return target[key]\n    }\n  };\n\n  initProxy = function initProxy (vm) {\n    if (hasProxy) {\n      // determine which proxy handler to use\n      var options = vm.$options;\n      var handlers = options.render && options.render._withStripped\n        ? getHandler\n        : hasHandler;\n      vm._renderProxy = new Proxy(vm, handlers);\n    } else {\n      vm._renderProxy = vm;\n    }\n  };\n}\n\n/*  */\n\nvar seenObjects = new _Set();\n\n/**\n * Recursively traverse an object to evoke all converted\n * getters, so that every nested property inside the object\n * is collected as a \"deep\" dependency.\n */\nfunction traverse (val) {\n  _traverse(val, seenObjects);\n  seenObjects.clear();\n}\n\nfunction _traverse (val, seen) {\n  var i, keys;\n  var isA = Array.isArray(val);\n  if ((!isA && !isObject(val)) || Object.isFrozen(val) || val instanceof VNode) {\n    return\n  }\n  if (val.__ob__) {\n    var depId = val.__ob__.dep.id;\n    if (seen.has(depId)) {\n      return\n    }\n    seen.add(depId);\n  }\n  if (isA) {\n    i = val.length;\n    while (i--) { _traverse(val[i], seen); }\n  } else {\n    keys = Object.keys(val);\n    i = keys.length;\n    while (i--) { _traverse(val[keys[i]], seen); }\n  }\n}\n\nvar mark;\nvar measure;\n\nif (process.env.NODE_ENV !== 'production') {\n  var perf = inBrowser && window.performance;\n  /* istanbul ignore if */\n  if (\n    perf &&\n    perf.mark &&\n    perf.measure &&\n    perf.clearMarks &&\n    perf.clearMeasures\n  ) {\n    mark = function (tag) { return perf.mark(tag); };\n    measure = function (name, startTag, endTag) {\n      perf.measure(name, startTag, endTag);\n      perf.clearMarks(startTag);\n      perf.clearMarks(endTag);\n      // perf.clearMeasures(name)\n    };\n  }\n}\n\n/*  */\n\nvar normalizeEvent = cached(function (name) {\n  var passive = name.charAt(0) === '&';\n  name = passive ? name.slice(1) : name;\n  var once$$1 = name.charAt(0) === '~'; // Prefixed last, checked first\n  name = once$$1 ? name.slice(1) : name;\n  var capture = name.charAt(0) === '!';\n  name = capture ? name.slice(1) : name;\n  return {\n    name: name,\n    once: once$$1,\n    capture: capture,\n    passive: passive\n  }\n});\n\nfunction createFnInvoker (fns, vm) {\n  function invoker () {\n    var arguments$1 = arguments;\n\n    var fns = invoker.fns;\n    if (Array.isArray(fns)) {\n      var cloned = fns.slice();\n      for (var i = 0; i < cloned.length; i++) {\n        invokeWithErrorHandling(cloned[i], null, arguments$1, vm, \"v-on handler\");\n      }\n    } else {\n      // return handler return value for single handlers\n      return invokeWithErrorHandling(fns, null, arguments, vm, \"v-on handler\")\n    }\n  }\n  invoker.fns = fns;\n  return invoker\n}\n\nfunction updateListeners (\n  on,\n  oldOn,\n  add,\n  remove$$1,\n  createOnceHandler,\n  vm\n) {\n  var name, def$$1, cur, old, event;\n  for (name in on) {\n    def$$1 = cur = on[name];\n    old = oldOn[name];\n    event = normalizeEvent(name);\n    if (isUndef(cur)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Invalid handler for event \\\"\" + (event.name) + \"\\\": got \" + String(cur),\n        vm\n      );\n    } else if (isUndef(old)) {\n      if (isUndef(cur.fns)) {\n        cur = on[name] = createFnInvoker(cur, vm);\n      }\n      if (isTrue(event.once)) {\n        cur = on[name] = createOnceHandler(event.name, cur, event.capture);\n      }\n      add(event.name, cur, event.capture, event.passive, event.params);\n    } else if (cur !== old) {\n      old.fns = cur;\n      on[name] = old;\n    }\n  }\n  for (name in oldOn) {\n    if (isUndef(on[name])) {\n      event = normalizeEvent(name);\n      remove$$1(event.name, oldOn[name], event.capture);\n    }\n  }\n}\n\n/*  */\n\nfunction mergeVNodeHook (def, hookKey, hook) {\n  if (def instanceof VNode) {\n    def = def.data.hook || (def.data.hook = {});\n  }\n  var invoker;\n  var oldHook = def[hookKey];\n\n  function wrappedHook () {\n    hook.apply(this, arguments);\n    // important: remove merged hook to ensure it's called only once\n    // and prevent memory leak\n    remove(invoker.fns, wrappedHook);\n  }\n\n  if (isUndef(oldHook)) {\n    // no existing hook\n    invoker = createFnInvoker([wrappedHook]);\n  } else {\n    /* istanbul ignore if */\n    if (isDef(oldHook.fns) && isTrue(oldHook.merged)) {\n      // already a merged invoker\n      invoker = oldHook;\n      invoker.fns.push(wrappedHook);\n    } else {\n      // existing plain hook\n      invoker = createFnInvoker([oldHook, wrappedHook]);\n    }\n  }\n\n  invoker.merged = true;\n  def[hookKey] = invoker;\n}\n\n/*  */\n\nfunction extractPropsFromVNodeData (\n  data,\n  Ctor,\n  tag\n) {\n  // we are only extracting raw values here.\n  // validation and default values are handled in the child\n  // component itself.\n  var propOptions = Ctor.options.props;\n  if (isUndef(propOptions)) {\n    return\n  }\n  var res = {};\n  var attrs = data.attrs;\n  var props = data.props;\n  if (isDef(attrs) || isDef(props)) {\n    for (var key in propOptions) {\n      var altKey = hyphenate(key);\n      if (process.env.NODE_ENV !== 'production') {\n        var keyInLowerCase = key.toLowerCase();\n        if (\n          key !== keyInLowerCase &&\n          attrs && hasOwn(attrs, keyInLowerCase)\n        ) {\n          tip(\n            \"Prop \\\"\" + keyInLowerCase + \"\\\" is passed to component \" +\n            (formatComponentName(tag || Ctor)) + \", but the declared prop name is\" +\n            \" \\\"\" + key + \"\\\". \" +\n            \"Note that HTML attributes are case-insensitive and camelCased \" +\n            \"props need to use their kebab-case equivalents when using in-DOM \" +\n            \"templates. You should probably use \\\"\" + altKey + \"\\\" instead of \\\"\" + key + \"\\\".\"\n          );\n        }\n      }\n      checkProp(res, props, key, altKey, true) ||\n      checkProp(res, attrs, key, altKey, false);\n    }\n  }\n  return res\n}\n\nfunction checkProp (\n  res,\n  hash,\n  key,\n  altKey,\n  preserve\n) {\n  if (isDef(hash)) {\n    if (hasOwn(hash, key)) {\n      res[key] = hash[key];\n      if (!preserve) {\n        delete hash[key];\n      }\n      return true\n    } else if (hasOwn(hash, altKey)) {\n      res[key] = hash[altKey];\n      if (!preserve) {\n        delete hash[altKey];\n      }\n      return true\n    }\n  }\n  return false\n}\n\n/*  */\n\n// The template compiler attempts to minimize the need for normalization by\n// statically analyzing the template at compile time.\n//\n// For plain HTML markup, normalization can be completely skipped because the\n// generated render function is guaranteed to return Array<VNode>. There are\n// two cases where extra normalization is needed:\n\n// 1. When the children contains components - because a functional component\n// may return an Array instead of a single root. In this case, just a simple\n// normalization is needed - if any child is an Array, we flatten the whole\n// thing with Array.prototype.concat. It is guaranteed to be only 1-level deep\n// because functional components already normalize their own children.\nfunction simpleNormalizeChildren (children) {\n  for (var i = 0; i < children.length; i++) {\n    if (Array.isArray(children[i])) {\n      return Array.prototype.concat.apply([], children)\n    }\n  }\n  return children\n}\n\n// 2. When the children contains constructs that always generated nested Arrays,\n// e.g. <template>, <slot>, v-for, or when the children is provided by user\n// with hand-written render functions / JSX. In such cases a full normalization\n// is needed to cater to all possible types of children values.\nfunction normalizeChildren (children) {\n  return isPrimitive(children)\n    ? [createTextVNode(children)]\n    : Array.isArray(children)\n      ? normalizeArrayChildren(children)\n      : undefined\n}\n\nfunction isTextNode (node) {\n  return isDef(node) && isDef(node.text) && isFalse(node.isComment)\n}\n\nfunction normalizeArrayChildren (children, nestedIndex) {\n  var res = [];\n  var i, c, lastIndex, last;\n  for (i = 0; i < children.length; i++) {\n    c = children[i];\n    if (isUndef(c) || typeof c === 'boolean') { continue }\n    lastIndex = res.length - 1;\n    last = res[lastIndex];\n    //  nested\n    if (Array.isArray(c)) {\n      if (c.length > 0) {\n        c = normalizeArrayChildren(c, ((nestedIndex || '') + \"_\" + i));\n        // merge adjacent text nodes\n        if (isTextNode(c[0]) && isTextNode(last)) {\n          res[lastIndex] = createTextVNode(last.text + (c[0]).text);\n          c.shift();\n        }\n        res.push.apply(res, c);\n      }\n    } else if (isPrimitive(c)) {\n      if (isTextNode(last)) {\n        // merge adjacent text nodes\n        // this is necessary for SSR hydration because text nodes are\n        // essentially merged when rendered to HTML strings\n        res[lastIndex] = createTextVNode(last.text + c);\n      } else if (c !== '') {\n        // convert primitive to vnode\n        res.push(createTextVNode(c));\n      }\n    } else {\n      if (isTextNode(c) && isTextNode(last)) {\n        // merge adjacent text nodes\n        res[lastIndex] = createTextVNode(last.text + c.text);\n      } else {\n        // default key for nested array children (likely generated by v-for)\n        if (isTrue(children._isVList) &&\n          isDef(c.tag) &&\n          isUndef(c.key) &&\n          isDef(nestedIndex)) {\n          c.key = \"__vlist\" + nestedIndex + \"_\" + i + \"__\";\n        }\n        res.push(c);\n      }\n    }\n  }\n  return res\n}\n\n/*  */\n\nfunction initProvide (vm) {\n  var provide = vm.$options.provide;\n  if (provide) {\n    vm._provided = typeof provide === 'function'\n      ? provide.call(vm)\n      : provide;\n  }\n}\n\nfunction initInjections (vm) {\n  var result = resolveInject(vm.$options.inject, vm);\n  if (result) {\n    toggleObserving(false);\n    Object.keys(result).forEach(function (key) {\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production') {\n        defineReactive$$1(vm, key, result[key], function () {\n          warn(\n            \"Avoid mutating an injected value directly since the changes will be \" +\n            \"overwritten whenever the provided component re-renders. \" +\n            \"injection being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        });\n      } else {\n        defineReactive$$1(vm, key, result[key]);\n      }\n    });\n    toggleObserving(true);\n  }\n}\n\nfunction resolveInject (inject, vm) {\n  if (inject) {\n    // inject is :any because flow is not smart enough to figure out cached\n    var result = Object.create(null);\n    var keys = hasSymbol\n      ? Reflect.ownKeys(inject)\n      : Object.keys(inject);\n\n    for (var i = 0; i < keys.length; i++) {\n      var key = keys[i];\n      // #6574 in case the inject object is observed...\n      if (key === '__ob__') { continue }\n      var provideKey = inject[key].from;\n      var source = vm;\n      while (source) {\n        if (source._provided && hasOwn(source._provided, provideKey)) {\n          result[key] = source._provided[provideKey];\n          break\n        }\n        source = source.$parent;\n      }\n      if (!source) {\n        if ('default' in inject[key]) {\n          var provideDefault = inject[key].default;\n          result[key] = typeof provideDefault === 'function'\n            ? provideDefault.call(vm)\n            : provideDefault;\n        } else if (process.env.NODE_ENV !== 'production') {\n          warn((\"Injection \\\"\" + key + \"\\\" not found\"), vm);\n        }\n      }\n    }\n    return result\n  }\n}\n\n/*  */\n\n\n\n/**\n * Runtime helper for resolving raw children VNodes into a slot object.\n */\nfunction resolveSlots (\n  children,\n  context\n) {\n  if (!children || !children.length) {\n    return {}\n  }\n  var slots = {};\n  for (var i = 0, l = children.length; i < l; i++) {\n    var child = children[i];\n    var data = child.data;\n    // remove slot attribute if the node is resolved as a Vue slot node\n    if (data && data.attrs && data.attrs.slot) {\n      delete data.attrs.slot;\n    }\n    // named slots should only be respected if the vnode was rendered in the\n    // same context.\n    if ((child.context === context || child.fnContext === context) &&\n      data && data.slot != null\n    ) {\n      var name = data.slot;\n      var slot = (slots[name] || (slots[name] = []));\n      if (child.tag === 'template') {\n        slot.push.apply(slot, child.children || []);\n      } else {\n        slot.push(child);\n      }\n    } else {\n      (slots.default || (slots.default = [])).push(child);\n    }\n  }\n  // ignore slots that contains only whitespace\n  for (var name$1 in slots) {\n    if (slots[name$1].every(isWhitespace)) {\n      delete slots[name$1];\n    }\n  }\n  return slots\n}\n\nfunction isWhitespace (node) {\n  return (node.isComment && !node.asyncFactory) || node.text === ' '\n}\n\n/*  */\n\nfunction isAsyncPlaceholder (node) {\n  return node.isComment && node.asyncFactory\n}\n\n/*  */\n\nfunction normalizeScopedSlots (\n  slots,\n  normalSlots,\n  prevSlots\n) {\n  var res;\n  var hasNormalSlots = Object.keys(normalSlots).length > 0;\n  var isStable = slots ? !!slots.$stable : !hasNormalSlots;\n  var key = slots && slots.$key;\n  if (!slots) {\n    res = {};\n  } else if (slots._normalized) {\n    // fast path 1: child component re-render only, parent did not change\n    return slots._normalized\n  } else if (\n    isStable &&\n    prevSlots &&\n    prevSlots !== emptyObject &&\n    key === prevSlots.$key &&\n    !hasNormalSlots &&\n    !prevSlots.$hasNormal\n  ) {\n    // fast path 2: stable scoped slots w/ no normal slots to proxy,\n    // only need to normalize once\n    return prevSlots\n  } else {\n    res = {};\n    for (var key$1 in slots) {\n      if (slots[key$1] && key$1[0] !== '$') {\n        res[key$1] = normalizeScopedSlot(normalSlots, key$1, slots[key$1]);\n      }\n    }\n  }\n  // expose normal slots on scopedSlots\n  for (var key$2 in normalSlots) {\n    if (!(key$2 in res)) {\n      res[key$2] = proxyNormalSlot(normalSlots, key$2);\n    }\n  }\n  // avoriaz seems to mock a non-extensible $scopedSlots object\n  // and when that is passed down this would cause an error\n  if (slots && Object.isExtensible(slots)) {\n    (slots)._normalized = res;\n  }\n  def(res, '$stable', isStable);\n  def(res, '$key', key);\n  def(res, '$hasNormal', hasNormalSlots);\n  return res\n}\n\nfunction normalizeScopedSlot(normalSlots, key, fn) {\n  var normalized = function () {\n    var res = arguments.length ? fn.apply(null, arguments) : fn({});\n    res = res && typeof res === 'object' && !Array.isArray(res)\n      ? [res] // single vnode\n      : normalizeChildren(res);\n    var vnode = res && res[0];\n    return res && (\n      !vnode ||\n      (res.length === 1 && vnode.isComment && !isAsyncPlaceholder(vnode)) // #9658, #10391\n    ) ? undefined\n      : res\n  };\n  // this is a slot using the new v-slot syntax without scope. although it is\n  // compiled as a scoped slot, render fn users would expect it to be present\n  // on this.$slots because the usage is semantically a normal slot.\n  if (fn.proxy) {\n    Object.defineProperty(normalSlots, key, {\n      get: normalized,\n      enumerable: true,\n      configurable: true\n    });\n  }\n  return normalized\n}\n\nfunction proxyNormalSlot(slots, key) {\n  return function () { return slots[key]; }\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering v-for lists.\n */\nfunction renderList (\n  val,\n  render\n) {\n  var ret, i, l, keys, key;\n  if (Array.isArray(val) || typeof val === 'string') {\n    ret = new Array(val.length);\n    for (i = 0, l = val.length; i < l; i++) {\n      ret[i] = render(val[i], i);\n    }\n  } else if (typeof val === 'number') {\n    ret = new Array(val);\n    for (i = 0; i < val; i++) {\n      ret[i] = render(i + 1, i);\n    }\n  } else if (isObject(val)) {\n    if (hasSymbol && val[Symbol.iterator]) {\n      ret = [];\n      var iterator = val[Symbol.iterator]();\n      var result = iterator.next();\n      while (!result.done) {\n        ret.push(render(result.value, ret.length));\n        result = iterator.next();\n      }\n    } else {\n      keys = Object.keys(val);\n      ret = new Array(keys.length);\n      for (i = 0, l = keys.length; i < l; i++) {\n        key = keys[i];\n        ret[i] = render(val[key], key, i);\n      }\n    }\n  }\n  if (!isDef(ret)) {\n    ret = [];\n  }\n  (ret)._isVList = true;\n  return ret\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering <slot>\n */\nfunction renderSlot (\n  name,\n  fallbackRender,\n  props,\n  bindObject\n) {\n  var scopedSlotFn = this.$scopedSlots[name];\n  var nodes;\n  if (scopedSlotFn) {\n    // scoped slot\n    props = props || {};\n    if (bindObject) {\n      if (process.env.NODE_ENV !== 'production' && !isObject(bindObject)) {\n        warn('slot v-bind without argument expects an Object', this);\n      }\n      props = extend(extend({}, bindObject), props);\n    }\n    nodes =\n      scopedSlotFn(props) ||\n      (typeof fallbackRender === 'function' ? fallbackRender() : fallbackRender);\n  } else {\n    nodes =\n      this.$slots[name] ||\n      (typeof fallbackRender === 'function' ? fallbackRender() : fallbackRender);\n  }\n\n  var target = props && props.slot;\n  if (target) {\n    return this.$createElement('template', { slot: target }, nodes)\n  } else {\n    return nodes\n  }\n}\n\n/*  */\n\n/**\n * Runtime helper for resolving filters\n */\nfunction resolveFilter (id) {\n  return resolveAsset(this.$options, 'filters', id, true) || identity\n}\n\n/*  */\n\nfunction isKeyNotMatch (expect, actual) {\n  if (Array.isArray(expect)) {\n    return expect.indexOf(actual) === -1\n  } else {\n    return expect !== actual\n  }\n}\n\n/**\n * Runtime helper for checking keyCodes from config.\n * exposed as Vue.prototype._k\n * passing in eventKeyName as last argument separately for backwards compat\n */\nfunction checkKeyCodes (\n  eventKeyCode,\n  key,\n  builtInKeyCode,\n  eventKeyName,\n  builtInKeyName\n) {\n  var mappedKeyCode = config.keyCodes[key] || builtInKeyCode;\n  if (builtInKeyName && eventKeyName && !config.keyCodes[key]) {\n    return isKeyNotMatch(builtInKeyName, eventKeyName)\n  } else if (mappedKeyCode) {\n    return isKeyNotMatch(mappedKeyCode, eventKeyCode)\n  } else if (eventKeyName) {\n    return hyphenate(eventKeyName) !== key\n  }\n  return eventKeyCode === undefined\n}\n\n/*  */\n\n/**\n * Runtime helper for merging v-bind=\"object\" into a VNode's data.\n */\nfunction bindObjectProps (\n  data,\n  tag,\n  value,\n  asProp,\n  isSync\n) {\n  if (value) {\n    if (!isObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-bind without argument expects an Object or Array value',\n        this\n      );\n    } else {\n      if (Array.isArray(value)) {\n        value = toObject(value);\n      }\n      var hash;\n      var loop = function ( key ) {\n        if (\n          key === 'class' ||\n          key === 'style' ||\n          isReservedAttribute(key)\n        ) {\n          hash = data;\n        } else {\n          var type = data.attrs && data.attrs.type;\n          hash = asProp || config.mustUseProp(tag, type, key)\n            ? data.domProps || (data.domProps = {})\n            : data.attrs || (data.attrs = {});\n        }\n        var camelizedKey = camelize(key);\n        var hyphenatedKey = hyphenate(key);\n        if (!(camelizedKey in hash) && !(hyphenatedKey in hash)) {\n          hash[key] = value[key];\n\n          if (isSync) {\n            var on = data.on || (data.on = {});\n            on[(\"update:\" + key)] = function ($event) {\n              value[key] = $event;\n            };\n          }\n        }\n      };\n\n      for (var key in value) loop( key );\n    }\n  }\n  return data\n}\n\n/*  */\n\n/**\n * Runtime helper for rendering static trees.\n */\nfunction renderStatic (\n  index,\n  isInFor\n) {\n  var cached = this._staticTrees || (this._staticTrees = []);\n  var tree = cached[index];\n  // if has already-rendered static tree and not inside v-for,\n  // we can reuse the same tree.\n  if (tree && !isInFor) {\n    return tree\n  }\n  // otherwise, render a fresh tree.\n  tree = cached[index] = this.$options.staticRenderFns[index].call(\n    this._renderProxy,\n    null,\n    this // for render fns generated for functional component templates\n  );\n  markStatic(tree, (\"__static__\" + index), false);\n  return tree\n}\n\n/**\n * Runtime helper for v-once.\n * Effectively it means marking the node as static with a unique key.\n */\nfunction markOnce (\n  tree,\n  index,\n  key\n) {\n  markStatic(tree, (\"__once__\" + index + (key ? (\"_\" + key) : \"\")), true);\n  return tree\n}\n\nfunction markStatic (\n  tree,\n  key,\n  isOnce\n) {\n  if (Array.isArray(tree)) {\n    for (var i = 0; i < tree.length; i++) {\n      if (tree[i] && typeof tree[i] !== 'string') {\n        markStaticNode(tree[i], (key + \"_\" + i), isOnce);\n      }\n    }\n  } else {\n    markStaticNode(tree, key, isOnce);\n  }\n}\n\nfunction markStaticNode (node, key, isOnce) {\n  node.isStatic = true;\n  node.key = key;\n  node.isOnce = isOnce;\n}\n\n/*  */\n\nfunction bindObjectListeners (data, value) {\n  if (value) {\n    if (!isPlainObject(value)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'v-on without argument expects an Object value',\n        this\n      );\n    } else {\n      var on = data.on = data.on ? extend({}, data.on) : {};\n      for (var key in value) {\n        var existing = on[key];\n        var ours = value[key];\n        on[key] = existing ? [].concat(existing, ours) : ours;\n      }\n    }\n  }\n  return data\n}\n\n/*  */\n\nfunction resolveScopedSlots (\n  fns, // see flow/vnode\n  res,\n  // the following are added in 2.6\n  hasDynamicKeys,\n  contentHashKey\n) {\n  res = res || { $stable: !hasDynamicKeys };\n  for (var i = 0; i < fns.length; i++) {\n    var slot = fns[i];\n    if (Array.isArray(slot)) {\n      resolveScopedSlots(slot, res, hasDynamicKeys);\n    } else if (slot) {\n      // marker for reverse proxying v-slot without scope on this.$slots\n      if (slot.proxy) {\n        slot.fn.proxy = true;\n      }\n      res[slot.key] = slot.fn;\n    }\n  }\n  if (contentHashKey) {\n    (res).$key = contentHashKey;\n  }\n  return res\n}\n\n/*  */\n\nfunction bindDynamicKeys (baseObj, values) {\n  for (var i = 0; i < values.length; i += 2) {\n    var key = values[i];\n    if (typeof key === 'string' && key) {\n      baseObj[values[i]] = values[i + 1];\n    } else if (process.env.NODE_ENV !== 'production' && key !== '' && key !== null) {\n      // null is a special value for explicitly removing a binding\n      warn(\n        (\"Invalid value for dynamic directive argument (expected string or null): \" + key),\n        this\n      );\n    }\n  }\n  return baseObj\n}\n\n// helper to dynamically append modifier runtime markers to event names.\n// ensure only append when value is already string, otherwise it will be cast\n// to string and cause the type check to miss.\nfunction prependModifier (value, symbol) {\n  return typeof value === 'string' ? symbol + value : value\n}\n\n/*  */\n\nfunction installRenderHelpers (target) {\n  target._o = markOnce;\n  target._n = toNumber;\n  target._s = toString;\n  target._l = renderList;\n  target._t = renderSlot;\n  target._q = looseEqual;\n  target._i = looseIndexOf;\n  target._m = renderStatic;\n  target._f = resolveFilter;\n  target._k = checkKeyCodes;\n  target._b = bindObjectProps;\n  target._v = createTextVNode;\n  target._e = createEmptyVNode;\n  target._u = resolveScopedSlots;\n  target._g = bindObjectListeners;\n  target._d = bindDynamicKeys;\n  target._p = prependModifier;\n}\n\n/*  */\n\nfunction FunctionalRenderContext (\n  data,\n  props,\n  children,\n  parent,\n  Ctor\n) {\n  var this$1 = this;\n\n  var options = Ctor.options;\n  // ensure the createElement function in functional components\n  // gets a unique context - this is necessary for correct named slot check\n  var contextVm;\n  if (hasOwn(parent, '_uid')) {\n    contextVm = Object.create(parent);\n    // $flow-disable-line\n    contextVm._original = parent;\n  } else {\n    // the context vm passed in is a functional context as well.\n    // in this case we want to make sure we are able to get a hold to the\n    // real context instance.\n    contextVm = parent;\n    // $flow-disable-line\n    parent = parent._original;\n  }\n  var isCompiled = isTrue(options._compiled);\n  var needNormalization = !isCompiled;\n\n  this.data = data;\n  this.props = props;\n  this.children = children;\n  this.parent = parent;\n  this.listeners = data.on || emptyObject;\n  this.injections = resolveInject(options.inject, parent);\n  this.slots = function () {\n    if (!this$1.$slots) {\n      normalizeScopedSlots(\n        data.scopedSlots,\n        this$1.$slots = resolveSlots(children, parent)\n      );\n    }\n    return this$1.$slots\n  };\n\n  Object.defineProperty(this, 'scopedSlots', ({\n    enumerable: true,\n    get: function get () {\n      return normalizeScopedSlots(data.scopedSlots, this.slots())\n    }\n  }));\n\n  // support for compiled functional template\n  if (isCompiled) {\n    // exposing $options for renderStatic()\n    this.$options = options;\n    // pre-resolve slots for renderSlot()\n    this.$slots = this.slots();\n    this.$scopedSlots = normalizeScopedSlots(data.scopedSlots, this.$slots);\n  }\n\n  if (options._scopeId) {\n    this._c = function (a, b, c, d) {\n      var vnode = createElement(contextVm, a, b, c, d, needNormalization);\n      if (vnode && !Array.isArray(vnode)) {\n        vnode.fnScopeId = options._scopeId;\n        vnode.fnContext = parent;\n      }\n      return vnode\n    };\n  } else {\n    this._c = function (a, b, c, d) { return createElement(contextVm, a, b, c, d, needNormalization); };\n  }\n}\n\ninstallRenderHelpers(FunctionalRenderContext.prototype);\n\nfunction createFunctionalComponent (\n  Ctor,\n  propsData,\n  data,\n  contextVm,\n  children\n) {\n  var options = Ctor.options;\n  var props = {};\n  var propOptions = options.props;\n  if (isDef(propOptions)) {\n    for (var key in propOptions) {\n      props[key] = validateProp(key, propOptions, propsData || emptyObject);\n    }\n  } else {\n    if (isDef(data.attrs)) { mergeProps(props, data.attrs); }\n    if (isDef(data.props)) { mergeProps(props, data.props); }\n  }\n\n  var renderContext = new FunctionalRenderContext(\n    data,\n    props,\n    children,\n    contextVm,\n    Ctor\n  );\n\n  var vnode = options.render.call(null, renderContext._c, renderContext);\n\n  if (vnode instanceof VNode) {\n    return cloneAndMarkFunctionalResult(vnode, data, renderContext.parent, options, renderContext)\n  } else if (Array.isArray(vnode)) {\n    var vnodes = normalizeChildren(vnode) || [];\n    var res = new Array(vnodes.length);\n    for (var i = 0; i < vnodes.length; i++) {\n      res[i] = cloneAndMarkFunctionalResult(vnodes[i], data, renderContext.parent, options, renderContext);\n    }\n    return res\n  }\n}\n\nfunction cloneAndMarkFunctionalResult (vnode, data, contextVm, options, renderContext) {\n  // #7817 clone node before setting fnContext, otherwise if the node is reused\n  // (e.g. it was from a cached normal slot) the fnContext causes named slots\n  // that should not be matched to match.\n  var clone = cloneVNode(vnode);\n  clone.fnContext = contextVm;\n  clone.fnOptions = options;\n  if (process.env.NODE_ENV !== 'production') {\n    (clone.devtoolsMeta = clone.devtoolsMeta || {}).renderContext = renderContext;\n  }\n  if (data.slot) {\n    (clone.data || (clone.data = {})).slot = data.slot;\n  }\n  return clone\n}\n\nfunction mergeProps (to, from) {\n  for (var key in from) {\n    to[camelize(key)] = from[key];\n  }\n}\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// inline hooks to be invoked on component VNodes during patch\nvar componentVNodeHooks = {\n  init: function init (vnode, hydrating) {\n    if (\n      vnode.componentInstance &&\n      !vnode.componentInstance._isDestroyed &&\n      vnode.data.keepAlive\n    ) {\n      // kept-alive components, treat as a patch\n      var mountedNode = vnode; // work around flow\n      componentVNodeHooks.prepatch(mountedNode, mountedNode);\n    } else {\n      var child = vnode.componentInstance = createComponentInstanceForVnode(\n        vnode,\n        activeInstance\n      );\n      child.$mount(hydrating ? vnode.elm : undefined, hydrating);\n    }\n  },\n\n  prepatch: function prepatch (oldVnode, vnode) {\n    var options = vnode.componentOptions;\n    var child = vnode.componentInstance = oldVnode.componentInstance;\n    updateChildComponent(\n      child,\n      options.propsData, // updated props\n      options.listeners, // updated listeners\n      vnode, // new parent vnode\n      options.children // new children\n    );\n  },\n\n  insert: function insert (vnode) {\n    var context = vnode.context;\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isMounted) {\n      componentInstance._isMounted = true;\n      callHook(componentInstance, 'mounted');\n    }\n    if (vnode.data.keepAlive) {\n      if (context._isMounted) {\n        // vue-router#1212\n        // During updates, a kept-alive component's child components may\n        // change, so directly walking the tree here may call activated hooks\n        // on incorrect children. Instead we push them into a queue which will\n        // be processed after the whole patch process ended.\n        queueActivatedComponent(componentInstance);\n      } else {\n        activateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  },\n\n  destroy: function destroy (vnode) {\n    var componentInstance = vnode.componentInstance;\n    if (!componentInstance._isDestroyed) {\n      if (!vnode.data.keepAlive) {\n        componentInstance.$destroy();\n      } else {\n        deactivateChildComponent(componentInstance, true /* direct */);\n      }\n    }\n  }\n};\n\nvar hooksToMerge = Object.keys(componentVNodeHooks);\n\nfunction createComponent (\n  Ctor,\n  data,\n  context,\n  children,\n  tag\n) {\n  if (isUndef(Ctor)) {\n    return\n  }\n\n  var baseCtor = context.$options._base;\n\n  // plain options object: turn it into a constructor\n  if (isObject(Ctor)) {\n    Ctor = baseCtor.extend(Ctor);\n  }\n\n  // if at this stage it's not a constructor or an async component factory,\n  // reject.\n  if (typeof Ctor !== 'function') {\n    if (process.env.NODE_ENV !== 'production') {\n      warn((\"Invalid Component definition: \" + (String(Ctor))), context);\n    }\n    return\n  }\n\n  // async component\n  var asyncFactory;\n  if (isUndef(Ctor.cid)) {\n    asyncFactory = Ctor;\n    Ctor = resolveAsyncComponent(asyncFactory, baseCtor);\n    if (Ctor === undefined) {\n      // return a placeholder node for async component, which is rendered\n      // as a comment node but preserves all the raw information for the node.\n      // the information will be used for async server-rendering and hydration.\n      return createAsyncPlaceholder(\n        asyncFactory,\n        data,\n        context,\n        children,\n        tag\n      )\n    }\n  }\n\n  data = data || {};\n\n  // resolve constructor options in case global mixins are applied after\n  // component constructor creation\n  resolveConstructorOptions(Ctor);\n\n  // transform component v-model data into props & events\n  if (isDef(data.model)) {\n    transformModel(Ctor.options, data);\n  }\n\n  // extract props\n  var propsData = extractPropsFromVNodeData(data, Ctor, tag);\n\n  // functional component\n  if (isTrue(Ctor.options.functional)) {\n    return createFunctionalComponent(Ctor, propsData, data, context, children)\n  }\n\n  // extract listeners, since these needs to be treated as\n  // child component listeners instead of DOM listeners\n  var listeners = data.on;\n  // replace with listeners with .native modifier\n  // so it gets processed during parent component patch.\n  data.on = data.nativeOn;\n\n  if (isTrue(Ctor.options.abstract)) {\n    // abstract components do not keep anything\n    // other than props & listeners & slot\n\n    // work around flow\n    var slot = data.slot;\n    data = {};\n    if (slot) {\n      data.slot = slot;\n    }\n  }\n\n  // install component management hooks onto the placeholder node\n  installComponentHooks(data);\n\n  // return a placeholder vnode\n  var name = Ctor.options.name || tag;\n  var vnode = new VNode(\n    (\"vue-component-\" + (Ctor.cid) + (name ? (\"-\" + name) : '')),\n    data, undefined, undefined, undefined, context,\n    { Ctor: Ctor, propsData: propsData, listeners: listeners, tag: tag, children: children },\n    asyncFactory\n  );\n\n  return vnode\n}\n\nfunction createComponentInstanceForVnode (\n  // we know it's MountedComponentVNode but flow doesn't\n  vnode,\n  // activeInstance in lifecycle state\n  parent\n) {\n  var options = {\n    _isComponent: true,\n    _parentVnode: vnode,\n    parent: parent\n  };\n  // check inline-template render functions\n  var inlineTemplate = vnode.data.inlineTemplate;\n  if (isDef(inlineTemplate)) {\n    options.render = inlineTemplate.render;\n    options.staticRenderFns = inlineTemplate.staticRenderFns;\n  }\n  return new vnode.componentOptions.Ctor(options)\n}\n\nfunction installComponentHooks (data) {\n  var hooks = data.hook || (data.hook = {});\n  for (var i = 0; i < hooksToMerge.length; i++) {\n    var key = hooksToMerge[i];\n    var existing = hooks[key];\n    var toMerge = componentVNodeHooks[key];\n    if (existing !== toMerge && !(existing && existing._merged)) {\n      hooks[key] = existing ? mergeHook$1(toMerge, existing) : toMerge;\n    }\n  }\n}\n\nfunction mergeHook$1 (f1, f2) {\n  var merged = function (a, b) {\n    // flow complains about extra args which is why we use any\n    f1(a, b);\n    f2(a, b);\n  };\n  merged._merged = true;\n  return merged\n}\n\n// transform component v-model info (value and callback) into\n// prop and event handler respectively.\nfunction transformModel (options, data) {\n  var prop = (options.model && options.model.prop) || 'value';\n  var event = (options.model && options.model.event) || 'input'\n  ;(data.attrs || (data.attrs = {}))[prop] = data.model.value;\n  var on = data.on || (data.on = {});\n  var existing = on[event];\n  var callback = data.model.callback;\n  if (isDef(existing)) {\n    if (\n      Array.isArray(existing)\n        ? existing.indexOf(callback) === -1\n        : existing !== callback\n    ) {\n      on[event] = [callback].concat(existing);\n    }\n  } else {\n    on[event] = callback;\n  }\n}\n\n/*  */\n\nvar SIMPLE_NORMALIZE = 1;\nvar ALWAYS_NORMALIZE = 2;\n\n// wrapper function for providing a more flexible interface\n// without getting yelled at by flow\nfunction createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType,\n  alwaysNormalize\n) {\n  if (Array.isArray(data) || isPrimitive(data)) {\n    normalizationType = children;\n    children = data;\n    data = undefined;\n  }\n  if (isTrue(alwaysNormalize)) {\n    normalizationType = ALWAYS_NORMALIZE;\n  }\n  return _createElement(context, tag, data, children, normalizationType)\n}\n\nfunction _createElement (\n  context,\n  tag,\n  data,\n  children,\n  normalizationType\n) {\n  if (isDef(data) && isDef((data).__ob__)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"Avoid using observed data object as vnode data: \" + (JSON.stringify(data)) + \"\\n\" +\n      'Always create fresh vnode data objects in each render!',\n      context\n    );\n    return createEmptyVNode()\n  }\n  // object syntax in v-bind\n  if (isDef(data) && isDef(data.is)) {\n    tag = data.is;\n  }\n  if (!tag) {\n    // in case of component :is set to falsy value\n    return createEmptyVNode()\n  }\n  // warn against non-primitive key\n  if (process.env.NODE_ENV !== 'production' &&\n    isDef(data) && isDef(data.key) && !isPrimitive(data.key)\n  ) {\n    {\n      warn(\n        'Avoid using non-primitive value as key, ' +\n        'use string/number value instead.',\n        context\n      );\n    }\n  }\n  // support single function children as default scoped slot\n  if (Array.isArray(children) &&\n    typeof children[0] === 'function'\n  ) {\n    data = data || {};\n    data.scopedSlots = { default: children[0] };\n    children.length = 0;\n  }\n  if (normalizationType === ALWAYS_NORMALIZE) {\n    children = normalizeChildren(children);\n  } else if (normalizationType === SIMPLE_NORMALIZE) {\n    children = simpleNormalizeChildren(children);\n  }\n  var vnode, ns;\n  if (typeof tag === 'string') {\n    var Ctor;\n    ns = (context.$vnode && context.$vnode.ns) || config.getTagNamespace(tag);\n    if (config.isReservedTag(tag)) {\n      // platform built-in elements\n      if (process.env.NODE_ENV !== 'production' && isDef(data) && isDef(data.nativeOn) && data.tag !== 'component') {\n        warn(\n          (\"The .native modifier for v-on is only valid on components but it was used on <\" + tag + \">.\"),\n          context\n        );\n      }\n      vnode = new VNode(\n        config.parsePlatformTagName(tag), data, children,\n        undefined, undefined, context\n      );\n    } else if ((!data || !data.pre) && isDef(Ctor = resolveAsset(context.$options, 'components', tag))) {\n      // component\n      vnode = createComponent(Ctor, data, context, children, tag);\n    } else {\n      // unknown or unlisted namespaced elements\n      // check at runtime because it may get assigned a namespace when its\n      // parent normalizes children\n      vnode = new VNode(\n        tag, data, children,\n        undefined, undefined, context\n      );\n    }\n  } else {\n    // direct component options / constructor\n    vnode = createComponent(tag, data, context, children);\n  }\n  if (Array.isArray(vnode)) {\n    return vnode\n  } else if (isDef(vnode)) {\n    if (isDef(ns)) { applyNS(vnode, ns); }\n    if (isDef(data)) { registerDeepBindings(data); }\n    return vnode\n  } else {\n    return createEmptyVNode()\n  }\n}\n\nfunction applyNS (vnode, ns, force) {\n  vnode.ns = ns;\n  if (vnode.tag === 'foreignObject') {\n    // use default namespace inside foreignObject\n    ns = undefined;\n    force = true;\n  }\n  if (isDef(vnode.children)) {\n    for (var i = 0, l = vnode.children.length; i < l; i++) {\n      var child = vnode.children[i];\n      if (isDef(child.tag) && (\n        isUndef(child.ns) || (isTrue(force) && child.tag !== 'svg'))) {\n        applyNS(child, ns, force);\n      }\n    }\n  }\n}\n\n// ref #5318\n// necessary to ensure parent re-render when deep bindings like :style and\n// :class are used on slot nodes\nfunction registerDeepBindings (data) {\n  if (isObject(data.style)) {\n    traverse(data.style);\n  }\n  if (isObject(data.class)) {\n    traverse(data.class);\n  }\n}\n\n/*  */\n\nfunction initRender (vm) {\n  vm._vnode = null; // the root of the child tree\n  vm._staticTrees = null; // v-once cached trees\n  var options = vm.$options;\n  var parentVnode = vm.$vnode = options._parentVnode; // the placeholder node in parent tree\n  var renderContext = parentVnode && parentVnode.context;\n  vm.$slots = resolveSlots(options._renderChildren, renderContext);\n  vm.$scopedSlots = emptyObject;\n  // bind the createElement fn to this instance\n  // so that we get proper render context inside it.\n  // args order: tag, data, children, normalizationType, alwaysNormalize\n  // internal version is used by render functions compiled from templates\n  vm._c = function (a, b, c, d) { return createElement(vm, a, b, c, d, false); };\n  // normalization is always applied for the public version, used in\n  // user-written render functions.\n  vm.$createElement = function (a, b, c, d) { return createElement(vm, a, b, c, d, true); };\n\n  // $attrs & $listeners are exposed for easier HOC creation.\n  // they need to be reactive so that HOCs using them are always updated\n  var parentData = parentVnode && parentVnode.data;\n\n  /* istanbul ignore else */\n  if (process.env.NODE_ENV !== 'production') {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$attrs is readonly.\", vm);\n    }, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, function () {\n      !isUpdatingChildComponent && warn(\"$listeners is readonly.\", vm);\n    }, true);\n  } else {\n    defineReactive$$1(vm, '$attrs', parentData && parentData.attrs || emptyObject, null, true);\n    defineReactive$$1(vm, '$listeners', options._parentListeners || emptyObject, null, true);\n  }\n}\n\nvar currentRenderingInstance = null;\n\nfunction renderMixin (Vue) {\n  // install runtime convenience helpers\n  installRenderHelpers(Vue.prototype);\n\n  Vue.prototype.$nextTick = function (fn) {\n    return nextTick(fn, this)\n  };\n\n  Vue.prototype._render = function () {\n    var vm = this;\n    var ref = vm.$options;\n    var render = ref.render;\n    var _parentVnode = ref._parentVnode;\n\n    if (_parentVnode) {\n      vm.$scopedSlots = normalizeScopedSlots(\n        _parentVnode.data.scopedSlots,\n        vm.$slots,\n        vm.$scopedSlots\n      );\n    }\n\n    // set parent vnode. this allows render functions to have access\n    // to the data on the placeholder node.\n    vm.$vnode = _parentVnode;\n    // render self\n    var vnode;\n    try {\n      // There's no need to maintain a stack because all render fns are called\n      // separately from one another. Nested component's render fns are called\n      // when parent component is patched.\n      currentRenderingInstance = vm;\n      vnode = render.call(vm._renderProxy, vm.$createElement);\n    } catch (e) {\n      handleError(e, vm, \"render\");\n      // return error render result,\n      // or previous vnode to prevent render error causing blank component\n      /* istanbul ignore else */\n      if (process.env.NODE_ENV !== 'production' && vm.$options.renderError) {\n        try {\n          vnode = vm.$options.renderError.call(vm._renderProxy, vm.$createElement, e);\n        } catch (e) {\n          handleError(e, vm, \"renderError\");\n          vnode = vm._vnode;\n        }\n      } else {\n        vnode = vm._vnode;\n      }\n    } finally {\n      currentRenderingInstance = null;\n    }\n    // if the returned array contains only a single node, allow it\n    if (Array.isArray(vnode) && vnode.length === 1) {\n      vnode = vnode[0];\n    }\n    // return empty vnode in case the render function errored out\n    if (!(vnode instanceof VNode)) {\n      if (process.env.NODE_ENV !== 'production' && Array.isArray(vnode)) {\n        warn(\n          'Multiple root nodes returned from render function. Render function ' +\n          'should return a single root node.',\n          vm\n        );\n      }\n      vnode = createEmptyVNode();\n    }\n    // set parent\n    vnode.parent = _parentVnode;\n    return vnode\n  };\n}\n\n/*  */\n\nfunction ensureCtor (comp, base) {\n  if (\n    comp.__esModule ||\n    (hasSymbol && comp[Symbol.toStringTag] === 'Module')\n  ) {\n    comp = comp.default;\n  }\n  return isObject(comp)\n    ? base.extend(comp)\n    : comp\n}\n\nfunction createAsyncPlaceholder (\n  factory,\n  data,\n  context,\n  children,\n  tag\n) {\n  var node = createEmptyVNode();\n  node.asyncFactory = factory;\n  node.asyncMeta = { data: data, context: context, children: children, tag: tag };\n  return node\n}\n\nfunction resolveAsyncComponent (\n  factory,\n  baseCtor\n) {\n  if (isTrue(factory.error) && isDef(factory.errorComp)) {\n    return factory.errorComp\n  }\n\n  if (isDef(factory.resolved)) {\n    return factory.resolved\n  }\n\n  var owner = currentRenderingInstance;\n  if (owner && isDef(factory.owners) && factory.owners.indexOf(owner) === -1) {\n    // already pending\n    factory.owners.push(owner);\n  }\n\n  if (isTrue(factory.loading) && isDef(factory.loadingComp)) {\n    return factory.loadingComp\n  }\n\n  if (owner && !isDef(factory.owners)) {\n    var owners = factory.owners = [owner];\n    var sync = true;\n    var timerLoading = null;\n    var timerTimeout = null\n\n    ;(owner).$on('hook:destroyed', function () { return remove(owners, owner); });\n\n    var forceRender = function (renderCompleted) {\n      for (var i = 0, l = owners.length; i < l; i++) {\n        (owners[i]).$forceUpdate();\n      }\n\n      if (renderCompleted) {\n        owners.length = 0;\n        if (timerLoading !== null) {\n          clearTimeout(timerLoading);\n          timerLoading = null;\n        }\n        if (timerTimeout !== null) {\n          clearTimeout(timerTimeout);\n          timerTimeout = null;\n        }\n      }\n    };\n\n    var resolve = once(function (res) {\n      // cache resolved\n      factory.resolved = ensureCtor(res, baseCtor);\n      // invoke callbacks only if this is not a synchronous resolve\n      // (async resolves are shimmed as synchronous during SSR)\n      if (!sync) {\n        forceRender(true);\n      } else {\n        owners.length = 0;\n      }\n    });\n\n    var reject = once(function (reason) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed to resolve async component: \" + (String(factory)) +\n        (reason ? (\"\\nReason: \" + reason) : '')\n      );\n      if (isDef(factory.errorComp)) {\n        factory.error = true;\n        forceRender(true);\n      }\n    });\n\n    var res = factory(resolve, reject);\n\n    if (isObject(res)) {\n      if (isPromise(res)) {\n        // () => Promise\n        if (isUndef(factory.resolved)) {\n          res.then(resolve, reject);\n        }\n      } else if (isPromise(res.component)) {\n        res.component.then(resolve, reject);\n\n        if (isDef(res.error)) {\n          factory.errorComp = ensureCtor(res.error, baseCtor);\n        }\n\n        if (isDef(res.loading)) {\n          factory.loadingComp = ensureCtor(res.loading, baseCtor);\n          if (res.delay === 0) {\n            factory.loading = true;\n          } else {\n            timerLoading = setTimeout(function () {\n              timerLoading = null;\n              if (isUndef(factory.resolved) && isUndef(factory.error)) {\n                factory.loading = true;\n                forceRender(false);\n              }\n            }, res.delay || 200);\n          }\n        }\n\n        if (isDef(res.timeout)) {\n          timerTimeout = setTimeout(function () {\n            timerTimeout = null;\n            if (isUndef(factory.resolved)) {\n              reject(\n                process.env.NODE_ENV !== 'production'\n                  ? (\"timeout (\" + (res.timeout) + \"ms)\")\n                  : null\n              );\n            }\n          }, res.timeout);\n        }\n      }\n    }\n\n    sync = false;\n    // return in case resolved synchronously\n    return factory.loading\n      ? factory.loadingComp\n      : factory.resolved\n  }\n}\n\n/*  */\n\nfunction getFirstComponentChild (children) {\n  if (Array.isArray(children)) {\n    for (var i = 0; i < children.length; i++) {\n      var c = children[i];\n      if (isDef(c) && (isDef(c.componentOptions) || isAsyncPlaceholder(c))) {\n        return c\n      }\n    }\n  }\n}\n\n/*  */\n\n/*  */\n\nfunction initEvents (vm) {\n  vm._events = Object.create(null);\n  vm._hasHookEvent = false;\n  // init parent attached events\n  var listeners = vm.$options._parentListeners;\n  if (listeners) {\n    updateComponentListeners(vm, listeners);\n  }\n}\n\nvar target;\n\nfunction add (event, fn) {\n  target.$on(event, fn);\n}\n\nfunction remove$1 (event, fn) {\n  target.$off(event, fn);\n}\n\nfunction createOnceHandler (event, fn) {\n  var _target = target;\n  return function onceHandler () {\n    var res = fn.apply(null, arguments);\n    if (res !== null) {\n      _target.$off(event, onceHandler);\n    }\n  }\n}\n\nfunction updateComponentListeners (\n  vm,\n  listeners,\n  oldListeners\n) {\n  target = vm;\n  updateListeners(listeners, oldListeners || {}, add, remove$1, createOnceHandler, vm);\n  target = undefined;\n}\n\nfunction eventsMixin (Vue) {\n  var hookRE = /^hook:/;\n  Vue.prototype.$on = function (event, fn) {\n    var vm = this;\n    if (Array.isArray(event)) {\n      for (var i = 0, l = event.length; i < l; i++) {\n        vm.$on(event[i], fn);\n      }\n    } else {\n      (vm._events[event] || (vm._events[event] = [])).push(fn);\n      // optimize hook:event cost by using a boolean flag marked at registration\n      // instead of a hash lookup\n      if (hookRE.test(event)) {\n        vm._hasHookEvent = true;\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$once = function (event, fn) {\n    var vm = this;\n    function on () {\n      vm.$off(event, on);\n      fn.apply(vm, arguments);\n    }\n    on.fn = fn;\n    vm.$on(event, on);\n    return vm\n  };\n\n  Vue.prototype.$off = function (event, fn) {\n    var vm = this;\n    // all\n    if (!arguments.length) {\n      vm._events = Object.create(null);\n      return vm\n    }\n    // array of events\n    if (Array.isArray(event)) {\n      for (var i$1 = 0, l = event.length; i$1 < l; i$1++) {\n        vm.$off(event[i$1], fn);\n      }\n      return vm\n    }\n    // specific event\n    var cbs = vm._events[event];\n    if (!cbs) {\n      return vm\n    }\n    if (!fn) {\n      vm._events[event] = null;\n      return vm\n    }\n    // specific handler\n    var cb;\n    var i = cbs.length;\n    while (i--) {\n      cb = cbs[i];\n      if (cb === fn || cb.fn === fn) {\n        cbs.splice(i, 1);\n        break\n      }\n    }\n    return vm\n  };\n\n  Vue.prototype.$emit = function (event) {\n    var vm = this;\n    if (process.env.NODE_ENV !== 'production') {\n      var lowerCaseEvent = event.toLowerCase();\n      if (lowerCaseEvent !== event && vm._events[lowerCaseEvent]) {\n        tip(\n          \"Event \\\"\" + lowerCaseEvent + \"\\\" is emitted in component \" +\n          (formatComponentName(vm)) + \" but the handler is registered for \\\"\" + event + \"\\\". \" +\n          \"Note that HTML attributes are case-insensitive and you cannot use \" +\n          \"v-on to listen to camelCase events when using in-DOM templates. \" +\n          \"You should probably use \\\"\" + (hyphenate(event)) + \"\\\" instead of \\\"\" + event + \"\\\".\"\n        );\n      }\n    }\n    var cbs = vm._events[event];\n    if (cbs) {\n      cbs = cbs.length > 1 ? toArray(cbs) : cbs;\n      var args = toArray(arguments, 1);\n      var info = \"event handler for \\\"\" + event + \"\\\"\";\n      for (var i = 0, l = cbs.length; i < l; i++) {\n        invokeWithErrorHandling(cbs[i], vm, args, vm, info);\n      }\n    }\n    return vm\n  };\n}\n\n/*  */\n\nvar activeInstance = null;\nvar isUpdatingChildComponent = false;\n\nfunction setActiveInstance(vm) {\n  var prevActiveInstance = activeInstance;\n  activeInstance = vm;\n  return function () {\n    activeInstance = prevActiveInstance;\n  }\n}\n\nfunction initLifecycle (vm) {\n  var options = vm.$options;\n\n  // locate first non-abstract parent\n  var parent = options.parent;\n  if (parent && !options.abstract) {\n    while (parent.$options.abstract && parent.$parent) {\n      parent = parent.$parent;\n    }\n    parent.$children.push(vm);\n  }\n\n  vm.$parent = parent;\n  vm.$root = parent ? parent.$root : vm;\n\n  vm.$children = [];\n  vm.$refs = {};\n\n  vm._watcher = null;\n  vm._inactive = null;\n  vm._directInactive = false;\n  vm._isMounted = false;\n  vm._isDestroyed = false;\n  vm._isBeingDestroyed = false;\n}\n\nfunction lifecycleMixin (Vue) {\n  Vue.prototype._update = function (vnode, hydrating) {\n    var vm = this;\n    var prevEl = vm.$el;\n    var prevVnode = vm._vnode;\n    var restoreActiveInstance = setActiveInstance(vm);\n    vm._vnode = vnode;\n    // Vue.prototype.__patch__ is injected in entry points\n    // based on the rendering backend used.\n    if (!prevVnode) {\n      // initial render\n      vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false /* removeOnly */);\n    } else {\n      // updates\n      vm.$el = vm.__patch__(prevVnode, vnode);\n    }\n    restoreActiveInstance();\n    // update __vue__ reference\n    if (prevEl) {\n      prevEl.__vue__ = null;\n    }\n    if (vm.$el) {\n      vm.$el.__vue__ = vm;\n    }\n    // if parent is an HOC, update its $el as well\n    if (vm.$vnode && vm.$parent && vm.$vnode === vm.$parent._vnode) {\n      vm.$parent.$el = vm.$el;\n    }\n    // updated hook is called by the scheduler to ensure that children are\n    // updated in a parent's updated hook.\n  };\n\n  Vue.prototype.$forceUpdate = function () {\n    var vm = this;\n    if (vm._watcher) {\n      vm._watcher.update();\n    }\n  };\n\n  Vue.prototype.$destroy = function () {\n    var vm = this;\n    if (vm._isBeingDestroyed) {\n      return\n    }\n    callHook(vm, 'beforeDestroy');\n    vm._isBeingDestroyed = true;\n    // remove self from parent\n    var parent = vm.$parent;\n    if (parent && !parent._isBeingDestroyed && !vm.$options.abstract) {\n      remove(parent.$children, vm);\n    }\n    // teardown watchers\n    if (vm._watcher) {\n      vm._watcher.teardown();\n    }\n    var i = vm._watchers.length;\n    while (i--) {\n      vm._watchers[i].teardown();\n    }\n    // remove reference from data ob\n    // frozen object may not have observer.\n    if (vm._data.__ob__) {\n      vm._data.__ob__.vmCount--;\n    }\n    // call the last hook...\n    vm._isDestroyed = true;\n    // invoke destroy hooks on current rendered tree\n    vm.__patch__(vm._vnode, null);\n    // fire destroyed hook\n    callHook(vm, 'destroyed');\n    // turn off all instance listeners.\n    vm.$off();\n    // remove __vue__ reference\n    if (vm.$el) {\n      vm.$el.__vue__ = null;\n    }\n    // release circular reference (#6759)\n    if (vm.$vnode) {\n      vm.$vnode.parent = null;\n    }\n  };\n}\n\nfunction mountComponent (\n  vm,\n  el,\n  hydrating\n) {\n  vm.$el = el;\n  if (!vm.$options.render) {\n    vm.$options.render = createEmptyVNode;\n    if (process.env.NODE_ENV !== 'production') {\n      /* istanbul ignore if */\n      if ((vm.$options.template && vm.$options.template.charAt(0) !== '#') ||\n        vm.$options.el || el) {\n        warn(\n          'You are using the runtime-only build of Vue where the template ' +\n          'compiler is not available. Either pre-compile the templates into ' +\n          'render functions, or use the compiler-included build.',\n          vm\n        );\n      } else {\n        warn(\n          'Failed to mount component: template or render function not defined.',\n          vm\n        );\n      }\n    }\n  }\n  callHook(vm, 'beforeMount');\n\n  var updateComponent;\n  /* istanbul ignore if */\n  if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n    updateComponent = function () {\n      var name = vm._name;\n      var id = vm._uid;\n      var startTag = \"vue-perf-start:\" + id;\n      var endTag = \"vue-perf-end:\" + id;\n\n      mark(startTag);\n      var vnode = vm._render();\n      mark(endTag);\n      measure((\"vue \" + name + \" render\"), startTag, endTag);\n\n      mark(startTag);\n      vm._update(vnode, hydrating);\n      mark(endTag);\n      measure((\"vue \" + name + \" patch\"), startTag, endTag);\n    };\n  } else {\n    updateComponent = function () {\n      vm._update(vm._render(), hydrating);\n    };\n  }\n\n  // we set this to vm._watcher inside the watcher's constructor\n  // since the watcher's initial patch may call $forceUpdate (e.g. inside child\n  // component's mounted hook), which relies on vm._watcher being already defined\n  new Watcher(vm, updateComponent, noop, {\n    before: function before () {\n      if (vm._isMounted && !vm._isDestroyed) {\n        callHook(vm, 'beforeUpdate');\n      }\n    }\n  }, true /* isRenderWatcher */);\n  hydrating = false;\n\n  // manually mounted instance, call mounted on self\n  // mounted is called for render-created child components in its inserted hook\n  if (vm.$vnode == null) {\n    vm._isMounted = true;\n    callHook(vm, 'mounted');\n  }\n  return vm\n}\n\nfunction updateChildComponent (\n  vm,\n  propsData,\n  listeners,\n  parentVnode,\n  renderChildren\n) {\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = true;\n  }\n\n  // determine whether component has slot children\n  // we need to do this before overwriting $options._renderChildren.\n\n  // check if there are dynamic scopedSlots (hand-written or compiled but with\n  // dynamic slot names). Static scoped slots compiled from template has the\n  // \"$stable\" marker.\n  var newScopedSlots = parentVnode.data.scopedSlots;\n  var oldScopedSlots = vm.$scopedSlots;\n  var hasDynamicScopedSlot = !!(\n    (newScopedSlots && !newScopedSlots.$stable) ||\n    (oldScopedSlots !== emptyObject && !oldScopedSlots.$stable) ||\n    (newScopedSlots && vm.$scopedSlots.$key !== newScopedSlots.$key) ||\n    (!newScopedSlots && vm.$scopedSlots.$key)\n  );\n\n  // Any static slot children from the parent may have changed during parent's\n  // update. Dynamic scoped slots may also have changed. In such cases, a forced\n  // update is necessary to ensure correctness.\n  var needsForceUpdate = !!(\n    renderChildren ||               // has new static slots\n    vm.$options._renderChildren ||  // has old static slots\n    hasDynamicScopedSlot\n  );\n\n  vm.$options._parentVnode = parentVnode;\n  vm.$vnode = parentVnode; // update vm's placeholder node without re-render\n\n  if (vm._vnode) { // update child tree's parent\n    vm._vnode.parent = parentVnode;\n  }\n  vm.$options._renderChildren = renderChildren;\n\n  // update $attrs and $listeners hash\n  // these are also reactive so they may trigger child update if the child\n  // used them during render\n  vm.$attrs = parentVnode.data.attrs || emptyObject;\n  vm.$listeners = listeners || emptyObject;\n\n  // update props\n  if (propsData && vm.$options.props) {\n    toggleObserving(false);\n    var props = vm._props;\n    var propKeys = vm.$options._propKeys || [];\n    for (var i = 0; i < propKeys.length; i++) {\n      var key = propKeys[i];\n      var propOptions = vm.$options.props; // wtf flow?\n      props[key] = validateProp(key, propOptions, propsData, vm);\n    }\n    toggleObserving(true);\n    // keep a copy of raw propsData\n    vm.$options.propsData = propsData;\n  }\n\n  // update listeners\n  listeners = listeners || emptyObject;\n  var oldListeners = vm.$options._parentListeners;\n  vm.$options._parentListeners = listeners;\n  updateComponentListeners(vm, listeners, oldListeners);\n\n  // resolve slots + force update if has children\n  if (needsForceUpdate) {\n    vm.$slots = resolveSlots(renderChildren, parentVnode.context);\n    vm.$forceUpdate();\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    isUpdatingChildComponent = false;\n  }\n}\n\nfunction isInInactiveTree (vm) {\n  while (vm && (vm = vm.$parent)) {\n    if (vm._inactive) { return true }\n  }\n  return false\n}\n\nfunction activateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = false;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  } else if (vm._directInactive) {\n    return\n  }\n  if (vm._inactive || vm._inactive === null) {\n    vm._inactive = false;\n    for (var i = 0; i < vm.$children.length; i++) {\n      activateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'activated');\n  }\n}\n\nfunction deactivateChildComponent (vm, direct) {\n  if (direct) {\n    vm._directInactive = true;\n    if (isInInactiveTree(vm)) {\n      return\n    }\n  }\n  if (!vm._inactive) {\n    vm._inactive = true;\n    for (var i = 0; i < vm.$children.length; i++) {\n      deactivateChildComponent(vm.$children[i]);\n    }\n    callHook(vm, 'deactivated');\n  }\n}\n\nfunction callHook (vm, hook) {\n  // #7573 disable dep collection when invoking lifecycle hooks\n  pushTarget();\n  var handlers = vm.$options[hook];\n  var info = hook + \" hook\";\n  if (handlers) {\n    for (var i = 0, j = handlers.length; i < j; i++) {\n      invokeWithErrorHandling(handlers[i], vm, null, vm, info);\n    }\n  }\n  if (vm._hasHookEvent) {\n    vm.$emit('hook:' + hook);\n  }\n  popTarget();\n}\n\n/*  */\n\nvar MAX_UPDATE_COUNT = 100;\n\nvar queue = [];\nvar activatedChildren = [];\nvar has = {};\nvar circular = {};\nvar waiting = false;\nvar flushing = false;\nvar index = 0;\n\n/**\n * Reset the scheduler's state.\n */\nfunction resetSchedulerState () {\n  index = queue.length = activatedChildren.length = 0;\n  has = {};\n  if (process.env.NODE_ENV !== 'production') {\n    circular = {};\n  }\n  waiting = flushing = false;\n}\n\n// Async edge case #6566 requires saving the timestamp when event listeners are\n// attached. However, calling performance.now() has a perf overhead especially\n// if the page has thousands of event listeners. Instead, we take a timestamp\n// every time the scheduler flushes and use that for all event listeners\n// attached during that flush.\nvar currentFlushTimestamp = 0;\n\n// Async edge case fix requires storing an event listener's attach timestamp.\nvar getNow = Date.now;\n\n// Determine what event timestamp the browser is using. Annoyingly, the\n// timestamp can either be hi-res (relative to page load) or low-res\n// (relative to UNIX epoch), so in order to compare time we have to use the\n// same timestamp type when saving the flush timestamp.\n// All IE versions use low-res event timestamps, and have problematic clock\n// implementations (#9632)\nif (inBrowser && !isIE) {\n  var performance = window.performance;\n  if (\n    performance &&\n    typeof performance.now === 'function' &&\n    getNow() > document.createEvent('Event').timeStamp\n  ) {\n    // if the event timestamp, although evaluated AFTER the Date.now(), is\n    // smaller than it, it means the event is using a hi-res timestamp,\n    // and we need to use the hi-res version for event listener timestamps as\n    // well.\n    getNow = function () { return performance.now(); };\n  }\n}\n\n/**\n * Flush both queues and run the watchers.\n */\nfunction flushSchedulerQueue () {\n  currentFlushTimestamp = getNow();\n  flushing = true;\n  var watcher, id;\n\n  // Sort queue before flush.\n  // This ensures that:\n  // 1. Components are updated from parent to child. (because parent is always\n  //    created before the child)\n  // 2. A component's user watchers are run before its render watcher (because\n  //    user watchers are created before the render watcher)\n  // 3. If a component is destroyed during a parent component's watcher run,\n  //    its watchers can be skipped.\n  queue.sort(function (a, b) { return a.id - b.id; });\n\n  // do not cache length because more watchers might be pushed\n  // as we run existing watchers\n  for (index = 0; index < queue.length; index++) {\n    watcher = queue[index];\n    if (watcher.before) {\n      watcher.before();\n    }\n    id = watcher.id;\n    has[id] = null;\n    watcher.run();\n    // in dev build, check and stop circular updates.\n    if (process.env.NODE_ENV !== 'production' && has[id] != null) {\n      circular[id] = (circular[id] || 0) + 1;\n      if (circular[id] > MAX_UPDATE_COUNT) {\n        warn(\n          'You may have an infinite update loop ' + (\n            watcher.user\n              ? (\"in watcher with expression \\\"\" + (watcher.expression) + \"\\\"\")\n              : \"in a component render function.\"\n          ),\n          watcher.vm\n        );\n        break\n      }\n    }\n  }\n\n  // keep copies of post queues before resetting state\n  var activatedQueue = activatedChildren.slice();\n  var updatedQueue = queue.slice();\n\n  resetSchedulerState();\n\n  // call component updated and activated hooks\n  callActivatedHooks(activatedQueue);\n  callUpdatedHooks(updatedQueue);\n\n  // devtool hook\n  /* istanbul ignore if */\n  if (devtools && config.devtools) {\n    devtools.emit('flush');\n  }\n}\n\nfunction callUpdatedHooks (queue) {\n  var i = queue.length;\n  while (i--) {\n    var watcher = queue[i];\n    var vm = watcher.vm;\n    if (vm._watcher === watcher && vm._isMounted && !vm._isDestroyed) {\n      callHook(vm, 'updated');\n    }\n  }\n}\n\n/**\n * Queue a kept-alive component that was activated during patch.\n * The queue will be processed after the entire tree has been patched.\n */\nfunction queueActivatedComponent (vm) {\n  // setting _inactive to false here so that a render function can\n  // rely on checking whether it's in an inactive tree (e.g. router-view)\n  vm._inactive = false;\n  activatedChildren.push(vm);\n}\n\nfunction callActivatedHooks (queue) {\n  for (var i = 0; i < queue.length; i++) {\n    queue[i]._inactive = true;\n    activateChildComponent(queue[i], true /* true */);\n  }\n}\n\n/**\n * Push a watcher into the watcher queue.\n * Jobs with duplicate IDs will be skipped unless it's\n * pushed when the queue is being flushed.\n */\nfunction queueWatcher (watcher) {\n  var id = watcher.id;\n  if (has[id] == null) {\n    has[id] = true;\n    if (!flushing) {\n      queue.push(watcher);\n    } else {\n      // if already flushing, splice the watcher based on its id\n      // if already past its id, it will be run next immediately.\n      var i = queue.length - 1;\n      while (i > index && queue[i].id > watcher.id) {\n        i--;\n      }\n      queue.splice(i + 1, 0, watcher);\n    }\n    // queue the flush\n    if (!waiting) {\n      waiting = true;\n\n      if (process.env.NODE_ENV !== 'production' && !config.async) {\n        flushSchedulerQueue();\n        return\n      }\n      nextTick(flushSchedulerQueue);\n    }\n  }\n}\n\n/*  */\n\n\n\nvar uid$2 = 0;\n\n/**\n * A watcher parses an expression, collects dependencies,\n * and fires callback when the expression value changes.\n * This is used for both the $watch() api and directives.\n */\nvar Watcher = function Watcher (\n  vm,\n  expOrFn,\n  cb,\n  options,\n  isRenderWatcher\n) {\n  this.vm = vm;\n  if (isRenderWatcher) {\n    vm._watcher = this;\n  }\n  vm._watchers.push(this);\n  // options\n  if (options) {\n    this.deep = !!options.deep;\n    this.user = !!options.user;\n    this.lazy = !!options.lazy;\n    this.sync = !!options.sync;\n    this.before = options.before;\n  } else {\n    this.deep = this.user = this.lazy = this.sync = false;\n  }\n  this.cb = cb;\n  this.id = ++uid$2; // uid for batching\n  this.active = true;\n  this.dirty = this.lazy; // for lazy watchers\n  this.deps = [];\n  this.newDeps = [];\n  this.depIds = new _Set();\n  this.newDepIds = new _Set();\n  this.expression = process.env.NODE_ENV !== 'production'\n    ? expOrFn.toString()\n    : '';\n  // parse expression for getter\n  if (typeof expOrFn === 'function') {\n    this.getter = expOrFn;\n  } else {\n    this.getter = parsePath(expOrFn);\n    if (!this.getter) {\n      this.getter = noop;\n      process.env.NODE_ENV !== 'production' && warn(\n        \"Failed watching path: \\\"\" + expOrFn + \"\\\" \" +\n        'Watcher only accepts simple dot-delimited paths. ' +\n        'For full control, use a function instead.',\n        vm\n      );\n    }\n  }\n  this.value = this.lazy\n    ? undefined\n    : this.get();\n};\n\n/**\n * Evaluate the getter, and re-collect dependencies.\n */\nWatcher.prototype.get = function get () {\n  pushTarget(this);\n  var value;\n  var vm = this.vm;\n  try {\n    value = this.getter.call(vm, vm);\n  } catch (e) {\n    if (this.user) {\n      handleError(e, vm, (\"getter for watcher \\\"\" + (this.expression) + \"\\\"\"));\n    } else {\n      throw e\n    }\n  } finally {\n    // \"touch\" every property so they are all tracked as\n    // dependencies for deep watching\n    if (this.deep) {\n      traverse(value);\n    }\n    popTarget();\n    this.cleanupDeps();\n  }\n  return value\n};\n\n/**\n * Add a dependency to this directive.\n */\nWatcher.prototype.addDep = function addDep (dep) {\n  var id = dep.id;\n  if (!this.newDepIds.has(id)) {\n    this.newDepIds.add(id);\n    this.newDeps.push(dep);\n    if (!this.depIds.has(id)) {\n      dep.addSub(this);\n    }\n  }\n};\n\n/**\n * Clean up for dependency collection.\n */\nWatcher.prototype.cleanupDeps = function cleanupDeps () {\n  var i = this.deps.length;\n  while (i--) {\n    var dep = this.deps[i];\n    if (!this.newDepIds.has(dep.id)) {\n      dep.removeSub(this);\n    }\n  }\n  var tmp = this.depIds;\n  this.depIds = this.newDepIds;\n  this.newDepIds = tmp;\n  this.newDepIds.clear();\n  tmp = this.deps;\n  this.deps = this.newDeps;\n  this.newDeps = tmp;\n  this.newDeps.length = 0;\n};\n\n/**\n * Subscriber interface.\n * Will be called when a dependency changes.\n */\nWatcher.prototype.update = function update () {\n  /* istanbul ignore else */\n  if (this.lazy) {\n    this.dirty = true;\n  } else if (this.sync) {\n    this.run();\n  } else {\n    queueWatcher(this);\n  }\n};\n\n/**\n * Scheduler job interface.\n * Will be called by the scheduler.\n */\nWatcher.prototype.run = function run () {\n  if (this.active) {\n    var value = this.get();\n    if (\n      value !== this.value ||\n      // Deep watchers and watchers on Object/Arrays should fire even\n      // when the value is the same, because the value may\n      // have mutated.\n      isObject(value) ||\n      this.deep\n    ) {\n      // set new value\n      var oldValue = this.value;\n      this.value = value;\n      if (this.user) {\n        var info = \"callback for watcher \\\"\" + (this.expression) + \"\\\"\";\n        invokeWithErrorHandling(this.cb, this.vm, [value, oldValue], this.vm, info);\n      } else {\n        this.cb.call(this.vm, value, oldValue);\n      }\n    }\n  }\n};\n\n/**\n * Evaluate the value of the watcher.\n * This only gets called for lazy watchers.\n */\nWatcher.prototype.evaluate = function evaluate () {\n  this.value = this.get();\n  this.dirty = false;\n};\n\n/**\n * Depend on all deps collected by this watcher.\n */\nWatcher.prototype.depend = function depend () {\n  var i = this.deps.length;\n  while (i--) {\n    this.deps[i].depend();\n  }\n};\n\n/**\n * Remove self from all dependencies' subscriber list.\n */\nWatcher.prototype.teardown = function teardown () {\n  if (this.active) {\n    // remove self from vm's watcher list\n    // this is a somewhat expensive operation so we skip it\n    // if the vm is being destroyed.\n    if (!this.vm._isBeingDestroyed) {\n      remove(this.vm._watchers, this);\n    }\n    var i = this.deps.length;\n    while (i--) {\n      this.deps[i].removeSub(this);\n    }\n    this.active = false;\n  }\n};\n\n/*  */\n\nvar sharedPropertyDefinition = {\n  enumerable: true,\n  configurable: true,\n  get: noop,\n  set: noop\n};\n\nfunction proxy (target, sourceKey, key) {\n  sharedPropertyDefinition.get = function proxyGetter () {\n    return this[sourceKey][key]\n  };\n  sharedPropertyDefinition.set = function proxySetter (val) {\n    this[sourceKey][key] = val;\n  };\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction initState (vm) {\n  vm._watchers = [];\n  var opts = vm.$options;\n  if (opts.props) { initProps(vm, opts.props); }\n  if (opts.methods) { initMethods(vm, opts.methods); }\n  if (opts.data) {\n    initData(vm);\n  } else {\n    observe(vm._data = {}, true /* asRootData */);\n  }\n  if (opts.computed) { initComputed(vm, opts.computed); }\n  if (opts.watch && opts.watch !== nativeWatch) {\n    initWatch(vm, opts.watch);\n  }\n}\n\nfunction initProps (vm, propsOptions) {\n  var propsData = vm.$options.propsData || {};\n  var props = vm._props = {};\n  // cache prop keys so that future props updates can iterate using Array\n  // instead of dynamic object key enumeration.\n  var keys = vm.$options._propKeys = [];\n  var isRoot = !vm.$parent;\n  // root instance props should be converted\n  if (!isRoot) {\n    toggleObserving(false);\n  }\n  var loop = function ( key ) {\n    keys.push(key);\n    var value = validateProp(key, propsOptions, propsData, vm);\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      var hyphenatedKey = hyphenate(key);\n      if (isReservedAttribute(hyphenatedKey) ||\n          config.isReservedAttr(hyphenatedKey)) {\n        warn(\n          (\"\\\"\" + hyphenatedKey + \"\\\" is a reserved attribute and cannot be used as component prop.\"),\n          vm\n        );\n      }\n      defineReactive$$1(props, key, value, function () {\n        if (!isRoot && !isUpdatingChildComponent) {\n          warn(\n            \"Avoid mutating a prop directly since the value will be \" +\n            \"overwritten whenever the parent component re-renders. \" +\n            \"Instead, use a data or computed property based on the prop's \" +\n            \"value. Prop being mutated: \\\"\" + key + \"\\\"\",\n            vm\n          );\n        }\n      });\n    } else {\n      defineReactive$$1(props, key, value);\n    }\n    // static props are already proxied on the component's prototype\n    // during Vue.extend(). We only need to proxy props defined at\n    // instantiation here.\n    if (!(key in vm)) {\n      proxy(vm, \"_props\", key);\n    }\n  };\n\n  for (var key in propsOptions) loop( key );\n  toggleObserving(true);\n}\n\nfunction initData (vm) {\n  var data = vm.$options.data;\n  data = vm._data = typeof data === 'function'\n    ? getData(data, vm)\n    : data || {};\n  if (!isPlainObject(data)) {\n    data = {};\n    process.env.NODE_ENV !== 'production' && warn(\n      'data functions should return an object:\\n' +\n      'https://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function',\n      vm\n    );\n  }\n  // proxy data on instance\n  var keys = Object.keys(data);\n  var props = vm.$options.props;\n  var methods = vm.$options.methods;\n  var i = keys.length;\n  while (i--) {\n    var key = keys[i];\n    if (process.env.NODE_ENV !== 'production') {\n      if (methods && hasOwn(methods, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a data property.\"),\n          vm\n        );\n      }\n    }\n    if (props && hasOwn(props, key)) {\n      process.env.NODE_ENV !== 'production' && warn(\n        \"The data property \\\"\" + key + \"\\\" is already declared as a prop. \" +\n        \"Use prop default value instead.\",\n        vm\n      );\n    } else if (!isReserved(key)) {\n      proxy(vm, \"_data\", key);\n    }\n  }\n  // observe data\n  observe(data, true /* asRootData */);\n}\n\nfunction getData (data, vm) {\n  // #7573 disable dep collection when invoking data getters\n  pushTarget();\n  try {\n    return data.call(vm, vm)\n  } catch (e) {\n    handleError(e, vm, \"data()\");\n    return {}\n  } finally {\n    popTarget();\n  }\n}\n\nvar computedWatcherOptions = { lazy: true };\n\nfunction initComputed (vm, computed) {\n  // $flow-disable-line\n  var watchers = vm._computedWatchers = Object.create(null);\n  // computed properties are just getters during SSR\n  var isSSR = isServerRendering();\n\n  for (var key in computed) {\n    var userDef = computed[key];\n    var getter = typeof userDef === 'function' ? userDef : userDef.get;\n    if (process.env.NODE_ENV !== 'production' && getter == null) {\n      warn(\n        (\"Getter is missing for computed property \\\"\" + key + \"\\\".\"),\n        vm\n      );\n    }\n\n    if (!isSSR) {\n      // create internal watcher for the computed property.\n      watchers[key] = new Watcher(\n        vm,\n        getter || noop,\n        noop,\n        computedWatcherOptions\n      );\n    }\n\n    // component-defined computed properties are already defined on the\n    // component prototype. We only need to define computed properties defined\n    // at instantiation here.\n    if (!(key in vm)) {\n      defineComputed(vm, key, userDef);\n    } else if (process.env.NODE_ENV !== 'production') {\n      if (key in vm.$data) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined in data.\"), vm);\n      } else if (vm.$options.props && key in vm.$options.props) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a prop.\"), vm);\n      } else if (vm.$options.methods && key in vm.$options.methods) {\n        warn((\"The computed property \\\"\" + key + \"\\\" is already defined as a method.\"), vm);\n      }\n    }\n  }\n}\n\nfunction defineComputed (\n  target,\n  key,\n  userDef\n) {\n  var shouldCache = !isServerRendering();\n  if (typeof userDef === 'function') {\n    sharedPropertyDefinition.get = shouldCache\n      ? createComputedGetter(key)\n      : createGetterInvoker(userDef);\n    sharedPropertyDefinition.set = noop;\n  } else {\n    sharedPropertyDefinition.get = userDef.get\n      ? shouldCache && userDef.cache !== false\n        ? createComputedGetter(key)\n        : createGetterInvoker(userDef.get)\n      : noop;\n    sharedPropertyDefinition.set = userDef.set || noop;\n  }\n  if (process.env.NODE_ENV !== 'production' &&\n      sharedPropertyDefinition.set === noop) {\n    sharedPropertyDefinition.set = function () {\n      warn(\n        (\"Computed property \\\"\" + key + \"\\\" was assigned to but it has no setter.\"),\n        this\n      );\n    };\n  }\n  Object.defineProperty(target, key, sharedPropertyDefinition);\n}\n\nfunction createComputedGetter (key) {\n  return function computedGetter () {\n    var watcher = this._computedWatchers && this._computedWatchers[key];\n    if (watcher) {\n      if (watcher.dirty) {\n        watcher.evaluate();\n      }\n      if (Dep.target) {\n        watcher.depend();\n      }\n      return watcher.value\n    }\n  }\n}\n\nfunction createGetterInvoker(fn) {\n  return function computedGetter () {\n    return fn.call(this, this)\n  }\n}\n\nfunction initMethods (vm, methods) {\n  var props = vm.$options.props;\n  for (var key in methods) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof methods[key] !== 'function') {\n        warn(\n          \"Method \\\"\" + key + \"\\\" has type \\\"\" + (typeof methods[key]) + \"\\\" in the component definition. \" +\n          \"Did you reference the function correctly?\",\n          vm\n        );\n      }\n      if (props && hasOwn(props, key)) {\n        warn(\n          (\"Method \\\"\" + key + \"\\\" has already been defined as a prop.\"),\n          vm\n        );\n      }\n      if ((key in vm) && isReserved(key)) {\n        warn(\n          \"Method \\\"\" + key + \"\\\" conflicts with an existing Vue instance method. \" +\n          \"Avoid defining component methods that start with _ or $.\"\n        );\n      }\n    }\n    vm[key] = typeof methods[key] !== 'function' ? noop : bind(methods[key], vm);\n  }\n}\n\nfunction initWatch (vm, watch) {\n  for (var key in watch) {\n    var handler = watch[key];\n    if (Array.isArray(handler)) {\n      for (var i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i]);\n      }\n    } else {\n      createWatcher(vm, key, handler);\n    }\n  }\n}\n\nfunction createWatcher (\n  vm,\n  expOrFn,\n  handler,\n  options\n) {\n  if (isPlainObject(handler)) {\n    options = handler;\n    handler = handler.handler;\n  }\n  if (typeof handler === 'string') {\n    handler = vm[handler];\n  }\n  return vm.$watch(expOrFn, handler, options)\n}\n\nfunction stateMixin (Vue) {\n  // flow somehow has problems with directly declared definition object\n  // when using Object.defineProperty, so we have to procedurally build up\n  // the object here.\n  var dataDef = {};\n  dataDef.get = function () { return this._data };\n  var propsDef = {};\n  propsDef.get = function () { return this._props };\n  if (process.env.NODE_ENV !== 'production') {\n    dataDef.set = function () {\n      warn(\n        'Avoid replacing instance root $data. ' +\n        'Use nested data properties instead.',\n        this\n      );\n    };\n    propsDef.set = function () {\n      warn(\"$props is readonly.\", this);\n    };\n  }\n  Object.defineProperty(Vue.prototype, '$data', dataDef);\n  Object.defineProperty(Vue.prototype, '$props', propsDef);\n\n  Vue.prototype.$set = set;\n  Vue.prototype.$delete = del;\n\n  Vue.prototype.$watch = function (\n    expOrFn,\n    cb,\n    options\n  ) {\n    var vm = this;\n    if (isPlainObject(cb)) {\n      return createWatcher(vm, expOrFn, cb, options)\n    }\n    options = options || {};\n    options.user = true;\n    var watcher = new Watcher(vm, expOrFn, cb, options);\n    if (options.immediate) {\n      var info = \"callback for immediate watcher \\\"\" + (watcher.expression) + \"\\\"\";\n      pushTarget();\n      invokeWithErrorHandling(cb, vm, [watcher.value], vm, info);\n      popTarget();\n    }\n    return function unwatchFn () {\n      watcher.teardown();\n    }\n  };\n}\n\n/*  */\n\nvar uid$3 = 0;\n\nfunction initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    var vm = this;\n    // a uid\n    vm._uid = uid$3++;\n\n    var startTag, endTag;\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      startTag = \"vue-perf-start:\" + (vm._uid);\n      endTag = \"vue-perf-end:\" + (vm._uid);\n      mark(startTag);\n    }\n\n    // a flag to avoid this being observed\n    vm._isVue = true;\n    // merge options\n    if (options && options._isComponent) {\n      // optimize internal component instantiation\n      // since dynamic options merging is pretty slow, and none of the\n      // internal component options needs special treatment.\n      initInternalComponent(vm, options);\n    } else {\n      vm.$options = mergeOptions(\n        resolveConstructorOptions(vm.constructor),\n        options || {},\n        vm\n      );\n    }\n    /* istanbul ignore else */\n    if (process.env.NODE_ENV !== 'production') {\n      initProxy(vm);\n    } else {\n      vm._renderProxy = vm;\n    }\n    // expose real self\n    vm._self = vm;\n    initLifecycle(vm);\n    initEvents(vm);\n    initRender(vm);\n    callHook(vm, 'beforeCreate');\n    initInjections(vm); // resolve injections before data/props\n    initState(vm);\n    initProvide(vm); // resolve provide after data/props\n    callHook(vm, 'created');\n\n    /* istanbul ignore if */\n    if (process.env.NODE_ENV !== 'production' && config.performance && mark) {\n      vm._name = formatComponentName(vm, false);\n      mark(endTag);\n      measure((\"vue \" + (vm._name) + \" init\"), startTag, endTag);\n    }\n\n    if (vm.$options.el) {\n      vm.$mount(vm.$options.el);\n    }\n  };\n}\n\nfunction initInternalComponent (vm, options) {\n  var opts = vm.$options = Object.create(vm.constructor.options);\n  // doing this because it's faster than dynamic enumeration.\n  var parentVnode = options._parentVnode;\n  opts.parent = options.parent;\n  opts._parentVnode = parentVnode;\n\n  var vnodeComponentOptions = parentVnode.componentOptions;\n  opts.propsData = vnodeComponentOptions.propsData;\n  opts._parentListeners = vnodeComponentOptions.listeners;\n  opts._renderChildren = vnodeComponentOptions.children;\n  opts._componentTag = vnodeComponentOptions.tag;\n\n  if (options.render) {\n    opts.render = options.render;\n    opts.staticRenderFns = options.staticRenderFns;\n  }\n}\n\nfunction resolveConstructorOptions (Ctor) {\n  var options = Ctor.options;\n  if (Ctor.super) {\n    var superOptions = resolveConstructorOptions(Ctor.super);\n    var cachedSuperOptions = Ctor.superOptions;\n    if (superOptions !== cachedSuperOptions) {\n      // super option changed,\n      // need to resolve new options.\n      Ctor.superOptions = superOptions;\n      // check if there are any late-modified/attached options (#4976)\n      var modifiedOptions = resolveModifiedOptions(Ctor);\n      // update base extend options\n      if (modifiedOptions) {\n        extend(Ctor.extendOptions, modifiedOptions);\n      }\n      options = Ctor.options = mergeOptions(superOptions, Ctor.extendOptions);\n      if (options.name) {\n        options.components[options.name] = Ctor;\n      }\n    }\n  }\n  return options\n}\n\nfunction resolveModifiedOptions (Ctor) {\n  var modified;\n  var latest = Ctor.options;\n  var sealed = Ctor.sealedOptions;\n  for (var key in latest) {\n    if (latest[key] !== sealed[key]) {\n      if (!modified) { modified = {}; }\n      modified[key] = latest[key];\n    }\n  }\n  return modified\n}\n\nfunction Vue (options) {\n  if (process.env.NODE_ENV !== 'production' &&\n    !(this instanceof Vue)\n  ) {\n    warn('Vue is a constructor and should be called with the `new` keyword');\n  }\n  this._init(options);\n}\n\ninitMixin(Vue);\nstateMixin(Vue);\neventsMixin(Vue);\nlifecycleMixin(Vue);\nrenderMixin(Vue);\n\n/*  */\n\nfunction initUse (Vue) {\n  Vue.use = function (plugin) {\n    var installedPlugins = (this._installedPlugins || (this._installedPlugins = []));\n    if (installedPlugins.indexOf(plugin) > -1) {\n      return this\n    }\n\n    // additional parameters\n    var args = toArray(arguments, 1);\n    args.unshift(this);\n    if (typeof plugin.install === 'function') {\n      plugin.install.apply(plugin, args);\n    } else if (typeof plugin === 'function') {\n      plugin.apply(null, args);\n    }\n    installedPlugins.push(plugin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initMixin$1 (Vue) {\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin);\n    return this\n  };\n}\n\n/*  */\n\nfunction initExtend (Vue) {\n  /**\n   * Each instance constructor, including Vue, has a unique\n   * cid. This enables us to create wrapped \"child\n   * constructors\" for prototypal inheritance and cache them.\n   */\n  Vue.cid = 0;\n  var cid = 1;\n\n  /**\n   * Class inheritance\n   */\n  Vue.extend = function (extendOptions) {\n    extendOptions = extendOptions || {};\n    var Super = this;\n    var SuperId = Super.cid;\n    var cachedCtors = extendOptions._Ctor || (extendOptions._Ctor = {});\n    if (cachedCtors[SuperId]) {\n      return cachedCtors[SuperId]\n    }\n\n    var name = extendOptions.name || Super.options.name;\n    if (process.env.NODE_ENV !== 'production' && name) {\n      validateComponentName(name);\n    }\n\n    var Sub = function VueComponent (options) {\n      this._init(options);\n    };\n    Sub.prototype = Object.create(Super.prototype);\n    Sub.prototype.constructor = Sub;\n    Sub.cid = cid++;\n    Sub.options = mergeOptions(\n      Super.options,\n      extendOptions\n    );\n    Sub['super'] = Super;\n\n    // For props and computed properties, we define the proxy getters on\n    // the Vue instances at extension time, on the extended prototype. This\n    // avoids Object.defineProperty calls for each instance created.\n    if (Sub.options.props) {\n      initProps$1(Sub);\n    }\n    if (Sub.options.computed) {\n      initComputed$1(Sub);\n    }\n\n    // allow further extension/mixin/plugin usage\n    Sub.extend = Super.extend;\n    Sub.mixin = Super.mixin;\n    Sub.use = Super.use;\n\n    // create asset registers, so extended classes\n    // can have their private assets too.\n    ASSET_TYPES.forEach(function (type) {\n      Sub[type] = Super[type];\n    });\n    // enable recursive self-lookup\n    if (name) {\n      Sub.options.components[name] = Sub;\n    }\n\n    // keep a reference to the super options at extension time.\n    // later at instantiation we can check if Super's options have\n    // been updated.\n    Sub.superOptions = Super.options;\n    Sub.extendOptions = extendOptions;\n    Sub.sealedOptions = extend({}, Sub.options);\n\n    // cache constructor\n    cachedCtors[SuperId] = Sub;\n    return Sub\n  };\n}\n\nfunction initProps$1 (Comp) {\n  var props = Comp.options.props;\n  for (var key in props) {\n    proxy(Comp.prototype, \"_props\", key);\n  }\n}\n\nfunction initComputed$1 (Comp) {\n  var computed = Comp.options.computed;\n  for (var key in computed) {\n    defineComputed(Comp.prototype, key, computed[key]);\n  }\n}\n\n/*  */\n\nfunction initAssetRegisters (Vue) {\n  /**\n   * Create asset registration methods.\n   */\n  ASSET_TYPES.forEach(function (type) {\n    Vue[type] = function (\n      id,\n      definition\n    ) {\n      if (!definition) {\n        return this.options[type + 's'][id]\n      } else {\n        /* istanbul ignore if */\n        if (process.env.NODE_ENV !== 'production' && type === 'component') {\n          validateComponentName(id);\n        }\n        if (type === 'component' && isPlainObject(definition)) {\n          definition.name = definition.name || id;\n          definition = this.options._base.extend(definition);\n        }\n        if (type === 'directive' && typeof definition === 'function') {\n          definition = { bind: definition, update: definition };\n        }\n        this.options[type + 's'][id] = definition;\n        return definition\n      }\n    };\n  });\n}\n\n/*  */\n\n\n\n\n\nfunction getComponentName (opts) {\n  return opts && (opts.Ctor.options.name || opts.tag)\n}\n\nfunction matches (pattern, name) {\n  if (Array.isArray(pattern)) {\n    return pattern.indexOf(name) > -1\n  } else if (typeof pattern === 'string') {\n    return pattern.split(',').indexOf(name) > -1\n  } else if (isRegExp(pattern)) {\n    return pattern.test(name)\n  }\n  /* istanbul ignore next */\n  return false\n}\n\nfunction pruneCache (keepAliveInstance, filter) {\n  var cache = keepAliveInstance.cache;\n  var keys = keepAliveInstance.keys;\n  var _vnode = keepAliveInstance._vnode;\n  for (var key in cache) {\n    var entry = cache[key];\n    if (entry) {\n      var name = entry.name;\n      if (name && !filter(name)) {\n        pruneCacheEntry(cache, key, keys, _vnode);\n      }\n    }\n  }\n}\n\nfunction pruneCacheEntry (\n  cache,\n  key,\n  keys,\n  current\n) {\n  var entry = cache[key];\n  if (entry && (!current || entry.tag !== current.tag)) {\n    entry.componentInstance.$destroy();\n  }\n  cache[key] = null;\n  remove(keys, key);\n}\n\nvar patternTypes = [String, RegExp, Array];\n\nvar KeepAlive = {\n  name: 'keep-alive',\n  abstract: true,\n\n  props: {\n    include: patternTypes,\n    exclude: patternTypes,\n    max: [String, Number]\n  },\n\n  methods: {\n    cacheVNode: function cacheVNode() {\n      var ref = this;\n      var cache = ref.cache;\n      var keys = ref.keys;\n      var vnodeToCache = ref.vnodeToCache;\n      var keyToCache = ref.keyToCache;\n      if (vnodeToCache) {\n        var tag = vnodeToCache.tag;\n        var componentInstance = vnodeToCache.componentInstance;\n        var componentOptions = vnodeToCache.componentOptions;\n        cache[keyToCache] = {\n          name: getComponentName(componentOptions),\n          tag: tag,\n          componentInstance: componentInstance,\n        };\n        keys.push(keyToCache);\n        // prune oldest entry\n        if (this.max && keys.length > parseInt(this.max)) {\n          pruneCacheEntry(cache, keys[0], keys, this._vnode);\n        }\n        this.vnodeToCache = null;\n      }\n    }\n  },\n\n  created: function created () {\n    this.cache = Object.create(null);\n    this.keys = [];\n  },\n\n  destroyed: function destroyed () {\n    for (var key in this.cache) {\n      pruneCacheEntry(this.cache, key, this.keys);\n    }\n  },\n\n  mounted: function mounted () {\n    var this$1 = this;\n\n    this.cacheVNode();\n    this.$watch('include', function (val) {\n      pruneCache(this$1, function (name) { return matches(val, name); });\n    });\n    this.$watch('exclude', function (val) {\n      pruneCache(this$1, function (name) { return !matches(val, name); });\n    });\n  },\n\n  updated: function updated () {\n    this.cacheVNode();\n  },\n\n  render: function render () {\n    var slot = this.$slots.default;\n    var vnode = getFirstComponentChild(slot);\n    var componentOptions = vnode && vnode.componentOptions;\n    if (componentOptions) {\n      // check pattern\n      var name = getComponentName(componentOptions);\n      var ref = this;\n      var include = ref.include;\n      var exclude = ref.exclude;\n      if (\n        // not included\n        (include && (!name || !matches(include, name))) ||\n        // excluded\n        (exclude && name && matches(exclude, name))\n      ) {\n        return vnode\n      }\n\n      var ref$1 = this;\n      var cache = ref$1.cache;\n      var keys = ref$1.keys;\n      var key = vnode.key == null\n        // same constructor may get registered as different local components\n        // so cid alone is not enough (#3269)\n        ? componentOptions.Ctor.cid + (componentOptions.tag ? (\"::\" + (componentOptions.tag)) : '')\n        : vnode.key;\n      if (cache[key]) {\n        vnode.componentInstance = cache[key].componentInstance;\n        // make current key freshest\n        remove(keys, key);\n        keys.push(key);\n      } else {\n        // delay setting the cache until update\n        this.vnodeToCache = vnode;\n        this.keyToCache = key;\n      }\n\n      vnode.data.keepAlive = true;\n    }\n    return vnode || (slot && slot[0])\n  }\n};\n\nvar builtInComponents = {\n  KeepAlive: KeepAlive\n};\n\n/*  */\n\nfunction initGlobalAPI (Vue) {\n  // config\n  var configDef = {};\n  configDef.get = function () { return config; };\n  if (process.env.NODE_ENV !== 'production') {\n    configDef.set = function () {\n      warn(\n        'Do not replace the Vue.config object, set individual fields instead.'\n      );\n    };\n  }\n  Object.defineProperty(Vue, 'config', configDef);\n\n  // exposed util methods.\n  // NOTE: these are not considered part of the public API - avoid relying on\n  // them unless you are aware of the risk.\n  Vue.util = {\n    warn: warn,\n    extend: extend,\n    mergeOptions: mergeOptions,\n    defineReactive: defineReactive$$1\n  };\n\n  Vue.set = set;\n  Vue.delete = del;\n  Vue.nextTick = nextTick;\n\n  // 2.6 explicit observable API\n  Vue.observable = function (obj) {\n    observe(obj);\n    return obj\n  };\n\n  Vue.options = Object.create(null);\n  ASSET_TYPES.forEach(function (type) {\n    Vue.options[type + 's'] = Object.create(null);\n  });\n\n  // this is used to identify the \"base\" constructor to extend all plain-object\n  // components with in Weex's multi-instance scenarios.\n  Vue.options._base = Vue;\n\n  extend(Vue.options.components, builtInComponents);\n\n  initUse(Vue);\n  initMixin$1(Vue);\n  initExtend(Vue);\n  initAssetRegisters(Vue);\n}\n\ninitGlobalAPI(Vue);\n\nObject.defineProperty(Vue.prototype, '$isServer', {\n  get: isServerRendering\n});\n\nObject.defineProperty(Vue.prototype, '$ssrContext', {\n  get: function get () {\n    /* istanbul ignore next */\n    return this.$vnode && this.$vnode.ssrContext\n  }\n});\n\n// expose FunctionalRenderContext for ssr runtime helper installation\nObject.defineProperty(Vue, 'FunctionalRenderContext', {\n  value: FunctionalRenderContext\n});\n\nVue.version = '2.6.14';\n\n/*  */\n\n// these are reserved for web because they are directly compiled away\n// during template compilation\nvar isReservedAttr = makeMap('style,class');\n\n// attributes that should be using props for binding\nvar acceptValue = makeMap('input,textarea,option,select,progress');\nvar mustUseProp = function (tag, type, attr) {\n  return (\n    (attr === 'value' && acceptValue(tag)) && type !== 'button' ||\n    (attr === 'selected' && tag === 'option') ||\n    (attr === 'checked' && tag === 'input') ||\n    (attr === 'muted' && tag === 'video')\n  )\n};\n\nvar isEnumeratedAttr = makeMap('contenteditable,draggable,spellcheck');\n\nvar isValidContentEditableValue = makeMap('events,caret,typing,plaintext-only');\n\nvar convertEnumeratedValue = function (key, value) {\n  return isFalsyAttrValue(value) || value === 'false'\n    ? 'false'\n    // allow arbitrary string value for contenteditable\n    : key === 'contenteditable' && isValidContentEditableValue(value)\n      ? value\n      : 'true'\n};\n\nvar isBooleanAttr = makeMap(\n  'allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,' +\n  'default,defaultchecked,defaultmuted,defaultselected,defer,disabled,' +\n  'enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,' +\n  'muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,' +\n  'required,reversed,scoped,seamless,selected,sortable,' +\n  'truespeed,typemustmatch,visible'\n);\n\nvar xlinkNS = 'http://www.w3.org/1999/xlink';\n\nvar isXlink = function (name) {\n  return name.charAt(5) === ':' && name.slice(0, 5) === 'xlink'\n};\n\nvar getXlinkProp = function (name) {\n  return isXlink(name) ? name.slice(6, name.length) : ''\n};\n\nvar isFalsyAttrValue = function (val) {\n  return val == null || val === false\n};\n\n/*  */\n\nfunction genClassForVnode (vnode) {\n  var data = vnode.data;\n  var parentNode = vnode;\n  var childNode = vnode;\n  while (isDef(childNode.componentInstance)) {\n    childNode = childNode.componentInstance._vnode;\n    if (childNode && childNode.data) {\n      data = mergeClassData(childNode.data, data);\n    }\n  }\n  while (isDef(parentNode = parentNode.parent)) {\n    if (parentNode && parentNode.data) {\n      data = mergeClassData(data, parentNode.data);\n    }\n  }\n  return renderClass(data.staticClass, data.class)\n}\n\nfunction mergeClassData (child, parent) {\n  return {\n    staticClass: concat(child.staticClass, parent.staticClass),\n    class: isDef(child.class)\n      ? [child.class, parent.class]\n      : parent.class\n  }\n}\n\nfunction renderClass (\n  staticClass,\n  dynamicClass\n) {\n  if (isDef(staticClass) || isDef(dynamicClass)) {\n    return concat(staticClass, stringifyClass(dynamicClass))\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction concat (a, b) {\n  return a ? b ? (a + ' ' + b) : a : (b || '')\n}\n\nfunction stringifyClass (value) {\n  if (Array.isArray(value)) {\n    return stringifyArray(value)\n  }\n  if (isObject(value)) {\n    return stringifyObject(value)\n  }\n  if (typeof value === 'string') {\n    return value\n  }\n  /* istanbul ignore next */\n  return ''\n}\n\nfunction stringifyArray (value) {\n  var res = '';\n  var stringified;\n  for (var i = 0, l = value.length; i < l; i++) {\n    if (isDef(stringified = stringifyClass(value[i])) && stringified !== '') {\n      if (res) { res += ' '; }\n      res += stringified;\n    }\n  }\n  return res\n}\n\nfunction stringifyObject (value) {\n  var res = '';\n  for (var key in value) {\n    if (value[key]) {\n      if (res) { res += ' '; }\n      res += key;\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar namespaceMap = {\n  svg: 'http://www.w3.org/2000/svg',\n  math: 'http://www.w3.org/1998/Math/MathML'\n};\n\nvar isHTMLTag = makeMap(\n  'html,body,base,head,link,meta,style,title,' +\n  'address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,' +\n  'div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,' +\n  'a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,' +\n  's,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,' +\n  'embed,object,param,source,canvas,script,noscript,del,ins,' +\n  'caption,col,colgroup,table,thead,tbody,td,th,tr,' +\n  'button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,' +\n  'output,progress,select,textarea,' +\n  'details,dialog,menu,menuitem,summary,' +\n  'content,element,shadow,template,blockquote,iframe,tfoot'\n);\n\n// this map is intentionally selective, only covering SVG elements that may\n// contain child elements.\nvar isSVG = makeMap(\n  'svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,' +\n  'foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,' +\n  'polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view',\n  true\n);\n\nvar isReservedTag = function (tag) {\n  return isHTMLTag(tag) || isSVG(tag)\n};\n\nfunction getTagNamespace (tag) {\n  if (isSVG(tag)) {\n    return 'svg'\n  }\n  // basic support for MathML\n  // note it doesn't support other MathML elements being component roots\n  if (tag === 'math') {\n    return 'math'\n  }\n}\n\nvar unknownElementCache = Object.create(null);\nfunction isUnknownElement (tag) {\n  /* istanbul ignore if */\n  if (!inBrowser) {\n    return true\n  }\n  if (isReservedTag(tag)) {\n    return false\n  }\n  tag = tag.toLowerCase();\n  /* istanbul ignore if */\n  if (unknownElementCache[tag] != null) {\n    return unknownElementCache[tag]\n  }\n  var el = document.createElement(tag);\n  if (tag.indexOf('-') > -1) {\n    // http://stackoverflow.com/a/28210364/1070244\n    return (unknownElementCache[tag] = (\n      el.constructor === window.HTMLUnknownElement ||\n      el.constructor === window.HTMLElement\n    ))\n  } else {\n    return (unknownElementCache[tag] = /HTMLUnknownElement/.test(el.toString()))\n  }\n}\n\nvar isTextInputType = makeMap('text,number,password,search,email,tel,url');\n\n/*  */\n\n/**\n * Query an element selector if it's not an element already.\n */\nfunction query (el) {\n  if (typeof el === 'string') {\n    var selected = document.querySelector(el);\n    if (!selected) {\n      process.env.NODE_ENV !== 'production' && warn(\n        'Cannot find element: ' + el\n      );\n      return document.createElement('div')\n    }\n    return selected\n  } else {\n    return el\n  }\n}\n\n/*  */\n\nfunction createElement$1 (tagName, vnode) {\n  var elm = document.createElement(tagName);\n  if (tagName !== 'select') {\n    return elm\n  }\n  // false or null will remove the attribute but undefined will not\n  if (vnode.data && vnode.data.attrs && vnode.data.attrs.multiple !== undefined) {\n    elm.setAttribute('multiple', 'multiple');\n  }\n  return elm\n}\n\nfunction createElementNS (namespace, tagName) {\n  return document.createElementNS(namespaceMap[namespace], tagName)\n}\n\nfunction createTextNode (text) {\n  return document.createTextNode(text)\n}\n\nfunction createComment (text) {\n  return document.createComment(text)\n}\n\nfunction insertBefore (parentNode, newNode, referenceNode) {\n  parentNode.insertBefore(newNode, referenceNode);\n}\n\nfunction removeChild (node, child) {\n  node.removeChild(child);\n}\n\nfunction appendChild (node, child) {\n  node.appendChild(child);\n}\n\nfunction parentNode (node) {\n  return node.parentNode\n}\n\nfunction nextSibling (node) {\n  return node.nextSibling\n}\n\nfunction tagName (node) {\n  return node.tagName\n}\n\nfunction setTextContent (node, text) {\n  node.textContent = text;\n}\n\nfunction setStyleScope (node, scopeId) {\n  node.setAttribute(scopeId, '');\n}\n\nvar nodeOps = /*#__PURE__*/Object.freeze({\n  createElement: createElement$1,\n  createElementNS: createElementNS,\n  createTextNode: createTextNode,\n  createComment: createComment,\n  insertBefore: insertBefore,\n  removeChild: removeChild,\n  appendChild: appendChild,\n  parentNode: parentNode,\n  nextSibling: nextSibling,\n  tagName: tagName,\n  setTextContent: setTextContent,\n  setStyleScope: setStyleScope\n});\n\n/*  */\n\nvar ref = {\n  create: function create (_, vnode) {\n    registerRef(vnode);\n  },\n  update: function update (oldVnode, vnode) {\n    if (oldVnode.data.ref !== vnode.data.ref) {\n      registerRef(oldVnode, true);\n      registerRef(vnode);\n    }\n  },\n  destroy: function destroy (vnode) {\n    registerRef(vnode, true);\n  }\n};\n\nfunction registerRef (vnode, isRemoval) {\n  var key = vnode.data.ref;\n  if (!isDef(key)) { return }\n\n  var vm = vnode.context;\n  var ref = vnode.componentInstance || vnode.elm;\n  var refs = vm.$refs;\n  if (isRemoval) {\n    if (Array.isArray(refs[key])) {\n      remove(refs[key], ref);\n    } else if (refs[key] === ref) {\n      refs[key] = undefined;\n    }\n  } else {\n    if (vnode.data.refInFor) {\n      if (!Array.isArray(refs[key])) {\n        refs[key] = [ref];\n      } else if (refs[key].indexOf(ref) < 0) {\n        // $flow-disable-line\n        refs[key].push(ref);\n      }\n    } else {\n      refs[key] = ref;\n    }\n  }\n}\n\n/**\n * Virtual DOM patching algorithm based on Snabbdom by\n * Simon Friis Vindum (@paldepind)\n * Licensed under the MIT License\n * https://github.com/paldepind/snabbdom/blob/master/LICENSE\n *\n * modified by Evan You (@yyx990803)\n *\n * Not type-checking this because this file is perf-critical and the cost\n * of making flow understand it is not worth it.\n */\n\nvar emptyNode = new VNode('', {}, []);\n\nvar hooks = ['create', 'activate', 'update', 'remove', 'destroy'];\n\nfunction sameVnode (a, b) {\n  return (\n    a.key === b.key &&\n    a.asyncFactory === b.asyncFactory && (\n      (\n        a.tag === b.tag &&\n        a.isComment === b.isComment &&\n        isDef(a.data) === isDef(b.data) &&\n        sameInputType(a, b)\n      ) || (\n        isTrue(a.isAsyncPlaceholder) &&\n        isUndef(b.asyncFactory.error)\n      )\n    )\n  )\n}\n\nfunction sameInputType (a, b) {\n  if (a.tag !== 'input') { return true }\n  var i;\n  var typeA = isDef(i = a.data) && isDef(i = i.attrs) && i.type;\n  var typeB = isDef(i = b.data) && isDef(i = i.attrs) && i.type;\n  return typeA === typeB || isTextInputType(typeA) && isTextInputType(typeB)\n}\n\nfunction createKeyToOldIdx (children, beginIdx, endIdx) {\n  var i, key;\n  var map = {};\n  for (i = beginIdx; i <= endIdx; ++i) {\n    key = children[i].key;\n    if (isDef(key)) { map[key] = i; }\n  }\n  return map\n}\n\nfunction createPatchFunction (backend) {\n  var i, j;\n  var cbs = {};\n\n  var modules = backend.modules;\n  var nodeOps = backend.nodeOps;\n\n  for (i = 0; i < hooks.length; ++i) {\n    cbs[hooks[i]] = [];\n    for (j = 0; j < modules.length; ++j) {\n      if (isDef(modules[j][hooks[i]])) {\n        cbs[hooks[i]].push(modules[j][hooks[i]]);\n      }\n    }\n  }\n\n  function emptyNodeAt (elm) {\n    return new VNode(nodeOps.tagName(elm).toLowerCase(), {}, [], undefined, elm)\n  }\n\n  function createRmCb (childElm, listeners) {\n    function remove$$1 () {\n      if (--remove$$1.listeners === 0) {\n        removeNode(childElm);\n      }\n    }\n    remove$$1.listeners = listeners;\n    return remove$$1\n  }\n\n  function removeNode (el) {\n    var parent = nodeOps.parentNode(el);\n    // element may have already been removed due to v-html / v-text\n    if (isDef(parent)) {\n      nodeOps.removeChild(parent, el);\n    }\n  }\n\n  function isUnknownElement$$1 (vnode, inVPre) {\n    return (\n      !inVPre &&\n      !vnode.ns &&\n      !(\n        config.ignoredElements.length &&\n        config.ignoredElements.some(function (ignore) {\n          return isRegExp(ignore)\n            ? ignore.test(vnode.tag)\n            : ignore === vnode.tag\n        })\n      ) &&\n      config.isUnknownElement(vnode.tag)\n    )\n  }\n\n  var creatingElmInVPre = 0;\n\n  function createElm (\n    vnode,\n    insertedVnodeQueue,\n    parentElm,\n    refElm,\n    nested,\n    ownerArray,\n    index\n  ) {\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n      // This vnode was used in a previous render!\n      // now it's used as a new node, overwriting its elm would cause\n      // potential patch errors down the road when it's used as an insertion\n      // reference node. Instead, we clone the node on-demand before creating\n      // associated DOM element for it.\n      vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    vnode.isRootInsert = !nested; // for transition enter check\n    if (createComponent(vnode, insertedVnodeQueue, parentElm, refElm)) {\n      return\n    }\n\n    var data = vnode.data;\n    var children = vnode.children;\n    var tag = vnode.tag;\n    if (isDef(tag)) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (data && data.pre) {\n          creatingElmInVPre++;\n        }\n        if (isUnknownElement$$1(vnode, creatingElmInVPre)) {\n          warn(\n            'Unknown custom element: <' + tag + '> - did you ' +\n            'register the component correctly? For recursive components, ' +\n            'make sure to provide the \"name\" option.',\n            vnode.context\n          );\n        }\n      }\n\n      vnode.elm = vnode.ns\n        ? nodeOps.createElementNS(vnode.ns, tag)\n        : nodeOps.createElement(tag, vnode);\n      setScope(vnode);\n\n      /* istanbul ignore if */\n      {\n        createChildren(vnode, children, insertedVnodeQueue);\n        if (isDef(data)) {\n          invokeCreateHooks(vnode, insertedVnodeQueue);\n        }\n        insert(parentElm, vnode.elm, refElm);\n      }\n\n      if (process.env.NODE_ENV !== 'production' && data && data.pre) {\n        creatingElmInVPre--;\n      }\n    } else if (isTrue(vnode.isComment)) {\n      vnode.elm = nodeOps.createComment(vnode.text);\n      insert(parentElm, vnode.elm, refElm);\n    } else {\n      vnode.elm = nodeOps.createTextNode(vnode.text);\n      insert(parentElm, vnode.elm, refElm);\n    }\n  }\n\n  function createComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i = vnode.data;\n    if (isDef(i)) {\n      var isReactivated = isDef(vnode.componentInstance) && i.keepAlive;\n      if (isDef(i = i.hook) && isDef(i = i.init)) {\n        i(vnode, false /* hydrating */);\n      }\n      // after calling the init hook, if the vnode is a child component\n      // it should've created a child instance and mounted it. the child\n      // component also has set the placeholder vnode's elm.\n      // in that case we can just return the element and be done.\n      if (isDef(vnode.componentInstance)) {\n        initComponent(vnode, insertedVnodeQueue);\n        insert(parentElm, vnode.elm, refElm);\n        if (isTrue(isReactivated)) {\n          reactivateComponent(vnode, insertedVnodeQueue, parentElm, refElm);\n        }\n        return true\n      }\n    }\n  }\n\n  function initComponent (vnode, insertedVnodeQueue) {\n    if (isDef(vnode.data.pendingInsert)) {\n      insertedVnodeQueue.push.apply(insertedVnodeQueue, vnode.data.pendingInsert);\n      vnode.data.pendingInsert = null;\n    }\n    vnode.elm = vnode.componentInstance.$el;\n    if (isPatchable(vnode)) {\n      invokeCreateHooks(vnode, insertedVnodeQueue);\n      setScope(vnode);\n    } else {\n      // empty component root.\n      // skip all element-related modules except for ref (#3455)\n      registerRef(vnode);\n      // make sure to invoke the insert hook\n      insertedVnodeQueue.push(vnode);\n    }\n  }\n\n  function reactivateComponent (vnode, insertedVnodeQueue, parentElm, refElm) {\n    var i;\n    // hack for #4339: a reactivated component with inner transition\n    // does not trigger because the inner node's created hooks are not called\n    // again. It's not ideal to involve module-specific logic in here but\n    // there doesn't seem to be a better way to do it.\n    var innerNode = vnode;\n    while (innerNode.componentInstance) {\n      innerNode = innerNode.componentInstance._vnode;\n      if (isDef(i = innerNode.data) && isDef(i = i.transition)) {\n        for (i = 0; i < cbs.activate.length; ++i) {\n          cbs.activate[i](emptyNode, innerNode);\n        }\n        insertedVnodeQueue.push(innerNode);\n        break\n      }\n    }\n    // unlike a newly created component,\n    // a reactivated keep-alive component doesn't insert itself\n    insert(parentElm, vnode.elm, refElm);\n  }\n\n  function insert (parent, elm, ref$$1) {\n    if (isDef(parent)) {\n      if (isDef(ref$$1)) {\n        if (nodeOps.parentNode(ref$$1) === parent) {\n          nodeOps.insertBefore(parent, elm, ref$$1);\n        }\n      } else {\n        nodeOps.appendChild(parent, elm);\n      }\n    }\n  }\n\n  function createChildren (vnode, children, insertedVnodeQueue) {\n    if (Array.isArray(children)) {\n      if (process.env.NODE_ENV !== 'production') {\n        checkDuplicateKeys(children);\n      }\n      for (var i = 0; i < children.length; ++i) {\n        createElm(children[i], insertedVnodeQueue, vnode.elm, null, true, children, i);\n      }\n    } else if (isPrimitive(vnode.text)) {\n      nodeOps.appendChild(vnode.elm, nodeOps.createTextNode(String(vnode.text)));\n    }\n  }\n\n  function isPatchable (vnode) {\n    while (vnode.componentInstance) {\n      vnode = vnode.componentInstance._vnode;\n    }\n    return isDef(vnode.tag)\n  }\n\n  function invokeCreateHooks (vnode, insertedVnodeQueue) {\n    for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n      cbs.create[i$1](emptyNode, vnode);\n    }\n    i = vnode.data.hook; // Reuse variable\n    if (isDef(i)) {\n      if (isDef(i.create)) { i.create(emptyNode, vnode); }\n      if (isDef(i.insert)) { insertedVnodeQueue.push(vnode); }\n    }\n  }\n\n  // set scope id attribute for scoped CSS.\n  // this is implemented as a special case to avoid the overhead\n  // of going through the normal attribute patching process.\n  function setScope (vnode) {\n    var i;\n    if (isDef(i = vnode.fnScopeId)) {\n      nodeOps.setStyleScope(vnode.elm, i);\n    } else {\n      var ancestor = vnode;\n      while (ancestor) {\n        if (isDef(i = ancestor.context) && isDef(i = i.$options._scopeId)) {\n          nodeOps.setStyleScope(vnode.elm, i);\n        }\n        ancestor = ancestor.parent;\n      }\n    }\n    // for slot content they should also get the scopeId from the host instance.\n    if (isDef(i = activeInstance) &&\n      i !== vnode.context &&\n      i !== vnode.fnContext &&\n      isDef(i = i.$options._scopeId)\n    ) {\n      nodeOps.setStyleScope(vnode.elm, i);\n    }\n  }\n\n  function addVnodes (parentElm, refElm, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      createElm(vnodes[startIdx], insertedVnodeQueue, parentElm, refElm, false, vnodes, startIdx);\n    }\n  }\n\n  function invokeDestroyHook (vnode) {\n    var i, j;\n    var data = vnode.data;\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.destroy)) { i(vnode); }\n      for (i = 0; i < cbs.destroy.length; ++i) { cbs.destroy[i](vnode); }\n    }\n    if (isDef(i = vnode.children)) {\n      for (j = 0; j < vnode.children.length; ++j) {\n        invokeDestroyHook(vnode.children[j]);\n      }\n    }\n  }\n\n  function removeVnodes (vnodes, startIdx, endIdx) {\n    for (; startIdx <= endIdx; ++startIdx) {\n      var ch = vnodes[startIdx];\n      if (isDef(ch)) {\n        if (isDef(ch.tag)) {\n          removeAndInvokeRemoveHook(ch);\n          invokeDestroyHook(ch);\n        } else { // Text node\n          removeNode(ch.elm);\n        }\n      }\n    }\n  }\n\n  function removeAndInvokeRemoveHook (vnode, rm) {\n    if (isDef(rm) || isDef(vnode.data)) {\n      var i;\n      var listeners = cbs.remove.length + 1;\n      if (isDef(rm)) {\n        // we have a recursively passed down rm callback\n        // increase the listeners count\n        rm.listeners += listeners;\n      } else {\n        // directly removing\n        rm = createRmCb(vnode.elm, listeners);\n      }\n      // recursively invoke hooks on child component root node\n      if (isDef(i = vnode.componentInstance) && isDef(i = i._vnode) && isDef(i.data)) {\n        removeAndInvokeRemoveHook(i, rm);\n      }\n      for (i = 0; i < cbs.remove.length; ++i) {\n        cbs.remove[i](vnode, rm);\n      }\n      if (isDef(i = vnode.data.hook) && isDef(i = i.remove)) {\n        i(vnode, rm);\n      } else {\n        rm();\n      }\n    } else {\n      removeNode(vnode.elm);\n    }\n  }\n\n  function updateChildren (parentElm, oldCh, newCh, insertedVnodeQueue, removeOnly) {\n    var oldStartIdx = 0;\n    var newStartIdx = 0;\n    var oldEndIdx = oldCh.length - 1;\n    var oldStartVnode = oldCh[0];\n    var oldEndVnode = oldCh[oldEndIdx];\n    var newEndIdx = newCh.length - 1;\n    var newStartVnode = newCh[0];\n    var newEndVnode = newCh[newEndIdx];\n    var oldKeyToIdx, idxInOld, vnodeToMove, refElm;\n\n    // removeOnly is a special flag used only by <transition-group>\n    // to ensure removed elements stay in correct relative positions\n    // during leaving transitions\n    var canMove = !removeOnly;\n\n    if (process.env.NODE_ENV !== 'production') {\n      checkDuplicateKeys(newCh);\n    }\n\n    while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n      if (isUndef(oldStartVnode)) {\n        oldStartVnode = oldCh[++oldStartIdx]; // Vnode has been moved left\n      } else if (isUndef(oldEndVnode)) {\n        oldEndVnode = oldCh[--oldEndIdx];\n      } else if (sameVnode(oldStartVnode, newStartVnode)) {\n        patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n        oldStartVnode = oldCh[++oldStartIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else if (sameVnode(oldEndVnode, newEndVnode)) {\n        patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldStartVnode, newEndVnode)) { // Vnode moved right\n        patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue, newCh, newEndIdx);\n        canMove && nodeOps.insertBefore(parentElm, oldStartVnode.elm, nodeOps.nextSibling(oldEndVnode.elm));\n        oldStartVnode = oldCh[++oldStartIdx];\n        newEndVnode = newCh[--newEndIdx];\n      } else if (sameVnode(oldEndVnode, newStartVnode)) { // Vnode moved left\n        patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n        canMove && nodeOps.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n        oldEndVnode = oldCh[--oldEndIdx];\n        newStartVnode = newCh[++newStartIdx];\n      } else {\n        if (isUndef(oldKeyToIdx)) { oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx); }\n        idxInOld = isDef(newStartVnode.key)\n          ? oldKeyToIdx[newStartVnode.key]\n          : findIdxInOld(newStartVnode, oldCh, oldStartIdx, oldEndIdx);\n        if (isUndef(idxInOld)) { // New element\n          createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);\n        } else {\n          vnodeToMove = oldCh[idxInOld];\n          if (sameVnode(vnodeToMove, newStartVnode)) {\n            patchVnode(vnodeToMove, newStartVnode, insertedVnodeQueue, newCh, newStartIdx);\n            oldCh[idxInOld] = undefined;\n            canMove && nodeOps.insertBefore(parentElm, vnodeToMove.elm, oldStartVnode.elm);\n          } else {\n            // same key but different element. treat as new element\n            createElm(newStartVnode, insertedVnodeQueue, parentElm, oldStartVnode.elm, false, newCh, newStartIdx);\n          }\n        }\n        newStartVnode = newCh[++newStartIdx];\n      }\n    }\n    if (oldStartIdx > oldEndIdx) {\n      refElm = isUndef(newCh[newEndIdx + 1]) ? null : newCh[newEndIdx + 1].elm;\n      addVnodes(parentElm, refElm, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n    } else if (newStartIdx > newEndIdx) {\n      removeVnodes(oldCh, oldStartIdx, oldEndIdx);\n    }\n  }\n\n  function checkDuplicateKeys (children) {\n    var seenKeys = {};\n    for (var i = 0; i < children.length; i++) {\n      var vnode = children[i];\n      var key = vnode.key;\n      if (isDef(key)) {\n        if (seenKeys[key]) {\n          warn(\n            (\"Duplicate keys detected: '\" + key + \"'. This may cause an update error.\"),\n            vnode.context\n          );\n        } else {\n          seenKeys[key] = true;\n        }\n      }\n    }\n  }\n\n  function findIdxInOld (node, oldCh, start, end) {\n    for (var i = start; i < end; i++) {\n      var c = oldCh[i];\n      if (isDef(c) && sameVnode(node, c)) { return i }\n    }\n  }\n\n  function patchVnode (\n    oldVnode,\n    vnode,\n    insertedVnodeQueue,\n    ownerArray,\n    index,\n    removeOnly\n  ) {\n    if (oldVnode === vnode) {\n      return\n    }\n\n    if (isDef(vnode.elm) && isDef(ownerArray)) {\n      // clone reused vnode\n      vnode = ownerArray[index] = cloneVNode(vnode);\n    }\n\n    var elm = vnode.elm = oldVnode.elm;\n\n    if (isTrue(oldVnode.isAsyncPlaceholder)) {\n      if (isDef(vnode.asyncFactory.resolved)) {\n        hydrate(oldVnode.elm, vnode, insertedVnodeQueue);\n      } else {\n        vnode.isAsyncPlaceholder = true;\n      }\n      return\n    }\n\n    // reuse element for static trees.\n    // note we only do this if the vnode is cloned -\n    // if the new node is not cloned it means the render functions have been\n    // reset by the hot-reload-api and we need to do a proper re-render.\n    if (isTrue(vnode.isStatic) &&\n      isTrue(oldVnode.isStatic) &&\n      vnode.key === oldVnode.key &&\n      (isTrue(vnode.isCloned) || isTrue(vnode.isOnce))\n    ) {\n      vnode.componentInstance = oldVnode.componentInstance;\n      return\n    }\n\n    var i;\n    var data = vnode.data;\n    if (isDef(data) && isDef(i = data.hook) && isDef(i = i.prepatch)) {\n      i(oldVnode, vnode);\n    }\n\n    var oldCh = oldVnode.children;\n    var ch = vnode.children;\n    if (isDef(data) && isPatchable(vnode)) {\n      for (i = 0; i < cbs.update.length; ++i) { cbs.update[i](oldVnode, vnode); }\n      if (isDef(i = data.hook) && isDef(i = i.update)) { i(oldVnode, vnode); }\n    }\n    if (isUndef(vnode.text)) {\n      if (isDef(oldCh) && isDef(ch)) {\n        if (oldCh !== ch) { updateChildren(elm, oldCh, ch, insertedVnodeQueue, removeOnly); }\n      } else if (isDef(ch)) {\n        if (process.env.NODE_ENV !== 'production') {\n          checkDuplicateKeys(ch);\n        }\n        if (isDef(oldVnode.text)) { nodeOps.setTextContent(elm, ''); }\n        addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n      } else if (isDef(oldCh)) {\n        removeVnodes(oldCh, 0, oldCh.length - 1);\n      } else if (isDef(oldVnode.text)) {\n        nodeOps.setTextContent(elm, '');\n      }\n    } else if (oldVnode.text !== vnode.text) {\n      nodeOps.setTextContent(elm, vnode.text);\n    }\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.postpatch)) { i(oldVnode, vnode); }\n    }\n  }\n\n  function invokeInsertHook (vnode, queue, initial) {\n    // delay insert hooks for component root nodes, invoke them after the\n    // element is really inserted\n    if (isTrue(initial) && isDef(vnode.parent)) {\n      vnode.parent.data.pendingInsert = queue;\n    } else {\n      for (var i = 0; i < queue.length; ++i) {\n        queue[i].data.hook.insert(queue[i]);\n      }\n    }\n  }\n\n  var hydrationBailed = false;\n  // list of modules that can skip create hook during hydration because they\n  // are already rendered on the client or has no need for initialization\n  // Note: style is excluded because it relies on initial clone for future\n  // deep updates (#7063).\n  var isRenderedModule = makeMap('attrs,class,staticClass,staticStyle,key');\n\n  // Note: this is a browser-only function so we can assume elms are DOM nodes.\n  function hydrate (elm, vnode, insertedVnodeQueue, inVPre) {\n    var i;\n    var tag = vnode.tag;\n    var data = vnode.data;\n    var children = vnode.children;\n    inVPre = inVPre || (data && data.pre);\n    vnode.elm = elm;\n\n    if (isTrue(vnode.isComment) && isDef(vnode.asyncFactory)) {\n      vnode.isAsyncPlaceholder = true;\n      return true\n    }\n    // assert node match\n    if (process.env.NODE_ENV !== 'production') {\n      if (!assertNodeMatch(elm, vnode, inVPre)) {\n        return false\n      }\n    }\n    if (isDef(data)) {\n      if (isDef(i = data.hook) && isDef(i = i.init)) { i(vnode, true /* hydrating */); }\n      if (isDef(i = vnode.componentInstance)) {\n        // child component. it should have hydrated its own tree.\n        initComponent(vnode, insertedVnodeQueue);\n        return true\n      }\n    }\n    if (isDef(tag)) {\n      if (isDef(children)) {\n        // empty element, allow client to pick up and populate children\n        if (!elm.hasChildNodes()) {\n          createChildren(vnode, children, insertedVnodeQueue);\n        } else {\n          // v-html and domProps: innerHTML\n          if (isDef(i = data) && isDef(i = i.domProps) && isDef(i = i.innerHTML)) {\n            if (i !== elm.innerHTML) {\n              /* istanbul ignore if */\n              if (process.env.NODE_ENV !== 'production' &&\n                typeof console !== 'undefined' &&\n                !hydrationBailed\n              ) {\n                hydrationBailed = true;\n                console.warn('Parent: ', elm);\n                console.warn('server innerHTML: ', i);\n                console.warn('client innerHTML: ', elm.innerHTML);\n              }\n              return false\n            }\n          } else {\n            // iterate and compare children lists\n            var childrenMatch = true;\n            var childNode = elm.firstChild;\n            for (var i$1 = 0; i$1 < children.length; i$1++) {\n              if (!childNode || !hydrate(childNode, children[i$1], insertedVnodeQueue, inVPre)) {\n                childrenMatch = false;\n                break\n              }\n              childNode = childNode.nextSibling;\n            }\n            // if childNode is not null, it means the actual childNodes list is\n            // longer than the virtual children list.\n            if (!childrenMatch || childNode) {\n              /* istanbul ignore if */\n              if (process.env.NODE_ENV !== 'production' &&\n                typeof console !== 'undefined' &&\n                !hydrationBailed\n              ) {\n                hydrationBailed = true;\n                console.warn('Parent: ', elm);\n                console.warn('Mismatching childNodes vs. VNodes: ', elm.childNodes, children);\n              }\n              return false\n            }\n          }\n        }\n      }\n      if (isDef(data)) {\n        var fullInvoke = false;\n        for (var key in data) {\n          if (!isRenderedModule(key)) {\n            fullInvoke = true;\n            invokeCreateHooks(vnode, insertedVnodeQueue);\n            break\n          }\n        }\n        if (!fullInvoke && data['class']) {\n          // ensure collecting deps for deep class bindings for future updates\n          traverse(data['class']);\n        }\n      }\n    } else if (elm.data !== vnode.text) {\n      elm.data = vnode.text;\n    }\n    return true\n  }\n\n  function assertNodeMatch (node, vnode, inVPre) {\n    if (isDef(vnode.tag)) {\n      return vnode.tag.indexOf('vue-component') === 0 || (\n        !isUnknownElement$$1(vnode, inVPre) &&\n        vnode.tag.toLowerCase() === (node.tagName && node.tagName.toLowerCase())\n      )\n    } else {\n      return node.nodeType === (vnode.isComment ? 8 : 3)\n    }\n  }\n\n  return function patch (oldVnode, vnode, hydrating, removeOnly) {\n    if (isUndef(vnode)) {\n      if (isDef(oldVnode)) { invokeDestroyHook(oldVnode); }\n      return\n    }\n\n    var isInitialPatch = false;\n    var insertedVnodeQueue = [];\n\n    if (isUndef(oldVnode)) {\n      // empty mount (likely as component), create new root element\n      isInitialPatch = true;\n      createElm(vnode, insertedVnodeQueue);\n    } else {\n      var isRealElement = isDef(oldVnode.nodeType);\n      if (!isRealElement && sameVnode(oldVnode, vnode)) {\n        // patch existing root node\n        patchVnode(oldVnode, vnode, insertedVnodeQueue, null, null, removeOnly);\n      } else {\n        if (isRealElement) {\n          // mounting to a real element\n          // check if this is server-rendered content and if we can perform\n          // a successful hydration.\n          if (oldVnode.nodeType === 1 && oldVnode.hasAttribute(SSR_ATTR)) {\n            oldVnode.removeAttribute(SSR_ATTR);\n            hydrating = true;\n          }\n          if (isTrue(hydrating)) {\n            if (hydrate(oldVnode, vnode, insertedVnodeQueue)) {\n              invokeInsertHook(vnode, insertedVnodeQueue, true);\n              return oldVnode\n            } else if (process.env.NODE_ENV !== 'production') {\n              warn(\n                'The client-side rendered virtual DOM tree is not matching ' +\n                'server-rendered content. This is likely caused by incorrect ' +\n                'HTML markup, for example nesting block-level elements inside ' +\n                '<p>, or missing <tbody>. Bailing hydration and performing ' +\n                'full client-side render.'\n              );\n            }\n          }\n          // either not server-rendered, or hydration failed.\n          // create an empty node and replace it\n          oldVnode = emptyNodeAt(oldVnode);\n        }\n\n        // replacing existing element\n        var oldElm = oldVnode.elm;\n        var parentElm = nodeOps.parentNode(oldElm);\n\n        // create new node\n        createElm(\n          vnode,\n          insertedVnodeQueue,\n          // extremely rare edge case: do not insert if old element is in a\n          // leaving transition. Only happens when combining transition +\n          // keep-alive + HOCs. (#4590)\n          oldElm._leaveCb ? null : parentElm,\n          nodeOps.nextSibling(oldElm)\n        );\n\n        // update parent placeholder node element, recursively\n        if (isDef(vnode.parent)) {\n          var ancestor = vnode.parent;\n          var patchable = isPatchable(vnode);\n          while (ancestor) {\n            for (var i = 0; i < cbs.destroy.length; ++i) {\n              cbs.destroy[i](ancestor);\n            }\n            ancestor.elm = vnode.elm;\n            if (patchable) {\n              for (var i$1 = 0; i$1 < cbs.create.length; ++i$1) {\n                cbs.create[i$1](emptyNode, ancestor);\n              }\n              // #6513\n              // invoke insert hooks that may have been merged by create hooks.\n              // e.g. for directives that uses the \"inserted\" hook.\n              var insert = ancestor.data.hook.insert;\n              if (insert.merged) {\n                // start at index 1 to avoid re-invoking component mounted hook\n                for (var i$2 = 1; i$2 < insert.fns.length; i$2++) {\n                  insert.fns[i$2]();\n                }\n              }\n            } else {\n              registerRef(ancestor);\n            }\n            ancestor = ancestor.parent;\n          }\n        }\n\n        // destroy old node\n        if (isDef(parentElm)) {\n          removeVnodes([oldVnode], 0, 0);\n        } else if (isDef(oldVnode.tag)) {\n          invokeDestroyHook(oldVnode);\n        }\n      }\n    }\n\n    invokeInsertHook(vnode, insertedVnodeQueue, isInitialPatch);\n    return vnode.elm\n  }\n}\n\n/*  */\n\nvar directives = {\n  create: updateDirectives,\n  update: updateDirectives,\n  destroy: function unbindDirectives (vnode) {\n    updateDirectives(vnode, emptyNode);\n  }\n};\n\nfunction updateDirectives (oldVnode, vnode) {\n  if (oldVnode.data.directives || vnode.data.directives) {\n    _update(oldVnode, vnode);\n  }\n}\n\nfunction _update (oldVnode, vnode) {\n  var isCreate = oldVnode === emptyNode;\n  var isDestroy = vnode === emptyNode;\n  var oldDirs = normalizeDirectives$1(oldVnode.data.directives, oldVnode.context);\n  var newDirs = normalizeDirectives$1(vnode.data.directives, vnode.context);\n\n  var dirsWithInsert = [];\n  var dirsWithPostpatch = [];\n\n  var key, oldDir, dir;\n  for (key in newDirs) {\n    oldDir = oldDirs[key];\n    dir = newDirs[key];\n    if (!oldDir) {\n      // new directive, bind\n      callHook$1(dir, 'bind', vnode, oldVnode);\n      if (dir.def && dir.def.inserted) {\n        dirsWithInsert.push(dir);\n      }\n    } else {\n      // existing directive, update\n      dir.oldValue = oldDir.value;\n      dir.oldArg = oldDir.arg;\n      callHook$1(dir, 'update', vnode, oldVnode);\n      if (dir.def && dir.def.componentUpdated) {\n        dirsWithPostpatch.push(dir);\n      }\n    }\n  }\n\n  if (dirsWithInsert.length) {\n    var callInsert = function () {\n      for (var i = 0; i < dirsWithInsert.length; i++) {\n        callHook$1(dirsWithInsert[i], 'inserted', vnode, oldVnode);\n      }\n    };\n    if (isCreate) {\n      mergeVNodeHook(vnode, 'insert', callInsert);\n    } else {\n      callInsert();\n    }\n  }\n\n  if (dirsWithPostpatch.length) {\n    mergeVNodeHook(vnode, 'postpatch', function () {\n      for (var i = 0; i < dirsWithPostpatch.length; i++) {\n        callHook$1(dirsWithPostpatch[i], 'componentUpdated', vnode, oldVnode);\n      }\n    });\n  }\n\n  if (!isCreate) {\n    for (key in oldDirs) {\n      if (!newDirs[key]) {\n        // no longer present, unbind\n        callHook$1(oldDirs[key], 'unbind', oldVnode, oldVnode, isDestroy);\n      }\n    }\n  }\n}\n\nvar emptyModifiers = Object.create(null);\n\nfunction normalizeDirectives$1 (\n  dirs,\n  vm\n) {\n  var res = Object.create(null);\n  if (!dirs) {\n    // $flow-disable-line\n    return res\n  }\n  var i, dir;\n  for (i = 0; i < dirs.length; i++) {\n    dir = dirs[i];\n    if (!dir.modifiers) {\n      // $flow-disable-line\n      dir.modifiers = emptyModifiers;\n    }\n    res[getRawDirName(dir)] = dir;\n    dir.def = resolveAsset(vm.$options, 'directives', dir.name, true);\n  }\n  // $flow-disable-line\n  return res\n}\n\nfunction getRawDirName (dir) {\n  return dir.rawName || ((dir.name) + \".\" + (Object.keys(dir.modifiers || {}).join('.')))\n}\n\nfunction callHook$1 (dir, hook, vnode, oldVnode, isDestroy) {\n  var fn = dir.def && dir.def[hook];\n  if (fn) {\n    try {\n      fn(vnode.elm, dir, vnode, oldVnode, isDestroy);\n    } catch (e) {\n      handleError(e, vnode.context, (\"directive \" + (dir.name) + \" \" + hook + \" hook\"));\n    }\n  }\n}\n\nvar baseModules = [\n  ref,\n  directives\n];\n\n/*  */\n\nfunction updateAttrs (oldVnode, vnode) {\n  var opts = vnode.componentOptions;\n  if (isDef(opts) && opts.Ctor.options.inheritAttrs === false) {\n    return\n  }\n  if (isUndef(oldVnode.data.attrs) && isUndef(vnode.data.attrs)) {\n    return\n  }\n  var key, cur, old;\n  var elm = vnode.elm;\n  var oldAttrs = oldVnode.data.attrs || {};\n  var attrs = vnode.data.attrs || {};\n  // clone observed objects, as the user probably wants to mutate it\n  if (isDef(attrs.__ob__)) {\n    attrs = vnode.data.attrs = extend({}, attrs);\n  }\n\n  for (key in attrs) {\n    cur = attrs[key];\n    old = oldAttrs[key];\n    if (old !== cur) {\n      setAttr(elm, key, cur, vnode.data.pre);\n    }\n  }\n  // #4391: in IE9, setting type can reset value for input[type=radio]\n  // #6666: IE/Edge forces progress value down to 1 before setting a max\n  /* istanbul ignore if */\n  if ((isIE || isEdge) && attrs.value !== oldAttrs.value) {\n    setAttr(elm, 'value', attrs.value);\n  }\n  for (key in oldAttrs) {\n    if (isUndef(attrs[key])) {\n      if (isXlink(key)) {\n        elm.removeAttributeNS(xlinkNS, getXlinkProp(key));\n      } else if (!isEnumeratedAttr(key)) {\n        elm.removeAttribute(key);\n      }\n    }\n  }\n}\n\nfunction setAttr (el, key, value, isInPre) {\n  if (isInPre || el.tagName.indexOf('-') > -1) {\n    baseSetAttr(el, key, value);\n  } else if (isBooleanAttr(key)) {\n    // set attribute for blank value\n    // e.g. <option disabled>Select one</option>\n    if (isFalsyAttrValue(value)) {\n      el.removeAttribute(key);\n    } else {\n      // technically allowfullscreen is a boolean attribute for <iframe>,\n      // but Flash expects a value of \"true\" when used on <embed> tag\n      value = key === 'allowfullscreen' && el.tagName === 'EMBED'\n        ? 'true'\n        : key;\n      el.setAttribute(key, value);\n    }\n  } else if (isEnumeratedAttr(key)) {\n    el.setAttribute(key, convertEnumeratedValue(key, value));\n  } else if (isXlink(key)) {\n    if (isFalsyAttrValue(value)) {\n      el.removeAttributeNS(xlinkNS, getXlinkProp(key));\n    } else {\n      el.setAttributeNS(xlinkNS, key, value);\n    }\n  } else {\n    baseSetAttr(el, key, value);\n  }\n}\n\nfunction baseSetAttr (el, key, value) {\n  if (isFalsyAttrValue(value)) {\n    el.removeAttribute(key);\n  } else {\n    // #7138: IE10 & 11 fires input event when setting placeholder on\n    // <textarea>... block the first input event and remove the blocker\n    // immediately.\n    /* istanbul ignore if */\n    if (\n      isIE && !isIE9 &&\n      el.tagName === 'TEXTAREA' &&\n      key === 'placeholder' && value !== '' && !el.__ieph\n    ) {\n      var blocker = function (e) {\n        e.stopImmediatePropagation();\n        el.removeEventListener('input', blocker);\n      };\n      el.addEventListener('input', blocker);\n      // $flow-disable-line\n      el.__ieph = true; /* IE placeholder patched */\n    }\n    el.setAttribute(key, value);\n  }\n}\n\nvar attrs = {\n  create: updateAttrs,\n  update: updateAttrs\n};\n\n/*  */\n\nfunction updateClass (oldVnode, vnode) {\n  var el = vnode.elm;\n  var data = vnode.data;\n  var oldData = oldVnode.data;\n  if (\n    isUndef(data.staticClass) &&\n    isUndef(data.class) && (\n      isUndef(oldData) || (\n        isUndef(oldData.staticClass) &&\n        isUndef(oldData.class)\n      )\n    )\n  ) {\n    return\n  }\n\n  var cls = genClassForVnode(vnode);\n\n  // handle transition classes\n  var transitionClass = el._transitionClasses;\n  if (isDef(transitionClass)) {\n    cls = concat(cls, stringifyClass(transitionClass));\n  }\n\n  // set the class\n  if (cls !== el._prevClass) {\n    el.setAttribute('class', cls);\n    el._prevClass = cls;\n  }\n}\n\nvar klass = {\n  create: updateClass,\n  update: updateClass\n};\n\n/*  */\n\n/*  */\n\n/*  */\n\n/*  */\n\n// in some cases, the event used has to be determined at runtime\n// so we used some reserved tokens during compile.\nvar RANGE_TOKEN = '__r';\nvar CHECKBOX_RADIO_TOKEN = '__c';\n\n/*  */\n\n// normalize v-model event tokens that can only be determined at runtime.\n// it's important to place the event as the first in the array because\n// the whole point is ensuring the v-model callback gets called before\n// user-attached handlers.\nfunction normalizeEvents (on) {\n  /* istanbul ignore if */\n  if (isDef(on[RANGE_TOKEN])) {\n    // IE input[type=range] only supports `change` event\n    var event = isIE ? 'change' : 'input';\n    on[event] = [].concat(on[RANGE_TOKEN], on[event] || []);\n    delete on[RANGE_TOKEN];\n  }\n  // This was originally intended to fix #4521 but no longer necessary\n  // after 2.5. Keeping it for backwards compat with generated code from < 2.4\n  /* istanbul ignore if */\n  if (isDef(on[CHECKBOX_RADIO_TOKEN])) {\n    on.change = [].concat(on[CHECKBOX_RADIO_TOKEN], on.change || []);\n    delete on[CHECKBOX_RADIO_TOKEN];\n  }\n}\n\nvar target$1;\n\nfunction createOnceHandler$1 (event, handler, capture) {\n  var _target = target$1; // save current target element in closure\n  return function onceHandler () {\n    var res = handler.apply(null, arguments);\n    if (res !== null) {\n      remove$2(event, onceHandler, capture, _target);\n    }\n  }\n}\n\n// #9446: Firefox <= 53 (in particular, ESR 52) has incorrect Event.timeStamp\n// implementation and does not fire microtasks in between event propagation, so\n// safe to exclude.\nvar useMicrotaskFix = isUsingMicroTask && !(isFF && Number(isFF[1]) <= 53);\n\nfunction add$1 (\n  name,\n  handler,\n  capture,\n  passive\n) {\n  // async edge case #6566: inner click event triggers patch, event handler\n  // attached to outer element during patch, and triggered again. This\n  // happens because browsers fire microtask ticks between event propagation.\n  // the solution is simple: we save the timestamp when a handler is attached,\n  // and the handler would only fire if the event passed to it was fired\n  // AFTER it was attached.\n  if (useMicrotaskFix) {\n    var attachedTimestamp = currentFlushTimestamp;\n    var original = handler;\n    handler = original._wrapper = function (e) {\n      if (\n        // no bubbling, should always fire.\n        // this is just a safety net in case event.timeStamp is unreliable in\n        // certain weird environments...\n        e.target === e.currentTarget ||\n        // event is fired after handler attachment\n        e.timeStamp >= attachedTimestamp ||\n        // bail for environments that have buggy event.timeStamp implementations\n        // #9462 iOS 9 bug: event.timeStamp is 0 after history.pushState\n        // #9681 QtWebEngine event.timeStamp is negative value\n        e.timeStamp <= 0 ||\n        // #9448 bail if event is fired in another document in a multi-page\n        // electron/nw.js app, since event.timeStamp will be using a different\n        // starting reference\n        e.target.ownerDocument !== document\n      ) {\n        return original.apply(this, arguments)\n      }\n    };\n  }\n  target$1.addEventListener(\n    name,\n    handler,\n    supportsPassive\n      ? { capture: capture, passive: passive }\n      : capture\n  );\n}\n\nfunction remove$2 (\n  name,\n  handler,\n  capture,\n  _target\n) {\n  (_target || target$1).removeEventListener(\n    name,\n    handler._wrapper || handler,\n    capture\n  );\n}\n\nfunction updateDOMListeners (oldVnode, vnode) {\n  if (isUndef(oldVnode.data.on) && isUndef(vnode.data.on)) {\n    return\n  }\n  var on = vnode.data.on || {};\n  var oldOn = oldVnode.data.on || {};\n  target$1 = vnode.elm;\n  normalizeEvents(on);\n  updateListeners(on, oldOn, add$1, remove$2, createOnceHandler$1, vnode.context);\n  target$1 = undefined;\n}\n\nvar events = {\n  create: updateDOMListeners,\n  update: updateDOMListeners\n};\n\n/*  */\n\nvar svgContainer;\n\nfunction updateDOMProps (oldVnode, vnode) {\n  if (isUndef(oldVnode.data.domProps) && isUndef(vnode.data.domProps)) {\n    return\n  }\n  var key, cur;\n  var elm = vnode.elm;\n  var oldProps = oldVnode.data.domProps || {};\n  var props = vnode.data.domProps || {};\n  // clone observed objects, as the user probably wants to mutate it\n  if (isDef(props.__ob__)) {\n    props = vnode.data.domProps = extend({}, props);\n  }\n\n  for (key in oldProps) {\n    if (!(key in props)) {\n      elm[key] = '';\n    }\n  }\n\n  for (key in props) {\n    cur = props[key];\n    // ignore children if the node has textContent or innerHTML,\n    // as these will throw away existing DOM nodes and cause removal errors\n    // on subsequent patches (#3360)\n    if (key === 'textContent' || key === 'innerHTML') {\n      if (vnode.children) { vnode.children.length = 0; }\n      if (cur === oldProps[key]) { continue }\n      // #6601 work around Chrome version <= 55 bug where single textNode\n      // replaced by innerHTML/textContent retains its parentNode property\n      if (elm.childNodes.length === 1) {\n        elm.removeChild(elm.childNodes[0]);\n      }\n    }\n\n    if (key === 'value' && elm.tagName !== 'PROGRESS') {\n      // store value as _value as well since\n      // non-string values will be stringified\n      elm._value = cur;\n      // avoid resetting cursor position when value is the same\n      var strCur = isUndef(cur) ? '' : String(cur);\n      if (shouldUpdateValue(elm, strCur)) {\n        elm.value = strCur;\n      }\n    } else if (key === 'innerHTML' && isSVG(elm.tagName) && isUndef(elm.innerHTML)) {\n      // IE doesn't support innerHTML for SVG elements\n      svgContainer = svgContainer || document.createElement('div');\n      svgContainer.innerHTML = \"<svg>\" + cur + \"</svg>\";\n      var svg = svgContainer.firstChild;\n      while (elm.firstChild) {\n        elm.removeChild(elm.firstChild);\n      }\n      while (svg.firstChild) {\n        elm.appendChild(svg.firstChild);\n      }\n    } else if (\n      // skip the update if old and new VDOM state is the same.\n      // `value` is handled separately because the DOM value may be temporarily\n      // out of sync with VDOM state due to focus, composition and modifiers.\n      // This  #4521 by skipping the unnecessary `checked` update.\n      cur !== oldProps[key]\n    ) {\n      // some property updates can throw\n      // e.g. `value` on <progress> w/ non-finite value\n      try {\n        elm[key] = cur;\n      } catch (e) {}\n    }\n  }\n}\n\n// check platforms/web/util/attrs.js acceptValue\n\n\nfunction shouldUpdateValue (elm, checkVal) {\n  return (!elm.composing && (\n    elm.tagName === 'OPTION' ||\n    isNotInFocusAndDirty(elm, checkVal) ||\n    isDirtyWithModifiers(elm, checkVal)\n  ))\n}\n\nfunction isNotInFocusAndDirty (elm, checkVal) {\n  // return true when textbox (.number and .trim) loses focus and its value is\n  // not equal to the updated value\n  var notInFocus = true;\n  // #6157\n  // work around IE bug when accessing document.activeElement in an iframe\n  try { notInFocus = document.activeElement !== elm; } catch (e) {}\n  return notInFocus && elm.value !== checkVal\n}\n\nfunction isDirtyWithModifiers (elm, newVal) {\n  var value = elm.value;\n  var modifiers = elm._vModifiers; // injected by v-model runtime\n  if (isDef(modifiers)) {\n    if (modifiers.number) {\n      return toNumber(value) !== toNumber(newVal)\n    }\n    if (modifiers.trim) {\n      return value.trim() !== newVal.trim()\n    }\n  }\n  return value !== newVal\n}\n\nvar domProps = {\n  create: updateDOMProps,\n  update: updateDOMProps\n};\n\n/*  */\n\nvar parseStyleText = cached(function (cssText) {\n  var res = {};\n  var listDelimiter = /;(?![^(]*\\))/g;\n  var propertyDelimiter = /:(.+)/;\n  cssText.split(listDelimiter).forEach(function (item) {\n    if (item) {\n      var tmp = item.split(propertyDelimiter);\n      tmp.length > 1 && (res[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return res\n});\n\n// merge static and dynamic style data on the same vnode\nfunction normalizeStyleData (data) {\n  var style = normalizeStyleBinding(data.style);\n  // static style is pre-processed into an object during compilation\n  // and is always a fresh object, so it's safe to merge into it\n  return data.staticStyle\n    ? extend(data.staticStyle, style)\n    : style\n}\n\n// normalize possible array / string values into Object\nfunction normalizeStyleBinding (bindingStyle) {\n  if (Array.isArray(bindingStyle)) {\n    return toObject(bindingStyle)\n  }\n  if (typeof bindingStyle === 'string') {\n    return parseStyleText(bindingStyle)\n  }\n  return bindingStyle\n}\n\n/**\n * parent component style should be after child's\n * so that parent component's style could override it\n */\nfunction getStyle (vnode, checkChild) {\n  var res = {};\n  var styleData;\n\n  if (checkChild) {\n    var childNode = vnode;\n    while (childNode.componentInstance) {\n      childNode = childNode.componentInstance._vnode;\n      if (\n        childNode && childNode.data &&\n        (styleData = normalizeStyleData(childNode.data))\n      ) {\n        extend(res, styleData);\n      }\n    }\n  }\n\n  if ((styleData = normalizeStyleData(vnode.data))) {\n    extend(res, styleData);\n  }\n\n  var parentNode = vnode;\n  while ((parentNode = parentNode.parent)) {\n    if (parentNode.data && (styleData = normalizeStyleData(parentNode.data))) {\n      extend(res, styleData);\n    }\n  }\n  return res\n}\n\n/*  */\n\nvar cssVarRE = /^--/;\nvar importantRE = /\\s*!important$/;\nvar setProp = function (el, name, val) {\n  /* istanbul ignore if */\n  if (cssVarRE.test(name)) {\n    el.style.setProperty(name, val);\n  } else if (importantRE.test(val)) {\n    el.style.setProperty(hyphenate(name), val.replace(importantRE, ''), 'important');\n  } else {\n    var normalizedName = normalize(name);\n    if (Array.isArray(val)) {\n      // Support values array created by autoprefixer, e.g.\n      // {display: [\"-webkit-box\", \"-ms-flexbox\", \"flex\"]}\n      // Set them one by one, and the browser will only set those it can recognize\n      for (var i = 0, len = val.length; i < len; i++) {\n        el.style[normalizedName] = val[i];\n      }\n    } else {\n      el.style[normalizedName] = val;\n    }\n  }\n};\n\nvar vendorNames = ['Webkit', 'Moz', 'ms'];\n\nvar emptyStyle;\nvar normalize = cached(function (prop) {\n  emptyStyle = emptyStyle || document.createElement('div').style;\n  prop = camelize(prop);\n  if (prop !== 'filter' && (prop in emptyStyle)) {\n    return prop\n  }\n  var capName = prop.charAt(0).toUpperCase() + prop.slice(1);\n  for (var i = 0; i < vendorNames.length; i++) {\n    var name = vendorNames[i] + capName;\n    if (name in emptyStyle) {\n      return name\n    }\n  }\n});\n\nfunction updateStyle (oldVnode, vnode) {\n  var data = vnode.data;\n  var oldData = oldVnode.data;\n\n  if (isUndef(data.staticStyle) && isUndef(data.style) &&\n    isUndef(oldData.staticStyle) && isUndef(oldData.style)\n  ) {\n    return\n  }\n\n  var cur, name;\n  var el = vnode.elm;\n  var oldStaticStyle = oldData.staticStyle;\n  var oldStyleBinding = oldData.normalizedStyle || oldData.style || {};\n\n  // if static style exists, stylebinding already merged into it when doing normalizeStyleData\n  var oldStyle = oldStaticStyle || oldStyleBinding;\n\n  var style = normalizeStyleBinding(vnode.data.style) || {};\n\n  // store normalized style under a different key for next diff\n  // make sure to clone it if it's reactive, since the user likely wants\n  // to mutate it.\n  vnode.data.normalizedStyle = isDef(style.__ob__)\n    ? extend({}, style)\n    : style;\n\n  var newStyle = getStyle(vnode, true);\n\n  for (name in oldStyle) {\n    if (isUndef(newStyle[name])) {\n      setProp(el, name, '');\n    }\n  }\n  for (name in newStyle) {\n    cur = newStyle[name];\n    if (cur !== oldStyle[name]) {\n      // ie9 setting to null has no effect, must use empty string\n      setProp(el, name, cur == null ? '' : cur);\n    }\n  }\n}\n\nvar style = {\n  create: updateStyle,\n  update: updateStyle\n};\n\n/*  */\n\nvar whitespaceRE = /\\s+/;\n\n/**\n * Add class with compatibility for SVG since classList is not supported on\n * SVG elements in IE\n */\nfunction addClass (el, cls) {\n  /* istanbul ignore if */\n  if (!cls || !(cls = cls.trim())) {\n    return\n  }\n\n  /* istanbul ignore else */\n  if (el.classList) {\n    if (cls.indexOf(' ') > -1) {\n      cls.split(whitespaceRE).forEach(function (c) { return el.classList.add(c); });\n    } else {\n      el.classList.add(cls);\n    }\n  } else {\n    var cur = \" \" + (el.getAttribute('class') || '') + \" \";\n    if (cur.indexOf(' ' + cls + ' ') < 0) {\n      el.setAttribute('class', (cur + cls).trim());\n    }\n  }\n}\n\n/**\n * Remove class with compatibility for SVG since classList is not supported on\n * SVG elements in IE\n */\nfunction removeClass (el, cls) {\n  /* istanbul ignore if */\n  if (!cls || !(cls = cls.trim())) {\n    return\n  }\n\n  /* istanbul ignore else */\n  if (el.classList) {\n    if (cls.indexOf(' ') > -1) {\n      cls.split(whitespaceRE).forEach(function (c) { return el.classList.remove(c); });\n    } else {\n      el.classList.remove(cls);\n    }\n    if (!el.classList.length) {\n      el.removeAttribute('class');\n    }\n  } else {\n    var cur = \" \" + (el.getAttribute('class') || '') + \" \";\n    var tar = ' ' + cls + ' ';\n    while (cur.indexOf(tar) >= 0) {\n      cur = cur.replace(tar, ' ');\n    }\n    cur = cur.trim();\n    if (cur) {\n      el.setAttribute('class', cur);\n    } else {\n      el.removeAttribute('class');\n    }\n  }\n}\n\n/*  */\n\nfunction resolveTransition (def$$1) {\n  if (!def$$1) {\n    return\n  }\n  /* istanbul ignore else */\n  if (typeof def$$1 === 'object') {\n    var res = {};\n    if (def$$1.css !== false) {\n      extend(res, autoCssTransition(def$$1.name || 'v'));\n    }\n    extend(res, def$$1);\n    return res\n  } else if (typeof def$$1 === 'string') {\n    return autoCssTransition(def$$1)\n  }\n}\n\nvar autoCssTransition = cached(function (name) {\n  return {\n    enterClass: (name + \"-enter\"),\n    enterToClass: (name + \"-enter-to\"),\n    enterActiveClass: (name + \"-enter-active\"),\n    leaveClass: (name + \"-leave\"),\n    leaveToClass: (name + \"-leave-to\"),\n    leaveActiveClass: (name + \"-leave-active\")\n  }\n});\n\nvar hasTransition = inBrowser && !isIE9;\nvar TRANSITION = 'transition';\nvar ANIMATION = 'animation';\n\n// Transition property/event sniffing\nvar transitionProp = 'transition';\nvar transitionEndEvent = 'transitionend';\nvar animationProp = 'animation';\nvar animationEndEvent = 'animationend';\nif (hasTransition) {\n  /* istanbul ignore if */\n  if (window.ontransitionend === undefined &&\n    window.onwebkittransitionend !== undefined\n  ) {\n    transitionProp = 'WebkitTransition';\n    transitionEndEvent = 'webkitTransitionEnd';\n  }\n  if (window.onanimationend === undefined &&\n    window.onwebkitanimationend !== undefined\n  ) {\n    animationProp = 'WebkitAnimation';\n    animationEndEvent = 'webkitAnimationEnd';\n  }\n}\n\n// binding to window is necessary to make hot reload work in IE in strict mode\nvar raf = inBrowser\n  ? window.requestAnimationFrame\n    ? window.requestAnimationFrame.bind(window)\n    : setTimeout\n  : /* istanbul ignore next */ function (fn) { return fn(); };\n\nfunction nextFrame (fn) {\n  raf(function () {\n    raf(fn);\n  });\n}\n\nfunction addTransitionClass (el, cls) {\n  var transitionClasses = el._transitionClasses || (el._transitionClasses = []);\n  if (transitionClasses.indexOf(cls) < 0) {\n    transitionClasses.push(cls);\n    addClass(el, cls);\n  }\n}\n\nfunction removeTransitionClass (el, cls) {\n  if (el._transitionClasses) {\n    remove(el._transitionClasses, cls);\n  }\n  removeClass(el, cls);\n}\n\nfunction whenTransitionEnds (\n  el,\n  expectedType,\n  cb\n) {\n  var ref = getTransitionInfo(el, expectedType);\n  var type = ref.type;\n  var timeout = ref.timeout;\n  var propCount = ref.propCount;\n  if (!type) { return cb() }\n  var event = type === TRANSITION ? transitionEndEvent : animationEndEvent;\n  var ended = 0;\n  var end = function () {\n    el.removeEventListener(event, onEnd);\n    cb();\n  };\n  var onEnd = function (e) {\n    if (e.target === el) {\n      if (++ended >= propCount) {\n        end();\n      }\n    }\n  };\n  setTimeout(function () {\n    if (ended < propCount) {\n      end();\n    }\n  }, timeout + 1);\n  el.addEventListener(event, onEnd);\n}\n\nvar transformRE = /\\b(transform|all)(,|$)/;\n\nfunction getTransitionInfo (el, expectedType) {\n  var styles = window.getComputedStyle(el);\n  // JSDOM may return undefined for transition properties\n  var transitionDelays = (styles[transitionProp + 'Delay'] || '').split(', ');\n  var transitionDurations = (styles[transitionProp + 'Duration'] || '').split(', ');\n  var transitionTimeout = getTimeout(transitionDelays, transitionDurations);\n  var animationDelays = (styles[animationProp + 'Delay'] || '').split(', ');\n  var animationDurations = (styles[animationProp + 'Duration'] || '').split(', ');\n  var animationTimeout = getTimeout(animationDelays, animationDurations);\n\n  var type;\n  var timeout = 0;\n  var propCount = 0;\n  /* istanbul ignore if */\n  if (expectedType === TRANSITION) {\n    if (transitionTimeout > 0) {\n      type = TRANSITION;\n      timeout = transitionTimeout;\n      propCount = transitionDurations.length;\n    }\n  } else if (expectedType === ANIMATION) {\n    if (animationTimeout > 0) {\n      type = ANIMATION;\n      timeout = animationTimeout;\n      propCount = animationDurations.length;\n    }\n  } else {\n    timeout = Math.max(transitionTimeout, animationTimeout);\n    type = timeout > 0\n      ? transitionTimeout > animationTimeout\n        ? TRANSITION\n        : ANIMATION\n      : null;\n    propCount = type\n      ? type === TRANSITION\n        ? transitionDurations.length\n        : animationDurations.length\n      : 0;\n  }\n  var hasTransform =\n    type === TRANSITION &&\n    transformRE.test(styles[transitionProp + 'Property']);\n  return {\n    type: type,\n    timeout: timeout,\n    propCount: propCount,\n    hasTransform: hasTransform\n  }\n}\n\nfunction getTimeout (delays, durations) {\n  /* istanbul ignore next */\n  while (delays.length < durations.length) {\n    delays = delays.concat(delays);\n  }\n\n  return Math.max.apply(null, durations.map(function (d, i) {\n    return toMs(d) + toMs(delays[i])\n  }))\n}\n\n// Old versions of Chromium (below 61.0.3163.100) formats floating pointer numbers\n// in a locale-dependent way, using a comma instead of a dot.\n// If comma is not replaced with a dot, the input will be rounded down (i.e. acting\n// as a floor function) causing unexpected behaviors\nfunction toMs (s) {\n  return Number(s.slice(0, -1).replace(',', '.')) * 1000\n}\n\n/*  */\n\nfunction enter (vnode, toggleDisplay) {\n  var el = vnode.elm;\n\n  // call leave callback now\n  if (isDef(el._leaveCb)) {\n    el._leaveCb.cancelled = true;\n    el._leaveCb();\n  }\n\n  var data = resolveTransition(vnode.data.transition);\n  if (isUndef(data)) {\n    return\n  }\n\n  /* istanbul ignore if */\n  if (isDef(el._enterCb) || el.nodeType !== 1) {\n    return\n  }\n\n  var css = data.css;\n  var type = data.type;\n  var enterClass = data.enterClass;\n  var enterToClass = data.enterToClass;\n  var enterActiveClass = data.enterActiveClass;\n  var appearClass = data.appearClass;\n  var appearToClass = data.appearToClass;\n  var appearActiveClass = data.appearActiveClass;\n  var beforeEnter = data.beforeEnter;\n  var enter = data.enter;\n  var afterEnter = data.afterEnter;\n  var enterCancelled = data.enterCancelled;\n  var beforeAppear = data.beforeAppear;\n  var appear = data.appear;\n  var afterAppear = data.afterAppear;\n  var appearCancelled = data.appearCancelled;\n  var duration = data.duration;\n\n  // activeInstance will always be the <transition> component managing this\n  // transition. One edge case to check is when the <transition> is placed\n  // as the root node of a child component. In that case we need to check\n  // <transition>'s parent for appear check.\n  var context = activeInstance;\n  var transitionNode = activeInstance.$vnode;\n  while (transitionNode && transitionNode.parent) {\n    context = transitionNode.context;\n    transitionNode = transitionNode.parent;\n  }\n\n  var isAppear = !context._isMounted || !vnode.isRootInsert;\n\n  if (isAppear && !appear && appear !== '') {\n    return\n  }\n\n  var startClass = isAppear && appearClass\n    ? appearClass\n    : enterClass;\n  var activeClass = isAppear && appearActiveClass\n    ? appearActiveClass\n    : enterActiveClass;\n  var toClass = isAppear && appearToClass\n    ? appearToClass\n    : enterToClass;\n\n  var beforeEnterHook = isAppear\n    ? (beforeAppear || beforeEnter)\n    : beforeEnter;\n  var enterHook = isAppear\n    ? (typeof appear === 'function' ? appear : enter)\n    : enter;\n  var afterEnterHook = isAppear\n    ? (afterAppear || afterEnter)\n    : afterEnter;\n  var enterCancelledHook = isAppear\n    ? (appearCancelled || enterCancelled)\n    : enterCancelled;\n\n  var explicitEnterDuration = toNumber(\n    isObject(duration)\n      ? duration.enter\n      : duration\n  );\n\n  if (process.env.NODE_ENV !== 'production' && explicitEnterDuration != null) {\n    checkDuration(explicitEnterDuration, 'enter', vnode);\n  }\n\n  var expectsCSS = css !== false && !isIE9;\n  var userWantsControl = getHookArgumentsLength(enterHook);\n\n  var cb = el._enterCb = once(function () {\n    if (expectsCSS) {\n      removeTransitionClass(el, toClass);\n      removeTransitionClass(el, activeClass);\n    }\n    if (cb.cancelled) {\n      if (expectsCSS) {\n        removeTransitionClass(el, startClass);\n      }\n      enterCancelledHook && enterCancelledHook(el);\n    } else {\n      afterEnterHook && afterEnterHook(el);\n    }\n    el._enterCb = null;\n  });\n\n  if (!vnode.data.show) {\n    // remove pending leave element on enter by injecting an insert hook\n    mergeVNodeHook(vnode, 'insert', function () {\n      var parent = el.parentNode;\n      var pendingNode = parent && parent._pending && parent._pending[vnode.key];\n      if (pendingNode &&\n        pendingNode.tag === vnode.tag &&\n        pendingNode.elm._leaveCb\n      ) {\n        pendingNode.elm._leaveCb();\n      }\n      enterHook && enterHook(el, cb);\n    });\n  }\n\n  // start enter transition\n  beforeEnterHook && beforeEnterHook(el);\n  if (expectsCSS) {\n    addTransitionClass(el, startClass);\n    addTransitionClass(el, activeClass);\n    nextFrame(function () {\n      removeTransitionClass(el, startClass);\n      if (!cb.cancelled) {\n        addTransitionClass(el, toClass);\n        if (!userWantsControl) {\n          if (isValidDuration(explicitEnterDuration)) {\n            setTimeout(cb, explicitEnterDuration);\n          } else {\n            whenTransitionEnds(el, type, cb);\n          }\n        }\n      }\n    });\n  }\n\n  if (vnode.data.show) {\n    toggleDisplay && toggleDisplay();\n    enterHook && enterHook(el, cb);\n  }\n\n  if (!expectsCSS && !userWantsControl) {\n    cb();\n  }\n}\n\nfunction leave (vnode, rm) {\n  var el = vnode.elm;\n\n  // call enter callback now\n  if (isDef(el._enterCb)) {\n    el._enterCb.cancelled = true;\n    el._enterCb();\n  }\n\n  var data = resolveTransition(vnode.data.transition);\n  if (isUndef(data) || el.nodeType !== 1) {\n    return rm()\n  }\n\n  /* istanbul ignore if */\n  if (isDef(el._leaveCb)) {\n    return\n  }\n\n  var css = data.css;\n  var type = data.type;\n  var leaveClass = data.leaveClass;\n  var leaveToClass = data.leaveToClass;\n  var leaveActiveClass = data.leaveActiveClass;\n  var beforeLeave = data.beforeLeave;\n  var leave = data.leave;\n  var afterLeave = data.afterLeave;\n  var leaveCancelled = data.leaveCancelled;\n  var delayLeave = data.delayLeave;\n  var duration = data.duration;\n\n  var expectsCSS = css !== false && !isIE9;\n  var userWantsControl = getHookArgumentsLength(leave);\n\n  var explicitLeaveDuration = toNumber(\n    isObject(duration)\n      ? duration.leave\n      : duration\n  );\n\n  if (process.env.NODE_ENV !== 'production' && isDef(explicitLeaveDuration)) {\n    checkDuration(explicitLeaveDuration, 'leave', vnode);\n  }\n\n  var cb = el._leaveCb = once(function () {\n    if (el.parentNode && el.parentNode._pending) {\n      el.parentNode._pending[vnode.key] = null;\n    }\n    if (expectsCSS) {\n      removeTransitionClass(el, leaveToClass);\n      removeTransitionClass(el, leaveActiveClass);\n    }\n    if (cb.cancelled) {\n      if (expectsCSS) {\n        removeTransitionClass(el, leaveClass);\n      }\n      leaveCancelled && leaveCancelled(el);\n    } else {\n      rm();\n      afterLeave && afterLeave(el);\n    }\n    el._leaveCb = null;\n  });\n\n  if (delayLeave) {\n    delayLeave(performLeave);\n  } else {\n    performLeave();\n  }\n\n  function performLeave () {\n    // the delayed leave may have already been cancelled\n    if (cb.cancelled) {\n      return\n    }\n    // record leaving element\n    if (!vnode.data.show && el.parentNode) {\n      (el.parentNode._pending || (el.parentNode._pending = {}))[(vnode.key)] = vnode;\n    }\n    beforeLeave && beforeLeave(el);\n    if (expectsCSS) {\n      addTransitionClass(el, leaveClass);\n      addTransitionClass(el, leaveActiveClass);\n      nextFrame(function () {\n        removeTransitionClass(el, leaveClass);\n        if (!cb.cancelled) {\n          addTransitionClass(el, leaveToClass);\n          if (!userWantsControl) {\n            if (isValidDuration(explicitLeaveDuration)) {\n              setTimeout(cb, explicitLeaveDuration);\n            } else {\n              whenTransitionEnds(el, type, cb);\n            }\n          }\n        }\n      });\n    }\n    leave && leave(el, cb);\n    if (!expectsCSS && !userWantsControl) {\n      cb();\n    }\n  }\n}\n\n// only used in dev mode\nfunction checkDuration (val, name, vnode) {\n  if (typeof val !== 'number') {\n    warn(\n      \"<transition> explicit \" + name + \" duration is not a valid number - \" +\n      \"got \" + (JSON.stringify(val)) + \".\",\n      vnode.context\n    );\n  } else if (isNaN(val)) {\n    warn(\n      \"<transition> explicit \" + name + \" duration is NaN - \" +\n      'the duration expression might be incorrect.',\n      vnode.context\n    );\n  }\n}\n\nfunction isValidDuration (val) {\n  return typeof val === 'number' && !isNaN(val)\n}\n\n/**\n * Normalize a transition hook's argument length. The hook may be:\n * - a merged hook (invoker) with the original in .fns\n * - a wrapped component method (check ._length)\n * - a plain function (.length)\n */\nfunction getHookArgumentsLength (fn) {\n  if (isUndef(fn)) {\n    return false\n  }\n  var invokerFns = fn.fns;\n  if (isDef(invokerFns)) {\n    // invoker\n    return getHookArgumentsLength(\n      Array.isArray(invokerFns)\n        ? invokerFns[0]\n        : invokerFns\n    )\n  } else {\n    return (fn._length || fn.length) > 1\n  }\n}\n\nfunction _enter (_, vnode) {\n  if (vnode.data.show !== true) {\n    enter(vnode);\n  }\n}\n\nvar transition = inBrowser ? {\n  create: _enter,\n  activate: _enter,\n  remove: function remove$$1 (vnode, rm) {\n    /* istanbul ignore else */\n    if (vnode.data.show !== true) {\n      leave(vnode, rm);\n    } else {\n      rm();\n    }\n  }\n} : {};\n\nvar platformModules = [\n  attrs,\n  klass,\n  events,\n  domProps,\n  style,\n  transition\n];\n\n/*  */\n\n// the directive module should be applied last, after all\n// built-in modules have been applied.\nvar modules = platformModules.concat(baseModules);\n\nvar patch = createPatchFunction({ nodeOps: nodeOps, modules: modules });\n\n/**\n * Not type checking this file because flow doesn't like attaching\n * properties to Elements.\n */\n\n/* istanbul ignore if */\nif (isIE9) {\n  // http://www.matts411.com/post/internet-explorer-9-oninput/\n  document.addEventListener('selectionchange', function () {\n    var el = document.activeElement;\n    if (el && el.vmodel) {\n      trigger(el, 'input');\n    }\n  });\n}\n\nvar directive = {\n  inserted: function inserted (el, binding, vnode, oldVnode) {\n    if (vnode.tag === 'select') {\n      // #6903\n      if (oldVnode.elm && !oldVnode.elm._vOptions) {\n        mergeVNodeHook(vnode, 'postpatch', function () {\n          directive.componentUpdated(el, binding, vnode);\n        });\n      } else {\n        setSelected(el, binding, vnode.context);\n      }\n      el._vOptions = [].map.call(el.options, getValue);\n    } else if (vnode.tag === 'textarea' || isTextInputType(el.type)) {\n      el._vModifiers = binding.modifiers;\n      if (!binding.modifiers.lazy) {\n        el.addEventListener('compositionstart', onCompositionStart);\n        el.addEventListener('compositionend', onCompositionEnd);\n        // Safari < 10.2 & UIWebView doesn't fire compositionend when\n        // switching focus before confirming composition choice\n        // this also fixes the issue where some browsers e.g. iOS Chrome\n        // fires \"change\" instead of \"input\" on autocomplete.\n        el.addEventListener('change', onCompositionEnd);\n        /* istanbul ignore if */\n        if (isIE9) {\n          el.vmodel = true;\n        }\n      }\n    }\n  },\n\n  componentUpdated: function componentUpdated (el, binding, vnode) {\n    if (vnode.tag === 'select') {\n      setSelected(el, binding, vnode.context);\n      // in case the options rendered by v-for have changed,\n      // it's possible that the value is out-of-sync with the rendered options.\n      // detect such cases and filter out values that no longer has a matching\n      // option in the DOM.\n      var prevOptions = el._vOptions;\n      var curOptions = el._vOptions = [].map.call(el.options, getValue);\n      if (curOptions.some(function (o, i) { return !looseEqual(o, prevOptions[i]); })) {\n        // trigger change event if\n        // no matching option found for at least one value\n        var needReset = el.multiple\n          ? binding.value.some(function (v) { return hasNoMatchingOption(v, curOptions); })\n          : binding.value !== binding.oldValue && hasNoMatchingOption(binding.value, curOptions);\n        if (needReset) {\n          trigger(el, 'change');\n        }\n      }\n    }\n  }\n};\n\nfunction setSelected (el, binding, vm) {\n  actuallySetSelected(el, binding, vm);\n  /* istanbul ignore if */\n  if (isIE || isEdge) {\n    setTimeout(function () {\n      actuallySetSelected(el, binding, vm);\n    }, 0);\n  }\n}\n\nfunction actuallySetSelected (el, binding, vm) {\n  var value = binding.value;\n  var isMultiple = el.multiple;\n  if (isMultiple && !Array.isArray(value)) {\n    process.env.NODE_ENV !== 'production' && warn(\n      \"<select multiple v-model=\\\"\" + (binding.expression) + \"\\\"> \" +\n      \"expects an Array value for its binding, but got \" + (Object.prototype.toString.call(value).slice(8, -1)),\n      vm\n    );\n    return\n  }\n  var selected, option;\n  for (var i = 0, l = el.options.length; i < l; i++) {\n    option = el.options[i];\n    if (isMultiple) {\n      selected = looseIndexOf(value, getValue(option)) > -1;\n      if (option.selected !== selected) {\n        option.selected = selected;\n      }\n    } else {\n      if (looseEqual(getValue(option), value)) {\n        if (el.selectedIndex !== i) {\n          el.selectedIndex = i;\n        }\n        return\n      }\n    }\n  }\n  if (!isMultiple) {\n    el.selectedIndex = -1;\n  }\n}\n\nfunction hasNoMatchingOption (value, options) {\n  return options.every(function (o) { return !looseEqual(o, value); })\n}\n\nfunction getValue (option) {\n  return '_value' in option\n    ? option._value\n    : option.value\n}\n\nfunction onCompositionStart (e) {\n  e.target.composing = true;\n}\n\nfunction onCompositionEnd (e) {\n  // prevent triggering an input event for no reason\n  if (!e.target.composing) { return }\n  e.target.composing = false;\n  trigger(e.target, 'input');\n}\n\nfunction trigger (el, type) {\n  var e = document.createEvent('HTMLEvents');\n  e.initEvent(type, true, true);\n  el.dispatchEvent(e);\n}\n\n/*  */\n\n// recursively search for possible transition defined inside the component root\nfunction locateNode (vnode) {\n  return vnode.componentInstance && (!vnode.data || !vnode.data.transition)\n    ? locateNode(vnode.componentInstance._vnode)\n    : vnode\n}\n\nvar show = {\n  bind: function bind (el, ref, vnode) {\n    var value = ref.value;\n\n    vnode = locateNode(vnode);\n    var transition$$1 = vnode.data && vnode.data.transition;\n    var originalDisplay = el.__vOriginalDisplay =\n      el.style.display === 'none' ? '' : el.style.display;\n    if (value && transition$$1) {\n      vnode.data.show = true;\n      enter(vnode, function () {\n        el.style.display = originalDisplay;\n      });\n    } else {\n      el.style.display = value ? originalDisplay : 'none';\n    }\n  },\n\n  update: function update (el, ref, vnode) {\n    var value = ref.value;\n    var oldValue = ref.oldValue;\n\n    /* istanbul ignore if */\n    if (!value === !oldValue) { return }\n    vnode = locateNode(vnode);\n    var transition$$1 = vnode.data && vnode.data.transition;\n    if (transition$$1) {\n      vnode.data.show = true;\n      if (value) {\n        enter(vnode, function () {\n          el.style.display = el.__vOriginalDisplay;\n        });\n      } else {\n        leave(vnode, function () {\n          el.style.display = 'none';\n        });\n      }\n    } else {\n      el.style.display = value ? el.__vOriginalDisplay : 'none';\n    }\n  },\n\n  unbind: function unbind (\n    el,\n    binding,\n    vnode,\n    oldVnode,\n    isDestroy\n  ) {\n    if (!isDestroy) {\n      el.style.display = el.__vOriginalDisplay;\n    }\n  }\n};\n\nvar platformDirectives = {\n  model: directive,\n  show: show\n};\n\n/*  */\n\nvar transitionProps = {\n  name: String,\n  appear: Boolean,\n  css: Boolean,\n  mode: String,\n  type: String,\n  enterClass: String,\n  leaveClass: String,\n  enterToClass: String,\n  leaveToClass: String,\n  enterActiveClass: String,\n  leaveActiveClass: String,\n  appearClass: String,\n  appearActiveClass: String,\n  appearToClass: String,\n  duration: [Number, String, Object]\n};\n\n// in case the child is also an abstract component, e.g. <keep-alive>\n// we want to recursively retrieve the real component to be rendered\nfunction getRealChild (vnode) {\n  var compOptions = vnode && vnode.componentOptions;\n  if (compOptions && compOptions.Ctor.options.abstract) {\n    return getRealChild(getFirstComponentChild(compOptions.children))\n  } else {\n    return vnode\n  }\n}\n\nfunction extractTransitionData (comp) {\n  var data = {};\n  var options = comp.$options;\n  // props\n  for (var key in options.propsData) {\n    data[key] = comp[key];\n  }\n  // events.\n  // extract listeners and pass them directly to the transition methods\n  var listeners = options._parentListeners;\n  for (var key$1 in listeners) {\n    data[camelize(key$1)] = listeners[key$1];\n  }\n  return data\n}\n\nfunction placeholder (h, rawChild) {\n  if (/\\d-keep-alive$/.test(rawChild.tag)) {\n    return h('keep-alive', {\n      props: rawChild.componentOptions.propsData\n    })\n  }\n}\n\nfunction hasParentTransition (vnode) {\n  while ((vnode = vnode.parent)) {\n    if (vnode.data.transition) {\n      return true\n    }\n  }\n}\n\nfunction isSameChild (child, oldChild) {\n  return oldChild.key === child.key && oldChild.tag === child.tag\n}\n\nvar isNotTextNode = function (c) { return c.tag || isAsyncPlaceholder(c); };\n\nvar isVShowDirective = function (d) { return d.name === 'show'; };\n\nvar Transition = {\n  name: 'transition',\n  props: transitionProps,\n  abstract: true,\n\n  render: function render (h) {\n    var this$1 = this;\n\n    var children = this.$slots.default;\n    if (!children) {\n      return\n    }\n\n    // filter out text nodes (possible whitespaces)\n    children = children.filter(isNotTextNode);\n    /* istanbul ignore if */\n    if (!children.length) {\n      return\n    }\n\n    // warn multiple elements\n    if (process.env.NODE_ENV !== 'production' && children.length > 1) {\n      warn(\n        '<transition> can only be used on a single element. Use ' +\n        '<transition-group> for lists.',\n        this.$parent\n      );\n    }\n\n    var mode = this.mode;\n\n    // warn invalid mode\n    if (process.env.NODE_ENV !== 'production' &&\n      mode && mode !== 'in-out' && mode !== 'out-in'\n    ) {\n      warn(\n        'invalid <transition> mode: ' + mode,\n        this.$parent\n      );\n    }\n\n    var rawChild = children[0];\n\n    // if this is a component root node and the component's\n    // parent container node also has transition, skip.\n    if (hasParentTransition(this.$vnode)) {\n      return rawChild\n    }\n\n    // apply transition data to child\n    // use getRealChild() to ignore abstract components e.g. keep-alive\n    var child = getRealChild(rawChild);\n    /* istanbul ignore if */\n    if (!child) {\n      return rawChild\n    }\n\n    if (this._leaving) {\n      return placeholder(h, rawChild)\n    }\n\n    // ensure a key that is unique to the vnode type and to this transition\n    // component instance. This key will be used to remove pending leaving nodes\n    // during entering.\n    var id = \"__transition-\" + (this._uid) + \"-\";\n    child.key = child.key == null\n      ? child.isComment\n        ? id + 'comment'\n        : id + child.tag\n      : isPrimitive(child.key)\n        ? (String(child.key).indexOf(id) === 0 ? child.key : id + child.key)\n        : child.key;\n\n    var data = (child.data || (child.data = {})).transition = extractTransitionData(this);\n    var oldRawChild = this._vnode;\n    var oldChild = getRealChild(oldRawChild);\n\n    // mark v-show\n    // so that the transition module can hand over the control to the directive\n    if (child.data.directives && child.data.directives.some(isVShowDirective)) {\n      child.data.show = true;\n    }\n\n    if (\n      oldChild &&\n      oldChild.data &&\n      !isSameChild(child, oldChild) &&\n      !isAsyncPlaceholder(oldChild) &&\n      // #6687 component root is a comment node\n      !(oldChild.componentInstance && oldChild.componentInstance._vnode.isComment)\n    ) {\n      // replace old child transition data with fresh one\n      // important for dynamic transitions!\n      var oldData = oldChild.data.transition = extend({}, data);\n      // handle transition mode\n      if (mode === 'out-in') {\n        // return placeholder node and queue update when leave finishes\n        this._leaving = true;\n        mergeVNodeHook(oldData, 'afterLeave', function () {\n          this$1._leaving = false;\n          this$1.$forceUpdate();\n        });\n        return placeholder(h, rawChild)\n      } else if (mode === 'in-out') {\n        if (isAsyncPlaceholder(child)) {\n          return oldRawChild\n        }\n        var delayedLeave;\n        var performLeave = function () { delayedLeave(); };\n        mergeVNodeHook(data, 'afterEnter', performLeave);\n        mergeVNodeHook(data, 'enterCancelled', performLeave);\n        mergeVNodeHook(oldData, 'delayLeave', function (leave) { delayedLeave = leave; });\n      }\n    }\n\n    return rawChild\n  }\n};\n\n/*  */\n\nvar props = extend({\n  tag: String,\n  moveClass: String\n}, transitionProps);\n\ndelete props.mode;\n\nvar TransitionGroup = {\n  props: props,\n\n  beforeMount: function beforeMount () {\n    var this$1 = this;\n\n    var update = this._update;\n    this._update = function (vnode, hydrating) {\n      var restoreActiveInstance = setActiveInstance(this$1);\n      // force removing pass\n      this$1.__patch__(\n        this$1._vnode,\n        this$1.kept,\n        false, // hydrating\n        true // removeOnly (!important, avoids unnecessary moves)\n      );\n      this$1._vnode = this$1.kept;\n      restoreActiveInstance();\n      update.call(this$1, vnode, hydrating);\n    };\n  },\n\n  render: function render (h) {\n    var tag = this.tag || this.$vnode.data.tag || 'span';\n    var map = Object.create(null);\n    var prevChildren = this.prevChildren = this.children;\n    var rawChildren = this.$slots.default || [];\n    var children = this.children = [];\n    var transitionData = extractTransitionData(this);\n\n    for (var i = 0; i < rawChildren.length; i++) {\n      var c = rawChildren[i];\n      if (c.tag) {\n        if (c.key != null && String(c.key).indexOf('__vlist') !== 0) {\n          children.push(c);\n          map[c.key] = c\n          ;(c.data || (c.data = {})).transition = transitionData;\n        } else if (process.env.NODE_ENV !== 'production') {\n          var opts = c.componentOptions;\n          var name = opts ? (opts.Ctor.options.name || opts.tag || '') : c.tag;\n          warn((\"<transition-group> children must be keyed: <\" + name + \">\"));\n        }\n      }\n    }\n\n    if (prevChildren) {\n      var kept = [];\n      var removed = [];\n      for (var i$1 = 0; i$1 < prevChildren.length; i$1++) {\n        var c$1 = prevChildren[i$1];\n        c$1.data.transition = transitionData;\n        c$1.data.pos = c$1.elm.getBoundingClientRect();\n        if (map[c$1.key]) {\n          kept.push(c$1);\n        } else {\n          removed.push(c$1);\n        }\n      }\n      this.kept = h(tag, null, kept);\n      this.removed = removed;\n    }\n\n    return h(tag, null, children)\n  },\n\n  updated: function updated () {\n    var children = this.prevChildren;\n    var moveClass = this.moveClass || ((this.name || 'v') + '-move');\n    if (!children.length || !this.hasMove(children[0].elm, moveClass)) {\n      return\n    }\n\n    // we divide the work into three loops to avoid mixing DOM reads and writes\n    // in each iteration - which helps prevent layout thrashing.\n    children.forEach(callPendingCbs);\n    children.forEach(recordPosition);\n    children.forEach(applyTranslation);\n\n    // force reflow to put everything in position\n    // assign to this to avoid being removed in tree-shaking\n    // $flow-disable-line\n    this._reflow = document.body.offsetHeight;\n\n    children.forEach(function (c) {\n      if (c.data.moved) {\n        var el = c.elm;\n        var s = el.style;\n        addTransitionClass(el, moveClass);\n        s.transform = s.WebkitTransform = s.transitionDuration = '';\n        el.addEventListener(transitionEndEvent, el._moveCb = function cb (e) {\n          if (e && e.target !== el) {\n            return\n          }\n          if (!e || /transform$/.test(e.propertyName)) {\n            el.removeEventListener(transitionEndEvent, cb);\n            el._moveCb = null;\n            removeTransitionClass(el, moveClass);\n          }\n        });\n      }\n    });\n  },\n\n  methods: {\n    hasMove: function hasMove (el, moveClass) {\n      /* istanbul ignore if */\n      if (!hasTransition) {\n        return false\n      }\n      /* istanbul ignore if */\n      if (this._hasMove) {\n        return this._hasMove\n      }\n      // Detect whether an element with the move class applied has\n      // CSS transitions. Since the element may be inside an entering\n      // transition at this very moment, we make a clone of it and remove\n      // all other transition classes applied to ensure only the move class\n      // is applied.\n      var clone = el.cloneNode();\n      if (el._transitionClasses) {\n        el._transitionClasses.forEach(function (cls) { removeClass(clone, cls); });\n      }\n      addClass(clone, moveClass);\n      clone.style.display = 'none';\n      this.$el.appendChild(clone);\n      var info = getTransitionInfo(clone);\n      this.$el.removeChild(clone);\n      return (this._hasMove = info.hasTransform)\n    }\n  }\n};\n\nfunction callPendingCbs (c) {\n  /* istanbul ignore if */\n  if (c.elm._moveCb) {\n    c.elm._moveCb();\n  }\n  /* istanbul ignore if */\n  if (c.elm._enterCb) {\n    c.elm._enterCb();\n  }\n}\n\nfunction recordPosition (c) {\n  c.data.newPos = c.elm.getBoundingClientRect();\n}\n\nfunction applyTranslation (c) {\n  var oldPos = c.data.pos;\n  var newPos = c.data.newPos;\n  var dx = oldPos.left - newPos.left;\n  var dy = oldPos.top - newPos.top;\n  if (dx || dy) {\n    c.data.moved = true;\n    var s = c.elm.style;\n    s.transform = s.WebkitTransform = \"translate(\" + dx + \"px,\" + dy + \"px)\";\n    s.transitionDuration = '0s';\n  }\n}\n\nvar platformComponents = {\n  Transition: Transition,\n  TransitionGroup: TransitionGroup\n};\n\n/*  */\n\n// install platform specific utils\nVue.config.mustUseProp = mustUseProp;\nVue.config.isReservedTag = isReservedTag;\nVue.config.isReservedAttr = isReservedAttr;\nVue.config.getTagNamespace = getTagNamespace;\nVue.config.isUnknownElement = isUnknownElement;\n\n// install platform runtime directives & components\nextend(Vue.options.directives, platformDirectives);\nextend(Vue.options.components, platformComponents);\n\n// install platform patch function\nVue.prototype.__patch__ = inBrowser ? patch : noop;\n\n// public mount method\nVue.prototype.$mount = function (\n  el,\n  hydrating\n) {\n  el = el && inBrowser ? query(el) : undefined;\n  return mountComponent(this, el, hydrating)\n};\n\n// devtools global hook\n/* istanbul ignore next */\nif (inBrowser) {\n  setTimeout(function () {\n    if (config.devtools) {\n      if (devtools) {\n        devtools.emit('init', Vue);\n      } else if (\n        process.env.NODE_ENV !== 'production' &&\n        process.env.NODE_ENV !== 'test'\n      ) {\n        console[console.info ? 'info' : 'log'](\n          'Download the Vue Devtools extension for a better development experience:\\n' +\n          'https://github.com/vuejs/vue-devtools'\n        );\n      }\n    }\n    if (process.env.NODE_ENV !== 'production' &&\n      process.env.NODE_ENV !== 'test' &&\n      config.productionTip !== false &&\n      typeof console !== 'undefined'\n    ) {\n      console[console.info ? 'info' : 'log'](\n        \"You are running Vue in development mode.\\n\" +\n        \"Make sure to turn on production mode when deploying for production.\\n\" +\n        \"See more tips at https://vuejs.org/guide/deployment.html\"\n      );\n    }\n  }, 0);\n}\n\n/*  */\n\nexport default Vue;\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"full\",\n      on: {\n        \"!mouseover\": function($event) {\n          $event.stopPropagation()\n          return _vm.itemOut.apply(null, arguments)\n        }\n      }\n    },\n    [\n      _c(\"devconsole\"),\n      _vm._v(\" \"),\n      _c(\n        \"topbar\",\n        {\n          on: {\n            \"open-settings\": function($event) {\n              _vm.togSettings = true\n            }\n          }\n        },\n        [\n          _c(\n            \"template\",\n            { slot: \"center\" },\n            [\n              !_vm.state\n                ? _c(\"span\", { staticClass: \"load-message\" }, [\n                    _vm._v(\"LOADING DATA...\")\n                  ])\n                : _vm._e(),\n              _vm._v(\" \"),\n              _vm.state\n                ? _c(\"dots\", { attrs: { dots: _vm.state.player.dots } })\n                : _vm._e()\n            ],\n            1\n          )\n        ],\n        2\n      ),\n      _vm._v(\" \"),\n      _c(\"itempopup\"),\n      _vm._v(\" \"),\n      _c(\"warn\", { ref: \"warn\", on: { confirmed: _vm.onConfirmed } }),\n      _vm._v(\" \"),\n      _c(\"choice\"),\n      _vm._v(\" \"),\n      _vm.Profile.CLOUD && _vm.togRegister\n        ? _c(\"register\", {\n            on: {\n              close: function($event) {\n                _vm.togRegister = false\n              }\n            }\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.Profile.CLOUD && _vm.showLogin\n        ? _c(\"login\", {\n            on: {\n              close: function($event) {\n                _vm.showLogin = false\n              }\n            }\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.togSettings\n        ? _c(\"settings\", {\n            on: {\n              \"close-settings\": function($event) {\n                _vm.togSettings = false\n              }\n            }\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.togActivities\n        ? _c(\"activities\", {\n            on: {\n              close: function($event) {\n                _vm.togActivities = false\n              }\n            }\n          })\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.state\n        ? _c(\n            \"div\",\n            { staticClass: \"game-main\" },\n            [\n              _c(\"resources\", { attrs: { items: _vm.state.resources } }),\n              _vm._v(\" \"),\n              _c(\n                \"vue-menu\",\n                {\n                  staticClass: \"game-mid\",\n                  attrs: { items: _vm.menuItems },\n                  model: {\n                    value: _vm.section,\n                    callback: function($$v) {\n                      _vm.section = $$v\n                    },\n                    expression: \"section\"\n                  }\n                },\n                [\n                  _c(\n                    \"template\",\n                    { slot: \"sect_main\" },\n                    [_c(\"tasks\", { staticClass: \"main-tasks\" })],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"template\",\n                    { slot: \"sect_skills\" },\n                    [_c(\"skills\", { attrs: { state: _vm.state } })],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"template\", { slot: \"sect_player\" }, [_c(\"player\")], 1),\n                  _vm._v(\" \"),\n                  _c(\n                    \"template\",\n                    { slot: \"sect_home\" },\n                    [_c(\"home\", { attrs: { state: _vm.state } })],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"template\",\n                    { slot: \"sect_raid\" },\n                    [_c(\"adventure\", { attrs: { state: _vm.state } })],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\"template\", { slot: \"sect_equip\" }, [\n                    _c(\n                      \"div\",\n                      { staticClass: \"inv-equip\" },\n                      [\n                        _c(\"equip\", { attrs: { equip: _vm.state.equip } }),\n                        _vm._v(\" \"),\n                        _c(\"inventory\", { attrs: { inv: _vm.state.inventory } })\n                      ],\n                      1\n                    )\n                  ]),\n                  _vm._v(\" \"),\n                  _c(\"template\", { slot: \"sect_spells\" }, [_c(\"spells\")], 1),\n                  _vm._v(\" \"),\n                  _c(\"template\", { slot: \"sect_scraft\" }, [_c(\"scraft\")], 1),\n                  _vm._v(\" \"),\n                  _c(\"template\", { slot: \"sect_potions\" }, [_c(\"potions\")], 1),\n                  _vm._v(\" \"),\n                  _c(\n                    \"template\",\n                    { slot: \"sect_bestiary\" },\n                    [_c(\"bestiary\")],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"template\",\n                    { slot: \"sect_minions\" },\n                    [_c(\"minions\", { attrs: { minions: _vm.state.minions } })],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"template\",\n                    { slot: \"sect_enchant\" },\n                    [_c(\"enchanting\")],\n                    1\n                  )\n                ],\n                2\n              ),\n              _vm._v(\" \"),\n              _c(\"vitals\", { attrs: { state: _vm.state } }),\n              _vm._v(\" \"),\n              _c(\"log\")\n            ],\n            1\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      _vm.state\n        ? _c(\"quickbar\", {\n            staticClass: \"bot-bar\",\n            attrs: { bars: _vm.state.bars }\n          })\n        : _vm._e()\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"menu\" }, [\n    _c(\n      \"div\",\n      { staticClass: \"menu-items\" },\n      _vm._l(_vm.items, function(it) {\n        return _c(\"div\", { key: it.id, staticClass: \"menu-item\" }, [\n          it != _vm.value\n            ? _c(\n                \"span\",\n                {\n                  key: _vm.itemTitle(it),\n                  on: {\n                    click: function($event) {\n                      return _vm.setActive(it)\n                    }\n                  }\n                },\n                [_c(\"u\", [_vm._v(\" \" + _vm._s(_vm.itemTitle(it)) + \" \")])]\n              )\n            : _c(\"span\", { key: _vm.itemTitle(it) }, [\n                _vm._v(\" \" + _vm._s(_vm.itemTitle(it)) + \" \")\n              ])\n        ])\n      }),\n      0\n    ),\n    _vm._v(\" \"),\n    _c(\n      \"span\",\n      { staticClass: \"menu-content\" },\n      [_vm._t(_vm.itemId(_vm.value))],\n      2\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\n\nexport default {\n\n\tprops:['value', 'items'],\n\tmethods:{\n\n\t\titemTitle(it) {\n\n\t\t\tif ( it instanceof Object ) {\n\t\t\t\treturn it.name || it.desc || it.id;\n\t\t\t} return it;\n\n\t\t},\n\n\t\titemId(it){\n\t\t\tif ( it instanceof Object ) {\n\t\t\t\treturn it.id;\n\t\t\t}\n\t\t\treturn it;\n\t\t},\n\n\t\tsetActive( it ) {\n\n\t\t\tthis.$emit( 'input', it );\n\t\t\tthis.$emit( 'changed', it );\n\n\t\t}\n\n\t}\n\n}\n\n</script>\n\n<template>\n\t<div class=\"menu\">\n\n\t\t<div class=\"menu-items\">\n\n\t\t<div class=\"menu-item\" v-for=\"(it) in items\" :key=\"it.id\">\n\n\t\t\t<span v-if=\"it != value\" @click=\"setActive(it)\" :key=\"itemTitle(it)\"> <u> {{ itemTitle(it) }} </u></span>\n\t\t\t<span v-else :key=\"itemTitle(it)\"> {{ itemTitle(it) }} </span>\n\n\t\t</div>\n\n\t\t</div>\n\n\n\t\t<!-- NOTE: slot css-class ignored -->\n\t\t<span class=\"menu-content\"><slot :name=\"itemId(value)\"></slot></span>\n\n\t</div>\n</template>\n\n<style scoped>\n    .menu-items .menu-item { color: #000; }\n    body.darkmode .menu-items .menu-item { color: #FFF; }\n    .menu-items .menu-item u { color: #999; }\n\t.menu-items .menu-item:hover, .menu-items .menu-item u:hover { color: #33F; }\n\n</style>","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=636f3856&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./menu.vue?vue&type=style&index=0&id=636f3856&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./menu.vue?vue&type=template&id=636f3856&scoped=true&\"\nimport script from \"./menu.vue?vue&type=script&lang=js&\"\nexport * from \"./menu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./menu.vue?vue&type=style&index=0&id=636f3856&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"636f3856\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('636f3856')) {\n      api.createRecord('636f3856', component.options)\n    } else {\n      api.reload('636f3856', component.options)\n    }\n    module.hot.accept(\"./menu.vue?vue&type=template&id=636f3856&scoped=true&\", function () {\n      api.rerender('636f3856', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/components/menu.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"res-list\" },\n    [\n      _c(\"div\", { staticClass: \"config\" }, [\n        _c(\"button\", { ref: \"btnHides\", staticClass: \"btnConfig\" })\n      ]),\n      _vm._v(\" \"),\n      _vm._l(_vm.groups, function(g, p) {\n        return _c(\"group\", {\n          key: p,\n          staticClass: \"res-group\",\n          attrs: { items: g, group: p, hide: _vm.hide }\n        })\n      })\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.shown.length > 0\n    ? _c(\"div\", [\n        _c(\n          \"div\",\n          {\n            staticClass: \"groupTitle separate\",\n            on: {\n              click: function($event) {\n                _vm.isOpen = !_vm.isOpen\n              }\n            }\n          },\n          [\n            _c(\"span\", [_vm._v(_vm._s(_vm.group))]),\n            _c(\"span\", { staticClass: \"arrows\" }, [\n              _vm._v(_vm._s(_vm.isOpen ? \"▼\" : \"▲\"))\n            ])\n          ]\n        ),\n        _vm._v(\" \"),\n        _vm.isOpen\n          ? _c(\n              \"div\",\n              _vm._l(_vm.shown, function(it) {\n                return _c(\n                  \"div\",\n                  {\n                    key: it.id,\n                    staticClass: \"rsrc separate hidable\",\n                    attrs: { \"data-key\": it.id },\n                    on: {\n                      \"!mouseenter\": function($event) {\n                        $event.stopPropagation()\n                        return _vm.itemOver($event, it)\n                      }\n                    }\n                  },\n                  [\n                    _c(\"span\", { staticClass: \"item-name\" }, [\n                      _vm._v(_vm._s(it.name))\n                    ]),\n                    _vm._v(\" \"),\n                    _c(\"span\", { staticClass: \"num-align\" }, [\n                      _vm._v(\n                        _vm._s(\n                          Math.floor(it.value) +\n                            (it.max && it.max.value > 0\n                              ? \"/\" + Math.floor(it.max.value)\n                              : \"\")\n                        )\n                      )\n                    ])\n                  ]\n                )\n              }),\n              0\n            )\n          : _vm._e()\n      ])\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport ItemsBase from 'ui/itemsBase';\nexport default {\n\n\t/**\n\t * @property {string} group - displayed group name.\n\t * @property {object<string,boolean>} - elements to hide.\n\t */\n\tprops:[ 'items', 'group', 'hide'],\n\tmixins:[ItemsBase],\n\tdata(){\n\n\t\treturn {\n\t\t\tisOpen:true\n\t\t}\n\n\t},\n\tcomputed:{\n\n\t\tshown(){\n\n\t\t\tlet a = [];\n\t\t\tlet len = this.items.length;\n\t\t\tfor( let i = 0; i < len; i++ ) {\n\n\t\t\t\tlet it = this.items[i];\n\t\t\t\tif ( !this.reslocked( it ) && !this.hide[it.id ] ) a.push(it);\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t}\n\n\t}\n\n}\n</script>\n\n<template>\n\n<div v-if=\"shown.length>0\">\n\n<div class=\"groupTitle separate\" @click=\"isOpen=!isOpen\"><span>{{group}}</span><span class=\"arrows\">{{ isOpen ? '▼' : '▲' }}</span></div>\n<div v-if=\"isOpen\">\n\n\t\t<div class=\"rsrc separate hidable\" v-for=\"it in shown\"\n\t\t\t:data-key=\"it.id\" :key=\"it.id\"\n\t\t\t@mouseenter.capture.stop=\"itemOver($event,it)\">\n\n\t\t\t<span class=\"item-name\">{{ it.name }}</span>\n\t\t\t<span class=\"num-align\">{{ Math.floor( it.value ) + ( it.max && it.max.value>0 ? '/' + Math.floor(it.max.value) : '' )}}</span>\n\t\t\t<!--<td>{{ it.delta != 0 ? '&nbsp;(' + it.delta.toFixed(2) + '/t )' : ''}}</td>-->\n\n\t</div>\n\n</div>\n\n</div>\n\n</template>\n\n<style scoped>\n\ndiv.groupTitle {\n\tcursor: pointer;\n\ttext-transform: capitalize;\n\tcolor: var( --title-text-color );\n\tborder: 1px solid var(--list-header-border);\n\tbackground-color: var(--list-header-color);\n\tpadding:1px;\n\tmargin:-1px 0 0 0px;\n}\n\n.rsrc .item-name {\n\tflex:1;\n\tcolor:#999;\n\tpadding-right: var(--sm-gap);\n}\n\n</style>","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./itemGroup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./itemGroup.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./itemGroup.vue?vue&type=style&index=0&id=05eb1bc6&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./itemGroup.vue?vue&type=style&index=0&id=05eb1bc6&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./itemGroup.vue?vue&type=template&id=05eb1bc6&scoped=true&\"\nimport script from \"./itemGroup.vue?vue&type=script&lang=js&\"\nexport * from \"./itemGroup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./itemGroup.vue?vue&type=style&index=0&id=05eb1bc6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"05eb1bc6\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('05eb1bc6')) {\n      api.createRecord('05eb1bc6', component.options)\n    } else {\n      api.reload('05eb1bc6', component.options)\n    }\n    module.hot.accept(\"./itemGroup.vue?vue&type=template&id=05eb1bc6&scoped=true&\", function () {\n      api.rerender('05eb1bc6', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/panes/itemGroup.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resources.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resources.vue?vue&type=script&lang=js&\"","<script>\nimport UIMixin from 'ui/uiMixin';\nimport Settings from 'modules/settings';\n\nimport ItemGroup from 'ui/panes/itemGroup.vue';\n\nexport default {\n\n\t/**\n\t * @property {Resource[]} items\n\t */\n\tprops:['items'],\n\tmixins:[ UIMixin],\n\n\tdata(){\n\n\t\tlet ops = Settings.getSubVars('resview');\n\t\tif (!ops.hide) ops.hide = {};\n\n\t\treturn {\n\n\t\t\t/**\n\t\t\t * @property {.<string,GData[]>} groups - maps group name to items array.\n\t\t\t */\n\t\t\tgroups:null,\n\t\t\thide:ops.hide\n\t\t}\n\n\t},\n\tcomponents:{\n\t\tgroup:ItemGroup\n\t},\n\tcreated(){\n\n\t\t// build item groups.\n\t\tlet items = this.items;\n\t\tlet groups = {\n\t\t\tother:[]\n\t\t}\n\n\t\tlet group;\n\t\tlet len = items.length;\n\t\tfor( let i = 0; i < len; i++ ) {\n\n\t\t\tlet it = items[i];\n\t\t\tif ( it.hide ) continue;\n\t\t\tlet title = it.group || ( it.tags ? it.tags[0] : 'other');\n\t\t\tif ( title === 'manas' ) continue;\n\n\t\t\tgroup = groups[title] || ( groups[title] = [] );\n\n\t\t\tgroup.push(it );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t}\n\n}\n</script>\n\n\n<template>\n<div class=\"res-list\">\n\n\t\t<div class=\"config\"><button ref=\"btnHides\" class=\"btnConfig\"></button></div>\n\n\t\t<group class=\"res-group\" v-for=\"(g,p) in groups\" :items=\"g\" :group=\"p\" :hide=\"hide\" :key=\"p\" />\n\n</div>\n</template>\n\n<style scoped>\n\n\ndiv.res-list {\n\toverflow-y:auto;\n\toverflow-x:visible;\n\twidth: fit-content;\n\tmargin: 0; padding: 0;\n\tmin-width: 11rem;\n}\n</style>","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resources.vue?vue&type=style&index=0&id=1090363f&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./resources.vue?vue&type=style&index=0&id=1090363f&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./resources.vue?vue&type=template&id=1090363f&scoped=true&\"\nimport script from \"./resources.vue?vue&type=script&lang=js&\"\nexport * from \"./resources.vue?vue&type=script&lang=js&\"\nimport style0 from \"./resources.vue?vue&type=style&index=0&id=1090363f&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1090363f\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('1090363f')) {\n      api.createRecord('1090363f', component.options)\n    } else {\n      api.reload('1090363f', component.options)\n    }\n    module.hot.accept(\"./resources.vue?vue&type=template&id=1090363f&scoped=true&\", function () {\n      api.rerender('1090363f', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/panes/resources.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { ref: \"hidables\", staticClass: \"main-tasks\" },\n    [\n      _c(\"div\", { staticClass: \"config\" }, [\n        _c(\"button\", { ref: \"btnHides\", staticClass: \"btnConfig\" })\n      ]),\n      _vm._v(\" \"),\n      _vm.visActs.length != 0\n        ? _c(\"div\", { staticClass: \"div-hs\" }, [_vm._v(\"Actions\")])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"upgrades\", {\n        staticClass: \"task-list\",\n        attrs: { items: _vm.visActs }\n      }),\n      _vm._v(\" \"),\n      _vm.visRuns.length != 0\n        ? _c(\"div\", { staticClass: \"div-hs\" }, [_vm._v(\"Tasks\")])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"upgrades\", {\n        staticClass: \"task-list\",\n        attrs: { items: _vm.visRuns }\n      }),\n      _vm._v(\" \"),\n      _vm.ups.length != 0\n        ? _c(\"div\", { staticClass: \"div-hs\" }, [_vm._v(\"Upgrades\")])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"upgrades\", {\n        staticClass: \"upgrade-list\",\n        attrs: { items: _vm.ups }\n      }),\n      _vm._v(\" \"),\n      _vm.classes.length != 0\n        ? _c(\"div\", { staticClass: \"div-hs\" }, [_vm._v(\"Classes\")])\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"upgrades\", {\n        staticClass: \"upgrade-list\",\n        attrs: { items: _vm.classes }\n      })\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport Game from '../../game';\nimport Upgrades from '../panes/upgrades.vue';\n\nimport Settings from 'modules/settings';\nimport ItemsBase from '../itemsBase';\nimport UIMixin from '../uiMixin';\n\nexport default {\n\n\tmixins:[ItemsBase,UIMixin],\n\tcomponents:{\n\t\tupgrades:Upgrades\n\t},\n\tdata(){\n\n\t\tlet ops = Settings.getSubVars('main');\n\t\tif (!ops.hide) ops.hide = {}\n\n\t\treturn {\n\t\t\thide:ops.hide\n\t\t}\n\n\t},\n\tcomputed:{\n\n\t\ttasks(){return Game.state.tasks.filter(v=>!v.perpetual&&!v.length)},\n\t\trunnables(){return Game.state.tasks.filter(v=>v.perpetual||v.length>0)},\n\n\t\tvisActs(){return this.tasks.filter(v=>this.show(v))},\n\t\tvisRuns(){ return this.runnables.filter(v=>this.show(v))},\n\n\t\tups(){\n\t\t\treturn Game.state.upgrades.filter( v=>!this.locked(v)&&this.show(v) )\n\t\t},\n\t\tclasses(){\n\t\t\treturn Game.state.classes.filter(v=>!this.locked(v)&&this.show(v));\n\t\t}\n\n\t}\n\n}\n</script>\n\n<template>\n\t<div class=\"main-tasks\" ref=\"hidables\">\n\t\t<div class=\"config\"><button ref=\"btnHides\" class=\"btnConfig\"></button></div>\n\t\t<div v-if=\"visActs.length != 0\" class=\"div-hs\">Actions</div>\n\t\t<upgrades class=\"task-list\" :items=\"visActs\" />\n\t\t<div v-if=\"visRuns.length != 0\" class=\"div-hs\">Tasks</div>\n\t\t<upgrades class=\"task-list\" :items=\"visRuns\" />\n\t\t<div v-if=\"ups.length != 0\" class=\"div-hs\">Upgrades</div>\n\t\t<upgrades class=\"upgrade-list\" :items=\"ups\" />\n\t\t<div v-if=\"classes.length != 0\" class=\"div-hs\">Classes</div>\n\t\t<upgrades class=\"upgrade-list\" :items=\"classes\" />\n\t</div>\n</template>\n\n<style scoped>\n\n    div.task-list, .main-tasks > div.upgrade-list {\n        margin: 0; padding: var(--md-gap);\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat( auto-fit, var(--task-button-width) );\n    }\n\n    div.task-list .runnable:hover {background: var(--accent-color-hover); }\n    div.task-list .runnable:active {background: var(--accent-color-active); }\n\n\n</style>","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tasks.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tasks.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tasks.vue?vue&type=style&index=0&id=0e3bfebf&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./tasks.vue?vue&type=style&index=0&id=0e3bfebf&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./tasks.vue?vue&type=template&id=0e3bfebf&scoped=true&\"\nimport script from \"./tasks.vue?vue&type=script&lang=js&\"\nexport * from \"./tasks.vue?vue&type=script&lang=js&\"\nimport style0 from \"./tasks.vue?vue&type=style&index=0&id=0e3bfebf&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e3bfebf\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0e3bfebf')) {\n      api.createRecord('0e3bfebf', component.options)\n    } else {\n      api.reload('0e3bfebf', component.options)\n    }\n    module.hot.accept(\"./tasks.vue?vue&type=template&id=0e3bfebf&scoped=true&\", function () {\n      api.rerender('0e3bfebf', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/sections/tasks.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.hasItems\n    ? _c(\n        \"div\",\n        { staticClass: \"quickbar\" },\n        _vm._l(_vm.slots, function(it, i) {\n          return _c(\"div\", { key: i, staticClass: \"quickslot\" }, [\n            it.item != null\n              ? _c(\n                  \"div\",\n                  {\n                    class: it.item.school ? it.item.school : \"\",\n                    on: {\n                      click: function($event) {\n                        return _vm.emit(\"quickslot\", it)\n                      },\n                      \"!mouseenter\": function($event) {\n                        $event.stopPropagation()\n                        return _vm.itemOver($event, it.item || it)\n                      }\n                    }\n                  },\n                  [\n                    _c(\"div\", [_vm._v(_vm._s(_vm.abbr(it)))]),\n                    _vm._v(\" \"),\n                    _c(\"div\", {\n                      staticClass: \"remove\",\n                      on: {\n                        click: function($event) {\n                          return _vm.bar.clear(i)\n                        }\n                      }\n                    }),\n                    _vm._v(\" \"),\n                    it.item.school\n                      ? _c(\"div\", { staticClass: \"bgfill\" }, [_vm._v(\" \")])\n                      : _vm._e()\n                  ]\n                )\n              : _c(\"div\", [_vm._v(_vm._s(i != 9 ? i + 1 : 0))])\n          ])\n        }),\n        0\n      )\n    : _c(\"div\", { staticClass: \"quickbar\" }, [_vm._m(0)])\n}\nvar staticRenderFns = [\n  function() {\n    var _vm = this\n    var _h = _vm.$createElement\n    var _c = _vm._self._c || _h\n    return _c(\"p\", { staticClass: \"use-msg\" }, [\n      _vm._v(\n        \"\\n\\t\\tRoll-over Item and hold {Shift} + {Number} to assign quickslot.\"\n      ),\n      _c(\"br\"),\n      _vm._v(\"\\n\\t\\tPress {Number} again to use quickslot Item.\\n\\t\")\n    ])\n  }\n]\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport Game from '../game';\nimport {abbr} from '../util/format';\nimport { TRY_USE } from '../events';\n\n/**\n * Bar for quick-use items.\n */\nexport default {\n\n\tprops:['bars'],\n\tmethods:{\n\n\t\tabbr:abbr\n\n\t},\n\tcomputed:{\n\n\t\tbar(){return this.bars.active;},\n\n\t\tslots() {\n\t\t\treturn this.bar.slots;\n\t\t},\n\n\t\thasItems(){\n\t\t\treturn this.slots.some(v=>v.item!=null);\n\t\t}\n\n\t}\n\n}\n</script>\n\n<template>\n\t<div class=\"quickbar\" v-if=\"hasItems\">\n\n\t\t<div class=\"quickslot\" v-for=\"(it,i) in slots\" :key=\"i\">\n\n\t\t\t<div v-if=\"it.item!=null\" :class=\"it.item.school ? it.item.school :''\"\n\t\t\t\t\t@click=\"emit( 'quickslot', it )\"\n\t\t\t\t\t@mouseenter.capture.stop=\"itemOver($event,it.item||it)\">\n\n\n\t\t\t\t<div>{{ abbr(it) }}</div>\n\n\t\t\t\t<div class=\"remove\" @click=\"bar.clear(i)\" />\n\t\t\t\t<div v-if=\"it.item.school\" class=\"bgfill\" >&nbsp;</div>\n\n\t\t\t</div>\n\t\t\t<div v-else>{{ (i != 9) ? i + 1 : 0 }}</div>\n\n\t\t</div>\n\n\t</div>\n\t<div class=\"quickbar\" v-else>\n\n\t\t<p class=\"use-msg\">\n\t\t\tRoll-over Item and hold {Shift} + {Number} to assign quickslot.<br>\n\t\t\tPress {Number} again to use quickslot Item.\n\t\t</p>\n\n\t</div>\n\n</template>\n\n<style scoped>\n\np.use-msg {\n\tfont-size:1.2em;\n\tline-height: 1.4em;\n\tmargin-left: 10%;\n}\n\n\ndiv.quickbar {\n\n\tdisplay:flex;\n\tflex-basis:3em;\n\twidth:100%;\n\tflex-direction: row;\n\tjustify-self: flex-end;\n\tz-index: 50;\n\tmargin: 0;\n}\n\ndiv.quickslot {\n\tmin-width:2em;\n\tmin-height:2em;\n\tcursor: pointer;\n\ttext-transform: capitalize;\n\tmargin:var(--tiny-gap) var(--sm-gap) var(--sm-gap) var(--sm-gap);\n\tpadding:var(--tiny-gap);\n\ttext-align: center;\n\t/** relative so remove button correctly placed. **/\n\tposition: relative;\n\tfont-size:xx-large;\n\tborder: 1px solid var(--dark-border-color);\n}\n\ndiv.remove {\n\tposition:absolute;\n\tborder: 1px solid var(--dark-border-color);\n\ttop:0;\n\tright:0;\n\tmargin: 0;\n\tpadding: 0;\n\tbackground:white;\n\topacity:0.65;\n\tz-index: 10;\n\tmin-height:0.9em;\n\tmin-width:0.9em;\n\tfont-size: 0.8rem;\n}\n\ndiv.remove::after {\n\tcontent:\"x\";\n}\n\n.quickslot div.remove { background: #FFF0; color: #000; border: none; font-weight: bold; }\n\n\n\n</style>\n","import mod from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quickbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quickbar.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quickbar.vue?vue&type=style&index=0&id=3473ec58&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./quickbar.vue?vue&type=style&index=0&id=3473ec58&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./quickbar.vue?vue&type=template&id=3473ec58&scoped=true&\"\nimport script from \"./quickbar.vue?vue&type=script&lang=js&\"\nexport * from \"./quickbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./quickbar.vue?vue&type=style&index=0&id=3473ec58&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3473ec58\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('3473ec58')) {\n      api.createRecord('3473ec58', component.options)\n    } else {\n      api.reload('3473ec58', component.options)\n    }\n    module.hot.accept(\"./quickbar.vue?vue&type=template&id=3473ec58&scoped=true&\", function () {\n      api.rerender('3473ec58', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/quickbar.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"vitals\" },\n    [\n      _c(\"running\", { attrs: { runner: _vm.state.runner } }),\n      _vm._v(\" \"),\n      _c(\"div\", { staticClass: \"config\" }, [\n        _c(\"button\", { ref: \"btnHides\", staticClass: \"btnConfig\" })\n      ]),\n      _vm._v(\" \"),\n      _c(\n        \"div\",\n        { staticClass: \"statbars\" },\n        [\n          _c(\n            \"div\",\n            {\n              directives: [\n                {\n                  name: \"show\",\n                  rawName: \"v-show\",\n                  value: _vm.show(_vm.stamina),\n                  expression: \"show(stamina)\"\n                }\n              ],\n              staticClass: \"hidable statbar\",\n              attrs: { \"data-key\": \"stamina\" }\n            },\n            [\n              _c(\"span\", { staticClass: \"name\" }, [_vm._v(\"stamina\")]),\n              _c(\n                \"span\",\n                { staticClass: \"barspan\" },\n                [\n                  _c(\"progbar\", {\n                    staticClass: \"stamina\",\n                    attrs: {\n                      value: _vm.stamina.valueOf(),\n                      max: _vm.stamina.max.value\n                    },\n                    nativeOn: {\n                      \"!mouseenter\": function($event) {\n                        $event.stopPropagation()\n                        return _vm.itemOver($event, _vm.stamina)\n                      }\n                    }\n                  })\n                ],\n                1\n              )\n            ]\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            {\n              directives: [\n                {\n                  name: \"show\",\n                  rawName: \"v-show\",\n                  value: _vm.show(_vm.hp),\n                  expression: \"show(hp)\"\n                }\n              ],\n              staticClass: \"hidable statbar\",\n              attrs: { \"data-key\": \"hp\" }\n            },\n            [\n              _c(\"span\", { staticClass: \"name\" }, [_vm._v(\"life\")]),\n              _c(\n                \"span\",\n                { staticClass: \"barspan\" },\n                [\n                  _c(\"progbar\", {\n                    staticClass: \"hp\",\n                    attrs: { value: _vm.hp.valueOf(), max: _vm.hp.max.value },\n                    nativeOn: {\n                      \"!mouseenter\": function($event) {\n                        $event.stopPropagation()\n                        return _vm.itemOver($event, _vm.hp)\n                      }\n                    }\n                  })\n                ],\n                1\n              )\n            ]\n          ),\n          _vm._v(\" \"),\n          _vm._l(_vm.visMana, function(it) {\n            return _c(\n              \"div\",\n              {\n                key: it.key,\n                staticClass: \"hidable statbar\",\n                attrs: { \"data-key\": it.id }\n              },\n              [\n                _c(\"span\", { staticClass: \"name\" }, [_vm._v(_vm._s(it.name))]),\n                _c(\n                  \"span\",\n                  { staticClass: \"barspan\" },\n                  [\n                    _c(\"progbar\", {\n                      class: it.id,\n                      attrs: {\n                        value: it.valueOf(),\n                        max: it.max.value,\n                        color: it.color\n                      },\n                      nativeOn: {\n                        \"!mouseenter\": function($event) {\n                          $event.stopPropagation()\n                          return _vm.itemOver($event, it)\n                        }\n                      }\n                    })\n                  ],\n                  1\n                )\n              ]\n            )\n          })\n        ],\n        2\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", [\n    _c(\"div\", { staticClass: \"separate\" }, [\n      _c(\n        \"button\",\n        {\n          staticClass: \"btn-sm\",\n          on: {\n            click: function($event) {\n              return _vm.emit(_vm.STOP_ALL)\n            }\n          }\n        },\n        [_vm._v(\"Stop All\")]\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"button\",\n        {\n          staticClass: \"btn-sm\",\n          attrs: { disabled: _vm.resting },\n          on: {\n            click: function($event) {\n              return _vm.emit(_vm.TASK, _vm.restAction)\n            },\n            \"!mouseenter\": function($event) {\n              $event.stopPropagation()\n              return _vm.itemOver($event, _vm.restAction)\n            }\n          }\n        },\n        [_vm._v(_vm._s(_vm.restAction.name.toTitleCase()))]\n      ),\n      _vm._v(\" \"),\n      !_vm.focus.locked\n        ? _c(\n            \"button\",\n            {\n              staticClass: \"btn-sm\",\n              attrs: { disabled: !_vm.focus.canUse(_vm.game) },\n              on: {\n                \"!mouseenter\": function($event) {\n                  $event.stopPropagation()\n                  return _vm.itemOver($event, _vm.focus)\n                },\n                click: function($event) {\n                  return _vm.emit(_vm.TASK, _vm.focus)\n                },\n                mousedown: function($event) {\n                  return _vm.emit(\"repeater\", _vm.focus)\n                }\n              }\n            },\n            [_vm._v(\"Focus\")]\n          )\n        : _vm._e(),\n      _vm._v(\" \"),\n      _c(\"button\", {\n        staticClass: \"btnMenu\",\n        on: {\n          click: function($event) {\n            return _vm.emit(\"showActivities\")\n          }\n        }\n      })\n    ]),\n    _vm._v(\" \"),\n    _c(\n      \"div\",\n      { staticClass: \"running\" },\n      _vm._l(_vm.runner.actives, function(v) {\n        return _c(\"div\", { key: v.id, staticClass: \"relative\" }, [\n          _c(\n            \"button\",\n            {\n              staticClass: \"stop\",\n              on: {\n                click: function($event) {\n                  return _vm.halt(v)\n                }\n              }\n            },\n            [_vm._v(\" X \")]\n          ),\n          _c(\"span\", [_vm._v(_vm._s(_vm.taskStr(v)))]),\n          v.type === \"skill\"\n            ? _c(\"span\", [_vm._v(_vm._s(_vm.levelStr(v)))])\n            : _vm._e(),\n          _vm._v(\" \"),\n          _vm.runner.canPursuit(v)\n            ? _c(\n                \"button\",\n                {\n                  class: [\n                    \"pursuit\",\n                    _vm.pursuits.includes(_vm.runner.baseTask(v))\n                      ? \"current\"\n                      : \"\"\n                  ],\n                  on: {\n                    click: function($event) {\n                      return _vm.runner.togglePursuit(v)\n                    }\n                  }\n                },\n                [_vm._v(\" F \")]\n              )\n            : _vm._e()\n        ])\n      }),\n      0\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport Game from 'game';\nimport {HALT_TASK, STOP_ALL} from '../../events';\nimport { SKILL, DUNGEON, EXPLORE, LOCALE, TYP_RUN, PURSUITS, TASK } from 'values/consts';\n\nexport default {\n\n\tprops:['runner'],\n\tcreated(){\n\t\tthis.game = Game;\n\t\tthis.STOP_ALL = STOP_ALL;\n\t\tthis.TASK = TASK;\n\t},\n\tcomputed:{\n\n\t\tfocus() { return Game.state.getData('focus'); },\n\t\trestAction(){return Game.state.restAction },\n\t\tresting() {\n\t\t\treturn this.restAction.running;\n\t\t},\n\n\t\tpursuits(){return Game.state.getData(PURSUITS)}\n\n\t},\n\tmethods:{\n\n\t\ttaskStr( a ){\n\n\t\t\treturn (a.verb || a.name.toTitleCase() ) + (a.length ? ( ' ' + Math.floor(a.percent()) + '%' ) : '');\n\n\t\t},\n\t\tlevelStr(a){\n\t\t\treturn ' (' + Math.floor( a.valueOf() ) + '/' + Math.floor(a.max.valueOf() ) +')';\n\t\t},\n\n\t\thalt(a) {\n\t\t\tthis.emit( HALT_TASK, a);\n\t\t}\n\n\t}\n\n}\n</script>\n\n<template>\n\n<div>\n\t<div class=\"separate\">\n\n\t\t<button class=\"btn-sm\" @click=\"emit(STOP_ALL)\">Stop All</button>\n\n\t\t<button class=\"btn-sm\" @click=\"emit(TASK, restAction)\" :disabled=\"resting\"\n\t\t@mouseenter.capture.stop=\"itemOver($event, restAction )\">{{ restAction.name.toTitleCase() }}</button>\n\t\t<button v-if=\"!focus.locked\" class=\"btn-sm\" @mouseenter.capture.stop=\"itemOver($event, focus )\"\n\t\t\t:disabled=\"!focus.canUse(game)\"\n      @click=\"emit(TASK,focus)\"\n\t\t\t@mousedown=\"emit('repeater', focus)\">Focus</button>\n\t\t<button class=\"btnMenu\" @click=\"emit('showActivities')\"></button>\n\t</div>\n\n\t<div class='running'>\n\n\t\t<div class=\"relative\" v-for=\"v of runner.actives\" :key=\"v.id\">\n\t\t\t<button class=\"stop\" @click=\"halt(v)\">&nbsp;X&nbsp;</button><span>{{ taskStr(v) }}</span><span v-if=\"v.type==='skill'\">{{levelStr(v)}}</span>\n\t\t\t<button v-if=\"runner.canPursuit(v)\" :class=\"['pursuit', pursuits.includes( runner.baseTask(v) ) ? 'current' : '']\"\n\t\t\t\t@click=\"runner.togglePursuit(v)\"> F </button>\n\t\t</div>\n\n\t</div>\n</div>\n\n</template>\n\n<style scoped>\n\ndiv.running {\n\tdisplay:flex;\n\tflex-flow: column nowrap;\n}\n\ndiv.running .relative {\n\tposition: relative;\n}\n\n</style>","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./running.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./running.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./running.vue?vue&type=style&index=0&id=d3356d4e&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./running.vue?vue&type=style&index=0&id=d3356d4e&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./running.vue?vue&type=template&id=d3356d4e&scoped=true&\"\nimport script from \"./running.vue?vue&type=script&lang=js&\"\nexport * from \"./running.vue?vue&type=script&lang=js&\"\nimport style0 from \"./running.vue?vue&type=style&index=0&id=d3356d4e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d3356d4e\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('d3356d4e')) {\n      api.createRecord('d3356d4e', component.options)\n    } else {\n      api.reload('d3356d4e', component.options)\n    }\n    module.hot.accept(\"./running.vue?vue&type=template&id=d3356d4e&scoped=true&\", function () {\n      api.rerender('d3356d4e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/panes/running.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vitals.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vitals.vue?vue&type=script&lang=js&\"","<script>\nimport ProgBar from 'ui/components/progbar.vue';\nimport Running from './running.vue';\n//import Mood from './items/mood.vue';\n\nimport Settings from 'modules/settings';\n\nimport Game from 'game';\nimport UIMixin from '../uiMixin';\nimport ItemBase from '../itemsBase';\n\n\n/**\n * Player vital bars.\n */\nexport default {\n\n\tprops:['state'],\n\tmixins:[ItemBase, UIMixin],\n\tcomponents:{\n\t\tprogbar:ProgBar,\n\t\t//mood:Mood,\n\t\trunning:Running\n\t},\n\tdata(){\n\n\t\tlet ops = Settings.getSubVars('vitals');\n\t\tif (!ops.hide) ops.hide = {};\n\n\t\treturn {\n\t\t\thide:ops.hide\n\t\t}\n\n\t},\n\n\tcomputed:{\n\n\t\thp(){return this.state.getData('hp');},\n\n\t\tmanaList() { return this.state.filterItems (it=> (it.hasTag('manas') || it.hasTag('Mana energies') ) && !it.locked)},\n\t\tvisMana(){return this.manaList.filter(v=>this.show(v))},\n\n\t\tstamina(){ return this.state.getData('stamina'); }\n\t}\n\n}\n</script>\n\n<template>\n\n\t<div class=\"vitals\">\n\n\t\t<running :runner=\"state.runner\" />\n\n\t\t<div class=\"config\"><button ref=\"btnHides\" class=\"btnConfig\"></button></div>\n\n\t\t<!-- anything not a table is a headache -->\n\t\t<div class=\"statbars\">\n\n\t\t<div class=\"hidable statbar\" data-key=\"stamina\" v-show=\"show(stamina)\">\n\t\t\t<span class=\"name\">stamina</span><span class=\"barspan\"><progbar class=\"stamina\" :value=\"stamina.valueOf()\" :max=\"stamina.max.value\"\n\t\t\t@mouseenter.capture.stop.native=\"itemOver($event,stamina)\"/></span></div>\n\n\t\t<div class=\"hidable statbar\" data-key=\"hp\" v-show=\"show(hp)\"><span class=\"name\">life</span><span class=\"barspan\"><progbar class=\"hp\" :value=\"hp.valueOf()\" :max=\"hp.max.value\"\n\t\t\t@mouseenter.capture.stop.native=\"itemOver($event,hp)\"/></span></div>\n\n\t\t<div class=\"hidable statbar\" v-for=\"it in visMana\" :key=\"it.key\" :data-key=\"it.id\">\n\t\t\t<span class=\"name\">{{it.name}}</span><span class=\"barspan\"><progbar :value=\"it.valueOf()\" :class=\"it.id\" :max=\"it.max.value\" :color=\"it.color\"\n\t\t\t@mouseenter.native.capture.stop=\"itemOver($event,it)\"/></span></div>\n\n\t\t<!--<tr><td>mood</td><td><mood :state=\"state\" /></td></tr>-->\n\t\t</div>\n\n\t</div>\n</template>\n\n<style scoped>\n\n    .vitals {\n        text-transform: capitalize;\n        margin: 0; padding: 0;\n        min-width: 15rem; overflow-y :auto; overflow-x: hidden;\n    }\n\n\n</style>\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vitals.vue?vue&type=style&index=0&id=e232ef86&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./vitals.vue?vue&type=style&index=0&id=e232ef86&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./vitals.vue?vue&type=template&id=e232ef86&scoped=true&\"\nimport script from \"./vitals.vue?vue&type=script&lang=js&\"\nexport * from \"./vitals.vue?vue&type=script&lang=js&\"\nimport style0 from \"./vitals.vue?vue&type=style&index=0&id=e232ef86&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e232ef86\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('e232ef86')) {\n      api.createRecord('e232ef86', component.options)\n    } else {\n      api.reload('e232ef86', component.options)\n    }\n    module.hot.accept(\"./vitals.vue?vue&type=template&id=e232ef86&scoped=true&\", function () {\n      api.rerender('e232ef86', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/panes/vitals.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"top-bar\" }, [\n    _c(\n      \"span\",\n      { staticClass: \"load-opts\" },\n      [\n        _vm.Profile.CLOUD ? _c(\"login\") : _vm._e(),\n        _vm._v(\" \"),\n        _c(\n          \"button\",\n          {\n            on: {\n              click: function($event) {\n                return _vm.dispatch(\"save\")\n              }\n            }\n          },\n          [_vm._v(\"Save\")]\n        ),\n        _vm._v(\" \"),\n        _c(\n          \"button\",\n          {\n            on: {\n              click: function($event) {\n                return _vm.dispatch(\"load\")\n              }\n            }\n          },\n          [_vm._v(\"Load\")]\n        ),\n        _vm._v(\" \"),\n        _c(\"div\", { staticClass: \"text-button\" }, [\n          _c(\n            \"a\",\n            {\n              attrs: { href: \"\", type: \"text/json\" },\n              on: {\n                click: function($event) {\n                  if ($event.target !== $event.currentTarget) {\n                    return null\n                  }\n                  return _vm.dispatch(\"save-file\", $event)\n                }\n              }\n            },\n            [_vm._v(\"Get Save\")]\n          )\n        ]),\n        _vm._v(\" \"),\n        _vm.hasHall\n          ? _c(\"div\", { staticClass: \"text-button\" }, [\n              _c(\n                \"a\",\n                {\n                  attrs: { href: \"\", type: \"text/json\" },\n                  on: {\n                    click: function($event) {\n                      if ($event.target !== $event.currentTarget) {\n                        return null\n                      }\n                      return _vm.dispatch(\"hall-file\", $event)\n                    }\n                  }\n                },\n                [_vm._v(\"Hall Save\")]\n              )\n            ])\n          : _vm._e(),\n        _vm._v(\" \"),\n        _c(\n          \"button\",\n          {\n            attrs: { id: \"drop-file\", name: \"[Load Save]\" },\n            on: {\n              click: function($event) {\n                return _vm.$refs.fileInput.click()\n              },\n              drop: _vm.fileDrop,\n              dragover: _vm.fileDrag,\n              \"!dragleave\": function($event) {\n                $event.stopPropagation()\n                return _vm.dragOut.apply(null, arguments)\n              }\n            }\n          },\n          [_vm._v(\"[Load Save]\")]\n        ),\n        _vm._v(\" \"),\n        _c(\"input\", {\n          ref: \"fileInput\",\n          attrs: { type: \"file\", accept: \"text/json text/*\" },\n          on: { change: _vm.fileSelect }\n        }),\n        _vm._v(\" \"),\n        _c(\n          \"confirm\",\n          {\n            on: {\n              confirm: function($event) {\n                return _vm.dispatch(\"reset\")\n              }\n            }\n          },\n          [_vm._v(\"Wipe Wizard\")]\n        )\n      ],\n      1\n    ),\n    _vm._v(\" \"),\n    _c(\"span\", { staticClass: \"items\" }, [_vm._t(\"center\")], 2),\n    _vm._v(\" \"),\n    _c(\"span\", { staticClass: \"link-bar\" }, [\n      _c(\n        \"a\",\n        { attrs: { href: \"https://discord.gg/bCABC96\", target: \"_blank\" } },\n        [_vm._v(\"Discord\")]\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"a\",\n        {\n          attrs: {\n            href: \"http://wiki.lerpinglemur.com/dhrune\",\n            target: \"_blank\"\n          }\n        },\n        [_vm._v(\"Wiki\")]\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"a\",\n        {\n          attrs: { href: \"https://www.reddit.com/r/wizrobe/\", target: \"_blank\" }\n        },\n        [_vm._v(\"Reddit\")]\n      ),\n      _vm._v(\" \"),\n      _c(\"span\", { staticClass: \"vers\" }, [\n        _vm._v(\"Version: \" + _vm._s(_vm.VERSION))\n      ]),\n      _vm._v(\" \"),\n      _c(\n        \"button\",\n        {\n          staticClass: \"text-button\",\n          on: {\n            click: function($event) {\n              return _vm.$emit(\"open-settings\")\n            }\n          }\n        },\n        [_vm._v(\"⚙\")]\n      )\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.active.loggedIn\n    ? _c(\"span\", [\n        _c(\n          \"button\",\n          {\n            attrs: { type: \"button\" },\n            on: {\n              click: function($event) {\n                return _vm.dispatch(\"logout\")\n              }\n            }\n          },\n          [_vm._v(\"Logout\")]\n        )\n      ])\n    : _c(\"span\", [\n        _c(\n          \"button\",\n          {\n            attrs: { type: \"button\" },\n            on: {\n              click: function($event) {\n                return _vm.dispatch(\"show-login\")\n              }\n            }\n          },\n          [_vm._v(\"Login\")]\n        )\n      ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport Profile from 'modules/profile';\n\nexport default {\n\n\tdata(){\n\t\treturn {\n\t\t\tactive:Profile.active,\n\t\t};\n\t}\n\n}\n</script>\n\n<template>\n<span v-if=\"active.loggedIn\">\n\t<button type=\"button\" @click=\"dispatch('logout')\">Logout</button>\n</span>\n<span v-else><button type=\"button\" @click=\"dispatch('show-login')\">Login</button></span>\n</template>","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./loginStatus.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./loginStatus.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./loginStatus.vue?vue&type=template&id=546ad5d8&\"\nimport script from \"./loginStatus.vue?vue&type=script&lang=js&\"\nexport * from \"./loginStatus.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('546ad5d8')) {\n      api.createRecord('546ad5d8', component.options)\n    } else {\n      api.reload('546ad5d8', component.options)\n    }\n    module.hot.accept(\"./loginStatus.vue?vue&type=template&id=546ad5d8&\", function () {\n      api.rerender('546ad5d8', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/components/loginStatus.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-bar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-bar.vue?vue&type=script&lang=js&\"","<script>\nimport Profile from 'modules/profile';\nimport Game from '../game';\n\nimport LoginStatus from './components/loginStatus.vue';\n\nexport default {\n\n\tcomputed:{\n\t\thasHall(){return Profile.hasHall() },\n\t\tVERSION(){return __VERSION; }\n\n\t},\n\tcreated(){\n\t\tthis.Profile = Profile;\n\t},\n\tcomponents:{\n\t\tlogin:LoginStatus\n\t},\n\tmethods:{\n\n\t\tfileSelect(e) {\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tthis.dispatch( 'load-file', e.target.files );\n\n\t\t},\n\n\t\tfileDrop(e){\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\te.target.classList.remove('hilite');\n\n\t\t\tconst dt = e.dataTransfer;\n\t\t\tthis.dispatch('load-file', dt.files);\n\n\t\t},\n\t\tfileDrag(e){\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\te.currentTarget.classList.add('hilite');\n\t\t},\n\t\tdragOut(e){\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\te.currentTarget.classList.remove('hilite');\n\t\t},\n\n\t}\n\n}\n</script>\n\n<template>\n\n\t<div class=\"top-bar\">\n\n\t\t<span class=\"load-opts\" >\n\t\t\t<login v-if=\"Profile.CLOUD\" />\n\t\t\t<button @click=\"dispatch('save')\">Save</button>\n\t\t\t<button @click=\"dispatch('load')\">Load</button>\n\n\t\t\t<div class=\"text-button\"><a href=\"\"\n\t\t\t\t@click.self=\"dispatch('save-file',$event )\" type=\"text/json\">Get Save</a></div>\n\n\t\t\t<div v-if=\"hasHall\" class=\"text-button\"><a href=\"\"\n\t\t\t\t@click.self=\"dispatch('hall-file',$event )\" type=\"text/json\">Hall Save</a></div>\n\n\t\t\t<!--<input type=\"file\" name=\"[File]\" accept=\"text/json\" @change=\"fileDrop\">-->\n\t\t\t<button id=\"drop-file\" @click=\"$refs.fileInput.click()\" @drop=\"fileDrop\" @dragover=\"fileDrag\" @dragleave.capture.stop=\"dragOut\" name=\"[Load Save]\">[Load Save]</button>\n\t\t\t<input ref=\"fileInput\" type=\"file\" @change=\"fileSelect\" accept=\"text/json text/*\">\n\n\t\t\t<confirm @confirm=\"dispatch('reset')\">Wipe Wizard</confirm>\n\t\t</span>\n\n\t\t<span class=\"items\"><slot name=\"center\"></slot></span>\n\n\t\t<span class=\"link-bar\">\n\t\t\t<a href=\"https://discord.gg/bCABC96\" target=\"_blank\">Discord</a>\n\t\t\t<a href=\"http://wiki.lerpinglemur.com/dhrune\" target=\"_blank\">Wiki</a>\n\t\t\t<a href=\"https://www.reddit.com/r/wizrobe/\" target=\"_blank\">Reddit</a>\n\t\t\t<span class=\"vers\">Version: {{ VERSION }}</span>\n\t\t\t<button class=\"text-button\" @click=\"$emit('open-settings')\">&#9881;</button>\n\t\t</span>\n\n\t</div>\n\n\n</template>\n\n<style scoped>\n\nspan.vers {\n\tfont-size: 0.9em;\n\talign-self: center;\n\tmargin-bottom: var(--sm-gap);\n}\n\ndiv.text-button a {\n\ttext-decoration: none;\n}\n\ninput[type=\"file\"] {\n\tdisplay:none;\n}\n\n#drop-file {\n\tborder: var(--tiny-gap) dashed var(--quiet-text-color);\n}\n\n.load-opts {\n\tdisplay:flex;\n}\n\n.load-opts button {\n\theight:100%;\n}\n.load-opts .text-button {\n\tmax-height:var(--lg-gap);\n}\n\nspan.load-message {\n\tpadding: var(--md-gap) var(--md-gap) var(--tiny-gap);\n}\n\nspan.items {\n\ttext-transform: capitalize;\n}\n</style>","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-bar.vue?vue&type=style&index=0&id=5e8f13b9&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./top-bar.vue?vue&type=style&index=0&id=5e8f13b9&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./top-bar.vue?vue&type=template&id=5e8f13b9&scoped=true&\"\nimport script from \"./top-bar.vue?vue&type=script&lang=js&\"\nexport * from \"./top-bar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./top-bar.vue?vue&type=style&index=0&id=5e8f13b9&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5e8f13b9\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5e8f13b9')) {\n      api.createRecord('5e8f13b9', component.options)\n    } else {\n      api.reload('5e8f13b9', component.options)\n    }\n    module.hot.accept(\"./top-bar.vue?vue&type=template&id=5e8f13b9&scoped=true&\", function () {\n      api.rerender('5e8f13b9', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/top-bar.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.item\n    ? _c(\"div\", { staticClass: \"popup\" }, [\n        typeof _vm.item === \"string\"\n          ? _c(\"div\", [\n              _c(\"div\", [_vm._v(_vm._s(_vm.item))]),\n              _vm._v(\" \"),\n              _c(\"div\", [_vm._v(_vm._s(_vm.msg))])\n            ])\n          : _c(\"div\", [\n              _c(\"div\", { staticClass: \"log-title\" }, [\n                _vm._v(_vm._s(_vm.item.name.toString().toTitleCase()))\n              ]),\n              _vm._v(\" \"),\n              _c(\"div\", [_vm._v(_vm._s(_vm.item.desc))]),\n              _vm._v(\" \"),\n              _c(\"div\", [_vm._v(_vm._s(_vm.msg))]),\n              _vm._v(\" \"),\n              _c(\"div\", { staticClass: \"skip\" }, [\n                _c(\"label\", { attrs: { for: _vm.elmId(\"nowarn\") } }, [\n                  _vm._v(\"Skip Warning\")\n                ]),\n                _vm._v(\" \"),\n                _c(\"input\", {\n                  directives: [\n                    {\n                      name: \"model\",\n                      rawName: \"v-model\",\n                      value: _vm.nowarn,\n                      expression: \"nowarn\"\n                    }\n                  ],\n                  attrs: { type: \"checkbox\", id: _vm.elmId(\"nowarn\") },\n                  domProps: {\n                    checked: Array.isArray(_vm.nowarn)\n                      ? _vm._i(_vm.nowarn, null) > -1\n                      : _vm.nowarn\n                  },\n                  on: {\n                    change: function($event) {\n                      var $$a = _vm.nowarn,\n                        $$el = $event.target,\n                        $$c = $$el.checked ? true : false\n                      if (Array.isArray($$a)) {\n                        var $$v = null,\n                          $$i = _vm._i($$a, $$v)\n                        if ($$el.checked) {\n                          $$i < 0 && (_vm.nowarn = $$a.concat([$$v]))\n                        } else {\n                          $$i > -1 &&\n                            (_vm.nowarn = $$a\n                              .slice(0, $$i)\n                              .concat($$a.slice($$i + 1)))\n                        }\n                      } else {\n                        _vm.nowarn = $$c\n                      }\n                    }\n                  }\n                })\n              ])\n            ]),\n        _vm._v(\" \"),\n        _c(\"div\", [\n          _c(\"button\", { on: { click: _vm.confirm } }, [_vm._v(\"Confirm\")]),\n          _vm._v(\" \"),\n          _c(\"button\", { on: { click: _vm.cancel } }, [_vm._v(\"Cancel\")])\n        ])\n      ])\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport {centerX} from './popups.js';\n\nconst WARN_MSG = 'This action is not reversible. Continue?';\n\nexport default {\n\n\tdata(){\n\t\treturn {\n\t\t\titem:null,\n\t\t\tcb:null,\n\t\t\tnowarn:false\n\t\t}\n\t},\n\tupdated() {\n\t\tif ( this.item ) {centerX( this.$el );}\n\t},\n\tcomputed:{\n\t\tmsg(){\n\t\t\tif ( typeof this.item === 'string') return WARN_MSG;\n\t\t\treturn this.item.warnMsg || WARN_MSG;\n\t\t}\n\t},\n\tmethods:{\n\t\tshow( it, cb=null ){\n\t\t\tthis.item = it;\n\t\t\tthis.cb = cb;\n\t\t\tthis.nowarn=false;\n\t\t},\n\t\tconfirm(){\n\n\t\t\tlet it = this.item;\n\t\t\tlet f = this.cb;\n\t\t\tlet nowarn = this.nowarn;\n\n\t\t\tthis.item = null;\n\t\t\tthis.cb = null;\n\t\t\tthis.nowarn=false;\n\n\t\t\tif ( it ) this.$emit('confirmed', it, nowarn );\n\t\t\tif (f ) f();\n\n\t\t},\n\t\tcancel(){\n\t\t\tthis.cb = null;\n\t\t\tthis.nowarn=false;\n\t\t\tthis.item = null;\n\t\t}\n\n\t}\n\n}\n</script>\n\n<template>\n\t<div class=\"popup\" v-if=\"item\">\n\n\t\t<div v-if=\"typeof item ==='string'\">\n\t\t\t<div>{{item }}</div>\n\t\t\t<div>{{ msg }}</div>\n\t\t</div>\n\t\t<div v-else>\n\t\t<div class=\"log-title\">{{ item.name.toString().toTitleCase() }}</div>\n\t\t<div>{{ item.desc }}</div>\n\t\t<div>{{ msg }}</div>\n\t\t<div class=\"skip\"><label :for=\"elmId('nowarn')\">Skip Warning</label>\n\t\t<input type=\"checkbox\" v-model=\"nowarn\" :id=\"elmId('nowarn')\"></div>\n\t\t</div>\n\n\t\t<div>\n\t\t<button @click=\"confirm\">Confirm</button>\n\t\t<button @click=\"cancel\">Cancel</button>\n\t\t</div>\n\n\t</div>\n</template>\n\n<style scoped>\n\ndiv.skip {\n\tmargin-top:1em;\n\tfont-size: 0.9em;\n}\n\ndiv.popup div {\n\tmargin:var(--sm-gap) 0;\n}\n\n</style>","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./warn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./warn.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./warn.vue?vue&type=style&index=0&id=1f1201ec&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./warn.vue?vue&type=style&index=0&id=1f1201ec&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./warn.vue?vue&type=template&id=1f1201ec&scoped=true&\"\nimport script from \"./warn.vue?vue&type=script&lang=js&\"\nexport * from \"./warn.vue?vue&type=script&lang=js&\"\nimport style0 from \"./warn.vue?vue&type=style&index=0&id=1f1201ec&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f1201ec\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('1f1201ec')) {\n      api.createRecord('1f1201ec', component.options)\n    } else {\n      api.reload('1f1201ec', component.options)\n    }\n    module.hot.accept(\"./warn.vue?vue&type=template&id=1f1201ec&scoped=true&\", function () {\n      api.rerender('1f1201ec', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/popups/warn.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { class: [\"settings\", \"popup\"] }, [\n    _c(\"div\", [\n      _c(\"label\", { attrs: { for: _vm.elmId(\"dark-mode\") } }, [\n        _vm._v(\"Dark Mode\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"input\", {\n        directives: [\n          {\n            name: \"model\",\n            rawName: \"v-model\",\n            value: _vm.darkMode,\n            expression: \"darkMode\"\n          }\n        ],\n        attrs: { type: \"checkbox\", id: _vm.elmId(\"dark-mode\") },\n        domProps: {\n          checked: Array.isArray(_vm.darkMode)\n            ? _vm._i(_vm.darkMode, null) > -1\n            : _vm.darkMode\n        },\n        on: {\n          change: function($event) {\n            var $$a = _vm.darkMode,\n              $$el = $event.target,\n              $$c = $$el.checked ? true : false\n            if (Array.isArray($$a)) {\n              var $$v = null,\n                $$i = _vm._i($$a, $$v)\n              if ($$el.checked) {\n                $$i < 0 && (_vm.darkMode = $$a.concat([$$v]))\n              } else {\n                $$i > -1 &&\n                  (_vm.darkMode = $$a.slice(0, $$i).concat($$a.slice($$i + 1)))\n              }\n            } else {\n              _vm.darkMode = $$c\n            }\n          }\n        }\n      })\n    ]),\n    _vm._v(\" \"),\n    _c(\"div\", [\n      _c(\"label\", { attrs: { for: _vm.elmId(\"compact-mode\") } }, [\n        _vm._v(\"Compact Mode\")\n      ]),\n      _vm._v(\" \"),\n      _c(\"input\", {\n        directives: [\n          {\n            name: \"model\",\n            rawName: \"v-model\",\n            value: _vm.compactMode,\n            expression: \"compactMode\"\n          }\n        ],\n        attrs: { type: \"checkbox\", id: _vm.elmId(\"compact-mode\") },\n        domProps: {\n          checked: Array.isArray(_vm.compactMode)\n            ? _vm._i(_vm.compactMode, null) > -1\n            : _vm.compactMode\n        },\n        on: {\n          change: function($event) {\n            var $$a = _vm.compactMode,\n              $$el = $event.target,\n              $$c = $$el.checked ? true : false\n            if (Array.isArray($$a)) {\n              var $$v = null,\n                $$i = _vm._i($$a, $$v)\n              if ($$el.checked) {\n                $$i < 0 && (_vm.compactMode = $$a.concat([$$v]))\n              } else {\n                $$i > -1 &&\n                  (_vm.compactMode = $$a\n                    .slice(0, $$i)\n                    .concat($$a.slice($$i + 1)))\n              }\n            } else {\n              _vm.compactMode = $$c\n            }\n          }\n        }\n      })\n    ]),\n    _vm._v(\" \"),\n    _c(\"div\", [\n      _c(\n        \"label\",\n        {\n          attrs: {\n            for: _vm.elmId(\"auto-save\"),\n            title: \"Periodically save current game.\"\n          }\n        },\n        [_vm._v(\"Auto-Save\")]\n      ),\n      _vm._v(\" \"),\n      _c(\"input\", {\n        directives: [\n          {\n            name: \"model\",\n            rawName: \"v-model\",\n            value: _vm.autosave,\n            expression: \"autosave\"\n          }\n        ],\n        attrs: { type: \"checkbox\", id: _vm.elmId(\"auto-save\") },\n        domProps: {\n          checked: Array.isArray(_vm.autosave)\n            ? _vm._i(_vm.autosave, null) > -1\n            : _vm.autosave\n        },\n        on: {\n          change: function($event) {\n            var $$a = _vm.autosave,\n              $$el = $event.target,\n              $$c = $$el.checked ? true : false\n            if (Array.isArray($$a)) {\n              var $$v = null,\n                $$i = _vm._i($$a, $$v)\n              if ($$el.checked) {\n                $$i < 0 && (_vm.autosave = $$a.concat([$$v]))\n              } else {\n                $$i > -1 &&\n                  (_vm.autosave = $$a.slice(0, $$i).concat($$a.slice($$i + 1)))\n              }\n            } else {\n              _vm.autosave = $$c\n            }\n          }\n        }\n      }),\n      _vm._v(\" \"),\n      _c(\"h6\", [\n        _vm._v(\n          \"Periodically save game to storage. Game is saved to Browser storage by default. Only saved to Remote storage if logged in and server is available.\"\n        )\n      ])\n    ]),\n    _vm._v(\" \"),\n    _c(\"div\", [\n      _c(\n        \"label\",\n        {\n          attrs: {\n            for: _vm.elmId(\"remote-first\"),\n            title:\n              \"Attempt to load saves from Remote Storage before Local Storage.\"\n          }\n        },\n        [_vm._v(\"Try Remote Load First\")]\n      ),\n      _vm._v(\" \"),\n      _c(\"input\", {\n        directives: [\n          {\n            name: \"model\",\n            rawName: \"v-model\",\n            value: _vm.remoteFirst,\n            expression: \"remoteFirst\"\n          }\n        ],\n        attrs: { type: \"checkbox\", id: _vm.elmId(\"remote-first\") },\n        domProps: {\n          checked: Array.isArray(_vm.remoteFirst)\n            ? _vm._i(_vm.remoteFirst, null) > -1\n            : _vm.remoteFirst\n        },\n        on: {\n          change: function($event) {\n            var $$a = _vm.remoteFirst,\n              $$el = $event.target,\n              $$c = $$el.checked ? true : false\n            if (Array.isArray($$a)) {\n              var $$v = null,\n                $$i = _vm._i($$a, $$v)\n              if ($$el.checked) {\n                $$i < 0 && (_vm.remoteFirst = $$a.concat([$$v]))\n              } else {\n                $$i > -1 &&\n                  (_vm.remoteFirst = $$a\n                    .slice(0, $$i)\n                    .concat($$a.slice($$i + 1)))\n              }\n            } else {\n              _vm.remoteFirst = $$c\n            }\n          }\n        }\n      }),\n      _vm._v(\" \"),\n      _c(\"h6\", [\n        _vm._v(\n          \"Attempt to load game from Remote host before loading from browser Storage.\"\n        )\n      ])\n    ]),\n    _vm._v(\" \"),\n    _c(\"button\", { staticClass: \"close\", on: { click: _vm.close } }, [\n      _vm._v(\"Close\")\n    ])\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport Profile from 'modules/profile';\nimport Settings from 'modules/settings';\n\nimport { centerX } from './popups';\n\n/**\n * @emits save-settings\n * @emits setting\n */\nexport default {\n\n\tdata(){\n\n\t\tlet vars = Settings.vars;\n\n\t\treturn {\n\t\t\tsCompactMode:vars.compactMode,\n\t\t\tsDarkMode:vars.darkMode,\n\t\t\tsaves:Object.assign( {}, Settings.getSubVars('saves') )\n\t\t};\n\n\n\n\t},\n\tupdated() {\n\t\tcenterX(this.$el);\n\t},\n\tcreated() {\n\n\t\tfor( let p in Settings.vars ) {\n\t\t\tthis.dispatch('setting', p, Settings.vars[p] );\n\t\t}\n\n\t},\n\tmethods:{\n\n\t\tclear(){\n\n\t\t},\n\n\t\tclose() {\n\t\t\tthis.dispatch('save-settings');\n\t\t\tthis.$emit('close-settings');\n\t\t}\n\n\t},\n\tcomputed:{\n\n\t\tcompactMode: {\n\t\t\tget() { return this.sCompactMode; },\n\t\t\tset(v){\n\t\t\t\tSettings.set('compactMode', v);\n\t\t\t\tthis.sCompactMode = v;\n\t\t\t\tthis.dispatch('setting', 'compactMode', v);\n\t\t\t}\n\n\t\t},\n\t\tremoteFirst:{\n\t\t\tget(){\n\t\t\t\treturn this.saves.remoteFirst;\n\t\t\t},\n\t\t\tset(v){\n\t\t\t\tthis.saves.remoteFirst = Settings.setSubVar( 'saves', 'remoteFirst', v );\n\t\t\t\tthis.dispatch('setting', 'remoteFirst', v );\n\t\t\t}\n\t\t},\n\t\tautosave:{\n\t\t\tget(){\n\t\t\t\treturn this.saves.autosave;\n\t\t\t},\n\t\t\tset(v){\n\t\t\t\tthis.saves.autoSave = Settings.setSubVar( 'saves', 'autosave', v );\n\t\t\t\tthis.dispatch('setting', 'autosave', v );\n\t\t\t}\n\t\t},\n\t\tdarkMode:{\n\t\t\tget(){\n\t\t\t\treturn this.sDarkMode;\n\t\t\t},\n\t\t\tset(v){\n\t\t\t\tSettings.set( 'darkMode', v);\n\t\t\t\tthis.sDarkMode = v;\n\t\t\t\tthis.dispatch('setting', 'darkMode', v );\n\t\t\t}\n\t\t}\n\n\t}\n\n}\n</script>\n\n<template>\n\n<div :class=\"['settings', 'popup']\">\n\n\n\n\t<div>\n\t<label :for=\"elmId('dark-mode')\">Dark Mode</label>\n\t<input type=\"checkbox\" :id=\"elmId('dark-mode')\" v-model=\"darkMode\">\n\t</div>\n\n\t<div>\n\t<label :for=\"elmId('compact-mode')\">Compact Mode</label>\n\t<input type=\"checkbox\" :id=\"elmId('compact-mode')\" v-model=\"compactMode\">\n\t</div>\n\n\t<div>\n\t<label :for=\"elmId('auto-save')\" title=\"Periodically save current game.\">Auto-Save</label>\n\t<input type=\"checkbox\" :id=\"elmId('auto-save')\" v-model=\"autosave\">\n\t<h6>Periodically save game to storage. Game is saved to Browser storage by default. Only saved to Remote storage if logged in and server is available.</h6>\n\t</div>\n\n\t<div>\n\t<label :for=\"elmId('remote-first')\" title=\"Attempt to load saves from Remote Storage before Local Storage.\">Try Remote Load First</label>\n\t<input type=\"checkbox\" :id=\"elmId('remote-first')\" v-model=\"remoteFirst\">\n\t<h6>Attempt to load game from Remote host before loading from browser Storage.</h6>\n\t</div>\n\n\t<!--<div><button @click=\"clear\">Clear Settings</button></div>-->\n\t<!--<div class=\"nowarn\">\n\n\t\t<div v-for=\"it in nowarns\" :key=\"it\"><span>{{it}}</span><button @click=\"clearWarn\">Delete</button></div>\n\n\t</div>-->\n\n\t<button class=\"close\" @click=\"close\">Close</button>\n\n</div>\n\n</template>\n\n<style scoped>\n\n.settings {\n\theight:auto;\n\tmin-height:5.5rem;\n\tmin-width:30%;\n\tmax-width:60%;\n\tposition: absolute;\n\tz-index:10000;\n\ttop:3rem;\n\tbackground:inherit;\n\tborder: var(--popup-border);\n\tborder-radius: 0.20rem;\n\tpadding:var(--md-gap);\n}\n\nbutton.close {\n\tposition:absolute;\n\tbottom:var(--md-gap);\n\tright:var(--md-gap);\n}\n\n</style>","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=2acc7e09&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=2acc7e09&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./settings.vue?vue&type=template&id=2acc7e09&scoped=true&\"\nimport script from \"./settings.vue?vue&type=script&lang=js&\"\nexport * from \"./settings.vue?vue&type=script&lang=js&\"\nimport style0 from \"./settings.vue?vue&type=style&index=0&id=2acc7e09&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2acc7e09\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('2acc7e09')) {\n      api.createRecord('2acc7e09', component.options)\n    } else {\n      api.reload('2acc7e09', component.options)\n    }\n    module.hot.accept(\"./settings.vue?vue&type=template&id=2acc7e09&scoped=true&\", function () {\n      api.rerender('2acc7e09', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/popups/settings.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"log-view\" }, [\n    _c(\"div\", { staticClass: \"top-span\" }, [\n      _c(\n        \"button\",\n        {\n          staticClass: \"inline btn-sm\",\n          attrs: { type: \"button\" },\n          on: { click: _vm.clearLog }\n        },\n        [_vm._v(\"Clear\")]\n      ),\n      _vm._v(\" \"),\n      _c(\n        \"span\",\n        { staticClass: \"checks\" },\n        _vm._l(_vm.LogTypes, function(p, k) {\n          return _c(\"span\", { key: k }, [\n            _c(\"input\", {\n              attrs: { type: \"checkbox\", id: _vm.elmId(k) },\n              domProps: { value: p, checked: _vm.filter & p },\n              on: {\n                change: function($event) {\n                  return _vm.changed($event.target)\n                }\n              }\n            }),\n            _vm._v(\" \"),\n            _c(\"label\", { attrs: { for: _vm.elmId(k) } }, [\n              _vm._v(_vm._s(k.toString().toTitleCase()))\n            ])\n          ])\n        }),\n        0\n      ),\n      _vm._v(\" \"),\n      _vm.showOptions ? _c(\"div\", { staticClass: \"options\" }) : _vm._e()\n    ]),\n    _vm._v(\" \"),\n    _c(\n      \"div\",\n      { staticClass: \"outlog\" },\n      _vm._l(_vm.visItems, function(it, i) {\n        return _c(\"div\", { key: i, staticClass: \"log-item\" }, [\n          _c(\"div\", [\n            it.title\n              ? _c(\"span\", { staticClass: \"log-title item-name\" }, [\n                  _vm._v(_vm._s(it.title))\n                ])\n              : _vm._e()\n          ]),\n          _vm._v(\" \"),\n          _c(\"span\", { staticClass: \"log-text\" }, [_vm._v(_vm._s(it.text))]),\n          _vm._v(\" \"),\n          it.count > 1\n            ? _c(\"span\", { staticClass: \"num-align\" }, [\n                _vm._v(\"(x\" + _vm._s(it.count) + \")\")\n              ])\n            : _vm._e()\n        ])\n      }),\n      0\n    )\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nimport { LogTypes} from '../events';\nimport Game from '../game';\n\n/**\n * Displays event output to user.\n */\nexport default {\n\n\tdata() {\n\n\t\tvar filter = 0;\n\t\tfor( let p in LogTypes) {\n\t\t\tfilter |= LogTypes[p];\n\t\t}\n\n\t\treturn {\n\t\t\tlog:Game.log,\n\t\t\tLogTypes:LogTypes,\n\t\t\tfilter:filter,\n\t\t\tshowOptions:false\n\n\t\t\t/**\n\t\t\t * @property {string[]} exclude - types to exclude.\n\t\t\t */\n\t\t}\n\n\t},\n\tmethods:{\n\n\t\tchanged( box ) {\n\n\t\t\tif ( box.checked ) {\n\t\t\t\tthis.filter = this.filter|box.value;\n\t\t\t} else {\n\t\t\t\tthis.filter = (~box.value)&this.filter;\n\n\t\t\t}\n\n\t\t},\n\n\t\tdoOptions() {\n\t\t\tthis.showOptions = !this.showOptions;\n\t\t},\n\n\t\tclearLog(){ this.log.clear(); }\n\n\t},\n\tcomputed:{\n\n\t\tvisItems(){\n\n\t\t\tlet all = this.log.items;\n\n\t\t\tlet a = [];\n\n\t\t\tfor( let i = all.length-1; i>=0; i-- ) {\n\n\t\t\t\tvar it = all[i];\n\t\t\t\tif ( !it.type || (this.filter&it.type)>0 ) a.push(it);\n\t\t\t}\n\t\t\treturn a;\n\n\t\t}\n\n\t}\n\n}\n</script>\n\n\n<template>\n\n\t<div class=\"log-view\">\n\n\t\t\t<div class=\"top-span\">\n\t\t\t\t<button type=\"button\" class=\"inline btn-sm\" @click=\"clearLog\">Clear</button>\n\t\t\t\t<!--<button class=\"text-button\" @click=\"doOptions\">&#9881;</button>-->\n\t\t\t\t<span class=\"checks\">\n\n\t\t\t\t<span v-for=\"(p,k) in LogTypes\" :key=\"k\">\n\t\t\t\t\t<input type=\"checkbox\" :value=\"p\" :id=\"elmId(k)\" :checked=\"filter&p\" @change=\"changed( $event.target )\" >\n\t\t\t\t\t<label :for=\"elmId(k)\">{{ k.toString().toTitleCase() }}</label>\n\t\t\t\t</span>\n\t\t\t\t</span>\n\n\t\t\t\t<div v-if=\"showOptions\" class=\"options\">\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\n\t\t\t<div class=\"outlog\">\n\t\t\t<div class=\"log-item\" v-for=\"(it,i) in visItems\" :key=\"i\">\n\n\t\t\t\t<div>\n\t\t\t\t\t<span v-if=\"it.title\" class=\"log-title item-name\">{{it.title}}</span>\n\t\t\t\t</div>\n\t\t\t\t<span class=\"log-text\">{{ it.text }}</span>\n\t\t\t\t<span class=\"num-align\" v-if=\"it.count>1\">(x{{it.count}})</span>\n\n\t\t\t</div>\n\t\t\t</div>\n\n\t</div>\n\n</template>\n\n<style scoped>\n\n\n    div.log-view {\n\t\tborder-left:1px solid var(--very-quiet-text-color);\n\t\tdisplay:flex;\n\t\tflex-flow: column nowrap;\n\t\tmargin-left: var(--md-gap);\n\t\tflex-basis:20%;\n\t\tmax-width: 14em;\n\t\tmax-height: inherit;\n        min-width: 8em;\n        margin: 0;\n\t}\n\n    div.log-view div.top-span {\n\t\tmax-height: unset;\n\t\tborder-bottom: 1px solid var(--separator-color);\n\t\tdisplay:flex;\n\t\tflex-flow: row nowrap;\n\t\tmargin: var(--tiny-gap) 0;\n\t\tpadding-bottom: var(--tiny-gap);\n\t}\n\n    div.log-view div.top-span .checks {\n        display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr;\n        height: 4em; align-items: center;\n\t\tfont-size: 0.8em;\n\t\tdisplay:flex;\n\t\tflex-flow: row wrap;\n\t\talign-items: flex-start;\n    }\n    div.log-view div.top-span .checks span { flex-basis: 50%; overflow: hidden; white-space: nowrap; }\n\n\tdiv.log-view .outlog {\n\t\tdisplay:flex;\n        overflow-y: auto; flex-direction: column;\n        max-height: unset; flex: 1; font-size: var(--compact-small-font);\n\t}\n\n</style>\n","import mod from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./outlog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./outlog.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./outlog.vue?vue&type=style&index=0&id=c9d4ddf0&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./outlog.vue?vue&type=style&index=0&id=c9d4ddf0&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./outlog.vue?vue&type=template&id=c9d4ddf0&scoped=true&\"\nimport script from \"./outlog.vue?vue&type=script&lang=js&\"\nexport * from \"./outlog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./outlog.vue?vue&type=style&index=0&id=c9d4ddf0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c9d4ddf0\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('c9d4ddf0')) {\n      api.createRecord('c9d4ddf0', component.options)\n    } else {\n      api.reload('c9d4ddf0', component.options)\n    }\n    module.hot.accept(\"./outlog.vue?vue&type=template&id=c9d4ddf0&scoped=true&\", function () {\n      api.rerender('c9d4ddf0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/outlog.vue\"\nexport default component.exports","import Resource from \"../items/resource\";\n\nconst ALL = 'all';\nconst ALL_ALT = '*';\n\n/**\n * Current commands:\n * (Items refer to any Data items in game: Upgrades, furniture,actions, etc.)\n * addmax, max - add stat max\n * get [item|amount] [item|amount] - get quantity of item.\n * add - same as get\n * addall [amount] - add quantity to all items.\n * getall [amount] - same as addall\n * fill [item] - fill item.\n * fillall - fill all resources.\n * emptyall - remove all count of item.\n * emptyid - remove all of one item type.\n * removeall [amount] - remove quantity from one resource.\n * remove [item] [amount] - remove quantity of item.\n * lock [item] - apply lock to item.\n * unlock [item] - unlock item.\n * unlockall - unlock all items\n *\n *\n */\nexport default class Debug {\n\n\t/**\n\t * @property {GData[]} resources\n\t */\n\tget resources(){\n\t\treturn this.game.state.resources;\n\t}\n\n\tget state() {return this.game.state;}\n\tget items(){return this.game.state.items}\n\n\tconstructor( game ){\n\n\t\tthis.game = window.game = game;\n\n\t\twindow.debug = this;\n\n\t}\n\n\tmax(str, amt) {this.addmax(str,amt)}\n\n\taddmax( str, amt ){\n\n\t\tif ( str === ALL || str === ALL_ALT ) {\n\t\t\tfor( let p in this.items ) {\n\t\t\t\tthis.addmax(p, amt);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tthis.unlock(str);\n\t\tthis.state.addMax( str, amt );\n\n\t}\n\n\tids(type) {\n\n\t\tif ( type ) {\n\n\t\t\tvar list = this.state[type];\n\t\t\tif ( !list) return 'no such list';\n\t\t\treturn list.map(v=>v.id).join(', ');\n\n\t\t} else {\n\n\t\t\tlet a = [];\n\t\t\tfor( let p in this.items ) a.push(p);\n\t\t\treturn a.join(', ');\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Apply function to object with id.\n\t * @param {string} id\n\t * @param {GData=>*} f\n\t */\n\tapply( id, f ){\n\n\t\tif ( id === ALL || id === ALL_ALT ) {\n\n\t\t\tfor( let p in this.items ) {\n\t\t\t\tf( this.items[p] );\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tlet data = this.state.getData(id);\n\t\t\tif ( data ) {\n\n\t\t\t\tf( data );\n\t\t\t\treturn true;\n\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\temptyall(){\n\t\tfor( let p in this.items) {\n\t\t\tlet it = this.items[p];\n\t\t\tif ( it && (typeof it.amount === 'function') ) {\n\t\t\t\tit.amount( -it.value );\n\t\t\t}\n\t\t}\n\t}\n\n\tempty( id ) {\n\t\tthis.apply(id, it=>{\n\t\t\tif ( typeof it.amount ==='function' ) it.amount( -it.value );\n\t\t});\n\t}\n\n\tremoveall(){\n\t\tfor( let p in this.items) {\n\t\t\tlet it = this.items[p];\n\t\t\tif ( it && it instanceof Resource ) {\n\t\t\t\tthis.game.remove(it,Number(it.value));\n\t\t\t}\n\t\t}\n\t}\n\n\tremove(id, amt){\n\t\treturn this.apply(id,it=>{\n\t\t\tthis.game.remove(it, Number(amt));\n\t\t});\n\t}\n\n\n\tfillall(){\n\n\t\tlet res = this.resources;\n\t\tfor( let p in res ){\n\n\t\t\tvar r = res[p];\n\t\t\tif ( !r.locked ){\n\t\t\t\tthis.game.fillItem( r )\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfill( id) {\n\t\treturn this.apply( id, it=>{\n\t\t\tit.locked = false;\n\t\t\tthis.game.fillItem(it);\n\t\t});\n\t}\n\n\taddall(amt){\n\t\tthis.getall(amt);\n\t}\n\tadd( id, amt ) { return this.get(id,amt)}\n\n\tgetall( amt ) {\n\n\t\tlet res = this.resources;\n\t\tfor( let p in res ){\n\n\t\t\tvar r = res[p];\n\t\t\tif ( !r.locked && r instanceof Resource ){\n\t\t\t\tthis.get(r.id, amt );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tget( id, amt ) {\n\n\t\tif ( !isNaN(id) ) {\n\t\t\tlet t = id;\n\t\t\tid = amt;\n\t\t\tamt = t;\n\t\t}\n\t\tif ( !id ) return;\n\n\t\tif ( id === ALL || id === ALL_ALT ) {\n\t\t\tthis.getall(amt);\n\t\t\treturn;\n\t\t}\n\n\t\tlet it = this.state.getData( id );\n\t\tif ( !it ) return;\n\n\t\tif ( it.isRecipe ) {\n\t\t\tit.locked = false;\n\t\t\tit.disabled = false;\n\t\t\tthis.game.create(it,true);\n\t\t\treturn;\n\t\t}\n\n\t\tlet newval = it.value + amt;\n\t\tif ( newval > it.max ) it.max = newval;\n\t\tit.amount( Number(amt) || 1 );\n\n\t}\n\n\tlock( id ){\n\t\treturn this.apply( id, it=>this.game.lock(it) );\n\t}\n\n\tunlockall() {\n\n\t\tfor( let p in this.items ){\n\t\t\tthis.unlock(p);\n\t\t}\n\n\t}\n\n\n\tunlock( str ){\n\n\t\treturn this.apply( str, it=>{\n\t\t\ttry {\n\t\t\t\tit.locked=false;\n\t\t\t} catch(e) { return false;}\n\t\t\treturn true;\n\t\t});\n\n\t}\n\n}","import Game from '../game';\nimport Debug from './debug';\n\nvar cheats;\n\nif ( !__CHEATS ) {\n\n\tcheats = {};\n\n} else {\n\n\tconst cheatKeys = {\n\t\tb:'herbs',\n\t\tg:'gold',\n\t\ts:'scrolls',\n\t\te:'exp',\n\t\tt:'stamina',\n\t\th:\"hp\",\n\t\tk:'sp',\n\t\tm:'mana',\n\t\tc:'codices',\n\t\ta:'arcana',\n\t\tr:'research',\n\t\tw:'wizardhall'\n\t};\n\n cheats = {\n\n\tcreated() {\n\n\t\tthis.debug = window.debug || new Debug( Game );\n\n\t\twindow.addEventListener('keydown', e => {\n\t\t\tif (e.repeat) return;\n\t\t\tthis.cheatKey(e);\n\t\t}, false);\n\n\t\tthis.enabled = false;\n\t\tthis.code = 'bodias';\n\t\tthis.input = '';\n\t},\n\n\tmethods: {\n\n\t\tcheatKey(e) {\n\n\t\t\tif (!this.interval) return;\n\n\t\t\tlet active = document.activeElement;\n\t\t\tif ( active && active.tagName.toLowerCase() === 'input') return;\n\n\t\t\tlet key = e.key.toLowerCase();\n\t\t\tif ( !this.enabled ) {\n\t\t\t\tthis.testUnlock(key);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet targ = cheatKeys[key];\n\n\t\t\tif (key === 'p') {\n\n\t\t\t\tthis.state.getData('runner').autoProgress();\n\t\t\t\te.stopPropagation();\n\n\t\t\t} else if ( key ==='f') {\n\n\t\t\t\tthis.debug.fillall();\n\t\t\t\te.stopPropagation();\n\n\t\t\t} else if ( targ ) {\n\t\t\t\tif (e.shiftKey) this.state.addMax( targ );\n\t\t\t\telse {\n\t\t\t\t\tthis.debug.doFill(targ);\n\t\t\t\t}\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\n\t\t},\n\t\ttestUnlock(key){\n\n\t\t\tthis.input += key;\n\t\t\tif ( this.input === this.code ) {\n\n\t\t\t\tconsole.warn('CHEATS ON');\n\t\t\t\tthis.enabled = true;\n\n\t\t\t} else if ( this.input.length >= this.code.length ) {\n\t\t\t\tthis.input = this.input.slice( 1+ this.input.length - this.code.length );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n}\n\nexport default cheats;","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.open\n    ? _c(\"input\", {\n        ref: \"cmdInput\",\n        attrs: { type: \"text\" },\n        on: { keydown: _vm.onpress }\n      })\n    : _vm._e()\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","export default class CmdLine {\n\n\t/**\n\t *\n\t * @param {Debug} context - starting execution context for all commands.\n\t */\n\tconstructor( context ){\n\n\t\tthis.context = context;\n\n\t\t/**\n\t\t * @property {string[]} history - history of commands entered.\n\t\t */\n\t\tthis.history = [];\n\n\t\t/**\n\t\t * @property {number} hIndex - index of history being viewed.\n\t\t * resets on command entered.\n\t\t */\n\t\tthis.hIndex = -1;\n\n\t}\n\n\t/**\n\t * previous lines are higher history indices.\n\t */\n\tprevLine(){\n\n\n\t\tif ( ++this.hIndex >= this.history.length ) {\n\t\t\tthis.hIndex = this.history.length-1;\n\t\t}\n\t\treturn this.hIndex >= 0 ? this.history[this.hIndex] : '';\n\n\t}\n\n\tnextLine(){\n\n\t\tif ( --this.hIndex < 0 ) {\n\t\t\tthis.hIndex = -1;\n\t\t} else if ( this.hIndex >= this.history.length ) {\n\t\t\tthis.hIndex = this.history.length-1;\n\t\t}\n\n\t\tif ( this.hIndex >= 0 ) return this.history[this.hIndex];\n\n\t\treturn '';\n\n\t}\n\n\t/**\n\t *\n\t * @param {string} line\n\t */\n\tparse( line ) {\n\n\t\tif ( line == null ) return false;\n\n\t\tthis.history.unshift(line);\n\t\tif ( this.history.length >= 100 ) this.history.pop();\n\t\tthis.hIndex = -1;\n\n\t\tline = line.toLowerCase();\n\t\tlet parts = line.split(' ');\n\t\tconsole.log( this.exec( parts, line ) );\n\n\n\t}\n\n\t/**\n\t *\n\t * @param {*} parts\n\t * @param {string} path - original line, used for logging purposes.\n\t */\n\texec( parts, path='' ) {\n\n\t\tvar context = this.context;\n\t\tlet len = parts.length;\n\n\t\tfor( let i = 0; i < len; i++ ) {\n\n\t\t\tvar p = parts[i];\n\t\t\tif ( p === undefined || p === null ) {\n\t\t\t\treturn ('Invalid Command: ' + path );\n\t\t\t}\n\t\t\tvar sub = this.getValue( p, context );\n\n\t\t\tif ( sub === null || sub === undefined ) {\n\n\t\t\t\treturn ('Not found: ' + path);\n\n\t\t\t} if ( typeof sub === 'function') {\n\n\t\t\t\t// call function with remainder of the parameters.\n\t\t\t\treturn this.callFunc( context, sub, parts.slice(i+1) );\n\n\t\t\t} else if ( typeof sub === 'object' ) {\n\t\t\t\tcontext = sub;\n\t\t\t} else {\n\t\t\t\treturn sub;\n\t\t\t}\n\n\t\t}\n\n\t\treturn sub;\n\n\t}\n\n\tcallFunc( context, f, params ) {\n\t\treturn f.apply( context, params ? params.map( this.getValue, this ) : null);\n\t}\n\n\t/**\n\t * Get raw parameter value, or value of variable at the path specified.\n\t * @param {*} path\n\t */\n\tgetValue( path, context=this.context ) {\n\n\t\tif ( !isNaN(path)) return Number(path);\n\n\t\t// attempt to split into path parts.\n\t\tlet parts = path.split('.');\n\n\t\tlet len = parts.length;\n\t\tfor( let i = 0; i < len; i++ ) {\n\n\t\t\tvar p = context[parts[i]];\n\t\t\tif ( p === undefined ) return path;\n\t\t\telse if ( typeof p === 'object') context = p;\n\t\t\telse return p;\n\n\t\t}\n\n\t\treturn context;\n\n\t}\n\n}","<script>\nimport CmdLine from './cmdline';\nimport Game from '../game';\nimport Debug from './debug';\n\nconst TOGGLE_KEY = 192;\n// france\nconst FALLBACK_KEY = 222;\n\nexport default {\n\n\tdata(){\n\t\treturn {\n\t\t\topen:false\n\t\t}\n\t},\n\tcreated(){\n\n\t\twindow.game = Game;\n\n\t\tlet debug = window.debug || new Debug(Game);\n\t\tthis.cmdLine = new CmdLine( debug );\n\n\t\twindow.addEventListener( 'keydown', this.onkey );\n\n\t},\n\tupdated(){\n\t\tif ( this.$refs.cmdInput ) {\n\t\t\tthis.$refs.cmdInput.focus();\n\t\t}\n\t},\n\tmethods:{\n\n\t\ttoggleView(){\n\t\t\tthis.open = !this.open;\n\t\t},\n\n\t\tonkey(e) {\n\t\t\tif ( e.keyCode === TOGGLE_KEY || e.keyCode === FALLBACK_KEY ) {\n\t\t\t\tthis.toggleView();\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\tdoCmd( line ) {\n\t\t\tthis.cmdLine.parse(line);\n\t\t},\n\n\t\tonpress(e) {\n\n\t\t\tif ( e.keyCode === 38 ) {\n\t\t\t\t// UP ARROW\n\t\t\t\tthis.$refs.cmdInput.value = this.cmdLine.prevLine();\n\n\n\t\t\t} else if ( e.keyCode === 40 ) {\n\n\t\t\t\t// DOWN ARROW\n\t\t\t\tthis.$refs.cmdInput.value = this.cmdLine.nextLine();\n\n\t\t\t} else if ( e.keyCode === 13) {\n\t\t\t\t// ENTER\n\t\t\t\tlet line = e.target.value;\n\t\t\t\te.target.value = '';\n\t\t\t\tthis.doCmd( line );\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n</script>\n\n<template>\n<input v-if=\"open\" ref=\"cmdInput\" type=\"text\" @keydown=\"onpress\">\n</template>","import mod from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./devconsole.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./devconsole.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./devconsole.vue?vue&type=template&id=2ba61c92&\"\nimport script from \"./devconsole.vue?vue&type=script&lang=js&\"\nexport * from \"./devconsole.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('2ba61c92')) {\n      api.createRecord('2ba61c92', component.options)\n    } else {\n      api.reload('2ba61c92', component.options)\n    }\n    module.hot.accept(\"./devconsole.vue?vue&type=template&id=2ba61c92&\", function () {\n      api.rerender('2ba61c92', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/debug/devconsole.vue\"\nexport default component.exports","<script>\nimport Profile from 'modules/profile';\nimport Game from 'game';\nimport Menu from './components/menu.vue';\nimport ResoucesView from './panes/resources.vue';\nimport Tasks from './sections/tasks.vue';\nimport Quickbar from './quickbar.vue';\nimport ItemsBase from './itemsBase';\nimport Vitals from './panes/vitals.vue';\nimport DotView from './items/dotView.vue';\nimport TopBar from './top-bar.vue';\n\nimport Warn from 'ui/popups/warn.vue';\nimport ItemPopup, { RollOver, ItemOut } from './popups/itemPopup.vue';\nimport SettingsUI from './popups/settings.vue';\n\nimport LogView from './outlog.vue';\n\nimport Settings from 'modules/settings';\nimport Cheats from 'debug/cheats';\nimport DevConsole from 'debug/devconsole.vue';\n\nimport { TRY_BUY, USE, TRY_USE, EVT_STAT } from '../events';\nimport { TICK_TIME } from '../game';\nimport { TASK } from '../values/consts';\nimport Task from '../items/task';\n\n/**\n * @const {number} SAVE_TIME  - time in seconds between auto-saves.\n */\nconst SAVE_TIME = 30;\n\n/**\n * @listens [sell]\n */\nexport default {\n\n\t//mixins:__DIST ? [ItemsBase] : [ItemsBase,Cheats],\\\n\tmixins:[ItemsBase,Cheats],\n\tcomponents:{\n\t\tdevconsole:DevConsole,\n\t\tresources:ResoucesView,\n\t\ttasks:Tasks,\n\t\titempopup:ItemPopup,\n\t\tvitals:Vitals,\n\t\tlog:LogView,\n\t\tquickbar:Quickbar,\n\t\tdots:DotView,\n\t\twarn:Warn,\n\t\ttopbar:TopBar,\n\t\tsettings:SettingsUI,\n\t\tlogin:()=>import( /* webpackChunkName: \"remote\" */ './popups/login.vue' ),\n\t\tregister:()=>import( /* webpackChunkName: \"remote\" */ './components/register.vue' ),\n\t\tactivities:()=>import( /* webpackChunkName: \"popups-ui\" */ './popups/activities.vue' ),\n\t\tchoice:()=>import( /* webpackChunkName: \"popups-ui\" */ './popups/choice.vue' ),\n\n\t\tskills:()=> import( /* webpackChunkName: \"skills-ui\" */ './sections/skills.vue' ),\n\t\tequip:()=>import( /* webpackChunkName: \"equip-ui\" */ './sections/equip.vue'),\n\t\tinventory:()=> import( /* webpackChunkName: \"inv-ui\" */ './sections/inventory.vue' ),\n\t\tpotions:()=> import( /* webpackChunkName: \"potions-ui\" */ './sections/potions.vue'),\n\t\thome:()=>import( /* webpackChunkName: \"home-ui\" */ './sections/home.vue'),\n\t\tplayer:()=>import( /* webpackChunkName: \"player-ui\" */'./sections/player.vue'),\n\t\tbestiary:()=>import(/* webpackChunkName: \"bestiary-ui\" */ './sections/bestiary.vue' ),\n\t\tspells:()=>import( /* webpackChunkName: \"spells-ui\" */ './sections/spells.vue'),\n\t\tadventure:()=>import( /* webpackChunkName: \"raid-ui\" */ './sections/adventure.vue'),\n\t\tenchanting:()=>import( /* webpackChunkName: \"enchant-ui\" */'./sections/enchanting.vue' ),\n\t\tminions:()=>import( /* webpackChunkName: \"minions-ui\" */ './sections/minions.vue' ),\n\t\tscraft:()=>import( /* webpackChunkName: \"scraft-ui\" */ './sections/scraft.vue' ),\n\t\t'vue-menu':Menu\n\t},\n\tdata(){\n\n\t\treturn {\n\t\t\tstate:null,\n\t\t\tpsection:null,\n\t\t\ttogRegister:false,\n\t\t\tshowLogin:false,\n\t\t\ttogSettings:false,\n\t\t\t/** toggle activity manager */\n\t\t\ttogActivities:false\n\t\t};\n\n\t},\n\n\tbeforeCreate(){\n\n\t\t/**\n\t\t * @property {number} loopId - interval id for game loop.\n\t\t */\n\t\tthis.loopId = 0;\n\t\t/**\n\t\t * @property {number} repeaterId - interval id for auto-repeating click.\n\t\t */\n\t\tthis.repeaterId = 0;\n\n\t\t/**\n\t\t * @property {(evt)=>null} repeatEndFunc - mouseup func to end repeater.\n\t\t */\n\t\tthis.repeatEndFunc = null;\n\n\t},\n\n\tcreated(){\n\n\t\tthis.Profile = Profile;\n\n\t\tthis.listen('game-loaded', this.gameLoaded );\n\t\tthis.listen('setting', this.onSetting );\n\n\t\tthis.listen('pause', this.pause );\n\t\tthis.listen('unpause', this.unpause );\n\n\t\tthis.listen('show-register', this.onShowRegister, this);\n\t\tthis.listen('show-login', this.onShowLogin, this);\n\n\n\t},\n\tbeforeDestroy(){\n\n\t\tItemOut();\n\t\tthis.endRepeater();\n\n\t\tthis.removeListener('game-loaded', this.gameLoaded );\n\t\tthis.removeListener('setting', this.onSetting );\n\t\tthis.removeListener('pause', this.pause );\n\t\tthis.removeListener('unpause', this.unpause );\n\n\t\tthis.removeListener( 'show-register', this.onShowRegister );\n\t\tthis.removeListener( 'show-login', this.onShowLogin );\n\n\t},\n\tmethods:{\n\n\t\tgameLoaded() {\n\n\t\t\tthis.state = Game.state;\n\n\t\t\tlet curview = Settings.get('curview') || 'sect_main';\n\t\t\t//console.warn('VIEW CHANGE: ' +  curview );\n\t\t\tthis.section = this.state.sections.find( v=>v.id===curview );\n\n\t\t\tthis.initEvents();\n\n\t\t},\n\n\t\t/**\n\t\t * Listen non-system events.\n\t\t */\n\t\tinitEvents() {\n\n\t\t\tthis.add( 'sell', this.onSell );\n\t\t\tthis.add( 'take', this.onTake );\n\n\t\t\tthis.add( 'upgrade', this.onItem );\n\t\t\tthis.add( TASK, this.onItem );\n\t\t\tthis.add( 'spell', this.onItem );\n\n\t\t\tthis.add('equip', this.onEquip );\n\t\t\tthis.add('unequip', this.onUnequip );\n\t\t\tthis.add('enchant', this.onEnchant );\n\t\t\tthis.add('craft', this.onCraft );\n\t\t\t// display warn dialog.\n\t\t\tthis.add('warn', this.onWarn );\n\n\t\t\tthis.add('showActivities', ()=>{this.togActivities=true} )\n\n\t\t\tthis.add('repeater', this.makeRepeater, this );\n\t\t\tthis.add('endrepeater', this.endRepeater, this );\n\n\t\t\tthis.add( TRY_USE, this.tryUse )\n\t\t\tthis.add( USE, this.onUse );\n\n\t\t\tthis.add('quickslot', this.doQuickslot);\n\n\t\t\tthis.add( TRY_BUY, this.onBuy );\n\n\t\t\t// dispatch start stats.\n\t\t\tthis.dispatch( EVT_STAT, 'titles', this.state.player.titles.length );\n\t\t\tthis.dispatch( EVT_STAT, 'level', this.state.getData('level').valueOf() );\n\t\t\tthis.dispatch( EVT_STAT, 'prestige', this.state.getData('prestige').valueOf() );\n\n\t\t},\n\n\t\tonSetting( setting, val ) {\n\n\t\t\tif ( setting === 'autosave' ) {\n\t\t\t\tif ( val ) this.startAutoSave();\n\t\t\t\telse this.stopAutoSave();\n\t\t\t}\n\n\t\t},\n\n\t\tonShowLogin(){this.showLogin=true;},\n\t\tonShowRegister(){this.togRegister=true;},\n\n\t\tstopAutoSave() {\n\t\t\tif ( this.saver ) {\n\t\t\t\t//console.log('STOP AUTOSAVE');\n\t\t\t\tlet int = this.saver;\n\t\t\t\tthis.saver = null;\n\t\t\t\tclearInterval( int );\n\t\t\t}\n\t\t},\n\n\t\tstartAutoSave() {\n\n\t\t\tif (!this.loopId ) return;\n\t\t\tvar s = Settings;\n\t\t\t\tvar setting = s.get('autosave');\n\n\t\t\t//if ( setting && !this.saver ) { //renabled autosaver regardless\n\t\t\tif (!this.saver ) {\n\t\t\t\t//console.log('START AUTOSAVE');\n\t\t\t\tthis.saver = setInterval( ()=>this.dispatch('autosave'), 1000*SAVE_TIME );\n\t\t\t}\n\n\t\t},\n\n\t\tpause() {\n\n\t\t\tif ( this.loopId ) {\n\t\t\t\tlet int = this.loopId;\n\t\t\t\tthis.loopId = 0;\n\t\t\t\tclearInterval( int );\n\t\t\t}\n\t\t\tthis.stopAutoSave();\n\t\t\tthis.endRepeater();\n\n\t\t\tif ( this.keyListen ) window.removeEventListener('keydown', this.keyListen, false );\n\n\n\t\t},\n\n\n\t\t/**\n\t\t * Item repeats until released.\n\t\t * @param {GData} it - item being used.\n\t\t */\n\t\tmakeRepeater( it ){\n\n\t\t\tif ( this.repeaterId ) {\n\t\t\t\tclearInterval(this.repeaterId );\n\t\t\t\tthis.repeaterId = 0;\n\t\t\t}\n\t\t\tthis.repeaterId = setInterval( (t)=>Game.tryItem(t), 50, it );\n\n\t\t\tif ( !this.repeatEndFunc ) this.repeatEndFunc = ()=>this.endRepeater();\n\t\t\tdocument.addEventListener( 'mouseup', this.repeatEndFunc );\n\n\t\t},\n\n\t\t/**\n\t\t * Cancel active repeater.\n\t\t */\n\t\tendRepeater(){\n\n\t\t\tif ( this.repeaterId ) {\n\t\t\t\tclearInterval(this.repeaterId );\n\t\t\t\tthis.repeaterId=0;\n\t\t\t}\n\t\t\tif ( this.repeatEndFunc ) {\n\t\t\t\tdocument.removeEventListener( 'mouseup', this.repeatEndFunc );\n\t\t\t\tthis.repeatEndFunc = null;\n\t\t\t}\n\n\t\t},\n\n\t\tunpause() {\n\n\t\t\tif ( Game.loaded ) {\n\n\t\t\t\tGame.lastUpdate = Date.now();\n\t\t\t\tif ( !this.loopId ) {\n\t\t\t\t\tthis.loopId = setInterval( ()=>Game.update(), TICK_TIME );\n\t\t\t\t}\n\n\t\t\t\tthis.keyListen = evt=>{\n\t\t\t\tif ( evt.repeat) return;\n\t\t\t\tthis.keyDown( evt ); evt.stopPropagation(); }\n\n\t\t\t\twindow.addEventListener('keydown', this.keyListen, false );\n\t\t\t\tthis.startAutoSave();\n\n\t\t\t}\n\n\n\t\t},\n\n\t\tkeyDown( e ){\n\n\t\t\tif ( !this.loopId ) return;\n\n\t\t\tlet slice = e.code.slice(0,-1);\n\t\t\tif ( slice === 'Digit' || slice === 'Numpad' ) {\n\n\t\t\t\tlet num = Number( e.code.slice(-1) );\n\t\t\t\t//console.log('number: ' + num );\n\n\t\t\t\tif ( e.shiftKey && RollOver.item ) {\n\n\t\t\t\t\tlet it = RollOver.item;\n\t\t\t\t\tthis.state.setQuickSlot( RollOver.item, num );\n\n\t\t\t\t} else {\n\t\t\t\t\tlet it = this.state.getQuickSlot(num);\n\t\t\t\t\tif ( it) this.doQuickslot(it);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tdoQuickslot(it) {\n\t\t\t Game.tryItem( it.slotTarget( Game ) );\n\t\t},\n\n\t\tonEquip( it, inv ) { Game.equip( it,inv ); },\n\n\t\tonUnequip(slot, it){ Game.unequip(slot, it) },\n\n\t\tonTake(it) { Game.take(it); },\n\n\t\tonCraft(it) { Game.craft(it); },\n\n\t\t/**\n\t\t * Use instanced item.\n\t\t */\n\t\tonUse( it, inv ) { Game.use(it, inv); },\n\n\t\t/**\n\t\t * @param {Enchant} e - enchantment\n\t\t * @param {Item} targ - enchant target.\n\t\t */\n\t\tonEnchant( e, targ ) {\n\t\t\tGame.tryUseOn( e, targ );\n\t\t},\n\n\t\tonSell( it, inv, count ) { Game.trySell( it, inv, count ); },\n\n\t\titemOut:ItemOut,\n\n\t\t/**\n\t\t * Item clicked.\n\t\t */\n\t\tonItem(item) {\n\n\t\t\tif ( item.warn ) { //&& !Settings.getSubVar('nowarn', item.id)) {\n\n\t\t\t\tthis.$refs.warn.show( item );\n\n\t\t\t} else Game.tryItem(item);\n\n\t\t},\n\n\t\tonConfirmed(it, nowarn) {\n\n\t\t\tif ( typeof it !== 'string' ) {\n\t\t\t\tit.warn = !nowarn;\n\t\t\t\tGame.tryItem(it);\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Warning should trigger.\n\t\t * @param {string} msg - warning message\n\t\t * @param {()=>{}} res - success callback.\n\t\t */\n\t\tonWarn( msg, res ) {\n\t\t\tthis.$refs.warn.show( msg, res );\n\t\t},\n\n\t\ttryUse( it ) { Game.tryItem(it ) },\n\n\t\t/**\n\t\t * Buy a spell or item without casting/using the item or its mods.\n\t\t * @property {Item} item - item to buy.\n\t\t */\n\t\tonBuy(item) { Game.tryBuy( item ); }\n\n\t},\n\tcomputed:{\n\n\t\tsection:{\n\n\t\t\tget(){ return this.psection; },\n\t\t\tset(v){\n\n\t\t\t\tthis.psection=v;\n\t\t\t\tif ( v ) Settings.set('curview', v.id );\n\t\t\t}\n\t\t},\n\t\tmenuItems(){ return this.state.sections.filter( it=>!this.locked(it) ); }\n\n\t}\n\n}\n</script>\n\n<template>\n\n\t<div class=\"full\" @mouseover.capture.stop=\"itemOut\">\n\n\t\t<devconsole />\n\t\t<topbar @open-settings=\"togSettings=true\">\n\t\t\t<template slot=\"center\">\n\t\t\t<span class=\"load-message\" v-if=\"!state\">LOADING DATA...</span>\n\t\t\t<dots v-if=\"state\" :dots=\"state.player.dots\" />\n\t\t\t</template>\n\t\t</topbar>\n\n<!-- popups -->\n\t\t<itempopup />\n\t\t<warn ref=\"warn\" @confirmed=\"onConfirmed\" />\n\t\t<choice />\n\t\t<register v-if=\"Profile.CLOUD&&togRegister\" @close=\"togRegister=false\" />\n\t\t<login v-if=\"Profile.CLOUD&&showLogin\" @close=\"showLogin=false\" />\n\t\t<settings v-if=\"togSettings\" @close-settings=\"togSettings=false\" />\n\t\t<activities v-if=\"togActivities\" @close=\"togActivities=false\" />\n\n<!-- end popups -->\n\n\t\t<div v-if=\"state\" class=\"game-main\">\n\n\t\t<resources :items=\"state.resources\"/>\n\n\t\t<vue-menu class=\"game-mid\" :items=\"menuItems\" v-model=\"section\">\n\n\t\t<template slot=\"sect_main\">\n\t\t<tasks class=\"main-tasks\" />\n\t\t</template>\n\n\t\t<template slot=\"sect_skills\"><skills :state=\"state\"></skills></template>\n\n\t\t<template slot=\"sect_player\"><player /></template>\n\n\t\t<template slot=\"sect_home\"><home :state=\"state\" /></template>\n\n\t\t<template slot=\"sect_raid\"><adventure :state=\"state\" /></template>\n\n\t\t<template slot=\"sect_equip\">\n\n\t\t\t<div class=\"inv-equip\">\n\t\t\t\t<equip :equip=\"state.equip\" />\n\t\t\t\t<inventory :inv=\"state.inventory\" />\n\t\t\t</div>\n\n\t\t</template>\n\n\t\t<template slot=\"sect_spells\"><spells /></template>\n\t\t<template slot=\"sect_scraft\"><scraft /></template>\n\n\t\t<template slot=\"sect_potions\"><potions /></template>\n\n\t\t<template slot=\"sect_bestiary\"><bestiary /></template>\n\t\t<template slot=\"sect_minions\"><minions :minions=\"state.minions\" /></template>\n\n\t\t<template slot=\"sect_enchant\"><enchanting /></template>\n\t\t</vue-menu>\n\n\t\t<vitals :state=\"state\" />\n\n\t\t<log />\n\n\t\t</div>\n\n\t\t<quickbar v-if=\"state\" class=\"bot-bar\" :bars=\"state.bars\" />\n\n\t</div>\n</template>\n\n<style scoped>\n\ndiv.full {\n\tdisplay:flex;\n\tbackground:inherit;\n\tflex-direction: column;\n\tmin-width:50vw;\n\tmax-height:100vh;\n\theight:100vh;\n}\n\ndiv.game-mid div.main-tasks {\n\toverflow-y: auto;\n\theight:100%;\n}\n\n\ndiv.upgrade-list {\n\tmin-height:0;\n\t/*border-top: 1px solid var( --separator-color );*/\n\tmargin-top:var(--sm-gap);\n}\n\ndiv.inv-equip {\n\theight:100%;\n\tpadding: 0; display: grid; grid-template-rows: 50% 50%; grid-auto-columns: 1fr;\n}\n\ndiv.inv-equip > div:nth-child(2) {\n    border-top: 1px solid var(--separator-color);\n}\n\ndiv.bot-bar {\n\tbackground: inherit;\n\tborder-top: 1px solid var(--separator-color); padding: var(--md-gap);\n}\n\n</style>","import mod from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=6f034aea&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./main.vue?vue&type=style&index=0&id=6f034aea&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./main.vue?vue&type=template&id=6f034aea&scoped=true&\"\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=6f034aea&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6f034aea\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('6f034aea')) {\n      api.createRecord('6f034aea', component.options)\n    } else {\n      api.reload('6f034aea', component.options)\n    }\n    module.hot.accept(\"./main.vue?vue&type=template&id=6f034aea&scoped=true&\", function () {\n      api.rerender('6f034aea', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/main.vue\"\nexport default component.exports","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _vm.confirming\n    ? _c(\"span\", { staticClass: \"my-span\" }, [\n        _c(\n          \"button\",\n          { attrs: { type: \"button\" }, on: { click: _vm.confirmClick } },\n          [_vm._v(_vm._s(_vm.btnConfirm))]\n        ),\n        _vm._v(\" \"),\n        _c(\n          \"button\",\n          { attrs: { type: \"button\" }, on: { click: _vm.cancelClick } },\n          [_vm._v(_vm._s(_vm.btnCancel))]\n        )\n      ])\n    : _c(\"span\", { staticClass: \"my-span\" }, [\n        _c(\n          \"button\",\n          { attrs: { type: \"button\" }, on: { click: _vm.mainClick } },\n          [\n            _vm._t(\"default\", function() {\n              return [_vm._v(\"Delete\")]\n            })\n          ],\n          2\n        )\n      ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<script>\nexport default {\n\n\t/**\n\t * @property {string} confirm - confirm display text.\n\t * @property {string} cancel - cancel display text.\n\t */\n\tprops:['confirm','cancel'],\n\tdata(){\n\t\treturn {\n\t\t\tbtnConfirm:this.confirm||'Confirm',\n\t\t\tbtnCancel:this.cancel||'Cancel',\n\t\t\tconfirming:false\n\t\t};\n\t},\n\tmethods:{\n\n\t\t/**\n\t\t * @public\n\t\t * Resets the confirm dialog when the Confirm prompt\n\t\t * is no longer applicable.\n\t\t */\n\t\treset() {\n\t\t\tthis.confirming = false;\n\t\t},\n\t\tmainClick(){\n\t\t\tthis.confirming=true;\n\t\t\tthis.$emit( 'click' );\n\t\t},\n\t\tconfirmClick(){\n\t\t\tthis.confirming = false;\n\t\t\tthis.$emit( 'confirm' );\n\t\t},\n\t\tcancelClick(){\n\t\t\tthis.confirming=false;\n\t\t\tthis.$emit( 'cancel' );\n\t\t}\n\n\t}\n\n}\n</script>\n\n\n<template>\n\t<span class=\"my-span\" v-if=\"confirming\">\n\t\t<button type=\"button\" @click=\"confirmClick\">{{btnConfirm}}</button>\n\t\t<button type=\"button\" @click=\"cancelClick\">{{btnCancel}}</button>\n\t</span>\n\t<span v-else class=\"my-span\">\n\t\t<button type=\"button\" @click=\"mainClick\"><slot>Delete</slot></button>\n\t</span>\n\n</template>\n\n<style scoped>\n\nspan.my-span {\n\tdisplay:contents;\n}\n\n</style>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=script&lang=js&\"","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=193f0119&scoped=true&lang=css&\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./confirm.vue?vue&type=style&index=0&id=193f0119&scoped=true&lang=css&\";\n       export default content && content.locals ? content.locals : undefined;\n","import { render, staticRenderFns } from \"./confirm.vue?vue&type=template&id=193f0119&scoped=true&\"\nimport script from \"./confirm.vue?vue&type=script&lang=js&\"\nexport * from \"./confirm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./confirm.vue?vue&type=style&index=0&id=193f0119&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"193f0119\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/runner/work/arcanum/arcanum/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('193f0119')) {\n      api.createRecord('193f0119', component.options)\n    } else {\n      api.reload('193f0119', component.options)\n    }\n    module.hot.accept(\"./confirm.vue?vue&type=template&id=193f0119&scoped=true&\", function () {\n      api.rerender('193f0119', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/ui/components/confirm.vue\"\nexport default component.exports","import Game from './game';\nimport Events from './events';\nimport Profile from 'modules/profile';\n\nimport Vue from 'vue';\nimport Main from 'ui/main.vue';\n\nimport Confirm from 'ui/components/confirm.vue';\nimport { ItemOver } from 'ui/popups/itemPopup.vue';\n\n//window.localStorage.clear();\n\nif ( __KONG ) {\n\n\tkongregateAPI.loadAPI( function(){\n\n\twindow.kong = kongregateAPI.getAPI();\n\t// You can now access the Kongregate API with:\n\t// kongregate.services.getUsername()\n\n\t});\n}\n\nVue.mixin({\n\n\tcomponents:{ confirm:Confirm },\n\tmethods: {\n\n\t\t/**\n\t\t * System-related events.\n\t\t */\n\t\tlisten:Events.listen,\n\t\tdispatch:Events.dispatch,\n\t\tremoveListener:Events.removeListener,\n\n\t\titemOver:ItemOver,\n\n\t\t/**\n\t\t * Game-level events.\n\t\t */\n\t\temit:Events.emit,\n\t\tadd:Events.add,\n\n\t\t// get id for html element.\n\t\telmId(name) { return name + this._uid; }\n\n\t}\n\n});\n\n/**\n * @fires {} register-error\n * @fires {} register-sent\n * @fires {} logged-in\n */\nconst vm = new Vue({\n\tel: '#vueRoot',\n\tcomponents:{\n\t\tMain\n\t},\n\tdata(){\n\t\t// hacky re-render force. used to rerender on game reload.\n\t\treturn {\n\t\t\tactive:Profile.active,\n\t\t\trenderKey:1\n\t\t}\n\t},\n\tcreated(){\n\n\t\tthis.saveLink = null;\n\t\tthis.game = Game;\n\n\t\t//this.tryAutoLogin();\n\n\t\tthis.listen('save-file', this.saveFile, this );\n\t\tthis.listen('hall-file', this.hallFile, this );\n\n\t\tthis.listen('load-file', this.loadFile, this );\n\t\tthis.listen('load', this.loadSave, this );\n\t\tthis.listen('reset', this.reset,this );\n\t\tthis.listen('resetHall', this.resetHall, this );\n\n\t\tthis.listen('stat', this.doStat, this );\n\n\t\tthis.listen('save-settings', Profile.saveSettings, Profile );\n\n\t\tthis.listen('set-char', this.setChar, this );\n\t\tthis.listen('dismiss-char', this.dismissChar, this );\n\n\t\tthis.listen('save', this.manualSave, this );\n\t\tthis.listen('autosave', this.save, this );\n\n\t\tthis.listen( 'setting', this.onSetting, this );\n\t\tthis.listen( 'logout', this.logout, this );\n\t\tthis.listen( 'login-changed', this.onLoginChanged, this );\n\t\t//this.listen( 'try-register', this.tryRegister, this );\n\n\t\tthis.loadHall();\n\n\t},\n\tmethods:{\n\n\t\tonLoginChanged( loggedIn ){\n\n\t\t\tconsole.log('LOGGED IN: ' + loggedIn );\n\t\t\tProfile.loggedIn = loggedIn;\n\n\t\t\tif ( loggedIn ) {\n\t\t\t\tthis.loadHall('remote');\n\t\t\t}\n\n\t\t},\n\n\t\tlogout(){\n\t\t\tProfile.logout();\n\t\t},\n\n\t\ttryLogin(uname, pw) {\n\t\t},\n\n\t\tloadHall( type=null ){\n\n\t\t\t//if ( forceClear ) this.reset();\n\n\t\t\tconsole.log('loading hall type: ' + type );\n\t\t\tthis.dispatch('pause');\n\t\t\tProfile.loadHall( type ).then( ()=>this.loadSave() );\n\n\n\t\t},\n\n\t\tdoStat( evt, val ) {\n\n\t\t\tif ( window.kong ) {\n\t\t\t\twindow.kong.stats.submit( evt, val );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Set current character.\n\t\t */\n\t\tsetChar( ind ){\n\n\t\t\tProfile.setActive( ind, this.game.state );\n\t\t\tthis.loadSave();\n\n\t\t},\n\n\t\tdismissChar(ind) {\n\n\t\t\t//console.log('DISMISS: ' + ind );\n\t\t\tProfile.dismiss( ind );\n\n\t\t},\n\n\t\t/**\n\t\t * Load the save for the active wizard.\n\t\t */\n\t\tasync loadSave() {\n\n\t\t\ttry {\n\n\t\t\t\tthis.dispatch('pause');\n\n\t\t\t\tlet data = await Profile.loadActive();\n\t\t\t\tthis.setStateJSON( data );\n\n\t\t\t} catch (e ) { console.error( e.message + '\\n' + e.stack ); }\n\n\t\t},\n\n\t\t/**\n\t\t * Game was revived from JSON.\n\t\t * @param {Game} game\n\t\t */\n\t\tgameLoaded( game ) {\n\n\t\t\tif ( !game ) console.warn('gameloaded(): NULL' );\n\n\t\t\tthis.settingsLoaded( Profile.loadSettings() );\n\n\t\t\tthis.dispatch( 'game-loaded' );\n\n\t\t\tconsole.log('Begin player id: ' + game.state.pid );\n\n\t\t\tProfile.gameLoaded( game );\n\n\t\t\tthis.dispatch('unpause');\n\n\t\t},\n\n\t\t/**\n\t\t * Call on settings loaded.\n\t\t * @param {*} vars\n\t\t */\n\t\tsettingsLoaded(vars){\n\n\t\t\tif (!vars) return;\n\n\t\t\tthis.onSetting( 'darkMode', vars.darkMode );\n\t\t\tthis.onSetting( 'compactMode', vars.compactMode );\n\t\t},\n\n\t\tonSetting( setting, v ) {\n\n\t\t\tif ( setting === 'darkMode') {\n\n\t\t\t\tif ( v ) document.body.classList.add( 'darkmode');\n\t\t\t\telse document.body.classList.remove( 'darkmode');\n\n\t\t\t} else if ( setting === 'compactMode' ) {\n\n\t\t\t\tif ( v ) document.body.classList.add( 'compact');\n\t\t\t\telse document.body.classList.remove( 'compact');\n\n\t\t\t} else if ( setting === 'remoteFirst') {\n\n\t\t\t\tProfile.remoteFirst = true;\n\t\t\t}\n\n\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {*} e\n\t\t * @returns {void}\n\t\t */\n\t\tsaveFile(e ){\n\n\t\t\t// event shouldnt be null but sometimes is.\n\t\t\tif (!e )return;\n\t\t\ttry {\n\n\t\t\t\te.preventDefault();\n\t\t\t\tlet state = this.game.state;\n\t\t\t\tthis.makeLink( state, state.player.name );\n\n\t\t\t} catch(ex) {\n\t\t\t\tconsole.error( ex.message + '\\n' + ex.stack );\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t *\n\t\t * @param {*} e\n\t\t * @returns {void}\n\t\t */\n\t\tasync hallFile(e){\n\n\t\t\tif ( !e ) return;\n\n\t\t\tthis.save();\t\t// save game first.\n\n\t\t\ttry {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif ( this.hallLink) URL.revokeObjectURL( this.hallLink );\n\n\t\t\t\tlet data = await Profile.getHallSave();\n\t\t\t\tthis.makeLink( data, 'hall');\n\n\t\t\t} catch(ex){\n\t\t\t\tconsole.error( ex.message + '\\n' + ex.stack );\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Create URL link for data.\n\t\t * @param {object} data\n\t\t * @returns {DOMString}\n\t\t */\n\t\tmakeLink( data, saveName ) {\n\n\t\t\tif ( this.saveLink ) URL.revokeObjectURL( this.saveLink );\n\n\t\t\tlet json = JSON.stringify(data);\n\t\t\tlet file = new Blob( [json], {type:\"text/json;charset=utf-8\"} );\n\n\t\t\tvar a = document.createElement( 'a');\n\t\t\t//targ.type = 'text/json';\n\t\t\ta.download = a.title = saveName + '.json';\n\n\t\t\tthis.saveLink = URL.createObjectURL( file );\n\t\t\ta.href = this.saveLink;\n\t\t\ta.click();\n\n\t\t},\n\n\t\t/**\n\t\t * Load file from data.\n\t\t * @param {*} files\n\t\t */\n\t\tloadFile(files) {\n\n\t\t\tconst file = files[0];\n\t\t\tif ( !file) return;\n\n\t\t\tthis.dispatch('pause');\n\n\n\t\t\tconst reader = new FileReader();\n\t\t\treader.onload = (e)=>{\n\n\t\t\t\ttry {\n\n\t\t\t\t\tlet data = JSON.parse( e.target.result );\n\t\t\t\t\tif ( data.type ==='hall') {\n\n\t\t\t\t\t\tthis.setHallJSON( data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.setStateJSON( data );\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} catch(err){\n\t\t\t\t\tconsole.error(  err.message + '\\n' + err.stack );\n\t\t\t\t}\n\n\t\t\t}\n\t\t\treader.readAsText( file );\n\n\t\t},\n\n\t\t/**\n\t\t * Set JSON for complete hall-file with all associated wizards.\n\t\t * @param {object} data\n\t\t */\n\t\tasync setHallJSON( data ) {\n\n\t\t\tawait Profile.setHallSave( data );\n\t\t\tthis.loadHall();\t// load the hall data back. bit wasteful but organized.\n\n\t\t},\n\n\t\t/**\n\t\t * Set wizard-state game data in the form of a json\n\t\t * text string.\n\t\t * @param {object} obj - raw game data.\n\t\t */\n\t\tsetStateJSON( obj=null ){\n\n\t\t\ttry {\n\n\t\t\t\t//if ( this.game.loaded ) this.renderKey++;\n\t\t\t\tthis.renderKey++;\n\n\t\t\t\tthis.game.load( obj, Profile.getHallItems() ).then( this.gameLoaded,\n\t\t\t\t\te=>console.error( e.message + '\\n' + e.stack ) );\n\n\t\t\t} catch( err ) {\n\t\t\t\tconsole.error(  err.message + '\\n' + err.stack );\n\t\t\t}\n\t\t},\n\n\t\tmanualSave(){\n\t\t\tthis.save();\n\t\t},\n\n\t\tasync save() {\n\n\t\t\tif (!this.game.loaded ) return;\n\t\t\tconsole.log('Saving...');\n\t\t\tlet charsave = await Profile.saveActive( this.game.state );\n\n\t\t\tconsole.log('Saving Hall..: ' + charsave );\n\t\t\tif ( charsave ) {\n\n\t\t\t\tProfile.saveHall();\n\n\t\t\t} else{\n\t\t\t\t\tconsole.warn('ERR ON SAVE. NO SAVE.');\t\n\t\t\t\t\talert('ERR ON SAVE. NO SAVE.');\n\t\t\t} \n\n\t\t},\n\n\t\treset(){\n\n\t\t\tthis.dispatch('pause');\n\n\t\t\tProfile.clearActive();\n\t\t\tthis.setStateJSON(null);\n\n\n\t\t},\n\t\tasync resetHall() {\n\n\t\t\tthis.dispatch('pause');\n\n\t\t\tawait Profile.clearAll();\n\n\t\t\tthis.loadHall();\n\n\t\t}\n\n\t},\n\trender( createElm ) {\n\t\treturn createElm( Main, { key:this.renderKey } );\n\t}\n\n});\n"],"names":["inProgress","dataWebpackPrefix","___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","concat","join","i","modules","mediaQuery","dedupe","alreadyImportedModules","length","_i","_arrayLikeToArray","arr","len","arr2","Array","_item","isArray","_arrayWithHoles","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","value","err","_iterableToArrayLimit","o","minLen","n","Object","prototype","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","has","hasOwnProperty","prefix","Events","EE","fn","context","once","addListener","emitter","event","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","names","getOwnPropertySymbols","listeners","handlers","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","args","arguments","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","EmptySet","Set","changes","clone","original","res","p","sub","orig","mergeSafe","dest","src","exclude","nowrite","getNoWrite","add","svars","destSub","srcSub","getPrototypeOf","cloneClass","proto","def","getPropDesc","writable","set","f","obj","includes","m","descs","getOwnPropertyDescriptors","d","getDescs","Map","includesAny","params","defineExcept","defaultVal","getOwnPropertyNames","getOwnPropertyDescriptor","k","desc","assign","jsonify","excludes","writableOnly","r","toJSON","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","index","css","media","sourceMap","references","updater","addStyle","api","domAPI","update","newObj","remove","lastIdentifiers","newList","newLastIdentifiers","_index","splice","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","getTarget","Error","appendChild","createElement","setAttributes","attributes","nonce","setAttribute","insertStyleElement","removeAttribute","styleTagTransform","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","render","_vm","_h","$createElement","_c","_self","staticClass","label","attrs","for","elmId","_v","hideStats","toFixed","max","_withStripped","props","computed","s","width","color","val","Math","floor","component","__file","dots","_l","key","class","kind","school","mini","$event","stopPropagation","itemOver","char","perm","ceil","duration","abbr","mixins","beforeCreate","toTitleCase","type","current","repeat","sym","tags","hands","rate","precise","showLevel","level","slot","enchants","at","nextAt","round","every","nextEvery","cd","timer","dist","armor","need","info","title","buy","owned","cost","player","hp","sell","instanced","sellPrice","run","attack","effect","perpetual","mod","alter","use","dot","lock","disable","flavor","effects","v","DisplayItem","isRate","typ","DisplayName","it","PathConversions","rootPath","skipLocked","subProp","ind","indexOf","baseItem","ConvertPath","prop","func","InfoBlock","curItem","results","clear","itemName","ref","cur","infos","effectItems","methods","GetItem","forEach","effectList","refItem","subItem","subRate","subPath","rootItem","locked","disabled","attackunit","damage","itemtype","targets","tohit","bonus","targetstring","hits","hit","hitBonus","dmg","components","gdata","console","warn","min","valueOf","tagNames","t","substring","sname","nextImprove","Number","MAX_VALUE","sup","items","hidable","running","runnable","canUse","click","directives","rawName","expression","RollOver","elm","ItemOver","currentTarget","ItemOut","updated","$el","normalizeComponent","scriptExports","staticRenderFns","functionalTemplate","injectStyles","scopeId","moduleIdentifier","shadowMode","hook","_compiled","functional","_scopeId","$vnode","ssrContext","parent","__VUE_SSR_CONTEXT__","_registeredComponents","_ssrRegister","$root","$options","shadowRoot","_injectStyles","originalRender","h","existing","Attack","_dot","_name","_id","_hits","_kind","_state","split","_cure","_targetstring","_targets","_bonus","_damage","_harmless","canAttack","vars","harmless","Dot","_level","_mod","acc","state","adj","_adj","flags","_flags","_source","_perm","canCast","canDefend","extend","revive","gs","getData","tick","dt","Char","_defense","_tohit","_resist","_speed","_team","immunities","_immunities","a","addImmune","_bonuses","_attack","_dots","getCause","flag","_states","hasState","_regen","_context","bonuses","reviveDots","retarget","targ","cure","log","rmDot","tryCast","spells","nextUsable","begin","addDot","mergeDot","roll","rollResist","find","removeDot","applyDot","st","applyMods","findIndex","removeMods","applyVars","regen","combat","alive","speed","random","action","self","getAttack","getBonus","hasStatus","stat","states","isImmune","tryResist","resist","getHit","getResist","removeResist","amt","addResist","addStatus","removeStatus","removeImmune","NpcState","caster","npcItems","nextId","getSlot","setSlot","findInstance","getUnique","findData","any","hasUnique","get","isRecipe","makeNpcItem","copy","template","Context","_runner","stateObj","tryItem","tryUseOn","tryBuy","unlockTest","craft","keep","onCreate","team","filled","useOn","addTimer","getLoot","canPay","inventory","hasCount","isNaN","isRVal","canPayObj","RValue","canEquip","equip","unequip","onUnequip","payCost","canMod","payInst","setTask","canRun","error","amount","addTitle","getApply","doUnlock","onUse","Npc","super","_keep","_hp","_loot","loot","_active","_spells","save","dodge","active","g","rest","NO_ATTACK","NO_DEFEND","NO_SPELLS","NO_ACT","ParseFlags","ConfuseTargets","CharmTargets","States","_causes","cause","_addCause","_rmCause","refresh","Wearable","material","_enchants","_material","_armor","_slot","stack","consume","alters","maxed","recipe","calcMaxEnchants","hasEnchant","applyMaterial","mat","doAlter","defense","addWeapon","remod","removeWeapon","convertMods","Enchanting","exp","_exp","_target","percent","_length","canAlter","Proxy","hasTag","hasTags","isProxy","TagSet","_items","_type","tag","fillsRequire","size","itr","values","mods","toArray","filter","StatData","unit","_value","prev","setBase","del","changed","_rate","Spell","_only","_silent","_action","arcana","addRequire","canUseOn","only","Alter","_exclude","_alter","Enchant","verb","beginUseOn","complete","defaults","Potion","require","GEvent","_rand","_cd","rand","DefeatStats","Fists","Player","_title","_titles","_next","levelUp","_gclass","_weapons","saveMode","removeDupes","titles","alignment","retreat","gclass","weapons","defeators","initStates","setClass","setName","setTitle","stamina","rested","defeated","empty","explore","nextAttack","nxt","nextItem","getResources","fire","water","air","earth","light","shadow","arcane","physical","natural","poison","disease","CharUpgrade","_charlock","_char","charlock","hid","GClass","warnMsg","State","_effect","_stack","applyTo","loadFiles","fileList","dir","load","main","srcList","then","saveData","files","loadModInfo","core","DataDir","instance","objects","lists","raws","dataLists","alias","mergeItems","gameLists","buildLists","initInstance","dataList","gameList","saveItems","saveObj","inst","resources","initItems","stressors","hide","upgrades","homes","furniture","skills","encounters","monsters","rares","reagents","locales","dungeons","stats","armors","potions","materials","properties","classes","tasks","actions","mergeTasks","sections","initPlayer","b","w","UseClass","reverse","addTag","savePlayer","freezeData","freeze","sys","EVT_COMBAT","COMBAT_HIT","EVT_EVENT","EVT_UNLOCK","EVT_LOOT","LOG_COMBAT","LogTypes","TRY_BUY","TRY_USE","USE","SET_SLOT","CHAR_DIED","ALLY_DIED","COMBAT_WON","ENEMY_SLAIN","CHAR_STATE","STATE_BLOCK","DEFEATED","DAMAGE_MISS","IS_IMMUNE","RESISTED","TASK_REPEATED","TASK_IMPROVED","STOP_ALL","TASK_DONE","HALT_TASK","TASK_BLOCKED","CHAR_ACTION","DELETE_ITEM","ENC_START","CHAR_TITLE","NEW_TITLE","CHAR_NAME","LEVEL_UP","CHAR_CLASS","EVT_STAT","init","game","_triggers","clearGameEvents","onLoot","onUnlock","onEvent","onLevel","onNewTitle","doTrigger","actImproved","onCombat","onHit","onCharState","onStateBlock","npcSlain","onDefeat","onMiss","onImmune","onResist","onEnc","clearTriggers","ons","clearTrigger","trigger","trigs","delete","addTrigger","typeName","text","getDisplay","dispatch","lvl","locale","msg","reduce","enemy","attacker","listen","LogItem","subtype","TICK_TIME","TICK_LEN","_gdata","loaded","maxItems","initCounts","counts","types","cut","tryMatch","bot","last","logItem","runner","reset","hallData","loader","async","allData","itemGen","addData","recalcSpace","recheckTiers","restoreMods","forceCheck","onDelete","message","logStat","highClass","hasEvent","enchantslots","drops","space","addItem","delta","updateTech","time","Date","now","lastUpdate","minions","doResources","playerStats","toggleTask","toggleAct","doRest","tryAdd","haltTask","stopTask","removeAll","inv","deleteItem","permVars","fillItem","doFill","doLog","sellObj","gold","sellRate","trySell","keys","price","unlock","tryUnlock","locks","removeCount","adjust","replaceCount","freeSpace","full","take","addStack","Slot","multi","getItemIds","numslots","spaces","addMult","tmp","match","pred","ids","all","SlotGroup","_slots","slots","findAll","Equip","removeWeap","right","left","equipWeap","getWeapon","rightItem","leftItem","Minions","_allies","_mods","spaceProp","addKeep","shouldKeep","setActive","pair","is","allies","canAdd","actives","calcUsed","resetActives","addMod","died","Runnable","onStop","resumeUseOn","ArraySet","_store","inc","dec","Runner","waiting","timers","autoProgress","_max","pursuits","reviveList","actDone","actBlocked","stopAll","reviveTask","controller","runWith","runTask","trimActives","not","addWait","act","resume","tryResume","tryWaiting","canPursuit","baseTask","togglePursuit","cycleAdd","tryPursuit","free","getRunnable","fill","waitingUp","waitingDown","removeAct","removeWait","repeatable","clearWaits","avail","restAction","doTask","onStart","hasType","Explore","enc","_enc","_combat","_running","spelllist","enemyDied","charDied","loc","reenter","nextEnc","c","luck","emitDefeat","encDone","getEncounter","setEnemies","maxlevel","Group","custom","_cost","computeCost","toData","UserSpells","removeAt","QuickSlot","_recipe","slotTarget","Quickbar","num","Quickbars","bars","_bars","dataDeleted","EnchantSlots","ltot","extot","enchant","Combat","enemies","_enemies","_teams","unshift","resetTeamArrays","spellAction","silent","atk","doAttack","tryHit","group","getGroup","teams","defender","dodgeRoll","setTimers","addNpc","minDelay","PI","atan","REST_SLOT","MakeDataList","GameState","slotIds","version","pid","NEXT_ID","_modules","nextIdNum","baseData","inventories","initSlots","quickbar","initStats","prepItems","userSpells","reviveItems","reviveSpecial","tagSets","makeTagSets","manualRevive","homeTest","home","delValue","setQuickSlot","slotNum","getQuickSlot","getTagSet","typeCost","addMax","filterItems","getSlots","exists","unique","LOOP","DataList","order","lastInd","_lastInd","_order","saveMap","start","nextInd","reviver","SaveInstanced","SAVE_FULL","SAVE_IDS","Inventory","_saveMode","_saveMap","_spaceProp","_cProp","_used","_removeDupes","_saveIds","loads","used","spaceCost","MAX_SAFE_INTEGER","randItem","findMatch","rec","SetModCounts","mergeClass","destClass","srcDescs","protoDescs","defineProperty","JSONIgnore","forceSave","_template","_actname","actname","trim","_repeat","actdesc","_desc","_tags","changeMod","subeffect","newSub","applyObj","isMod","subMod","subTarg","Encounter","NoDefine","GData","_module","_disabled","_sym","_on","_require","_warn","_warnMsg","_locks","_locked","_owned","_delta","basePct","setDefaults","canBuy","doLock","blocked","_alters","initAlters","addAdj","fallback","replace","ItemDefaults","Item","el","cnt","_consume","_count","_defaults","MakeSpawn","SpawnGroup","_w","_ids","weight","instantiate","pct","SpawnParams","_range","range","Spawns","_groups","_weightTot","initGroups","grp","randGroup","weightTot","tot","groups","distTest","levelTest","Locale","_once","_spawns","spawns","spawnData","ParseSpawns","_boss","ex","spawn","hasBoss","boss","getBoss","CreateNpc","Monster","Resource","positive","_group","_color","RevStat","levLength","pow","Skill","sp","Task","_runmod","tryComplete","scale","applyImproves","runmod","improve","BLANK_CATEGORY","GenGroup","noproc","filterBy","subgroup","randBelow","levels","randAt","filtered","allowBlank","getCategories","matches","subs","randBy","makeFilter","sortBy","cat","flatMap","itemRevive","ItemGen","initGroup","randEncounter","biome","randEnemy","randByBiome","npc","fromProto","getGData","randLoot","objLoot","getCompatible","makeWearable","genProperties","filters","Module","_objects","_lists","_author","_email","_git","setData","fileLoaded","file","typesLoaded","parseList","merge","parseLists","modName","PerRegEx","IsPerMod","PerMod","per","_per","parts","AtRegEx","IsAtMod","AtMod","_at","_op","op","GT","LT","exec","IdTest","ParseMods","SubMods","str","StrMod","PrepData","ParseEffects","MakeEffectFunc","MakeCostFunc","ParseRequire","ParseRVal","funcMaker","Function","CharInfo","gender","fame","points","_pid","_fame","_gender","_school","_points","retur","getPoints","Hall","chars","curId","_curSlot","_curId","_chars","_prestige","findCur","hallSize","hallPoints","prestige","initChars","legacy","curSlot","evt_hall","dismiss","getChars","updateChar","setLevel","pidSlot","charId","rmChar","Local","clearAll","localStorage","deleteChar","charid","setItem","charLoc","saveChar","loadChar","getItem","parse","saveHall","hallLoc","loadHall","HALL_FILE","Persist","remoteFirst","loggedIn","Remote","logout","charFile","settingsLoc","saveSettings","loadSettings","SETTINGS_DIR","VERSION","CLOUD","hall","loadHallData","resaveLegacy","onCharLevel","setHallName","saveActive","getHallItems","gameLoaded","setCharDatas","json","hasHall","Defaults","saves","autosave","saveTime","darkMode","compactMode","curview","hideMaxed","getAll","setSubVar","getSubVar","getSubVars","setSettings","ProtoItem","_properties","FuncRE","NextChanges","Changed","GetChanged","temp","TechTree","datas","unlocks","needs","mapUnlocks","links","mapRequirement","requires","graph","mapIdRequire","mapFuncRequire","mapObjRequire","unlocker","slottable","reslocked","centerX","innerWidth","offsetWidth","centerXY","pctY","top","innerHeight","offsetHeight","positionAt","pad","rect","getBoundingClientRect","targRect","y","getTop","inConfig","mounted","btnHides","$refs","addEventListener","preventDefault","stopHides","newHides","classList","$nextTick","configHides","show","hideElms","hidables","querySelectorAll","onTogHide","hideToggle","dataset","removeEventListener","beforeDestroy","swap","mergeInto","randFrom","arrs","pushNonNull","randWhere","randElm","quickSplice","pop","arrayMerge","propSort","sort","iterableFind","iterableMap","setReplace","mapSet","toStats","addValue","addValues","vals","PostFixes","toLarge","sgn","log10","maxDivide","abs","divide","lowFixed","RequestInfo","creds","method","headers","Headers","mode","credentials","JSONLoad","url","fetch","status","JSONLoader","_results","_promise","baseDir","_dir","setFiles","_files","_loads","req","promiseArr","Promise","alphasort","levelsort","ensure","canWriteProp","assignPublic","assignNoFunc","splitKeys","splitKeyPath","showObj","logObj","uppercase","toUpperCase","String","string","toLowerCase","substr","lastIndexOf","suffix","FValue","_fn","path","_src","TARGET_SELF","TARGET_ENEMY","TARGET_ALLY","TARGET_RAND","TARGET_GROUP","TARGET_ANY","TARGET_PRIMARY","TARGET_ENEMIES","TARGET_ALLIES","TARGET_RANDG","Targets","randomgroup","randomenemy","enemyleader","leader","ally","RandTarget","PrimeTarget","ParseTarget","MakeDmgFunc","ParseDmg","ApplyAction","ApplyDamage","dmg_reduce","nodefense","leech","skillMap","mana","reqs","lore","TimeId","TYP_PCT","TYP_RANGE","TYP_STAT","TYP_MOD","TYP_RVAL","TYP_FUNC","TYP_DOT","TYP_RUN","TYP_STATE","ENCHANTSLOTS","P_TITLE","P_LOG","POTION","ITEM","NPC","RESOURCE","SKILL","ENCOUNTER","MONSTER","WEARABLE","ENCHANT","HOME","EVENT","PURSUITS","ARMOR","WEAPON","REST_TAG","TASK","DUNGEON","LOCALE","EXPLORE","TEAM_PLAYER","TEAM_NPC","TEAM_ALL","getDelay","canTarget","targs","NpcLoreSkills","beast","magicbeast","demon","humanoid","undead","kell","celestial","construct","elemental","giant","ghost","spirit","deity","TierTable","SchoolTable","swamp","plains","woods","holy","mountains","hills","cave","sea","town","dragon","tierOffset","getTier","NpcLoreLevels","skill","SkillLevels","getSchool","schoolResource","table","SchoolCostTable","nature","blood","other","MaxStat","ModTest","Mod","_basePct","pctTot","mBase","mPct","PercentTest","Percent","RangeTest","Range","_min","contains","InitRVals","recur","SubPath","child","delBonus","Scaler","_scale","addUnscaled","Stat","bTot","_mBase","_pos","_mPct","pos","recalc","countBonus","delPct","countPct","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","enumerable","chunkId","promises","u","globalThis","script","needAttach","scripts","getElementsByTagName","getAttribute","charset","timeout","nc","onScriptComplete","onerror","onload","clearTimeout","doneFns","setTimeout","bind","toStringTag","installedChunks","installedChunkData","promise","resolve","reject","errorType","realSrc","request","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","some","chunkLoadingGlobal","emptyObject","isUndef","isDef","isTrue","isPrimitive","isObject","_toString","isPlainObject","isValidArrayIndex","parseFloat","isFinite","isPromise","catch","toNumber","makeMap","expectsLowerCase","isReservedAttribute","hasOwn","cached","cache","camelizeRE","camelize","_","capitalize","charAt","hyphenateRE","hyphenate","ctx","boundFn","ret","to","_from","toObject","noop","no","identity","looseEqual","isObjectA","isObjectB","isArrayA","isArrayB","getTime","keysA","keysB","looseIndexOf","called","SSR_ATTR","ASSET_TYPES","LIFECYCLE_HOOKS","config","optionMergeStrategies","productionTip","devtools","performance","errorHandler","warnHandler","ignoredElements","keyCodes","isReservedTag","isReservedAttr","isUnknownElement","getTagNamespace","parsePlatformTagName","mustUseProp","_lifecycleHooks","configurable","_isServer","bailRE","RegExp","hasProto","inBrowser","inWeex","WXEnvironment","platform","weexPlatform","UA","navigator","userAgent","isIE","isIE9","isEdge","isIOS","isFF","nativeWatch","watch","supportsPassive","opts","isServerRendering","env","VUE_ENV","__VUE_DEVTOOLS_GLOBAL_HOOK__","isNative","Ctor","_Set","hasSymbol","Reflect","ownKeys","uid","Dep","addSub","removeSub","depend","addDep","notify","targetStack","pushTarget","popTarget","VNode","children","componentOptions","asyncFactory","ns","fnContext","fnOptions","fnScopeId","componentInstance","raw","isStatic","isRootInsert","isComment","isCloned","isOnce","asyncMeta","isAsyncPlaceholder","prototypeAccessors","defineProperties","createEmptyVNode","node","createTextVNode","cloneVNode","vnode","cloned","arrayProto","arrayMethods","inserted","ob","__ob__","observeArray","dep","arrayKeys","shouldObserve","toggleObserving","Observer","vmCount","protoAugment","copyAugment","walk","observe","asRootData","isExtensible","_isVue","defineReactive$$1","customSetter","shallow","property","setter","childOb","dependArray","newVal","strats","mergeData","toVal","fromVal","mergeDataOrFn","parentVal","childVal","vm","instanceData","defaultData","mergeHook","hooks","dedupeHooks","mergeAssets","key$1","inject","provide","defaultStrat","mergeOptions","normalizeProps","normalized","normalizeInject","dirs","def$$1","normalizeDirectives","_base","extends","mergeField","strat","resolveAsset","warnMissing","assets","camelizedId","PascalCaseId","validateProp","propOptions","propsData","absent","booleanIndex","getTypeIndex","Boolean","stringIndex","default","_props","getType","getPropDefaultValue","prevShouldObserve","functionTypeCheckRE","isSameType","expectedTypes","handleError","$parent","errorCaptured","globalHandleError","invokeWithErrorHandling","handler","_handled","logError","timerFunc","isUsingMicroTask","callbacks","pending","flushCallbacks","copies","MutationObserver","setImmediate","counter","observer","textNode","characterData","nextTick","cb","_resolve","seenObjects","traverse","_traverse","seen","isA","isFrozen","depId","normalizeEvent","passive","once$$1","capture","createFnInvoker","fns","invoker","arguments$1","updateListeners","oldOn","remove$$1","createOnceHandler","old","mergeVNodeHook","hookKey","oldHook","wrappedHook","merged","checkProp","hash","altKey","preserve","normalizeChildren","normalizeArrayChildren","isTextNode","nestedIndex","lastIndex","shift","_isVList","resolveInject","provideKey","_provided","provideDefault","resolveSlots","name$1","isWhitespace","normalizeScopedSlots","normalSlots","prevSlots","hasNormalSlots","isStable","$stable","$key","_normalized","$hasNormal","normalizeScopedSlot","key$2","proxyNormalSlot","proxy","renderList","renderSlot","fallbackRender","bindObject","nodes","scopedSlotFn","$scopedSlots","$slots","resolveFilter","isKeyNotMatch","expect","actual","checkKeyCodes","eventKeyCode","builtInKeyCode","eventKeyName","builtInKeyName","mappedKeyCode","bindObjectProps","asProp","isSync","loop","domProps","camelizedKey","hyphenatedKey","renderStatic","isInFor","_staticTrees","tree","markStatic","_renderProxy","markOnce","markStaticNode","bindObjectListeners","ours","resolveScopedSlots","hasDynamicKeys","contentHashKey","bindDynamicKeys","baseObj","prependModifier","symbol","installRenderHelpers","_o","_t","_q","_m","_f","_k","_b","_u","_g","_p","FunctionalRenderContext","contextVm","this$1","_original","isCompiled","needNormalization","injections","scopedSlots","cloneAndMarkFunctionalResult","renderContext","mergeProps","componentVNodeHooks","hydrating","_isDestroyed","keepAlive","mountedNode","prepatch","_isComponent","_parentVnode","inlineTemplate","createComponentInstanceForVnode","activeInstance","$mount","oldVnode","parentVnode","renderChildren","newScopedSlots","oldScopedSlots","hasDynamicScopedSlot","needsForceUpdate","_renderChildren","_vnode","$attrs","$listeners","propKeys","_propKeys","oldListeners","_parentListeners","updateComponentListeners","$forceUpdate","updateChildComponent","_isMounted","callHook","_inactive","activatedChildren","activateChildComponent","destroy","deactivateChildComponent","$destroy","hooksToMerge","createComponent","baseCtor","cid","factory","errorComp","resolved","owner","currentRenderingInstance","owners","loading","loadingComp","sync","timerLoading","timerTimeout","$on","forceRender","renderCompleted","ensureCtor","reason","delay","resolveAsyncComponent","createAsyncPlaceholder","resolveConstructorOptions","model","callback","transformModel","extractPropsFromVNodeData","vnodes","createFunctionalComponent","nativeOn","abstract","toMerge","_merged","mergeHook$1","installComponentHooks","f1","f2","normalizationType","alwaysNormalize","simpleNormalizeChildren","pre","applyNS","registerDeepBindings","_createElement","force","comp","getFirstComponentChild","remove$1","$off","onceHandler","setActiveInstance","prevActiveInstance","isInInactiveTree","direct","_directInactive","$children","_hasHookEvent","$emit","queue","flushing","currentFlushTimestamp","getNow","createEvent","timeStamp","flushSchedulerQueue","watcher","before","activatedQueue","updatedQueue","callActivatedHooks","_watcher","callUpdatedHooks","uid$2","Watcher","expOrFn","isRenderWatcher","_watchers","deep","user","lazy","dirty","deps","newDeps","depIds","newDepIds","segments","parsePath","cleanupDeps","queueWatcher","oldValue","evaluate","teardown","_isBeingDestroyed","sharedPropertyDefinition","sourceKey","computedWatcherOptions","defineComputed","userDef","shouldCache","createComputedGetter","createGetterInvoker","_computedWatchers","createWatcher","$watch","uid$3","superOptions","modifiedOptions","modified","latest","sealed","sealedOptions","resolveModifiedOptions","extendOptions","Vue","_init","getComponentName","pattern","pruneCache","keepAliveInstance","entry","pruneCacheEntry","_uid","vnodeComponentOptions","_componentTag","initInternalComponent","initLifecycle","initEvents","parentData","initRender","initInjections","propsOptions","initProps","initMethods","_data","charCodeAt","initData","watchers","isSSR","initComputed","initWatch","initState","initProvide","initMixin","$set","$delete","immediate","stateMixin","hookRE","$once","i$1","cbs","eventsMixin","_update","prevEl","prevVnode","restoreActiveInstance","__patch__","__vue__","lifecycleMixin","_render","renderMixin","patternTypes","builtInComponents","KeepAlive","include","cacheVNode","vnodeToCache","keyToCache","parseInt","created","destroyed","configDef","util","defineReactive","observable","plugin","installedPlugins","_installedPlugins","install","initUse","mixin","initMixin$1","Super","SuperId","cachedCtors","_Ctor","Sub","Comp","initProps$1","initComputed$1","initExtend","initAssetRegisters","initGlobalAPI","acceptValue","isEnumeratedAttr","isValidContentEditableValue","isBooleanAttr","xlinkNS","isXlink","getXlinkProp","isFalsyAttrValue","mergeClassData","stringifyClass","stringified","stringifyArray","stringifyObject","namespaceMap","svg","math","isHTMLTag","isSVG","unknownElementCache","isTextInputType","nodeOps","tagName","multiple","createElementNS","namespace","createComment","insertBefore","newNode","referenceNode","nextSibling","setTextContent","textContent","setStyleScope","registerRef","isRemoval","refs","refInFor","emptyNode","sameVnode","typeA","typeB","sameInputType","createKeyToOldIdx","beginIdx","endIdx","updateDirectives","oldDir","isCreate","isDestroy","oldDirs","normalizeDirectives$1","newDirs","dirsWithInsert","dirsWithPostpatch","oldArg","arg","callHook$1","componentUpdated","callInsert","emptyModifiers","modifiers","getRawDirName","baseModules","updateAttrs","inheritAttrs","oldAttrs","setAttr","removeAttributeNS","isInPre","baseSetAttr","convertEnumeratedValue","setAttributeNS","__ieph","blocker","stopImmediatePropagation","updateClass","oldData","cls","childNode","dynamicClass","genClassForVnode","transitionClass","_transitionClasses","_prevClass","target$1","klass","createOnceHandler$1","remove$2","useMicrotaskFix","add$1","attachedTimestamp","_wrapper","ownerDocument","updateDOMListeners","change","normalizeEvents","svgContainer","updateDOMProps","oldProps","childNodes","strCur","shouldUpdateValue","innerHTML","checkVal","composing","notInFocus","activeElement","isNotInFocusAndDirty","_vModifiers","number","isDirtyWithModifiers","parseStyleText","propertyDelimiter","normalizeStyleData","normalizeStyleBinding","staticStyle","bindingStyle","emptyStyle","cssVarRE","importantRE","setProp","setProperty","normalizedName","normalize","vendorNames","capName","updateStyle","oldStaticStyle","oldStyleBinding","normalizedStyle","oldStyle","newStyle","checkChild","styleData","getStyle","whitespaceRE","addClass","removeClass","tar","resolveTransition","autoCssTransition","enterClass","enterToClass","enterActiveClass","leaveClass","leaveToClass","leaveActiveClass","hasTransition","TRANSITION","ANIMATION","transitionProp","transitionEndEvent","animationProp","animationEndEvent","ontransitionend","onwebkittransitionend","onanimationend","onwebkitanimationend","raf","requestAnimationFrame","nextFrame","addTransitionClass","transitionClasses","removeTransitionClass","whenTransitionEnds","expectedType","getTransitionInfo","propCount","ended","end","onEnd","transformRE","styles","getComputedStyle","transitionDelays","transitionDurations","transitionTimeout","getTimeout","animationDelays","animationDurations","animationTimeout","hasTransform","delays","durations","toMs","enter","toggleDisplay","_leaveCb","cancelled","transition","_enterCb","nodeType","appearClass","appearToClass","appearActiveClass","beforeEnter","afterEnter","enterCancelled","beforeAppear","appear","afterAppear","appearCancelled","transitionNode","isAppear","startClass","activeClass","toClass","beforeEnterHook","enterHook","afterEnterHook","enterCancelledHook","explicitEnterDuration","expectsCSS","userWantsControl","getHookArgumentsLength","pendingNode","_pending","isValidDuration","leave","rm","beforeLeave","afterLeave","leaveCancelled","delayLeave","explicitLeaveDuration","performLeave","invokerFns","_enter","patch","backend","removeNode","createElm","insertedVnodeQueue","parentElm","refElm","nested","ownerArray","isReactivated","initComponent","innerNode","activate","reactivateComponent","setScope","createChildren","invokeCreateHooks","pendingInsert","isPatchable","ref$$1","ancestor","addVnodes","startIdx","invokeDestroyHook","removeVnodes","ch","removeAndInvokeRemoveHook","childElm","createRmCb","findIdxInOld","oldCh","patchVnode","removeOnly","hydrate","newCh","oldKeyToIdx","idxInOld","vnodeToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","canMove","updateChildren","postpatch","invokeInsertHook","initial","isRenderedModule","inVPre","hasChildNodes","childrenMatch","fullInvoke","isInitialPatch","isRealElement","hasAttribute","oldElm","patchable","i$2","createPatchFunction","vmodel","directive","binding","_vOptions","setSelected","getValue","onCompositionStart","onCompositionEnd","prevOptions","curOptions","hasNoMatchingOption","actuallySetSelected","isMultiple","selected","option","selectedIndex","initEvent","dispatchEvent","locateNode","platformDirectives","transition$$1","originalDisplay","__vOriginalDisplay","display","unbind","transitionProps","getRealChild","compOptions","extractTransitionData","placeholder","rawChild","isNotTextNode","isVShowDirective","Transition","hasParentTransition","_leaving","oldRawChild","oldChild","isSameChild","delayedLeave","moveClass","callPendingCbs","_moveCb","recordPosition","newPos","applyTranslation","oldPos","dx","dy","moved","transform","WebkitTransform","transitionDuration","platformComponents","TransitionGroup","beforeMount","kept","prevChildren","rawChildren","transitionData","removed","c$1","hasMove","_reflow","body","propertyName","_hasMove","cloneNode","attr","HTMLUnknownElement","HTMLElement","updateComponent","mountComponent","query","itemOut","togSettings","confirmed","onConfirmed","Profile","togRegister","close","showLogin","togActivities","menuItems","section","$$v","itemTitle","itemId","shown","isOpen","ops","visActs","visRuns","ups","runnables","hasItems","bar","visMana","resting","focus","mousedown","halt","taskStr","levelStr","progbar","manaList","href","fileInput","drop","fileDrop","dragover","fileDrag","dragOut","accept","fileSelect","confirm","login","dataTransfer","nowarn","checked","$$a","$$el","$$c","$$i","cancel","WARN_MSG","sCompactMode","sDarkMode","autoSave","clearLog","showOptions","visItems","box","doOptions","ALL","Debug","debug","addmax","emptyall","removeall","fillall","addall","getall","newval","unlockall","cheats","cheatKeys","cheatKey","enabled","code","input","interval","testUnlock","shiftKey","open","keydown","onpress","CmdLine","history","hIndex","prevLine","nextLine","line","callFunc","cmdLine","onkey","cmdInput","toggleView","keyCode","doCmd","devconsole","itempopup","vitals","topbar","settings","register","activities","choice","bestiary","adventure","enchanting","scraft","psection","loopId","repeaterId","repeatEndFunc","onSetting","pause","unpause","onShowRegister","onShowLogin","endRepeater","onSell","onTake","onItem","onEquip","onEnchant","onCraft","onWarn","makeRepeater","tryUse","doQuickslot","onBuy","setting","startAutoSave","stopAutoSave","saver","int","clearInterval","setInterval","keyListen","keyDown","confirming","confirmClick","btnConfirm","cancelClick","btnCancel","mainClick","Main","renderKey","saveLink","saveFile","hallFile","loadFile","loadSave","resetHall","doStat","setChar","dismissChar","manualSave","onLoginChanged","tryLogin","uname","pw","kong","submit","setStateJSON","settingsLoaded","makeLink","hallLink","URL","revokeObjectURL","saveName","Blob","download","createObjectURL","reader","FileReader","setHallJSON","readAsText","charsave","alert"],"sourceRoot":""}