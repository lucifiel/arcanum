"use strict";(self.webpackChunk_name_=self.webpackChunk_name_||[]).push([[125],{1430:(t,n,e)=>{e.d(n,{Z:()=>o});var i=e(4015),s=e.n(i),a=e(3645),r=e.n(a)()(s());r.push([t.id,"\nlabel[data-v-6d0e0bec] {\n\tmargin-right:var(--md-gap);\n}\n","",{version:3,sources:["webpack://./src/ui/components/filterbox.vue"],names:[],mappings:";AAqEA;CACA,0BAAA;AACA",sourcesContent:["<script>\nexport default {\n\n\t/**\n\t * @property {object[]} items - items to filter.\n\t * @property {prop} [prop='name'] - target prop of filter test.\n\t *\n\t * @property {number} [minItems=0] - minimum number of items before box is visible.\n\t */\n\tprops:['value', 'items', 'prop', 'minItems'],\n\tdata() {\n\t\treturn {\n\t\t\ttext:'',\n\t\t\tpprop:this.prop||'name'\n\t\t}\n\t},\n\twatch:{\n\t\titems(newVal,oldVal){ this.findText = this.findText; }\n\t},\n\tcreated(){\n\t\tthis.findText = this.text;\n\t},\n\tmethods:{\n\t\tclear(){ this.text = ''; }\n\t},\n\tcomputed:{\n\n\t\tfindText:{\n\n\t\t\tget() { return this.text; },\n\t\t\tset(v){\n\n\t\t\t\tthis.text = v;\n\t\t\t\tlet p = this.pprop;\n\n\t\t\t\tif ( !v ) this.$emit( 'input', this.items );\n\n\t\t\t\tvar txt = v.toLowerCase();\n\n\t\t\t\tif ( typeof p === 'function') {\n\n \t\t\t\t\tthis.$emit( 'input', this.items.filter(\n\t\t\t\t\t\tit=>p(it, txt )\n\t\t\t\t\t));\n\n\t\t\t\t} else this.$emit( 'input', this.items.filter(\n\t\t\t\t\tit=>(typeof it === 'object') &&\n\t\t\t\t\t( (typeof it[p]) === 'string' ) && it[p].toLowerCase().includes( txt )\n\t\t\t\t));\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n\n<template>\n\t<div class=\"filter-box\" v-if=\"!this.minItems||text||(this.items.length>=this.minItems)\">\n\t\t<label :for=\"elmId('filter')\">Find</label>\n\t\t<input :id=\"elmId('filter')\" v-model=\"findText\" type=\"text\">\n\t</div>\n</template>\n\n\n<style scoped>\nlabel {\n\tmargin-right:var(--md-gap);\n}\n</style>"],sourceRoot:""}]);const o=r},3590:(t,n,e)=>{e.d(n,{Z:()=>o});var i=e(4015),s=e.n(i),a=e(3645),r=e.n(a)()(s());r.push([t.id,"\ndiv.minions .rez[data-v-39072fa4] {\n\ttext-transform: capitalize;\n}\ndiv.minions .minion-title[data-v-39072fa4] {\n\tdisplay:flex;\n\tmin-width: 12rem;\n\tmax-width: 50%;\n\tjustify-content: space-between;\n}\ndiv.minions .warn-text[data-v-39072fa4] {\n\tmargin-bottom: var( --sm-gap );\n}\ndiv.minions[data-v-39072fa4] {\n\tpadding-left:1rem;\n\tpadding-top: var( --tiny-gap );\n\theight:100%;\n}\n.char-list[data-v-39072fa4] {\n\theight:85%;\n\toverflow-y:auto;\n}\ntable[data-v-39072fa4] {\n\tborder-spacing: var(--sm-gap) 0;\n\tborder-collapse: collapse;\n\trow-gap: var(--sm-gap);\n\tcolumn-gap: var(--md-gap);\n}\ntr:first-child th[data-v-39072fa4] {\n\tborder-bottom: 1pt solid black;\n\tmargin: var(--sm-gap);\n}\ntr > th[data-v-39072fa4]:first-of-type {\n\ttext-align: left;\n}\nth[data-v-39072fa4] {\n\tpadding: var(--sm-gap) var(--md-gap);\n}\ntd.num-align[data-v-39072fa4] {\n\tpadding: var(--md-gap);\n}\n\n","",{version:3,sources:["webpack://./src/ui/sections/minions.vue"],names:[],mappings:";AAwHA;CACA,0BAAA;AACA;AAEA;CACA,YAAA;CACA,gBAAA;CACA,cAAA;CACA,8BAAA;AACA;AAEA;CACA,8BAAA;AACA;AACA;CACA,iBAAA;CACA,8BAAA;CACA,WAAA;AACA;AAEA;CACA,UAAA;CACA,eAAA;AACA;AAEA;CACA,+BAAA;CACA,yBAAA;CACA,sBAAA;CACA,yBAAA;AAEA;AAEA;CACA,8BAAA;CACA,qBAAA;AACA;AAEA;CACA,gBAAA;AACA;AAEA;CACA,oCAAA;AACA;AAEA;CACA,sBAAA;AACA",sourcesContent:['<script>\nimport Game from \'../../game\';\n\nimport ItemsBase from \'../itemsBase\';\nimport FilterBox from \'../components/filterbox.vue\';\n\nexport default {\n\n\tprops:[\'minions\'],\n\tdata(){\n\t\treturn {\n\t\t\tfiltered:null\n\t\t};\n\t},\n\tmixins:[ItemsBase],\n\tcomponents:{\n\t\tfilterbox:FilterBox\n\t},\n\tcomputed:{\n\n\t\tallies() { return this.minions.allies;},\n\n\t\tinExplore() { return Game.state.explore.running },\n\n\t\t/*items(){ return this.minions.filter( v=>v.value>=1 ); },*/\n\n\t\trezList(){return Game.state.getTagSet(\'rez\').filter(v=>v.owned&&!v.disabled);}\n\n\t},\n\tmethods:{\n\n\t\t/**\n\t\t * Get list of ressurect spells which can be applied to b.\n\t\t * @param {Npc}\n\t\t */\n\t\trezzes(b){\n\t\t\treturn this.rezList.filter(v=>v.canUseOn(b) );\n\t\t},\n\n\t\t/**\n\t\t * Use resurrect spell on minion.\n\t\t * @param {Spell}\n\t\t * @param {Npc}\n\t\t */\n\t\tuseRez( rez, b) {\n\n\t\t\tGame.tryItem(rez);\n\t\t\tb.hp.set(1);\n\n\t\t},\n\n\t\t/**\n\t\t * Toggle whether or not minion is an active ally.\n\t\t */\n\t\ttoggleActive(b) {\n\t\t\tthis.minions.setActive( b, !b.active );\n\t\t},\n\n\t\tdismiss(b){\n\t\t\tthis.minions.remove(b);\n\t\t},\n\n\t\t/** @todo: shared display funcs. */\n\t\ttoNum(v) {\n\n\t\t\tif ( v === undefined || v=== null ) return 0;\n\t\t\treturn ( (typeof v === \'object\') ? v.value : v ).toFixed(1);\n\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n<template>\n\n<div class="minions">\n\n\t<filterbox v-model="filtered" :items="this.minions.items" min-items="10" />\n\n\t<div v-if="inExplore" class="warn-text">Cannot change active minions while adventuring</div>\n\t<div class="minion-title">\n\t\t<span>Total Minions: {{ minions.count + \' / \' + Math.floor(minions.max) }}</span>\n\t\t<span>Allies Power: {{ Math.floor(allies.used) + \' / \' + Math.floor( allies.max.value ) }}</span></div>\n\n\t<div class="char-list">\n\t<table>\n\t\t<tr><th>Creature</th><th class="num-align">Life</th><th>Active</th><th>Actions</th></tr>\n\t\t<tr class="char-row" v-for="b in filtered" :key="b.id" @mouseenter.capture.stop="itemOver($event,b)">\n\t\t\t<th><input class="fld-name" type="text" v-model="b.name"></th>\n\t\t\t<td class="num-align">{{ toNum(b.hp) }} / {{ toNum( b.hp.max ) }}</td>\n\n\t\t\t<td v-if="!b.alive">\n\t\t\t\t<span>Dead</span>\n\n\t\t\t</td>\n\t\t\t<td v-else>\n\t\t\t\t<button v-if="b.active" @click="toggleActive(b)" :disabled="inExplore">Rest</button>\n\t\t\t\t<button v-else @click="toggleActive(b)" :disabled="inExplore||!allies.canAdd(b)">Activate</button>\n\t\t\t</td>\n\t\t\t<td v-if="!b.alive">\n\t\t\t\t\x3c!-- note this is a separate section from the one above --\x3e\n\t\t\t\t<button class="rez" v-for="r in rezzes(b)" :key="r.id" :disabled="!r.canUse()" @click="useRez(r,b)">{{ r.name }}</button>\n\n\t\t\t</td>\n\t\t\t<td>\n\t\t\t\t<confirm @confirm="dismiss(b)">{{ \'Dismiss\'}}</confirm>\n\t\t\t</td>\n\n\t\t</tr>\n\t</table>\n\t</div>\n\n</div>\n\n</template>\n\n<style scoped>\n\ndiv.minions .rez {\n\ttext-transform: capitalize;\n}\n\ndiv.minions .minion-title {\n\tdisplay:flex;\n\tmin-width: 12rem;\n\tmax-width: 50%;\n\tjustify-content: space-between;\n}\n\ndiv.minions .warn-text {\n\tmargin-bottom: var( --sm-gap );\n}\ndiv.minions {\n\tpadding-left:1rem;\n\tpadding-top: var( --tiny-gap );\n\theight:100%;\n}\n\n.char-list {\n\theight:85%;\n\toverflow-y:auto;\n}\n\ntable {\n\tborder-spacing: var(--sm-gap) 0;\n\tborder-collapse: collapse;\n\trow-gap: var(--sm-gap);\n\tcolumn-gap: var(--md-gap);\n\n}\n\ntr:first-child th {\n\tborder-bottom: 1pt solid black;\n\tmargin: var(--sm-gap);\n}\n\ntr > th:first-of-type {\n\ttext-align: left;\n}\n\nth {\n\tpadding: var(--sm-gap) var(--md-gap);\n}\n\ntd.num-align {\n\tpadding: var(--md-gap);\n}\n\n</style>'],sourceRoot:""}]);const o=r},4194:(t,n,e)=>{e.d(n,{Z:()=>x});var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return!this.minItems||t.text||this.items.length>=this.minItems?e("div",{staticClass:"filter-box"},[e("label",{attrs:{for:t.elmId("filter")}},[t._v("Find")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.findText,expression:"findText"}],attrs:{id:t.elmId("filter"),type:"text"},domProps:{value:t.findText},on:{input:function(n){n.target.composing||(t.findText=n.target.value)}}})]):t._e()};i._withStripped=!0;const s={props:["value","items","prop","minItems"],data(){return{text:"",pprop:this.prop||"name"}},watch:{items(t,n){this.findText=this.findText}},created(){this.findText=this.text},methods:{clear(){this.text=""}},computed:{findText:{get(){return this.text},set(t){this.text=t;let n=this.pprop;t||this.$emit("input",this.items);var e=t.toLowerCase();"function"==typeof n?this.$emit("input",this.items.filter((t=>n(t,e)))):this.$emit("input",this.items.filter((t=>"object"==typeof t&&"string"==typeof t[n]&&t[n].toLowerCase().includes(e))))}}}};var a=e(3379),r=e.n(a),o=e(7795),l=e.n(o),m=e(569),d=e.n(m),p=e(3565),A=e.n(p),c=e(9216),v=e.n(c),u=e(4589),f=e.n(u),h=e(1430),b={};b.styleTagTransform=f(),b.setAttributes=A(),b.insert=d().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=v(),r()(h.Z,b),h.Z&&h.Z.locals&&h.Z.locals;var g=(0,e(1900).Z)(s,i,[],!1,null,"6d0e0bec",null);g.options.__file="src/ui/components/filterbox.vue";const x=g.exports},8996:(t,n,e)=>{e.r(n),e.d(n,{default:()=>y});var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"minions"},[e("filterbox",{attrs:{items:this.minions.items,"min-items":"10"},model:{value:t.filtered,callback:function(n){t.filtered=n},expression:"filtered"}}),t._v(" "),t.inExplore?e("div",{staticClass:"warn-text"},[t._v("Cannot change active minions while adventuring")]):t._e(),t._v(" "),e("div",{staticClass:"minion-title"},[e("span",[t._v("Total Minions: "+t._s(t.minions.count+" / "+Math.floor(t.minions.max)))]),t._v(" "),e("span",[t._v("Allies Power: "+t._s(Math.floor(t.allies.used)+" / "+Math.floor(t.allies.max.value)))])]),t._v(" "),e("div",{staticClass:"char-list"},[e("table",[t._m(0),t._v(" "),t._l(t.filtered,(function(n){return e("tr",{key:n.id,staticClass:"char-row",on:{"!mouseenter":function(e){return e.stopPropagation(),t.itemOver(e,n)}}},[e("th",[e("input",{directives:[{name:"model",rawName:"v-model",value:n.name,expression:"b.name"}],staticClass:"fld-name",attrs:{type:"text"},domProps:{value:n.name},on:{input:function(e){e.target.composing||t.$set(n,"name",e.target.value)}}})]),t._v(" "),e("td",{staticClass:"num-align"},[t._v(t._s(t.toNum(n.hp))+" / "+t._s(t.toNum(n.hp.max)))]),t._v(" "),n.alive?e("td",[n.active?e("button",{attrs:{disabled:t.inExplore},on:{click:function(e){return t.toggleActive(n)}}},[t._v("Rest")]):e("button",{attrs:{disabled:t.inExplore||!t.allies.canAdd(n)},on:{click:function(e){return t.toggleActive(n)}}},[t._v("Activate")])]):e("td",[e("span",[t._v("Dead")])]),t._v(" "),n.alive?t._e():e("td",t._l(t.rezzes(n),(function(i){return e("button",{key:i.id,staticClass:"rez",attrs:{disabled:!i.canUse()},on:{click:function(e){return t.useRez(i,n)}}},[t._v(t._s(i.name))])})),0),t._v(" "),e("td",[e("confirm",{on:{confirm:function(e){return t.dismiss(n)}}},[t._v(t._s("Dismiss"))])],1)])}))],2)])],1)};i._withStripped=!0;var s=e(7112),a=e(9736),r=e(4194);const o={props:["minions"],data:()=>({filtered:null}),mixins:[a.Z],components:{filterbox:r.Z},computed:{allies(){return this.minions.allies},inExplore:()=>s.ZP.state.explore.running,rezList:()=>s.ZP.state.getTagSet("rez").filter((t=>t.owned&&!t.disabled))},methods:{rezzes(t){return this.rezList.filter((n=>n.canUseOn(t)))},useRez(t,n){s.ZP.tryItem(t),n.hp.set(1)},toggleActive(t){this.minions.setActive(t,!t.active)},dismiss(t){this.minions.remove(t)},toNum:t=>null==t?0:("object"==typeof t?t.value:t).toFixed(1)}};var l=e(3379),m=e.n(l),d=e(7795),p=e.n(d),A=e(569),c=e.n(A),v=e(3565),u=e.n(v),f=e(9216),h=e.n(f),b=e(4589),g=e.n(b),x=e(3590),C={};C.styleTagTransform=g(),C.setAttributes=u(),C.insert=c().bind(null,"head"),C.domAPI=p(),C.insertStyleElement=h(),m()(x.Z,C),x.Z&&x.Z.locals&&x.Z.locals;var _=(0,e(1900).Z)(o,i,[function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("tr",[e("th",[t._v("Creature")]),e("th",{staticClass:"num-align"},[t._v("Life")]),e("th",[t._v("Active")]),e("th",[t._v("Actions")])])}],!1,null,"39072fa4",null);_.options.__file="src/ui/sections/minions.vue";const y=_.exports}}]);
//# sourceMappingURL=minions-ui.bundle.js.map