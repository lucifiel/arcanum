var wizrobe;(()=>{"use strict";var t,e,s={6638:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\nspan.my-span[data-v-193f0119] {\n\tdisplay:contents;\n}\n\n","",{version:3,sources:["webpack://./src/ui/components/confirm.vue"],names:[],mappings:";AAyDA;CACA,gBAAA;AACA",sourcesContent:['<script>\nexport default {\n\n\t/**\n\t * @property {string} confirm - confirm display text.\n\t * @property {string} cancel - cancel display text.\n\t */\n\tprops:[\'confirm\',\'cancel\'],\n\tdata(){\n\t\treturn {\n\t\t\tbtnConfirm:this.confirm||\'Confirm\',\n\t\t\tbtnCancel:this.cancel||\'Cancel\',\n\t\t\tconfirming:false\n\t\t};\n\t},\n\tmethods:{\n\n\t\t/**\n\t\t * @public\n\t\t * Resets the confirm dialog when the Confirm prompt\n\t\t * is no longer applicable.\n\t\t */\n\t\treset() {\n\t\t\tthis.confirming = false;\n\t\t},\n\t\tmainClick(){\n\t\t\tthis.confirming=true;\n\t\t\tthis.$emit( \'click\' );\n\t\t},\n\t\tconfirmClick(){\n\t\t\tthis.confirming = false;\n\t\t\tthis.$emit( \'confirm\' );\n\t\t},\n\t\tcancelClick(){\n\t\t\tthis.confirming=false;\n\t\t\tthis.$emit( \'cancel\' );\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n\n<template>\n\t<span class="my-span" v-if="confirming">\n\t\t<button type="button" @click="confirmClick">{{btnConfirm}}</button>\n\t\t<button type="button" @click="cancelClick">{{btnCancel}}</button>\n\t</span>\n\t<span v-else class="my-span">\n\t\t<button type="button" @click="mainClick"><slot>Delete</slot></button>\n\t</span>\n\n</template>\n\n<style scoped>\n\nspan.my-span {\n\tdisplay:contents;\n}\n\n</style>\n'],sourceRoot:""}]);const o=a},7876:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\n.menu-items .menu-item[data-v-636f3856] { color: #000;\n}\nbody.darkmode .menu-items .menu-item[data-v-636f3856] { color: #FFF;\n}\n.menu-items .menu-item u[data-v-636f3856] { color: #999;\n}\n.menu-items .menu-item[data-v-636f3856]:hover, .menu-items .menu-item u[data-v-636f3856]:hover { color: #33F;\n}\n\n","",{version:3,sources:["webpack://./src/ui/components/menu.vue"],names:[],mappings:";AAyDA,0CAAA,WAAA;AAAA;AACA,wDAAA,WAAA;AAAA;AACA,4CAAA,WAAA;AAAA;AACA,iGAAA,WAAA;AAAA",sourcesContent:['<script>\n\nexport default {\n\n\tprops:[\'value\', \'items\'],\n\tmethods:{\n\n\t\titemTitle(it) {\n\n\t\t\tif ( it instanceof Object ) {\n\t\t\t\treturn it.name || it.desc || it.id;\n\t\t\t} return it;\n\n\t\t},\n\n\t\titemId(it){\n\t\t\tif ( it instanceof Object ) {\n\t\t\t\treturn it.id;\n\t\t\t}\n\t\t\treturn it;\n\t\t},\n\n\t\tsetActive( it ) {\n\n\t\t\tthis.$emit( \'input\', it );\n\t\t\tthis.$emit( \'changed\', it );\n\n\t\t}\n\n\t}\n\n}\n\n<\/script>\n\n<template>\n\t<div class="menu">\n\n\t\t<div class="menu-items">\n\n\t\t<div class="menu-item" v-for="(it) in items" :key="it.id">\n\n\t\t\t<span v-if="it != value" @click="setActive(it)" :key="itemTitle(it)"> <u> {{ itemTitle(it) }} </u></span>\n\t\t\t<span v-else :key="itemTitle(it)"> {{ itemTitle(it) }} </span>\n\n\t\t</div>\n\n\t\t</div>\n\n\n\t\t\x3c!-- NOTE: slot css-class ignored --\x3e\n\t\t<span class="menu-content"><slot :name="itemId(value)"></slot></span>\n\n\t</div>\n</template>\n\n<style scoped>\n    .menu-items .menu-item { color: #000; }\n    body.darkmode .menu-items .menu-item { color: #FFF; }\n    .menu-items .menu-item u { color: #999; }\n\t.menu-items .menu-item:hover, .menu-items .menu-item u:hover { color: #33F; }\n\n</style>'],sourceRoot:""}]);const o=a},6582:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\ndiv.container {\n\tdisplay:flex;\n\theight:100%;\n\twidth: 100%;\n}\ndiv.bar .fill {\n\t  height:100%;\n\t  padding:0;\n\t  margin:0;\n}\ndiv.bar .bar-text {\n\tcolor: var( --progbar-text-color );\n}\ndiv.bar {\n\n\tdisplay:inline-block;\n\tbackground: #333;\n\toverflow:hidden;\n\tpadding:0;\n\tmin-height:1.5rem;\n\twidth:-webkit-fill-available;\n\twidth:-moz-available;\n\tborder-radius: var(--lg-radius);\n}\n\n\n","",{version:3,sources:["webpack://./src/ui/components/progbar.vue"],names:[],mappings:";AA0CA;CACA,YAAA;CACA,WAAA;CACA,WAAA;AACA;AAEA;GACA,WAAA;GACA,SAAA;GACA,QAAA;AACA;AAEA;CACA,kCAAA;AACA;AAGA;;CAEA,oBAAA;CACA,gBAAA;CACA,eAAA;CACA,SAAA;CACA,iBAAA;CACA,4BAAA;CACA,oBAAA;CACA,+BAAA;AACA",sourcesContent:["<script>\nexport default {\n\n\tprops:['value', 'max', 'label', 'hideStats', 'color'],\n\tcomputed:{\n\n\t\tstyle(){\n\n\t\t\tlet s = 'width:' + this.width;\n\t\t\tif ( this.color ) s += ';background:' + this.color;\n\n\t\t\treturn s;\n\n\t\t},\n\n\t\twidth(){\n\t\t\tlet val = Math.floor( 100*(this.value/this.max) );\n\t\t\tif ( val > 100 ) val = 100;\n\t\t\telse if ( val < 0 ) val = 0;\n\t\t\treturn val + '%;'\n\t\t}\n\t}\n\n}\n<\/script>\n\n\n<template>\n\n<div class=\"container\">\n\t<label v-if=\"label\" :for=\"elmId('bar')\">{{label}}</label>\n\t<div class=\"bar\" :id=\"elmId('bar')\">\n\t\t<div class=\"fill\" :style=\"style\">\n\t\t\t<span class=\"bar-text\" v-if=\"!hideStats\">{{ value.toFixed(1) + '/' + max.toFixed(1) }}</span>\n\t\t\t<span v-else>&nbsp;</span>\n\t\t</div>\n\t</div>\n</div>\n\n</template>\n\n<style>\ndiv.container {\n\tdisplay:flex;\n\theight:100%;\n\twidth: 100%;\n}\n\n    div.bar .fill {\n\t  height:100%;\n\t  padding:0;\n\t  margin:0;\n    }\n\ndiv.bar .bar-text {\n\tcolor: var( --progbar-text-color );\n}\n\n\ndiv.bar {\n\n\tdisplay:inline-block;\n\tbackground: #333;\n\toverflow:hidden;\n\tpadding:0;\n\tmin-height:1.5rem;\n\twidth:-webkit-fill-available;\n\twidth:-moz-available;\n\tborder-radius: var(--lg-radius);\n}\n\n\n</style>\n"],sourceRoot:""}]);const o=a},9751:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\ndiv.dot-view[data-v-54d5dc46] {\n\tdisplay:flex;\n\tposition:relative;\n\tflex-flow: row nowrap;\n\talign-items: center;\n\tjustify-content: space-around;\n\tborder: 1px solid var(--very-quiet-text-color);\n\toverflow-x: hidden;\n\toverflow-y: visible;\n\theight:100%;\n}\ndiv.dot-view .dot[data-v-54d5dc46] {\n\tflex: 1; margin: 0; font-size: 0.75em; text-overflow: ellipsis; white-space: nowrap;\n\tborder: none;\n\toutline: 1px solid var(--very-quiet-text-color);\n\tposition: relative;\n\ttext-align: center;\n\tpadding:var(--sm-gap);\n\tbackground: unset;\n}\ndiv.dot-view span.mini[data-v-54d5dc46] {\n\t\tdisplay:flex;\n\t\tflex-direction: row;\n\t\tjustify-content: space-around;\n\t\talign-items: center;\n}\ndiv.mini[data-v-54d5dc46] {\n\t\twidth:auto;\n\t\tfont-size: 0.7em;\n\t\tpadding:0;\n}\n\n","",{version:3,sources:["webpack://./src/ui/items/dotView.vue"],names:[],mappings:";AAsCA;CACA,YAAA;CACA,iBAAA;CACA,qBAAA;CACA,mBAAA;CACA,6BAAA;CACA,8CAAA;CACA,kBAAA;CACA,mBAAA;CACA,WAAA;AACA;AACA;CACA,OAAA,EAAA,SAAA,EAAA,iBAAA,EAAA,uBAAA,EAAA,mBAAA;CACA,YAAA;CACA,+CAAA;CACA,kBAAA;CACA,kBAAA;CACA,qBAAA;CACA,iBAAA;AACA;AAEA;EACA,YAAA;EACA,mBAAA;EACA,6BAAA;EACA,mBAAA;AACA;AAEA;EACA,UAAA;EACA,gBAAA;EACA,SAAA;AACA",sourcesContent:['<script>\nimport { abbr } from \'util/format.js\';\nimport ItemBase from \'ui/itemsBase\';\n\n/**\n * Actual dot display in combat/hud.\n */\nexport default {\n\n\tprops:[\'dots\', \'mini\', \'char\'],\n\tmixins:[ItemBase],\n\tbeforeCreate(){\n\t\tthis.abbr = abbr;\n\t}\n\n}\n<\/script>\n\n<template>\n\n\t<div class="dot-view" v-if="dots.length>0">\n\n\t\t<div :class="[\'dot\',d.kind, d.school, mini ? \'mini\':\'\']" v-for="d in dots" :key="d.id"\n\t\t@mouseenter.capture.stop="itemOver( $event, d, char )">\n\n\t\t\t<span v-if="!d.perm">{{ Math.ceil( d.duration ) }}</span>\n\t\t\t<span v-if="!mini"><br>{{ mini ? abbr( d ) : d.name }}</span>\n\n\t\t\t<div v-if="d.kind||d.school" class="bgfill" >&nbsp;</div>\n\n\t\t</div>\n\n\t</div>\n\n</template>\n\n<style scoped>\n\ndiv.dot-view {\n\tdisplay:flex;\n\tposition:relative;\n\tflex-flow: row nowrap;\n\talign-items: center;\n\tjustify-content: space-around;\n\tborder: 1px solid var(--very-quiet-text-color);\n\toverflow-x: hidden;\n\toverflow-y: visible;\n\theight:100%;\n}\ndiv.dot-view .dot {\n\tflex: 1; margin: 0; font-size: 0.75em; text-overflow: ellipsis; white-space: nowrap;\n\tborder: none;\n\toutline: 1px solid var(--very-quiet-text-color);\n\tposition: relative;\n\ttext-align: center;\n\tpadding:var(--sm-gap);\n\tbackground: unset;\n}\n\n\tdiv.dot-view span.mini {\n\t\tdisplay:flex;\n\t\tflex-direction: row;\n\t\tjustify-content: space-around;\n\t\talign-items: center;\n\t}\n\n\tdiv.mini {\n\t\twidth:auto;\n\t\tfont-size: 0.7em;\n\t\tpadding:0;\n\t}\n\n</style>\n'],sourceRoot:""}]);const o=a},800:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\n.tight[data-v-2d591720] {\n\tmargin:0;\n\tpadding:0;\n}\ndiv.item-desc[data-v-2d591720] {\n\tmargin: 0.6em 0 0.9em;\n\tfont-size: 0.96em;\n}\n.item-name[data-v-2d591720] {\n\tfont-weight: bold;\n}\n.separate > span[data-v-2d591720] {\n\tmargin-left:var(--small-gap);\n}\n.flavor[data-v-2d591720] {\n\tfont-style: italic;\n}\n\n","",{version:3,sources:["webpack://./src/ui/items/gdata.vue"],names:[],mappings:";AA+MA;CACA,QAAA;CACA,SAAA;AACA;AAEA;CACA,qBAAA;CACA,iBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;CACA,4BAAA;AACA;AACA;CACA,kBAAA;AACA",sourcesContent:['<script>\nimport Game from \'../../game\';\n\nimport ItemsBase from \'../itemsBase.js\';\nimport InfoBlock from \'./info-block.vue\';\nimport Attack from \'./attack.vue\';\nimport Dot from \'./dot-info.vue\';\n\nimport {precise} from \'../../util/format\';\n\nexport default {\n\tprops:[\'item\'],\n\tname:"gdata",\n\tmixins:[ItemsBase],\n\tcomponents:{\n\t\tinfo:InfoBlock,\n\t\tattack:Attack,\n\t\tdot:Dot\n\t},\n\tmethods:{\n\t\tprecise:precise,\n\n\t\t/**\n\t\t * Convert tag strings into viewable format.\n\t\t * @param {string|string[]} t\n\t\t * @returns {string|string[]}\n\t\t */\n\t\ttagNames( t ) {\n\n\t\t\tif ( Array.isArray(t) ) return t.map( this.tagNames, this );\n\n\t\t\tif ( typeof t === \'string\' && t.substring(0,2) === \'t_\' ) return t.slice(2).toTitleCase();\n\t\t\t\n\t\t\treturn t.toTitleCase();\n\n\t\t}\n\n\t},\n\tbeforeCreate(){\n\t\tthis.player = Game.state.player;\n\t},\n\tcomputed:{\n\n\t\tname(){return this.item.sname || this.item.name.toTitleCase(); },\n\t\tsellPrice(){ return Game.sellPrice(this.item);},\n\n\t\tnextImprove(){\n\t\t\treturn this.nextAt > 0 ? this.nextAt : this.nextEvery;\n\t\t},\n\n\t\t/**\n\t\t * Occurance of next \'every\' improvement relative to cur value.\n\t\t */\n\t\tnextEvery() {\n\n\t\t\tlet v = Math.floor( this.item.value );\n\n\t\t\tvar next = Number.MAX_VALUE;\n\n\t\t\tvar f;\t// save every-divisor for pct computation.\n\n\t\t\tfor( let p in this.item.every ) {\n\n\t\t\t\tvar dist = p - ( v % p );\n\t\t\t\tif ( dist < next ) {\n\t\t\t\t\tnext = dist;\n\t\t\t\t\tf = p;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn ( next !== Number.MAX_VALUE) ? ( (f-dist) / f ) : -1;\n\n\t\t},\n\n\t\tnextAt() {\n\n\t\t\tlet v = this.item.value;\n\n\t\t\t// least upper bound.\n\t\t\tvar sup = Number.MAX_VALUE;\n\t\t\tfor( let p in this.item.at ) {\n\t\t\t\tp = Number(p);\n\t\t\t\tif ( p > v && p < sup ) sup = p;\n\t\t\t}\n\n\t\t\treturn ( sup > v && sup !== Number.MAX_VALUE ) ? sup : -1;\n\n\t\t},\n\t\ttags(){\n\n\t\t\tlet t = this.item.tags;\n\t\t\tfor(var i=0; i < this.item.tags.length; i++) {\n\t\t\t\tif (this.item.tags[i] == \'gemimbue\') {\n\t\t\t\t\tthis.item.tags[i] = \'Imbue Gem\'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == \'magicgems\') {\n\t\t\t\t\tthis.item.tags[i] = \'Magic Gems\'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == \'prismaticgems\') {\n\t\t\t\t\tthis.item.tags[i] = \'Prismatic Gems\'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == \'elementalgems\') {\n\t\t\t\t\tthis.item.tags[i] = \'Elemental Gems\'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == \'primordialgems\') {\n\t\t\t\t\tthis.item.tags[i] = \'Primordial Gems\'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == \'elementalrunes\') {\n\t\t\t\t\tthis.item.tags[i] = \'Elemental Runes\'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == \'primaticrunes\') {\n\t\t\t\t\tthis.item.tags[i] = \'Prismatic Runes\'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == \'primordialrunes\') {\n\t\t\t\t\tthis.item.tags[i] = \'Primordial Runes\'\n\t\t\t\t};\n\t\t\t\tif (this.item.tags[i] == \'manas\') {\n\t\t\t\t\tthis.item.tags[i] = \'Mana energies\'\n\t\t\t\t};\n \t\t\t\tthis.item.tags[i] = this.item.tags[i];\n\t\t\t}\n\t\t\tif ( typeof t === \'string\') return this.tagNames(t);\n\t\t\telse if ( Array.isArray(t) ) return t.map( this.tagNames, this ).join(\', \');\n\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n\n<template>\n\n<div class="item-info">\n\t<span class="separate">\n\t\t<span class="item-name">{{name.toString().toTitleCase()}}</span>\n\n\t\t\t<span v-if="item.type===\'resource\'||item.type===\'stat\'">{{ item.current.toFixed(0) + ( item.max ? (\' / \' + Math.floor(item.max.value ) ) :\'\' ) }}</span>\n\t\t\t<span v-else-if="item.type===\'furniture\'">max: {{\n\t\t\t\titem.max ? Math.floor(item.max.value ) : ( (item.repeat) ? \'&infin;\' : 1) }}</span>\n\n\t\t\t<span v-if="item.sym">{{item.sym}}</span>\n\n\n\t</span>\n\t<div class="tight note-text" v-if="item.tags||item.hands"><span v-if="item.hands>1">Two-Handed </span>{{tags}}</div>\n\t\t<span class="flex-right" v-if="item.rate&&item.rate.value!=0">{{ precise( item.rate.value ) }}/s</span>\n\t\t<div>\n\n\t\t<span class="separate">\n\t\t\t<span v-if="item.showLevel">Level: {{item.showLevel()}}</span>\n\t\t\t<span v-else-if="item.level">Level: {{item.level}}</span>\n\n\t\t\t<span v-if="item.slot">Slot: {{ item.slot.toString().toTitleCase() }}</span>\n\t\t</span>\n\t\t<span v-if="item.enchants&&item.enchants.max>0">Enchant Levels: {{item.enchants.value}} / {{ item.enchants.max }}</span>\n\n\t\t<span v-if="item.at&&(nextAt>0)" class="note-text">\n\t\t\tNext Improvement: {{ Math.round(100*item.value/nextAt)+\'%\'}}\n\t\t</span>\n\t\t<span v-else-if="item.every&&(nextEvery>=0)" class="note-text">\n\t\t\tNext Improvement: {{ Math.round(100*nextEvery)+\'%\'}}\n\t\t</span>\n\n\t\t\t<div v-if="item.cd||item.timer>0" class="note-text">Cooldown: {{ item.timer > 0 ? item.timer.toFixed(2) + \' Left\' : item.cd + \'s\' }}</div>\n\n\t\t\t<div v-if="item.dist">Distance: {{item.dist}}</div>\n\t\t\t<div v-if="item.armor">Armor: {{ item.armor }}</div>\n\t\t\t<div class="item-desc" v-if="item.desc">{{ item.desc }}</div>\n\n\t\t</div>\n\n\t\t<info v-if="item.need" :info="item.need" title="Need" />\n\t\t<info v-if="item.buy&&!item.owned" :info="item.buy" title="Purchase Cost" />\n\t\t<info v-if="item.cost&&item.id != \'bloodshot\'" :info="item.cost" title="Cost" />\n\t\t<info v-if="item.cost&&item.id == \'bloodshot\'" :info="\'Life: \' + (this.player.hp/3).toFixed(2)" title="Cost" />\n\t\t<info v-if="item.sell||item.instanced||item.type===\'Furniture\'" :info="sellPrice" title="Sell" />\n\t\t<info v-if="item.run" :info="item.run" title="Progress Cost" rate="true" />\n\n\t\t<attack v-if="item.attack" :item="item" />\n\n\t\t<div v-if="item.effect" class="info-sect">Effects:</div>\t\t\t\t\n\t\t<info v-if="item.effect" :info="item.effect" :rate="item.perpetual||item.length>0" />\n\t\t<div v-if="item.mod||item.alter" class="info-sect">Modifications:</div>\t\t\t\t\n\t\t<info v-if="item.mod" :info="item.mod" />\n\t\t<info v-if="item.alter" :info="item.alter" />\n\t\t<div v-if="item.result" class="info-sect">Results:</div>\n\t\t<info v-if="item.result" :info="item.result" />\n\t\t<div v-if="item.use" class="info-sect">When used:</div>\n\t\t<info v-if="item.use" :info="item.use" />\n\t\t<div v-if="item.dot" class="info-sect">Buffs:</div>\n\t\t<dot v-if="item.dot" :dot="item.dot" :item="item" />\n\t\t\n\t\t<div v-if="item.lock||item.disable" class="info-sect">Locks:</div>\n\t\t<info v-if="item.lock" :info="item.lock" />\n\t\t<info v-if="item.disable" :info="item.disable" />\n\n\t\t<div class="note-text" v-if="item.flavor">{{item.flavor}}</div>\n</div>\n\n</template>\n\n\n<style scoped>\n\n.tight {\n\tmargin:0;\n\tpadding:0;\n}\n\ndiv.item-desc {\n\tmargin: 0.6em 0 0.9em;\n\tfont-size: 0.96em;\n}\n\n.item-name {\n\tfont-weight: bold;\n}\n\n.separate > span {\n\tmargin-left:var(--small-gap);\n}\n.flavor {\n\tfont-style: italic;\n}\n\n</style>'],sourceRoot:""}]);const o=a},5234:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\nhr[data-v-408e302f] {\n\tmargin-bottom: var(--sm-gap);\n}\ndiv.item-desc[data-v-408e302f] {\n\tmargin: 0.6em 0 0.9em;\n\tfont-size: 0.96em;\n}\n.item-name[data-v-408e302f] {\n\tfont-weight: bold;\n}\n.flavor[data-v-408e302f] {\n\tfont-style: italic;\n}\n\n","",{version:3,sources:["webpack://./src/ui/items/info-block.vue"],names:[],mappings:";AA2IA;CACA,4BAAA;AACA;AAEA;CACA,qBAAA;CACA,iBAAA;AACA;AAEA;CACA,iBAAA;AACA;AACA;CACA,kBAAA;AACA",sourcesContent:["<script>\nimport ItemsBase from '../itemsBase.js';\nimport { InfoBlock, DisplayName, ConvertPath } from './infoBlock';\n\n/**\n * Display for a sub-block of gdata, such as item.effect, item.result, item.run, etc.\n *\n * @property {boolean} rate - info items are 'rate' per-second items.\n */\nexport default {\n\tprops:['title', 'info', 'rate'],\n\tmixins:[ItemsBase],\n\tbeforeCreate(){\n\t\tthis.infos = new InfoBlock();\n\t},\n\tcomputed:{\n\t\teffects(){\n\n\t\t\tthis.infos.clear();\n\t\t\treturn this.effectItems( this.info, this.rate );\n\n\t\t}\n\n\t},\n\tmethods:{\n\t\t/**\n\t\t *\n\t\t * @param {*} obj\n\t\t * @param {boolean} rate - items represent /sec rates.\n\t\t */\n\t\teffectItems( obj, rate=false) {\n\n\t\t\tlet type = typeof obj;\n\n\t\t\tif ( type === 'number') {\n\n\t\t\t\t//@todo still happens. mostly for sell cost as gold.\n\t\t\t\t//console.warn('effect type is number: ' + obj) ;\n\t\t\t\tthis.infos.add( 'gold', obj, this.rate );\n\n\t\t\t} else if ( type === 'string') {\n\n\t\t\t\tthis.infos.add( DisplayName(obj), true, false, InfoBlock.GetItem( obj ) );\n\n\t\t\t} else if ( Array.isArray(obj) ) obj.forEach( v=>this.effectList(v) );\n\t\t\telse if ( type === 'function' ) {\n\n\t\t\t\t/*if ( !obj.fText ){\n\t\t\t\t\tobj.fText = funcText( obj, Game );\n\t\t\t\t\tinfos[obj.fText] = true;\n\t\t\t\t}*/\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\t\t\telse if ( type === 'object') {\n\n\t\t\t\tthis.effectList( obj, '', rate );\n\n\t\t\t}\n\n\t\t\treturn this.infos.results;\n\n\t\t},\n\n\t\t/**\n\t\t * @param {Object} obj - object of effects to enumerate.\n\t\t * @param {string} rootPath - prop path from base.\n\t\t * @param {boolean} rate - whether display is per/s rate.\n\t\t */\n\t\teffectList( obj, rootPath='', rate=false, refItem=null ) {\n\n\t\t\tif ( typeof obj === 'string' ) {\n\t\t\t\tthis.infos.add( DisplayName(obj), true, rate, InfoBlock.GetItem(obj, refItem) );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor( let p in obj ) {\n\n\t\t\t\tlet sub = obj[p];\n\t\t\t\tif ( sub === null || sub === undefined || p === 'skipLocked' ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet subItem = InfoBlock.GetItem( p, refItem );\n\n\t\t\t\tlet subRate = rate;\n\t\t\t\t// displayed path to subitem.\n\t\t\t\tlet subPath = ConvertPath( rootPath, p );\n\n\t\t\t\t// path conversion indicated no display.\n\t\t\t\tif ( subPath === undefined ) continue;\n\n\t\t\t\tif ( typeof sub !== 'object' ) this.infos.add(subPath, sub, subRate, subItem );\n\t\t\t\telse if ( typeof sub !== 'function' ) {\n\n\t\t\t\t\tif ( sub.skipLocked ) {\n\n\t\t\t\t\t\tlet refItem = this.infos.rootItem;\n\t\t\t\t\t\tif ( refItem && (refItem.locked || refItem.disabled) ) continue;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( sub.constructor !== Object ) {\n              this.infos.add(subPath, sub, subRate, subItem);\n\t\t\t\t\t} else {\n            //special code for DOT subpath, currently unique to potions\n            if(subPath === 'dot') {\n              sub = {...sub}\n              if(sub.id) delete sub.id;\n              if(sub.name) delete sub.name;\n              if(sub[undefined]) delete sub[undefined];\n            }\n\t\t\t\t\t  this.effectList( sub, subPath, subRate, subItem );\n          }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n<\/script>\n\n\n<template>\n\n\t<div v-if=\"info&&effects\">\n\n\t\t<div v-if=\"title\" class=\"note-text\"><hr>{{ title }}</div>\n\t\t<div v-for=\"v in effects\" :key=\"v.name\">\n      <span>{{ v.toString() }}</span>\n\t\t</div>\n\n\n\t</div>\n\n\n</template>\n\n\n<style scoped>\n\nhr {\n\tmargin-bottom: var(--sm-gap);\n}\n\ndiv.item-desc {\n\tmargin: 0.6em 0 0.9em;\n\tfont-size: 0.96em;\n}\n\n.item-name {\n\tfont-weight: bold;\n}\n.flavor {\n\tfont-style: italic;\n}\n\n</style>"],sourceRoot:""}]);const o=a},9974:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\ndiv.full[data-v-6f034aea] {\n\tdisplay:flex;\n\tbackground:inherit;\n\tflex-direction: column;\n\tmin-width:50vw;\n\tmax-height:100vh;\n\theight:100vh;\n}\ndiv.game-mid div.main-tasks[data-v-6f034aea] {\n\toverflow-y: auto;\n\theight:100%;\n}\ndiv.upgrade-list[data-v-6f034aea] {\n\tmin-height:0;\n\t/*border-top: 1px solid var( --separator-color );*/\n\tmargin-top:var(--sm-gap);\n}\ndiv.inv-equip[data-v-6f034aea] {\n\theight:100%;\n\tpadding: 0; display: grid; grid-template-rows: 50% 50%; grid-auto-columns: 1fr;\n}\ndiv.inv-equip > div[data-v-6f034aea]:nth-child(2) {\n    border-top: 1px solid var(--separator-color);\n}\ndiv.bot-bar[data-v-6f034aea] {\n\tbackground: inherit;\n\tborder-top: 1px solid var(--separator-color); padding: var(--md-gap);\n}\n\n","",{version:3,sources:["webpack://./src/ui/main.vue"],names:[],mappings:";AAydA;CACA,YAAA;CACA,kBAAA;CACA,sBAAA;CACA,cAAA;CACA,gBAAA;CACA,YAAA;AACA;AAEA;CACA,gBAAA;CACA,WAAA;AACA;AAGA;CACA,YAAA;CACA,kDAAA;CACA,wBAAA;AACA;AAEA;CACA,WAAA;CACA,UAAA,EAAA,aAAA,EAAA,2BAAA,EAAA,sBAAA;AACA;AAEA;IACA,4CAAA;AACA;AAEA;CACA,mBAAA;CACA,4CAAA,EAAA,sBAAA;AACA",sourcesContent:["<script>\nimport Profile from 'modules/profile';\nimport Game from 'game';\nimport Menu from './components/menu.vue';\nimport ResoucesView from './panes/resources.vue';\nimport Tasks from './sections/tasks.vue';\nimport Quickbar from './quickbar.vue';\nimport ItemsBase from './itemsBase';\nimport Vitals from './panes/vitals.vue';\nimport DotView from './items/dotView.vue';\nimport TopBar from './top-bar.vue';\n\nimport Warn from 'ui/popups/warn.vue';\nimport ItemPopup, { RollOver, ItemOut } from './popups/itemPopup.vue';\nimport SettingsUI from './popups/settings.vue';\n\nimport LogView from './outlog.vue';\n\nimport Settings from 'modules/settings';\nimport Cheats from 'debug/cheats';\nimport DevConsole from 'debug/devconsole.vue';\n\nimport { TRY_BUY, USE, TRY_USE, EVT_STAT } from '../events';\nimport { TICK_TIME } from '../game';\nimport { TASK } from '../values/consts';\nimport Task from '../items/task';\n\n/**\n * @const {number} SAVE_TIME  - time in seconds between auto-saves.\n */\nconst SAVE_TIME = 30;\n\n/**\n * @listens [sell]\n */\nexport default {\n\n\t//mixins:__DIST ? [ItemsBase] : [ItemsBase,Cheats],\\\n\tmixins:[ItemsBase,Cheats],\n\tcomponents:{\n\t\tdevconsole:DevConsole,\n\t\tresources:ResoucesView,\n\t\ttasks:Tasks,\n\t\titempopup:ItemPopup,\n\t\tvitals:Vitals,\n\t\tlog:LogView,\n\t\tquickbar:Quickbar,\n\t\tdots:DotView,\n\t\twarn:Warn,\n\t\ttopbar:TopBar,\n\t\tsettings:SettingsUI,\n\t\tlogin:()=>import( /* webpackChunkName: \"remote\" */ './popups/login.vue' ),\n\t\tregister:()=>import( /* webpackChunkName: \"remote\" */ './components/register.vue' ),\n\t\tactivities:()=>import( /* webpackChunkName: \"popups-ui\" */ './popups/activities.vue' ),\n\t\tchoice:()=>import( /* webpackChunkName: \"popups-ui\" */ './popups/choice.vue' ),\n\n\t\tskills:()=> import( /* webpackChunkName: \"skills-ui\" */ './sections/skills.vue' ),\n\t\tequip:()=>import( /* webpackChunkName: \"equip-ui\" */ './sections/equip.vue'),\n\t\tinventory:()=> import( /* webpackChunkName: \"inv-ui\" */ './sections/inventory.vue' ),\n\t\tpotions:()=> import( /* webpackChunkName: \"potions-ui\" */ './sections/potions.vue'),\n\t\thome:()=>import( /* webpackChunkName: \"home-ui\" */ './sections/home.vue'),\n\t\tplayer:()=>import( /* webpackChunkName: \"player-ui\" */'./sections/player.vue'),\n\t\tbestiary:()=>import(/* webpackChunkName: \"bestiary-ui\" */ './sections/bestiary.vue' ),\n\t\tspells:()=>import( /* webpackChunkName: \"spells-ui\" */ './sections/spells.vue'),\n\t\tadventure:()=>import( /* webpackChunkName: \"raid-ui\" */ './sections/adventure.vue'),\n\t\tenchanting:()=>import( /* webpackChunkName: \"enchant-ui\" */'./sections/enchanting.vue' ),\n\t\tminions:()=>import( /* webpackChunkName: \"minions-ui\" */ './sections/minions.vue' ),\n\t\tscraft:()=>import( /* webpackChunkName: \"scraft-ui\" */ './sections/scraft.vue' ),\n\t\t'vue-menu':Menu\n\t},\n\tdata(){\n\n\t\treturn {\n\t\t\tstate:null,\n\t\t\tpsection:null,\n\t\t\ttogRegister:false,\n\t\t\tshowLogin:false,\n\t\t\ttogSettings:false,\n\t\t\t/** toggle activity manager */\n\t\t\ttogActivities:false\n\t\t};\n\n\t},\n\n\tbeforeCreate(){\n\n\t\t/**\n\t\t * @property {number} loopId - interval id for game loop.\n\t\t */\n\t\tthis.loopId = 0;\n\t\t/**\n\t\t * @property {number} repeaterId - interval id for auto-repeating click.\n\t\t */\n\t\tthis.repeaterId = 0;\n\n\t\t/**\n\t\t * @property {(evt)=>null} repeatEndFunc - mouseup func to end repeater.\n\t\t */\n\t\tthis.repeatEndFunc = null;\n\n\t},\n\n\tcreated(){\n\n\t\tthis.Profile = Profile;\n\n\t\tthis.listen('game-loaded', this.gameLoaded );\n\t\tthis.listen('setting', this.onSetting );\n\n\t\tthis.listen('pause', this.pause );\n\t\tthis.listen('unpause', this.unpause );\n\n\t\tthis.listen('show-register', this.onShowRegister, this);\n\t\tthis.listen('show-login', this.onShowLogin, this);\n\n\n\t},\n\tbeforeDestroy(){\n\n\t\tItemOut();\n\t\tthis.endRepeater();\n\n\t\tthis.removeListener('game-loaded', this.gameLoaded );\n\t\tthis.removeListener('setting', this.onSetting );\n\t\tthis.removeListener('pause', this.pause );\n\t\tthis.removeListener('unpause', this.unpause );\n\n\t\tthis.removeListener( 'show-register', this.onShowRegister );\n\t\tthis.removeListener( 'show-login', this.onShowLogin );\n\n\t},\n\tmethods:{\n\n\t\tgameLoaded() {\n\n\t\t\tthis.state = Game.state;\n\n\t\t\tlet curview = Settings.get('curview') || 'sect_main';\n\t\t\t//console.warn('VIEW CHANGE: ' +  curview );\n\t\t\tthis.section = this.state.sections.find( v=>v.id===curview );\n\n\t\t\tthis.initEvents();\n\n\t\t},\n\n\t\t/**\n\t\t * Listen non-system events.\n\t\t */\n\t\tinitEvents() {\n\n\t\t\tthis.add( 'sell', this.onSell );\n\t\t\tthis.add( 'take', this.onTake );\n\n\t\t\tthis.add( 'upgrade', this.onItem );\n\t\t\tthis.add( TASK, this.onItem );\n\t\t\tthis.add( 'spell', this.onItem );\n\n\t\t\tthis.add('equip', this.onEquip );\n\t\t\tthis.add('unequip', this.onUnequip );\n\t\t\tthis.add('enchant', this.onEnchant );\n\t\t\tthis.add('craft', this.onCraft );\n\t\t\t// display warn dialog.\n\t\t\tthis.add('warn', this.onWarn );\n\n\t\t\tthis.add('showActivities', ()=>{this.togActivities=true} )\n\n\t\t\tthis.add('repeater', this.makeRepeater, this );\n\t\t\tthis.add('endrepeater', this.endRepeater, this );\n\n\t\t\tthis.add( TRY_USE, this.tryUse )\n\t\t\tthis.add( USE, this.onUse );\n\n\t\t\tthis.add('quickslot', this.doQuickslot);\n\n\t\t\tthis.add( TRY_BUY, this.onBuy );\n\n\t\t\t// dispatch start stats.\n\t\t\tthis.dispatch( EVT_STAT, 'titles', this.state.player.titles.length );\n\t\t\tthis.dispatch( EVT_STAT, 'level', this.state.getData('level').valueOf() );\n\t\t\tthis.dispatch( EVT_STAT, 'prestige', this.state.getData('prestige').valueOf() );\n\n\t\t},\n\n\t\tonSetting( setting, val ) {\n\n\t\t\tif ( setting === 'autosave' ) {\n\t\t\t\tif ( val ) this.startAutoSave();\n\t\t\t\telse this.stopAutoSave();\n\t\t\t}\n\n\t\t},\n\n\t\tonShowLogin(){this.showLogin=true;},\n\t\tonShowRegister(){this.togRegister=true;},\n\n\t\tstopAutoSave() {\n\t\t\tif ( this.saver ) {\n\t\t\t\t//console.log('STOP AUTOSAVE');\n\t\t\t\tlet int = this.saver;\n\t\t\t\tthis.saver = null;\n\t\t\t\tclearInterval( int );\n\t\t\t}\n\t\t},\n\n\t\tstartAutoSave() {\n\n\t\t\tif (!this.loopId ) return;\n\t\t\tvar s = Settings;\n\t\t\t\tvar setting = s.get('autosave');\n\n\t\t\t//if ( setting && !this.saver ) { //renabled autosaver regardless\n\t\t\tif (!this.saver ) {\n\t\t\t\t//console.log('START AUTOSAVE');\n\t\t\t\tthis.saver = setInterval( ()=>this.dispatch('autosave'), 1000*SAVE_TIME );\n\t\t\t}\n\n\t\t},\n\n\t\tpause() {\n\n\t\t\tif ( this.loopId ) {\n\t\t\t\tlet int = this.loopId;\n\t\t\t\tthis.loopId = 0;\n\t\t\t\tclearInterval( int );\n\t\t\t}\n\t\t\tthis.stopAutoSave();\n\t\t\tthis.endRepeater();\n\n\t\t\tif ( this.keyListen ) window.removeEventListener('keydown', this.keyListen, false );\n\n\n\t\t},\n\n\n\t\t/**\n\t\t * Item repeats until released.\n\t\t * @param {GData} it - item being used.\n\t\t */\n\t\tmakeRepeater( it ){\n\n\t\t\tif ( this.repeaterId ) {\n\t\t\t\tclearInterval(this.repeaterId );\n\t\t\t\tthis.repeaterId = 0;\n\t\t\t}\n\t\t\tthis.repeaterId = setInterval( (t)=>Game.tryItem(t), 50, it );\n\n\t\t\tif ( !this.repeatEndFunc ) this.repeatEndFunc = ()=>this.endRepeater();\n\t\t\tdocument.addEventListener( 'mouseup', this.repeatEndFunc );\n\n\t\t},\n\n\t\t/**\n\t\t * Cancel active repeater.\n\t\t */\n\t\tendRepeater(){\n\n\t\t\tif ( this.repeaterId ) {\n\t\t\t\tclearInterval(this.repeaterId );\n\t\t\t\tthis.repeaterId=0;\n\t\t\t}\n\t\t\tif ( this.repeatEndFunc ) {\n\t\t\t\tdocument.removeEventListener( 'mouseup', this.repeatEndFunc );\n\t\t\t\tthis.repeatEndFunc = null;\n\t\t\t}\n\n\t\t},\n\n\t\tunpause() {\n\n\t\t\tif ( Game.loaded ) {\n\n\t\t\t\tGame.lastUpdate = Date.now();\n\t\t\t\tif ( !this.loopId ) {\n\t\t\t\t\tthis.loopId = setInterval( ()=>Game.update(), TICK_TIME );\n\t\t\t\t}\n\n\t\t\t\tthis.keyListen = evt=>{\n\t\t\t\tif ( evt.repeat) return;\n\t\t\t\tthis.keyDown( evt ); evt.stopPropagation(); }\n\n\t\t\t\twindow.addEventListener('keydown', this.keyListen, false );\n\t\t\t\tthis.startAutoSave();\n\n\t\t\t}\n\n\n\t\t},\n\n\t\tkeyDown( e ){\n\n\t\t\tif ( !this.loopId ) return;\n\n\t\t\tlet slice = e.code.slice(0,-1);\n\t\t\tif ( slice === 'Digit' || slice === 'Numpad' ) {\n\n\t\t\t\tlet num = Number( e.code.slice(-1) );\n\t\t\t\t//console.log('number: ' + num );\n\n\t\t\t\tif ( e.shiftKey && RollOver.item ) {\n\n\t\t\t\t\tlet it = RollOver.item;\n\t\t\t\t\tthis.state.setQuickSlot( RollOver.item, num );\n\n\t\t\t\t} else {\n\t\t\t\t\tlet it = this.state.getQuickSlot(num);\n\t\t\t\t\tif ( it) this.doQuickslot(it);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t},\n\n\t\tdoQuickslot(it) {\n\t\t\t Game.tryItem( it.slotTarget( Game ) );\n\t\t},\n\n\t\tonEquip( it, inv ) { Game.equip( it,inv ); },\n\n\t\tonUnequip(slot, it){ Game.unequip(slot, it) },\n\n\t\tonTake(it) { Game.take(it); },\n\n\t\tonCraft(it) { Game.craft(it); },\n\n\t\t/**\n\t\t * Use instanced item.\n\t\t */\n\t\tonUse( it, inv ) { Game.use(it, inv); },\n\n\t\t/**\n\t\t * @param {Enchant} e - enchantment\n\t\t * @param {Item} targ - enchant target.\n\t\t */\n\t\tonEnchant( e, targ ) {\n\t\t\tGame.tryUseOn( e, targ );\n\t\t},\n\n\t\tonSell( it, inv, count ) { Game.trySell( it, inv, count ); },\n\n\t\titemOut:ItemOut,\n\n\t\t/**\n\t\t * Item clicked.\n\t\t */\n\t\tonItem(item) {\n\n\t\t\tif ( item.warn ) { //&& !Settings.getSubVar('nowarn', item.id)) {\n\n\t\t\t\tthis.$refs.warn.show( item );\n\n\t\t\t} else Game.tryItem(item);\n\n\t\t},\n\n\t\tonConfirmed(it, nowarn) {\n\n\t\t\tif ( typeof it !== 'string' ) {\n\t\t\t\tit.warn = !nowarn;\n\t\t\t\tGame.tryItem(it);\n\t\t\t}\n\n\t\t},\n\n\t\t/**\n\t\t * Warning should trigger.\n\t\t * @param {string} msg - warning message\n\t\t * @param {()=>{}} res - success callback.\n\t\t */\n\t\tonWarn( msg, res ) {\n\t\t\tthis.$refs.warn.show( msg, res );\n\t\t},\n\n\t\ttryUse( it ) { Game.tryItem(it ) },\n\n\t\t/**\n\t\t * Buy a spell or item without casting/using the item or its mods.\n\t\t * @property {Item} item - item to buy.\n\t\t */\n\t\tonBuy(item) { Game.tryBuy( item ); }\n\n\t},\n\tcomputed:{\n\n\t\tsection:{\n\n\t\t\tget(){ return this.psection; },\n\t\t\tset(v){\n\n\t\t\t\tthis.psection=v;\n\t\t\t\tif ( v ) Settings.set('curview', v.id );\n\t\t\t}\n\t\t},\n\t\tmenuItems(){ return this.state.sections.filter( it=>!this.locked(it) ); }\n\n\t}\n\n}\n<\/script>\n\n<template>\n\n\t<div class=\"full\" @mouseover.capture.stop=\"itemOut\">\n\n\t\t<devconsole />\n\t\t<topbar @open-settings=\"togSettings=true\">\n\t\t\t<template slot=\"center\">\n\t\t\t<span class=\"load-message\" v-if=\"!state\">LOADING DATA...</span>\n\t\t\t<dots v-if=\"state\" :dots=\"state.player.dots\" />\n\t\t\t</template>\n\t\t</topbar>\n\n\x3c!-- popups --\x3e\n\t\t<itempopup />\n\t\t<warn ref=\"warn\" @confirmed=\"onConfirmed\" />\n\t\t<choice />\n\t\t<register v-if=\"Profile.CLOUD&&togRegister\" @close=\"togRegister=false\" />\n\t\t<login v-if=\"Profile.CLOUD&&showLogin\" @close=\"showLogin=false\" />\n\t\t<settings v-if=\"togSettings\" @close-settings=\"togSettings=false\" />\n\t\t<activities v-if=\"togActivities\" @close=\"togActivities=false\" />\n\n\x3c!-- end popups --\x3e\n\n\t\t<div v-if=\"state\" class=\"game-main\">\n\n\t\t<resources :items=\"state.resources\"/>\n\n\t\t<vue-menu class=\"game-mid\" :items=\"menuItems\" v-model=\"section\">\n\n\t\t<template slot=\"sect_main\">\n\t\t<tasks class=\"main-tasks\" />\n\t\t</template>\n\n\t\t<template slot=\"sect_skills\"><skills :state=\"state\"></skills></template>\n\n\t\t<template slot=\"sect_player\"><player /></template>\n\n\t\t<template slot=\"sect_home\"><home :state=\"state\" /></template>\n\n\t\t<template slot=\"sect_raid\"><adventure :state=\"state\" /></template>\n\n\t\t<template slot=\"sect_equip\">\n\n\t\t\t<div class=\"inv-equip\">\n\t\t\t\t<equip :equip=\"state.equip\" />\n\t\t\t\t<inventory :inv=\"state.inventory\" />\n\t\t\t</div>\n\n\t\t</template>\n\n\t\t<template slot=\"sect_spells\"><spells /></template>\n\t\t<template slot=\"sect_scraft\"><scraft /></template>\n\n\t\t<template slot=\"sect_potions\"><potions /></template>\n\n\t\t<template slot=\"sect_bestiary\"><bestiary /></template>\n\t\t<template slot=\"sect_minions\"><minions :minions=\"state.minions\" /></template>\n\n\t\t<template slot=\"sect_enchant\"><enchanting /></template>\n\t\t</vue-menu>\n\n\t\t<vitals :state=\"state\" />\n\n\t\t<log />\n\n\t\t</div>\n\n\t\t<quickbar v-if=\"state\" class=\"bot-bar\" :bars=\"state.bars\" />\n\n\t</div>\n</template>\n\n<style scoped>\n\ndiv.full {\n\tdisplay:flex;\n\tbackground:inherit;\n\tflex-direction: column;\n\tmin-width:50vw;\n\tmax-height:100vh;\n\theight:100vh;\n}\n\ndiv.game-mid div.main-tasks {\n\toverflow-y: auto;\n\theight:100%;\n}\n\n\ndiv.upgrade-list {\n\tmin-height:0;\n\t/*border-top: 1px solid var( --separator-color );*/\n\tmargin-top:var(--sm-gap);\n}\n\ndiv.inv-equip {\n\theight:100%;\n\tpadding: 0; display: grid; grid-template-rows: 50% 50%; grid-auto-columns: 1fr;\n}\n\ndiv.inv-equip > div:nth-child(2) {\n    border-top: 1px solid var(--separator-color);\n}\n\ndiv.bot-bar {\n\tbackground: inherit;\n\tborder-top: 1px solid var(--separator-color); padding: var(--md-gap);\n}\n\n</style>"],sourceRoot:""}]);const o=a},3718:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\ndiv.log-view[data-v-c9d4ddf0] {\n\t\tborder-left:1px solid var(--very-quiet-text-color);\n\t\tdisplay:flex;\n\t\tflex-flow: column nowrap;\n\t\tmargin-left: var(--md-gap);\n\t\tflex-basis:20%;\n\t\tmax-width: 14em;\n\t\tmax-height: inherit;\n        min-width: 8em;\n        margin: 0;\n}\ndiv.log-view div.top-span[data-v-c9d4ddf0] {\n\t\tmax-height: unset;\n\t\tborder-bottom: 1px solid var(--separator-color);\n\t\tdisplay:flex;\n\t\tflex-flow: row nowrap;\n\t\tmargin: var(--tiny-gap) 0;\n\t\tpadding-bottom: var(--tiny-gap);\n}\ndiv.log-view div.top-span .checks[data-v-c9d4ddf0] {\n        display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr;\n        height: 4em; align-items: center;\n\t\tfont-size: 0.8em;\n\t\tdisplay:flex;\n\t\tflex-flow: row wrap;\n\t\talign-items: flex-start;\n}\ndiv.log-view div.top-span .checks span[data-v-c9d4ddf0] { flex-basis: 50%; overflow: hidden; white-space: nowrap;\n}\ndiv.log-view .outlog[data-v-c9d4ddf0] {\n\t\tdisplay:flex;\n        overflow-y: auto; flex-direction: column;\n        max-height: unset; flex: 1; font-size: var(--compact-small-font);\n}\n\n","",{version:3,sources:["webpack://./src/ui/outlog.vue"],names:[],mappings:";AA+GA;EACA,kDAAA;EACA,YAAA;EACA,wBAAA;EACA,0BAAA;EACA,cAAA;EACA,eAAA;EACA,mBAAA;QACA,cAAA;QACA,SAAA;AACA;AAEA;EACA,iBAAA;EACA,+CAAA;EACA,YAAA;EACA,qBAAA;EACA,yBAAA;EACA,+BAAA;AACA;AAEA;QACA,aAAA,EAAA,8BAAA,EAAA,2BAAA;QACA,WAAA,EAAA,mBAAA;EACA,gBAAA;EACA,YAAA;EACA,mBAAA;EACA,uBAAA;AACA;AACA,0DAAA,eAAA,EAAA,gBAAA,EAAA,mBAAA;AAAA;AAEA;EACA,YAAA;QACA,gBAAA,EAAA,sBAAA;QACA,iBAAA,EAAA,OAAA,EAAA,oCAAA;AACA",sourcesContent:['<script>\nimport { LogTypes} from \'../events\';\nimport Game from \'../game\';\n\n/**\n * Displays event output to user.\n */\nexport default {\n\n\tdata() {\n\n\t\tvar filter = 0;\n\t\tfor( let p in LogTypes) {\n\t\t\tfilter |= LogTypes[p];\n\t\t}\n\n\t\treturn {\n\t\t\tlog:Game.log,\n\t\t\tLogTypes:LogTypes,\n\t\t\tfilter:filter,\n\t\t\tshowOptions:false\n\n\t\t\t/**\n\t\t\t * @property {string[]} exclude - types to exclude.\n\t\t\t */\n\t\t}\n\n\t},\n\tmethods:{\n\n\t\tchanged( box ) {\n\n\t\t\tif ( box.checked ) {\n\t\t\t\tthis.filter = this.filter|box.value;\n\t\t\t} else {\n\t\t\t\tthis.filter = (~box.value)&this.filter;\n\n\t\t\t}\n\n\t\t},\n\n\t\tdoOptions() {\n\t\t\tthis.showOptions = !this.showOptions;\n\t\t},\n\n\t\tclearLog(){ this.log.clear(); }\n\n\t},\n\tcomputed:{\n\n\t\tvisItems(){\n\n\t\t\tlet all = this.log.items;\n\n\t\t\tlet a = [];\n\n\t\t\tfor( let i = all.length-1; i>=0; i-- ) {\n\n\t\t\t\tvar it = all[i];\n\t\t\t\tif ( !it.type || (this.filter&it.type)>0 ) a.push(it);\n\t\t\t}\n\t\t\treturn a;\n\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n\n<template>\n\n\t<div class="log-view">\n\n\t\t\t<div class="top-span">\n\t\t\t\t<button type="button" class="inline btn-sm" @click="clearLog">Clear</button>\n\t\t\t\t\x3c!--<button class="text-button" @click="doOptions">&#9881;</button>--\x3e\n\t\t\t\t<span class="checks">\n\n\t\t\t\t<span v-for="(p,k) in LogTypes" :key="k">\n\t\t\t\t\t<input type="checkbox" :value="p" :id="elmId(k)" :checked="filter&p" @change="changed( $event.target )" >\n\t\t\t\t\t<label :for="elmId(k)">{{ k.toString().toTitleCase() }}</label>\n\t\t\t\t</span>\n\t\t\t\t</span>\n\n\t\t\t\t<div v-if="showOptions" class="options">\n\t\t\t\t</div>\n\n\t\t\t</div>\n\n\n\t\t\t<div class="outlog">\n\t\t\t<div class="log-item" v-for="(it,i) in visItems" :key="i">\n\n\t\t\t\t<div>\n\t\t\t\t\t<span v-if="it.title" class="log-title item-name">{{it.title}}</span>\n\t\t\t\t</div>\n\t\t\t\t<span class="log-text">{{ it.text }}</span>\n\t\t\t\t<span class="num-align" v-if="it.count>1">(x{{it.count}})</span>\n\n\t\t\t</div>\n\t\t\t</div>\n\n\t</div>\n\n</template>\n\n<style scoped>\n\n\n    div.log-view {\n\t\tborder-left:1px solid var(--very-quiet-text-color);\n\t\tdisplay:flex;\n\t\tflex-flow: column nowrap;\n\t\tmargin-left: var(--md-gap);\n\t\tflex-basis:20%;\n\t\tmax-width: 14em;\n\t\tmax-height: inherit;\n        min-width: 8em;\n        margin: 0;\n\t}\n\n    div.log-view div.top-span {\n\t\tmax-height: unset;\n\t\tborder-bottom: 1px solid var(--separator-color);\n\t\tdisplay:flex;\n\t\tflex-flow: row nowrap;\n\t\tmargin: var(--tiny-gap) 0;\n\t\tpadding-bottom: var(--tiny-gap);\n\t}\n\n    div.log-view div.top-span .checks {\n        display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr;\n        height: 4em; align-items: center;\n\t\tfont-size: 0.8em;\n\t\tdisplay:flex;\n\t\tflex-flow: row wrap;\n\t\talign-items: flex-start;\n    }\n    div.log-view div.top-span .checks span { flex-basis: 50%; overflow: hidden; white-space: nowrap; }\n\n\tdiv.log-view .outlog {\n\t\tdisplay:flex;\n        overflow-y: auto; flex-direction: column;\n        max-height: unset; flex: 1; font-size: var(--compact-small-font);\n\t}\n\n</style>\n'],sourceRoot:""}]);const o=a},9417:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\ndiv.groupTitle[data-v-05eb1bc6] {\n\tcursor: pointer;\n\ttext-transform: capitalize;\n\tcolor: var( --title-text-color );\n\tborder: 1px solid var(--list-header-border);\n\tbackground-color: var(--list-header-color);\n\tpadding:1px;\n\tmargin:-1px 0 0 0px;\n}\n.rsrc .item-name[data-v-05eb1bc6] {\n\tflex:1;\n\tcolor:#999;\n\tpadding-right: var(--sm-gap);\n}\n\n","",{version:3,sources:["webpack://./src/ui/panes/itemGroup.vue"],names:[],mappings:";AA+DA;CACA,eAAA;CACA,0BAAA;CACA,gCAAA;CACA,2CAAA;CACA,0CAAA;CACA,WAAA;CACA,mBAAA;AACA;AAEA;CACA,MAAA;CACA,UAAA;CACA,4BAAA;AACA",sourcesContent:['<script>\nimport ItemsBase from \'ui/itemsBase\';\nexport default {\n\n\t/**\n\t * @property {string} group - displayed group name.\n\t * @property {object<string,boolean>} - elements to hide.\n\t */\n\tprops:[ \'items\', \'group\', \'hide\'],\n\tmixins:[ItemsBase],\n\tdata(){\n\n\t\treturn {\n\t\t\tisOpen:true\n\t\t}\n\n\t},\n\tcomputed:{\n\n\t\tshown(){\n\n\t\t\tlet a = [];\n\t\t\tlet len = this.items.length;\n\t\t\tfor( let i = 0; i < len; i++ ) {\n\n\t\t\t\tlet it = this.items[i];\n\t\t\t\tif ( !this.reslocked( it ) && !this.hide[it.id ] ) a.push(it);\n\t\t\t}\n\n\t\t\treturn a;\n\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n<template>\n\n<div v-if="shown.length>0">\n\n<div class="groupTitle separate" @click="isOpen=!isOpen"><span>{{group}}</span><span class="arrows">{{ isOpen ? \'▼\' : \'▲\' }}</span></div>\n<div v-if="isOpen">\n\n\t\t<div class="rsrc separate hidable" v-for="it in shown"\n\t\t\t:data-key="it.id" :key="it.id"\n\t\t\t@mouseenter.capture.stop="itemOver($event,it)">\n\n\t\t\t<span class="item-name">{{ it.name }}</span>\n\t\t\t<span class="num-align">{{ Math.floor( it.value ) + ( it.max && it.max.value>0 ? \'/\' + Math.floor(it.max.value) : \'\' )}}</span>\n\t\t\t\x3c!--<td>{{ it.delta != 0 ? \'&nbsp;(\' + it.delta.toFixed(2) + \'/t )\' : \'\'}}</td>--\x3e\n\n\t</div>\n\n</div>\n\n</div>\n\n</template>\n\n<style scoped>\n\ndiv.groupTitle {\n\tcursor: pointer;\n\ttext-transform: capitalize;\n\tcolor: var( --title-text-color );\n\tborder: 1px solid var(--list-header-border);\n\tbackground-color: var(--list-header-color);\n\tpadding:1px;\n\tmargin:-1px 0 0 0px;\n}\n\n.rsrc .item-name {\n\tflex:1;\n\tcolor:#999;\n\tpadding-right: var(--sm-gap);\n}\n\n</style>'],sourceRoot:""}]);const o=a},3090:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\ndiv.res-list[data-v-1090363f] {\n\toverflow-y:auto;\n\toverflow-x:visible;\n\twidth: fit-content;\n\tmargin: 0; padding: 0;\n\tmin-width: 11rem;\n}\n","",{version:3,sources:["webpack://./src/ui/panes/resources.vue"],names:[],mappings:";AA4EA;CACA,eAAA;CACA,kBAAA;CACA,kBAAA;CACA,SAAA,EAAA,UAAA;CACA,gBAAA;AACA",sourcesContent:['<script>\nimport UIMixin from \'ui/uiMixin\';\nimport Settings from \'modules/settings\';\n\nimport ItemGroup from \'ui/panes/itemGroup.vue\';\n\nexport default {\n\n\t/**\n\t * @property {Resource[]} items\n\t */\n\tprops:[\'items\'],\n\tmixins:[ UIMixin],\n\n\tdata(){\n\n\t\tlet ops = Settings.getSubVars(\'resview\');\n\t\tif (!ops.hide) ops.hide = {};\n\n\t\treturn {\n\n\t\t\t/**\n\t\t\t * @property {.<string,GData[]>} groups - maps group name to items array.\n\t\t\t */\n\t\t\tgroups:null,\n\t\t\thide:ops.hide\n\t\t}\n\n\t},\n\tcomponents:{\n\t\tgroup:ItemGroup\n\t},\n\tcreated(){\n\n\t\t// build item groups.\n\t\tlet items = this.items;\n\t\tlet groups = {\n\t\t\tother:[]\n\t\t}\n\n\t\tlet group;\n\t\tlet len = items.length;\n\t\tfor( let i = 0; i < len; i++ ) {\n\n\t\t\tlet it = items[i];\n\t\t\tif ( it.hide ) continue;\n\t\t\tlet title = it.group || ( it.tags ? it.tags[0] : \'other\');\n\t\t\tif ( title === \'manas\' ) continue;\n\n\t\t\tgroup = groups[title] || ( groups[title] = [] );\n\n\t\t\tgroup.push(it );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t}\n\n}\n<\/script>\n\n\n<template>\n<div class="res-list">\n\n\t\t<div class="config"><button ref="btnHides" class="btnConfig"></button></div>\n\n\t\t<group class="res-group" v-for="(g,p) in groups" :items="g" :group="p" :hide="hide" :key="p" />\n\n</div>\n</template>\n\n<style scoped>\n\n\ndiv.res-list {\n\toverflow-y:auto;\n\toverflow-x:visible;\n\twidth: fit-content;\n\tmargin: 0; padding: 0;\n\tmin-width: 11rem;\n}\n</style>'],sourceRoot:""}]);const o=a},8349:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\ndiv.running[data-v-d3356d4e] {\n\tdisplay:flex;\n\tflex-flow: column nowrap;\n}\ndiv.running .relative[data-v-d3356d4e] {\n\tposition: relative;\n}\n\n","",{version:3,sources:["webpack://./src/ui/panes/running.vue"],names:[],mappings:";AA2EA;CACA,YAAA;CACA,wBAAA;AACA;AAEA;CACA,kBAAA;AACA",sourcesContent:['<script>\nimport Game from \'game\';\nimport {HALT_TASK, STOP_ALL} from \'../../events\';\nimport { SKILL, DUNGEON, EXPLORE, LOCALE, TYP_RUN, PURSUITS, TASK } from \'values/consts\';\n\nexport default {\n\n\tprops:[\'runner\'],\n\tcreated(){\n\t\tthis.game = Game;\n\t\tthis.STOP_ALL = STOP_ALL;\n\t\tthis.TASK = TASK;\n\t},\n\tcomputed:{\n\n\t\tfocus() { return Game.state.getData(\'focus\'); },\n\t\trestAction(){return Game.state.restAction },\n\t\tresting() {\n\t\t\treturn this.restAction.running;\n\t\t},\n\n\t\tpursuits(){return Game.state.getData(PURSUITS)}\n\n\t},\n\tmethods:{\n\n\t\ttaskStr( a ){\n\n\t\t\treturn (a.verb || a.name.toTitleCase() ) + (a.length ? ( \' \' + Math.floor(a.percent()) + \'%\' ) : \'\');\n\n\t\t},\n\t\tlevelStr(a){\n\t\t\treturn \' (\' + Math.floor( a.valueOf() ) + \'/\' + Math.floor(a.max.valueOf() ) +\')\';\n\t\t},\n\n\t\thalt(a) {\n\t\t\tthis.emit( HALT_TASK, a);\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n<template>\n\n<div>\n\t<div class="separate">\n\n\t\t<button class="btn-sm" @click="emit(STOP_ALL)">Stop All</button>\n\n\t\t<button class="btn-sm" @click="emit(TASK, restAction)" :disabled="resting"\n\t\t@mouseenter.capture.stop="itemOver($event, restAction )">{{ restAction.name.toTitleCase() }}</button>\n\t\t<button v-if="!focus.locked" class="btn-sm" @mouseenter.capture.stop="itemOver($event, focus )"\n\t\t\t:disabled="!focus.canUse(game)"\n      @click="emit(TASK,focus)"\n\t\t\t@mousedown="emit(\'repeater\', focus)">Focus</button>\n\t\t<button class="btnMenu" @click="emit(\'showActivities\')"></button>\n\t</div>\n\n\t<div class=\'running\'>\n\n\t\t<div class="relative" v-for="v of runner.actives" :key="v.id">\n\t\t\t<button class="stop" @click="halt(v)">&nbsp;X&nbsp;</button><span>{{ taskStr(v) }}</span><span v-if="v.type===\'skill\'">{{levelStr(v)}}</span>\n\t\t\t<button v-if="runner.canPursuit(v)" :class="[\'pursuit\', pursuits.includes( runner.baseTask(v) ) ? \'current\' : \'\']"\n\t\t\t\t@click="runner.togglePursuit(v)"> F </button>\n\t\t</div>\n\n\t</div>\n</div>\n\n</template>\n\n<style scoped>\n\ndiv.running {\n\tdisplay:flex;\n\tflex-flow: column nowrap;\n}\n\ndiv.running .relative {\n\tposition: relative;\n}\n\n</style>'],sourceRoot:""}]);const o=a},7664:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\n.vitals[data-v-e232ef86] {\n    text-transform: capitalize;\n    margin: 0; padding: 0;\n    min-width: 15rem; overflow-y :auto; overflow-x: hidden;\n}\n\n\n","",{version:3,sources:["webpack://./src/ui/panes/vitals.vue"],names:[],mappings:";AA8EA;IACA,0BAAA;IACA,SAAA,EAAA,UAAA;IACA,gBAAA,EAAA,gBAAA,EAAA,kBAAA;AACA",sourcesContent:['<script>\nimport ProgBar from \'ui/components/progbar.vue\';\nimport Running from \'./running.vue\';\n//import Mood from \'./items/mood.vue\';\n\nimport Settings from \'modules/settings\';\n\nimport Game from \'game\';\nimport UIMixin from \'../uiMixin\';\nimport ItemBase from \'../itemsBase\';\n\n\n/**\n * Player vital bars.\n */\nexport default {\n\n\tprops:[\'state\'],\n\tmixins:[ItemBase, UIMixin],\n\tcomponents:{\n\t\tprogbar:ProgBar,\n\t\t//mood:Mood,\n\t\trunning:Running\n\t},\n\tdata(){\n\n\t\tlet ops = Settings.getSubVars(\'vitals\');\n\t\tif (!ops.hide) ops.hide = {};\n\n\t\treturn {\n\t\t\thide:ops.hide\n\t\t}\n\n\t},\n\n\tcomputed:{\n\n\t\thp(){return this.state.getData(\'hp\');},\n\n\t\tmanaList() { return this.state.filterItems (it=> (it.hasTag(\'manas\') || it.hasTag(\'Mana energies\') ) && !it.locked)},\n\t\tvisMana(){return this.manaList.filter(v=>this.show(v))},\n\n\t\tstamina(){ return this.state.getData(\'stamina\'); }\n\t}\n\n}\n<\/script>\n\n<template>\n\n\t<div class="vitals">\n\n\t\t<running :runner="state.runner" />\n\n\t\t<div class="config"><button ref="btnHides" class="btnConfig"></button></div>\n\n\t\t\x3c!-- anything not a table is a headache --\x3e\n\t\t<div class="statbars">\n\n\t\t<div class="hidable statbar" data-key="stamina" v-show="show(stamina)">\n\t\t\t<span class="name">stamina</span><span class="barspan"><progbar class="stamina" :value="stamina.valueOf()" :max="stamina.max.value"\n\t\t\t@mouseenter.capture.stop.native="itemOver($event,stamina)"/></span></div>\n\n\t\t<div class="hidable statbar" data-key="hp" v-show="show(hp)"><span class="name">life</span><span class="barspan"><progbar class="hp" :value="hp.valueOf()" :max="hp.max.value"\n\t\t\t@mouseenter.capture.stop.native="itemOver($event,hp)"/></span></div>\n\n\t\t<div class="hidable statbar" v-for="it in visMana" :key="it.key" :data-key="it.id">\n\t\t\t<span class="name">{{it.name}}</span><span class="barspan"><progbar :value="it.valueOf()" :class="it.id" :max="it.max.value" :color="it.color"\n\t\t\t@mouseenter.native.capture.stop="itemOver($event,it)"/></span></div>\n\n\t\t\x3c!--<tr><td>mood</td><td><mood :state="state" /></td></tr>--\x3e\n\t\t</div>\n\n\t</div>\n</template>\n\n<style scoped>\n\n    .vitals {\n        text-transform: capitalize;\n        margin: 0; padding: 0;\n        min-width: 15rem; overflow-y :auto; overflow-x: hidden;\n    }\n\n\n</style>\n'],sourceRoot:""}]);const o=a},9157:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\ndiv.pop-title[data-v-8c4acf3a] {\n\n\tfont-weight: bold;\n\tborder-bottom: 1px solid black;\n\tmargin-bottom: var(--md-gap);\n}\n.popup-content[data-v-8c4acf3a] {\n\tpadding: var(--md-gap);\n}\n\n","",{version:3,sources:["webpack://./src/ui/popups/itemPopup.vue"],names:[],mappings:";AAgFA;;CAEA,iBAAA;CACA,8BAAA;CACA,4BAAA;AAEA;AAEA;CACA,sBAAA;AACA",sourcesContent:['<script>\nimport Game from \'game\';\n\nimport ItemView from \'ui/items/gdata.vue\';\nimport {positionAt} from \'./popups.js\';\n\n/**\n * Information about current rollover object.\n */\nexport const RollOver = {\n\n\titem:null,\n\telm:null,\n\ttitle:null,\n\tsource:null\n\n};\n\nexport const ItemOver = ( evt, it, source, title ) => {\n\n\tRollOver.item = it;\n\tRollOver.elm = evt.currentTarget;\n\tRollOver.source = source;\n\n\tif ( source && source.context ) {\n\t\tRollOver.context = source.context;\n\t} else RollOver.context = Game;\n\n\tRollOver.title = title;\n}\n\nexport const ItemOut = () => {\n\tRollOver.item = null;\n\tRollOver.elm = null;\n\tRollOver.source = null;\n\tRollOver.title = null;\n\tRollOver.context = null;\n}\n\n/**\n * Box for displaying item information.\n */\nexport default {\n\n\tdata(){\n\t\treturn RollOver;\n\t},\n\n\tupdated() {\n\t\t// waiting for width to change before reposition.\n\t\tif ( this.item ) {\n\t\t\tpositionAt( this.$el, this.elm );\n\t\t}\n\t},\n\tcomponents:{ gdata:ItemView }\n\n}\n<\/script>\n\n\n<template>\n\n\t<div class="item-popup" v-show="item!=null">\n\t\t<div class="popup-content">\n\t\t<div v-if="title" class="pop-title">{{ title }}</div>\n\t\t<template v-if="Array.isArray(item)">\n\n\t\t\t<div v-for="t in item" :key="t">{{ t.toString() }}</div>\n\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<gdata v-if="item" :item="item" />\n\t\t</template>\n\t\t</div>\n\t</div>\n\n</template>\n\n<style scoped>\n\ndiv.pop-title {\n\n\tfont-weight: bold;\n\tborder-bottom: 1px solid black;\n\tmargin-bottom: var(--md-gap);\n\n}\n\n.popup-content {\n\tpadding: var(--md-gap);\n}\n\n</style>'],sourceRoot:""}]);const o=a},6728:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\n.settings[data-v-2acc7e09] {\n\theight:auto;\n\tmin-height:5.5rem;\n\tmin-width:30%;\n\tmax-width:60%;\n\tposition: absolute;\n\tz-index:10000;\n\ttop:3rem;\n\tbackground:inherit;\n\tborder: var(--popup-border);\n\tborder-radius: 0.20rem;\n\tpadding:var(--md-gap);\n}\nbutton.close[data-v-2acc7e09] {\n\tposition:absolute;\n\tbottom:var(--md-gap);\n\tright:var(--md-gap);\n}\n\n","",{version:3,sources:["webpack://./src/ui/popups/settings.vue"],names:[],mappings:";AAuIA;CACA,WAAA;CACA,iBAAA;CACA,aAAA;CACA,aAAA;CACA,kBAAA;CACA,aAAA;CACA,QAAA;CACA,kBAAA;CACA,2BAAA;CACA,sBAAA;CACA,qBAAA;AACA;AAEA;CACA,iBAAA;CACA,oBAAA;CACA,mBAAA;AACA",sourcesContent:["<script>\nimport Profile from 'modules/profile';\nimport Settings from 'modules/settings';\n\nimport { centerX } from './popups';\n\n/**\n * @emits save-settings\n * @emits setting\n */\nexport default {\n\n\tdata(){\n\n\t\tlet vars = Settings.vars;\n\n\t\treturn {\n\t\t\tsCompactMode:vars.compactMode,\n\t\t\tsDarkMode:vars.darkMode,\n\t\t\tsaves:Object.assign( {}, Settings.getSubVars('saves') )\n\t\t};\n\n\n\n\t},\n\tupdated() {\n\t\tcenterX(this.$el);\n\t},\n\tcreated() {\n\n\t\tfor( let p in Settings.vars ) {\n\t\t\tthis.dispatch('setting', p, Settings.vars[p] );\n\t\t}\n\n\t},\n\tmethods:{\n\n\t\tclear(){\n\n\t\t},\n\n\t\tclose() {\n\t\t\tthis.dispatch('save-settings');\n\t\t\tthis.$emit('close-settings');\n\t\t}\n\n\t},\n\tcomputed:{\n\n\t\tcompactMode: {\n\t\t\tget() { return this.sCompactMode; },\n\t\t\tset(v){\n\t\t\t\tSettings.set('compactMode', v);\n\t\t\t\tthis.sCompactMode = v;\n\t\t\t\tthis.dispatch('setting', 'compactMode', v);\n\t\t\t}\n\n\t\t},\n\t\tremoteFirst:{\n\t\t\tget(){\n\t\t\t\treturn this.saves.remoteFirst;\n\t\t\t},\n\t\t\tset(v){\n\t\t\t\tthis.saves.remoteFirst = Settings.setSubVar( 'saves', 'remoteFirst', v );\n\t\t\t\tthis.dispatch('setting', 'remoteFirst', v );\n\t\t\t}\n\t\t},\n\t\tautosave:{\n\t\t\tget(){\n\t\t\t\treturn this.saves.autosave;\n\t\t\t},\n\t\t\tset(v){\n\t\t\t\tthis.saves.autoSave = Settings.setSubVar( 'saves', 'autosave', v );\n\t\t\t\tthis.dispatch('setting', 'autosave', v );\n\t\t\t}\n\t\t},\n\t\tdarkMode:{\n\t\t\tget(){\n\t\t\t\treturn this.sDarkMode;\n\t\t\t},\n\t\t\tset(v){\n\t\t\t\tSettings.set( 'darkMode', v);\n\t\t\t\tthis.sDarkMode = v;\n\t\t\t\tthis.dispatch('setting', 'darkMode', v );\n\t\t\t}\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n<template>\n\n<div :class=\"['settings', 'popup']\">\n\n\n\n\t<div>\n\t<label :for=\"elmId('dark-mode')\">Dark Mode</label>\n\t<input type=\"checkbox\" :id=\"elmId('dark-mode')\" v-model=\"darkMode\">\n\t</div>\n\n\t<div>\n\t<label :for=\"elmId('compact-mode')\">Compact Mode</label>\n\t<input type=\"checkbox\" :id=\"elmId('compact-mode')\" v-model=\"compactMode\">\n\t</div>\n\n\t<div>\n\t<label :for=\"elmId('auto-save')\" title=\"Periodically save current game.\">Auto-Save</label>\n\t<input type=\"checkbox\" :id=\"elmId('auto-save')\" v-model=\"autosave\">\n\t<h6>Periodically save game to storage. Game is saved to Browser storage by default. Only saved to Remote storage if logged in and server is available.</h6>\n\t</div>\n\n\t<div>\n\t<label :for=\"elmId('remote-first')\" title=\"Attempt to load saves from Remote Storage before Local Storage.\">Try Remote Load First</label>\n\t<input type=\"checkbox\" :id=\"elmId('remote-first')\" v-model=\"remoteFirst\">\n\t<h6>Attempt to load game from Remote host before loading from browser Storage.</h6>\n\t</div>\n\n\t\x3c!--<div><button @click=\"clear\">Clear Settings</button></div>--\x3e\n\t\x3c!--<div class=\"nowarn\">\n\n\t\t<div v-for=\"it in nowarns\" :key=\"it\"><span>{{it}}</span><button @click=\"clearWarn\">Delete</button></div>\n\n\t</div>--\x3e\n\n\t<button class=\"close\" @click=\"close\">Close</button>\n\n</div>\n\n</template>\n\n<style scoped>\n\n.settings {\n\theight:auto;\n\tmin-height:5.5rem;\n\tmin-width:30%;\n\tmax-width:60%;\n\tposition: absolute;\n\tz-index:10000;\n\ttop:3rem;\n\tbackground:inherit;\n\tborder: var(--popup-border);\n\tborder-radius: 0.20rem;\n\tpadding:var(--md-gap);\n}\n\nbutton.close {\n\tposition:absolute;\n\tbottom:var(--md-gap);\n\tright:var(--md-gap);\n}\n\n</style>"],sourceRoot:""}]);const o=a},2574:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\ndiv.skip[data-v-1f1201ec] {\n\tmargin-top:1em;\n\tfont-size: 0.9em;\n}\ndiv.popup div[data-v-1f1201ec] {\n\tmargin:var(--sm-gap) 0;\n}\n\n","",{version:3,sources:["webpack://./src/ui/popups/warn.vue"],names:[],mappings:";AA+EA;CACA,cAAA;CACA,gBAAA;AACA;AAEA;CACA,sBAAA;AACA",sourcesContent:['<script>\nimport {centerX} from \'./popups.js\';\n\nconst WARN_MSG = \'This action is not reversible. Continue?\';\n\nexport default {\n\n\tdata(){\n\t\treturn {\n\t\t\titem:null,\n\t\t\tcb:null,\n\t\t\tnowarn:false\n\t\t}\n\t},\n\tupdated() {\n\t\tif ( this.item ) {centerX( this.$el );}\n\t},\n\tcomputed:{\n\t\tmsg(){\n\t\t\tif ( typeof this.item === \'string\') return WARN_MSG;\n\t\t\treturn this.item.warnMsg || WARN_MSG;\n\t\t}\n\t},\n\tmethods:{\n\t\tshow( it, cb=null ){\n\t\t\tthis.item = it;\n\t\t\tthis.cb = cb;\n\t\t\tthis.nowarn=false;\n\t\t},\n\t\tconfirm(){\n\n\t\t\tlet it = this.item;\n\t\t\tlet f = this.cb;\n\t\t\tlet nowarn = this.nowarn;\n\n\t\t\tthis.item = null;\n\t\t\tthis.cb = null;\n\t\t\tthis.nowarn=false;\n\n\t\t\tif ( it ) this.$emit(\'confirmed\', it, nowarn );\n\t\t\tif (f ) f();\n\n\t\t},\n\t\tcancel(){\n\t\t\tthis.cb = null;\n\t\t\tthis.nowarn=false;\n\t\t\tthis.item = null;\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n<template>\n\t<div class="popup" v-if="item">\n\n\t\t<div v-if="typeof item ===\'string\'">\n\t\t\t<div>{{item }}</div>\n\t\t\t<div>{{ msg }}</div>\n\t\t</div>\n\t\t<div v-else>\n\t\t<div class="log-title">{{ item.name.toString().toTitleCase() }}</div>\n\t\t<div>{{ item.desc }}</div>\n\t\t<div>{{ msg }}</div>\n\t\t<div class="skip"><label :for="elmId(\'nowarn\')">Skip Warning</label>\n\t\t<input type="checkbox" v-model="nowarn" :id="elmId(\'nowarn\')"></div>\n\t\t</div>\n\n\t\t<div>\n\t\t<button @click="confirm">Confirm</button>\n\t\t<button @click="cancel">Cancel</button>\n\t\t</div>\n\n\t</div>\n</template>\n\n<style scoped>\n\ndiv.skip {\n\tmargin-top:1em;\n\tfont-size: 0.9em;\n}\n\ndiv.popup div {\n\tmargin:var(--sm-gap) 0;\n}\n\n</style>'],sourceRoot:""}]);const o=a},4469:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,'\np.use-msg[data-v-3473ec58] {\n\tfont-size:1.2em;\n\tline-height: 1.4em;\n\tmargin-left: 10%;\n}\ndiv.quickbar[data-v-3473ec58] {\n\n\tdisplay:flex;\n\tflex-basis:3em;\n\twidth:100%;\n\tflex-direction: row;\n\tjustify-self: flex-end;\n\tz-index: 50;\n\tmargin: 0;\n}\ndiv.quickslot[data-v-3473ec58] {\n\tmin-width:2em;\n\tmin-height:2em;\n\tcursor: pointer;\n\ttext-transform: capitalize;\n\tmargin:var(--tiny-gap) var(--sm-gap) var(--sm-gap) var(--sm-gap);\n\tpadding:var(--tiny-gap);\n\ttext-align: center;\n\t/** relative so remove button correctly placed. **/\n\tposition: relative;\n\tfont-size:xx-large;\n\tborder: 1px solid var(--dark-border-color);\n}\ndiv.remove[data-v-3473ec58] {\n\tposition:absolute;\n\tborder: 1px solid var(--dark-border-color);\n\ttop:0;\n\tright:0;\n\tmargin: 0;\n\tpadding: 0;\n\tbackground:white;\n\topacity:0.65;\n\tz-index: 10;\n\tmin-height:0.9em;\n\tmin-width:0.9em;\n\tfont-size: 0.8rem;\n}\ndiv.remove[data-v-3473ec58]::after {\n\tcontent:"x";\n}\n.quickslot div.remove[data-v-3473ec58] { background: #FFF0; color: #000; border: none; font-weight: bold;\n}\n\n\n\n',"",{version:3,sources:["webpack://./src/ui/quickbar.vue"],names:[],mappings:";AAmEA;CACA,eAAA;CACA,kBAAA;CACA,gBAAA;AACA;AAGA;;CAEA,YAAA;CACA,cAAA;CACA,UAAA;CACA,mBAAA;CACA,sBAAA;CACA,WAAA;CACA,SAAA;AACA;AAEA;CACA,aAAA;CACA,cAAA;CACA,eAAA;CACA,0BAAA;CACA,gEAAA;CACA,uBAAA;CACA,kBAAA;CACA,kDAAA;CACA,kBAAA;CACA,kBAAA;CACA,0CAAA;AACA;AAEA;CACA,iBAAA;CACA,0CAAA;CACA,KAAA;CACA,OAAA;CACA,SAAA;CACA,UAAA;CACA,gBAAA;CACA,YAAA;CACA,WAAA;CACA,gBAAA;CACA,eAAA;CACA,iBAAA;AACA;AAEA;CACA,WAAA;AACA;AAEA,yCAAA,iBAAA,EAAA,WAAA,EAAA,YAAA,EAAA,iBAAA;AAAA",sourcesContent:['<script>\nimport Game from \'../game\';\nimport {abbr} from \'../util/format\';\nimport { TRY_USE } from \'../events\';\n\n/**\n * Bar for quick-use items.\n */\nexport default {\n\n\tprops:[\'bars\'],\n\tmethods:{\n\n\t\tabbr:abbr\n\n\t},\n\tcomputed:{\n\n\t\tbar(){return this.bars.active;},\n\n\t\tslots() {\n\t\t\treturn this.bar.slots;\n\t\t},\n\n\t\thasItems(){\n\t\t\treturn this.slots.some(v=>v.item!=null);\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n<template>\n\t<div class="quickbar" v-if="hasItems">\n\n\t\t<div class="quickslot" v-for="(it,i) in slots" :key="i">\n\n\t\t\t<div v-if="it.item!=null" :class="it.item.school ? it.item.school :\'\'"\n\t\t\t\t\t@click="emit( \'quickslot\', it )"\n\t\t\t\t\t@mouseenter.capture.stop="itemOver($event,it.item||it)">\n\n\n\t\t\t\t<div>{{ abbr(it) }}</div>\n\n\t\t\t\t<div class="remove" @click="bar.clear(i)" />\n\t\t\t\t<div v-if="it.item.school" class="bgfill" >&nbsp;</div>\n\n\t\t\t</div>\n\t\t\t<div v-else>{{ (i != 9) ? i + 1 : 0 }}</div>\n\n\t\t</div>\n\n\t</div>\n\t<div class="quickbar" v-else>\n\n\t\t<p class="use-msg">\n\t\t\tRoll-over Item and hold {Shift} + {Number} to assign quickslot.<br>\n\t\t\tPress {Number} again to use quickslot Item.\n\t\t</p>\n\n\t</div>\n\n</template>\n\n<style scoped>\n\np.use-msg {\n\tfont-size:1.2em;\n\tline-height: 1.4em;\n\tmargin-left: 10%;\n}\n\n\ndiv.quickbar {\n\n\tdisplay:flex;\n\tflex-basis:3em;\n\twidth:100%;\n\tflex-direction: row;\n\tjustify-self: flex-end;\n\tz-index: 50;\n\tmargin: 0;\n}\n\ndiv.quickslot {\n\tmin-width:2em;\n\tmin-height:2em;\n\tcursor: pointer;\n\ttext-transform: capitalize;\n\tmargin:var(--tiny-gap) var(--sm-gap) var(--sm-gap) var(--sm-gap);\n\tpadding:var(--tiny-gap);\n\ttext-align: center;\n\t/** relative so remove button correctly placed. **/\n\tposition: relative;\n\tfont-size:xx-large;\n\tborder: 1px solid var(--dark-border-color);\n}\n\ndiv.remove {\n\tposition:absolute;\n\tborder: 1px solid var(--dark-border-color);\n\ttop:0;\n\tright:0;\n\tmargin: 0;\n\tpadding: 0;\n\tbackground:white;\n\topacity:0.65;\n\tz-index: 10;\n\tmin-height:0.9em;\n\tmin-width:0.9em;\n\tfont-size: 0.8rem;\n}\n\ndiv.remove::after {\n\tcontent:"x";\n}\n\n.quickslot div.remove { background: #FFF0; color: #000; border: none; font-weight: bold; }\n\n\n\n</style>\n'],sourceRoot:""}]);const o=a},864:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,"\ndiv.task-list[data-v-0e3bfebf], .main-tasks > div.upgrade-list[data-v-0e3bfebf] {\n        margin: 0; padding: var(--md-gap);\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat( auto-fit, var(--task-button-width) );\n}\ndiv.task-list .runnable[data-v-0e3bfebf]:hover {background: var(--accent-color-hover);\n}\ndiv.task-list .runnable[data-v-0e3bfebf]:active {background: var(--accent-color-active);\n}\n\n\n","",{version:3,sources:["webpack://./src/ui/sections/tasks.vue"],names:[],mappings:";AA4DA;QACA,SAAA,EAAA,sBAAA;EACA,aAAA;EACA,mEAAA;AACA;AAEA,gDAAA,qCAAA;AAAA;AACA,iDAAA,sCAAA;AAAA",sourcesContent:['<script>\nimport Game from \'../../game\';\nimport Upgrades from \'../panes/upgrades.vue\';\n\nimport Settings from \'modules/settings\';\nimport ItemsBase from \'../itemsBase\';\nimport UIMixin from \'../uiMixin\';\n\nexport default {\n\n\tmixins:[ItemsBase,UIMixin],\n\tcomponents:{\n\t\tupgrades:Upgrades\n\t},\n\tdata(){\n\n\t\tlet ops = Settings.getSubVars(\'main\');\n\t\tif (!ops.hide) ops.hide = {}\n\n\t\treturn {\n\t\t\thide:ops.hide\n\t\t}\n\n\t},\n\tcomputed:{\n\n\t\ttasks(){return Game.state.tasks.filter(v=>!v.perpetual&&!v.length)},\n\t\trunnables(){return Game.state.tasks.filter(v=>v.perpetual||v.length>0)},\n\n\t\tvisActs(){return this.tasks.filter(v=>this.show(v))},\n\t\tvisRuns(){ return this.runnables.filter(v=>this.show(v))},\n\n\t\tups(){\n\t\t\treturn Game.state.upgrades.filter( v=>!this.locked(v)&&this.show(v) )\n\t\t},\n\t\tclasses(){\n\t\t\treturn Game.state.classes.filter(v=>!this.locked(v)&&this.show(v));\n\t\t}\n\n\t}\n\n}\n<\/script>\n\n<template>\n\t<div class="main-tasks" ref="hidables">\n\t\t<div class="config"><button ref="btnHides" class="btnConfig"></button></div>\n\t\t<div v-if="visActs.length != 0" class="div-hs">Actions</div>\n\t\t<upgrades class="task-list" :items="visActs" />\n\t\t<div v-if="visRuns.length != 0" class="div-hs">Tasks</div>\n\t\t<upgrades class="task-list" :items="visRuns" />\n\t\t<div v-if="ups.length != 0" class="div-hs">Upgrades</div>\n\t\t<upgrades class="upgrade-list" :items="ups" />\n\t\t<div v-if="classes.length != 0" class="div-hs">Classes</div>\n\t\t<upgrades class="upgrade-list" :items="classes" />\n\t</div>\n</template>\n\n<style scoped>\n\n    div.task-list, .main-tasks > div.upgrade-list {\n        margin: 0; padding: var(--md-gap);\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat( auto-fit, var(--task-button-width) );\n    }\n\n    div.task-list .runnable:hover {background: var(--accent-color-hover); }\n    div.task-list .runnable:active {background: var(--accent-color-active); }\n\n\n</style>'],sourceRoot:""}]);const o=a},4549:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4015),n=s.n(i),r=s(3645),a=s.n(r)()(n());a.push([t.id,'\nspan.vers[data-v-5e8f13b9] {\n\tfont-size: 0.9em;\n\talign-self: center;\n\tmargin-bottom: var(--sm-gap);\n}\ndiv.text-button a[data-v-5e8f13b9] {\n\ttext-decoration: none;\n}\ninput[type="file"][data-v-5e8f13b9] {\n\tdisplay:none;\n}\n#drop-file[data-v-5e8f13b9] {\n\tborder: var(--tiny-gap) dashed var(--quiet-text-color);\n}\n.load-opts[data-v-5e8f13b9] {\n\tdisplay:flex;\n}\n.load-opts button[data-v-5e8f13b9] {\n\theight:100%;\n}\n.load-opts .text-button[data-v-5e8f13b9] {\n\tmax-height:var(--lg-gap);\n}\nspan.load-message[data-v-5e8f13b9] {\n\tpadding: var(--md-gap) var(--md-gap) var(--tiny-gap);\n}\nspan.items[data-v-5e8f13b9] {\n\ttext-transform: capitalize;\n}\n',"",{version:3,sources:["webpack://./src/ui/top-bar.vue"],names:[],mappings:";AA+FA;CACA,gBAAA;CACA,kBAAA;CACA,4BAAA;AACA;AAEA;CACA,qBAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,sDAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,WAAA;AACA;AACA;CACA,wBAAA;AACA;AAEA;CACA,oDAAA;AACA;AAEA;CACA,0BAAA;AACA",sourcesContent:['<script>\nimport Profile from \'modules/profile\';\nimport Game from \'../game\';\n\nimport LoginStatus from \'./components/loginStatus.vue\';\n\nexport default {\n\n\tcomputed:{\n\t\thasHall(){return Profile.hasHall() },\n\t\tVERSION(){return __VERSION; }\n\n\t},\n\tcreated(){\n\t\tthis.Profile = Profile;\n\t},\n\tcomponents:{\n\t\tlogin:LoginStatus\n\t},\n\tmethods:{\n\n\t\tfileSelect(e) {\n\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tthis.dispatch( \'load-file\', e.target.files );\n\n\t\t},\n\n\t\tfileDrop(e){\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\te.target.classList.remove(\'hilite\');\n\n\t\t\tconst dt = e.dataTransfer;\n\t\t\tthis.dispatch(\'load-file\', dt.files);\n\n\t\t},\n\t\tfileDrag(e){\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\te.currentTarget.classList.add(\'hilite\');\n\t\t},\n\t\tdragOut(e){\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\te.currentTarget.classList.remove(\'hilite\');\n\t\t},\n\n\t}\n\n}\n<\/script>\n\n<template>\n\n\t<div class="top-bar">\n\n\t\t<span class="load-opts" >\n\t\t\t<login v-if="Profile.CLOUD" />\n\t\t\t<button @click="dispatch(\'save\')">Save</button>\n\t\t\t<button @click="dispatch(\'load\')">Load</button>\n\n\t\t\t<div class="text-button"><a href=""\n\t\t\t\t@click.self="dispatch(\'save-file\',$event )" type="text/json">Get Save</a></div>\n\n\t\t\t<div v-if="hasHall" class="text-button"><a href=""\n\t\t\t\t@click.self="dispatch(\'hall-file\',$event )" type="text/json">Hall Save</a></div>\n\n\t\t\t\x3c!--<input type="file" name="[File]" accept="text/json" @change="fileDrop">--\x3e\n\t\t\t<button id="drop-file" @click="$refs.fileInput.click()" @drop="fileDrop" @dragover="fileDrag" @dragleave.capture.stop="dragOut" name="[Load Save]">[Load Save]</button>\n\t\t\t<input ref="fileInput" type="file" @change="fileSelect" accept="text/json text/*">\n\n\t\t\t<confirm @confirm="dispatch(\'reset\')">Wipe Wizard</confirm>\n\t\t</span>\n\n\t\t<span class="items"><slot name="center"></slot></span>\n\n\t\t<span class="link-bar">\n\t\t\t<a href="https://discord.gg/bCABC96" target="_blank">Discord</a>\n\t\t\t<a href="http://wiki.lerpinglemur.com/dhrune" target="_blank">Wiki</a>\n\t\t\t<a href="https://www.reddit.com/r/wizrobe/" target="_blank">Reddit</a>\n\t\t\t<span class="vers">Version: {{ VERSION }}</span>\n\t\t\t<button class="text-button" @click="$emit(\'open-settings\')">&#9881;</button>\n\t\t</span>\n\n\t</div>\n\n\n</template>\n\n<style scoped>\n\nspan.vers {\n\tfont-size: 0.9em;\n\talign-self: center;\n\tmargin-bottom: var(--sm-gap);\n}\n\ndiv.text-button a {\n\ttext-decoration: none;\n}\n\ninput[type="file"] {\n\tdisplay:none;\n}\n\n#drop-file {\n\tborder: var(--tiny-gap) dashed var(--quiet-text-color);\n}\n\n.load-opts {\n\tdisplay:flex;\n}\n\n.load-opts button {\n\theight:100%;\n}\n.load-opts .text-button {\n\tmax-height:var(--lg-gap);\n}\n\nspan.load-message {\n\tpadding: var(--md-gap) var(--md-gap) var(--tiny-gap);\n}\n\nspan.items {\n\ttext-transform: capitalize;\n}\n</style>'],sourceRoot:""}]);const o=a},3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s=t(e);return e[2]?"@media ".concat(e[2]," {").concat(s,"}"):s})).join("")},e.i=function(t,s,i){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(i)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(n[a]=!0)}for(var o=0;o<t.length;o++){var l=[].concat(t[o]);i&&n[l[0]]||(s&&(l[2]?l[2]="".concat(s," and ").concat(l[2]):l[2]=s),e.push(l))}},e}},4015:t=>{function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,i=new Array(e);s<e;s++)i[s]=t[s];return i}t.exports=function(t){var s,i,n=(i=4,function(t){if(Array.isArray(t))return t}(s=t)||function(t,e){var s=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=s){var i,n,r=[],a=!0,o=!1;try{for(s=s.call(t);!(a=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){o=!0,n=t}finally{try{a||null==s.return||s.return()}finally{if(o)throw n}}return r}}(s,i)||function(t,s){if(t){if("string"==typeof t)return e(t,s);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,s):void 0}}(s,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[1],a=n[3];if(!a)return r;if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),h="/*# ".concat(l," */"),u=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[r].concat(u).concat([h]).join("\n")}return[r].join("\n")}},6729:t=>{var e=Object.prototype.hasOwnProperty,s="~";function i(){}function n(t,e,s){this.fn=t,this.context=e,this.once=s||!1}function r(t,e,i,r,a){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new n(i,r||t,a),l=s?s+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(s=!1)),o.prototype.eventNames=function(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)e.call(t,i)&&n.push(s?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=s?s+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,a=new Array(r);n<r;n++)a[n]=i[n].fn;return a},o.prototype.listenerCount=function(t){var e=s?s+t:t,i=this._events[e];return i?i.fn?1:i.length:0},o.prototype.emit=function(t,e,i,n,r,a){var o=s?s+t:t;if(!this._events[o])return!1;var l,h,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,n),!0;case 5:return u.fn.call(u.context,e,i,n,r),!0;case 6:return u.fn.call(u.context,e,i,n,r,a),!0}for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];u.fn.apply(u.context,l)}else{var d,m=u.length;for(h=0;h<m;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),c){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,e);break;case 3:u[h].fn.call(u[h].context,e,i);break;case 4:u[h].fn.call(u[h].context,e,i,n);break;default:if(!l)for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=arguments[d];u[h].fn.apply(u[h].context,l)}}return!0},o.prototype.on=function(t,e,s){return r(this,t,e,s,!1)},o.prototype.once=function(t,e,s){return r(this,t,e,s,!0)},o.prototype.removeListener=function(t,e,i,n){var r=s?s+t:t;if(!this._events[r])return this;if(!e)return a(this,r),this;var o=this._events[r];if(o.fn)o.fn!==e||n&&!o.once||i&&o.context!==i||a(this,r);else{for(var l=0,h=[],u=o.length;l<u;l++)(o[l].fn!==e||n&&!o[l].once||i&&o[l].context!==i)&&h.push(o[l]);h.length?this._events[r]=1===h.length?h[0]:h:a(this,r)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=s?s+t:t,this._events[e]&&a(this,e)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=s,o.EventEmitter=o,t.exports=o},2038:(t,e,s)=>{s.d(e,{Vu:()=>n,Xg:()=>r,vP:()=>a,_L:()=>h,VT:()=>u,VX:()=>c,$x:()=>d,f0:()=>m,Ke:()=>p});const i=new Set;function n(t,e){let s=null;for(let a in t){var i=t[a],r=e[a];if(i!=r){if(i){if("object"==typeof i&&"object"==typeof r&&null!==r&&null===(i=n(i,r)))continue}else if(!r)continue;null===s&&(s={}),s[a]=i}}return s}function r(t,e,s=null){var i=l(t);if(s)for(let t of s)i.add(t);for(var n=e;n!==Object.prototype;){for(let s in n){if(i.has(s))continue;var a=t[s];let n=e[s];void 0!==a?null!==a&&n&&"object"==typeof a&&"object"==typeof n&&(Array.isArray(a)||Array.isArray(n)||r(a,n)):t[s]=null!==n&&"object"==typeof n?o(n,Array.isArray(n)?[]:{}):n}n=Object.getPrototypeOf(n)}}function a(t,e=null){let s;if(null==e){if(t.clone&&"function"==typeof t.clone)return t.clone.call(t);let s=Object.getPrototypeOf(t);e=Array.isArray(t)?[]:s?Object.create(s):{}}for(let n in t){s=t[n];var i=d(e,n);i&&!i.writable&&void 0===i.set||(null==s?e[n]=s:"object"==typeof s?s.clone&&"function"==typeof s.clone?e[n]=s.clone.call(s):e[n]=a(s):e[n]=s)}return e}function o(t,e={}){if("function "==typeof t.clone)return t.clone();let s,i;for(let n in t)s=t[n],null==s?e[n]=s:Array.isArray(s)?e[n]=o(s,[]):"object"==typeof s?(i=s.clone,e[n]=i&&"function"==typeof i?i.call(s):o(s)):e[n]=s;return e}function l(t,e=null){let s=new Set(e),i=t;for(;i!==Object.prototype;){var n=Object.getOwnPropertyDescriptors(i);for(let t in n){var r=n[t];!0!==r.writable&&void 0===r.set&&s.add(t)}i=Object.getPrototypeOf(i)}return s}function h(t){let e=new Map,s=t;for(;s!==Object.prototype;){var i=Object.getOwnPropertyDescriptors(s);for(let t in i)e.set(t,i[t]);s=Object.getPrototypeOf(s)}return e}function u(t,...e){for(let s=e.length-1;s>=0;s--)if(t.includes(e[s]))return!0;return!1}function c(t,e=null,s=null){if(!t)return;s||(s=i);let n=t;for(;n!==Object.prototype;){for(let i of Object.getOwnPropertyNames(n))s.has(i)||void 0!==t[i]||void 0!==Object.getOwnPropertyDescriptor(n,i).set&&(t[i]=e);n=Object.getPrototypeOf(n)}}function d(t,e){for(;t!==Object.prototype;){var s=Object.getOwnPropertyDescriptor(t,e);if(s)return s;t=Object.getPrototypeOf(t)}return null}function m(t,e,s=null){let i=l(t,s);for(let s of Object.getOwnPropertyNames(e))!0!==i.has(s)&&(t[s]=e[s]);return t}function p(t,e=null,s=null,n=!0){let r,a,o={};if(null==e&&(e=i),s)for(r of s)a=t[r],void 0!==a&&("object"==typeof a&&null!==a&&a.toJSON?o[r]=a.toJSON():o[r]=a);let l=Object.getPrototypeOf(t);for(;l!=Object.prototype;){for(r of Object.getOwnPropertyNames(l))if(!e.has(r)){var h=Object.getOwnPropertyDescriptor(l,r);n&&void 0===h.set&&!h.writable||(a=t[r],void 0!==a&&"function"!=typeof a&&("object"==typeof a&&null!==a&&a.toJSON?o[r]=a.toJSON():o[r]=a))}l=Object.getPrototypeOf(l)}return o}},3379:t=>{var e=[];function s(t){for(var s=-1,i=0;i<e.length;i++)if(e[i].identifier===t){s=i;break}return s}function i(t,i){for(var r={},a=[],o=0;o<t.length;o++){var l=t[o],h=i.base?l[0]+i.base:l[0],u=r[h]||0,c="".concat(h," ").concat(u);r[h]=u+1;var d=s(c),m={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(e[d].references++,e[d].updater(m)):e.push({identifier:c,updater:n(m,i),references:1}),a.push(c)}return a}function n(t,e){var s=e.domAPI(e);return s.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;s.update(t=e)}else s.remove()}}t.exports=function(t,n){var r=i(t=t||[],n=n||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var o=s(r[a]);e[o].references--}for(var l=i(t,n),h=0;h<r.length;h++){var u=s(r[h]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}r=l}}},569:t=>{var e={};t.exports=function(t,s){var i=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},9216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e),e}},3565:(t,e,s)=>{t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var i=s.css,n=s.media,r=s.sourceMap;n?t.setAttribute("media",n):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},2475:(t,e,s)=>{s.d(e,{Z:()=>_});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.label?s("label",{attrs:{for:t.elmId("bar")}},[t._v(t._s(t.label))]):t._e(),t._v(" "),s("div",{staticClass:"bar",attrs:{id:t.elmId("bar")}},[s("div",{staticClass:"fill",style:t.style},[t.hideStats?s("span",[t._v(" ")]):s("span",{staticClass:"bar-text"},[t._v(t._s(t.value.toFixed(1)+"/"+t.max.toFixed(1)))])])])])};i._withStripped=!0;const n={props:["value","max","label","hideStats","color"],computed:{style(){let t="width:"+this.width;return this.color&&(t+=";background:"+this.color),t},width(){let t=Math.floor(this.value/this.max*100);return t>100?t=100:t<0&&(t=0),t+"%;"}}};var r=s(3379),a=s.n(r),o=s(7795),l=s.n(o),h=s(569),u=s.n(h),c=s(3565),d=s.n(c),m=s(9216),p=s.n(m),f=s(4589),v=s.n(f),g=s(6582),A={};A.styleTagTransform=v(),A.setAttributes=d(),A.insert=u().bind(null,"head"),A.domAPI=l(),A.insertStyleElement=p(),a()(g.Z,A),g.Z&&g.Z.locals&&g.Z.locals;var y=(0,s(1900).Z)(n,i,[],!1,null,null,null);y.options.__file="src/ui/components/progbar.vue";const _=y.exports},9450:(t,e,s)=>{s.d(e,{Z:()=>b});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.dots.length>0?s("div",{staticClass:"dot-view"},t._l(t.dots,(function(e){return s("div",{key:e.id,class:["dot",e.kind,e.school,t.mini?"mini":""],on:{"!mouseenter":function(s){return s.stopPropagation(),t.itemOver(s,e,t.char)}}},[e.perm?t._e():s("span",[t._v(t._s(Math.ceil(e.duration)))]),t._v(" "),t.mini?t._e():s("span",[s("br"),t._v(t._s(t.mini?t.abbr(e):e.name))]),t._v(" "),e.kind||e.school?s("div",{staticClass:"bgfill"},[t._v(" ")]):t._e()])})),0):t._e()};i._withStripped=!0;var n=s(5720);const r={props:["dots","mini","char"],mixins:[s(9736).Z],beforeCreate(){this.abbr=n.GU}};var a=s(3379),o=s.n(a),l=s(7795),h=s.n(l),u=s(569),c=s.n(u),d=s(3565),m=s.n(d),p=s(9216),f=s.n(p),v=s(4589),g=s.n(v),A=s(9751),y={};y.styleTagTransform=g(),y.setAttributes=m(),y.insert=c().bind(null,"head"),y.domAPI=h(),y.insertStyleElement=f(),o()(A.Z,y),A.Z&&A.Z.locals&&A.Z.locals;var _=(0,s(1900).Z)(r,i,[],!1,null,"54d5dc46",null);_.options.__file="src/ui/items/dotView.vue";const b=_.exports},1418:(t,e,s)=>{s.r(e),s.d(e,{default:()=>H});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"item-info"},[s("span",{staticClass:"separate"},[s("span",{staticClass:"item-name"},[t._v(t._s(t.name.toString().toTitleCase()))]),t._v(" "),"resource"===t.item.type||"stat"===t.item.type?s("span",[t._v(t._s(t.item.current.toFixed(0)+(t.item.max?" / "+Math.floor(t.item.max.value):"")))]):"furniture"===t.item.type?s("span",[t._v("max: "+t._s(t.item.max?Math.floor(t.item.max.value):t.item.repeat?"∞":1))]):t._e(),t._v(" "),t.item.sym?s("span",[t._v(t._s(t.item.sym))]):t._e()]),t._v(" "),t.item.tags||t.item.hands?s("div",{staticClass:"tight note-text"},[t.item.hands>1?s("span",[t._v("Two-Handed ")]):t._e(),t._v(t._s(t.tags))]):t._e(),t._v(" "),t.item.rate&&0!=t.item.rate.value?s("span",{staticClass:"flex-right"},[t._v(t._s(t.precise(t.item.rate.value))+"/s")]):t._e(),t._v(" "),s("div",[s("span",{staticClass:"separate"},[t.item.showLevel?s("span",[t._v("Level: "+t._s(t.item.showLevel()))]):t.item.level?s("span",[t._v("Level: "+t._s(t.item.level))]):t._e(),t._v(" "),t.item.slot?s("span",[t._v("Slot: "+t._s(t.item.slot.toString().toTitleCase()))]):t._e()]),t._v(" "),t.item.enchants&&t.item.enchants.max>0?s("span",[t._v("Enchant Levels: "+t._s(t.item.enchants.value)+" / "+t._s(t.item.enchants.max))]):t._e(),t._v(" "),t.item.at&&t.nextAt>0?s("span",{staticClass:"note-text"},[t._v("\n\t\t\tNext Improvement: "+t._s(Math.round(100*t.item.value/t.nextAt)+"%")+"\n\t\t")]):t.item.every&&t.nextEvery>=0?s("span",{staticClass:"note-text"},[t._v("\n\t\t\tNext Improvement: "+t._s(Math.round(100*t.nextEvery)+"%")+"\n\t\t")]):t._e(),t._v(" "),t.item.cd||t.item.timer>0?s("div",{staticClass:"note-text"},[t._v("Cooldown: "+t._s(t.item.timer>0?t.item.timer.toFixed(2)+" Left":t.item.cd+"s"))]):t._e(),t._v(" "),t.item.dist?s("div",[t._v("Distance: "+t._s(t.item.dist))]):t._e(),t._v(" "),t.item.armor?s("div",[t._v("Armor: "+t._s(t.item.armor))]):t._e(),t._v(" "),t.item.desc?s("div",{staticClass:"item-desc"},[t._v(t._s(t.item.desc))]):t._e()]),t._v(" "),t.item.need?s("info",{attrs:{info:t.item.need,title:"Need"}}):t._e(),t._v(" "),t.item.buy&&!t.item.owned?s("info",{attrs:{info:t.item.buy,title:"Purchase Cost"}}):t._e(),t._v(" "),t.item.cost&&"bloodshot"!=t.item.id?s("info",{attrs:{info:t.item.cost,title:"Cost"}}):t._e(),t._v(" "),t.item.cost&&"bloodshot"==t.item.id?s("info",{attrs:{info:"Life: "+(this.player.hp/3).toFixed(2),title:"Cost"}}):t._e(),t._v(" "),t.item.sell||t.item.instanced||"Furniture"===t.item.type?s("info",{attrs:{info:t.sellPrice,title:"Sell"}}):t._e(),t._v(" "),t.item.run?s("info",{attrs:{info:t.item.run,title:"Progress Cost",rate:"true"}}):t._e(),t._v(" "),t.item.attack?s("attack",{attrs:{item:t.item}}):t._e(),t._v(" "),t.item.effect?s("div",{staticClass:"info-sect"},[t._v("Effects:")]):t._e(),t._v(" "),t.item.effect?s("info",{attrs:{info:t.item.effect,rate:t.item.perpetual||t.item.length>0}}):t._e(),t._v(" "),t.item.mod||t.item.alter?s("div",{staticClass:"info-sect"},[t._v("Modifications:")]):t._e(),t._v(" "),t.item.mod?s("info",{attrs:{info:t.item.mod}}):t._e(),t._v(" "),t.item.alter?s("info",{attrs:{info:t.item.alter}}):t._e(),t._v(" "),t.item.result?s("div",{staticClass:"info-sect"},[t._v("Results:")]):t._e(),t._v(" "),t.item.result?s("info",{attrs:{info:t.item.result}}):t._e(),t._v(" "),t.item.use?s("div",{staticClass:"info-sect"},[t._v("When used:")]):t._e(),t._v(" "),t.item.use?s("info",{attrs:{info:t.item.use}}):t._e(),t._v(" "),t.item.dot?s("div",{staticClass:"info-sect"},[t._v("Buffs:")]):t._e(),t._v(" "),t.item.dot?s("dot",{attrs:{dot:t.item.dot,item:t.item}}):t._e(),t._v(" "),t.item.lock||t.item.disable?s("div",{staticClass:"info-sect"},[t._v("Locks:")]):t._e(),t._v(" "),t.item.lock?s("info",{attrs:{info:t.item.lock}}):t._e(),t._v(" "),t.item.disable?s("info",{attrs:{info:t.item.disable}}):t._e(),t._v(" "),t.item.flavor?s("div",{staticClass:"note-text"},[t._v(t._s(t.item.flavor))]):t._e()],1)};i._withStripped=!0;var n=s(7112),r=s(9736),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.info&&t.effects?s("div",[t.title?s("div",{staticClass:"note-text"},[s("hr"),t._v(t._s(t.title))]):t._e(),t._v(" "),t._l(t.effects,(function(e){return s("div",{key:e.name},[s("span",[t._v(t._s(e.toString()))])])}))],2):t._e()};a._withStripped=!0;var o=s(5720);class l{constructor(t,e,s){this.name=t.toTitleCase(),this.value=e,this.isRate=s}add(t){this.value=this.value+t}toString(){let t=typeof this.value;return"boolean"===t?this.name:this.name+": "+("object"===t?this.value.toString():(0,o.Yk)(this.value))+(this.isRate?"/s":"")}}var h=s(976),u=s(9188),c=s(7899);const d=t=>{let e=h.Rw.context.getData(t);return e?e.name:t};var m={effect:t=>t,skipLocked:()=>{},max:t=>"max "+t,rate:(t,e)=>{let s=t.indexOf(".");if(!(s>0))return t+" "+e;{let i=h.Rw.context.getData(t.slice(0,s));i&&i.type===u.HZ&&(e="train "+e+" rate")}return e}};m.mod=m.base=m.value=m.effect;const p=(t,e)=>{let s=m[e];return void 0!==s?s(t,e):(e=d(e),t?t+" "+e:e)};class f{static GetItem(t,e=null){return e?e[t]||e:h.Rw.context.getData(t)}constructor(){this.results={}}clear(){this.results={}}add(t,e,s=!1,i=null){i&&i instanceof c.Z&&(e=-e);let n=this.results[t];void 0===n?this.results[t]=new l(t,e,s):n.add(e)}}const v={props:["title","info","rate"],mixins:[r.Z],beforeCreate(){this.infos=new f},computed:{effects(){return this.infos.clear(),this.effectItems(this.info,this.rate)}},methods:{effectItems(t,e=!1){let s=typeof t;if("number"===s)this.infos.add("gold",t,this.rate);else if("string"===s)this.infos.add(d(t),!0,!1,f.GetItem(t));else if(Array.isArray(t))t.forEach((t=>this.effectList(t)));else{if("function"===s)return;"object"===s&&this.effectList(t,"",e)}return this.infos.results},effectList(t,e="",s=!1,i=null){if("string"!=typeof t)for(let n in t){let r=t[n];if(null==r||"skipLocked"===n)continue;let a=f.GetItem(n,i),o=s,l=p(e,n);if(void 0!==l)if("object"!=typeof r)this.infos.add(l,r,o,a);else if("function"!=typeof r){if(r.skipLocked){let t=this.infos.rootItem;if(t&&(t.locked||t.disabled))continue}r.constructor!==Object?this.infos.add(l,r,o,a):("dot"===l&&(r={...r},r.id&&delete r.id,r.name&&delete r.name,r[void 0]&&delete r[void 0]),this.effectList(r,l,o,a))}}else this.infos.add(d(t),!0,s,f.GetItem(t,i))}}};var g=s(3379),A=s.n(g),y=s(7795),_=s.n(y),b=s(569),w=s.n(b),k=s(3565),x=s.n(k),C=s(9216),S=s.n(C),O=s(4589),Z=s.n(O),I=s(5234),P={};P.styleTagTransform=Z(),P.setAttributes=x(),P.insert=w().bind(null,"head"),P.domAPI=_(),P.insertStyleElement=S(),A()(I.Z,P),I.Z&&I.Z.locals&&I.Z.locals;var T=s(1900),E=(0,T.Z)(v,a,[],!1,null,"408e302f",null);E.options.__file="src/ui/items/info-block.vue";const M=E.exports;var L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"attack"},[Array.isArray(t.item.attack)?s("div",t._l(t.item.attack,(function(e){return s("div",[s("div",{staticClass:"info-sect"},[t._v("Attack")]),t._v(" "),e.name?s("div",[s("span",[t._v("Name: ")]),s("span",[t._v(t._s(e.name.toString().toTitleCase()))])]):t._e(),t._v(" "),0!==e.damage&&null!==e.damage&&void 0!==e.damage&&"armor"!==t.itemtype||e.targets||t.item.attack.result?s("div",[e.tohit&&0!==e.damage&&null!==e.damage&&void 0!==e.damage?s("div",[t._v("Hit Bonus: "+t._s(e.tohit))]):t._e(),t._v(" "),0!==e.damage&&null!==e.damage&&void 0!==e.damage?s("div",{staticClass:"damage"},[s("span",[t._v("Damage: "+t._s(e.damage))]),t.bonus?s("span",[t._v(t._s(e.bonus))]):t._e()]):t._e(),t._v(" "),0!==e.damage&&null!==e.damage&&void 0!==e.damage&&e.kind?s("div",[t._v("Kind: "+t._s(e.kind.toString().toTitleCase()))]):t._e(),t._v(" "),e.targets?s("div",[t._v("Targets: "+t._s(e.targetstring.toString().toTitleCase()))]):t._e(),t._v(" "),e.result?s("div",{staticClass:"info-subsect"},[t._v("Results:")]):t._e(),t._v(" "),e.result?s("info",{attrs:{info:e.result}}):t._e()],1):t._e(),t._v(" "),e.hits?s("div",t._l(e.hits,(function(e){return s("div",[s("div",{staticClass:"info-subsect"},[t._v("Attack hit")]),t._v(" "),e.tohit&&0!==e.damage&&null!==e.damage&&void 0!==e.damage?s("div",[t._v("Hit Bonus: "+t._s(e.tohit))]):t._e(),t._v(" "),0!==e.damage&&null!==e.damage&&void 0!==e.damage?s("div",{staticClass:"damage"},[s("span",[t._v("Damage: "+t._s(e.damage))]),t.bonus?s("span",[t._v(t._s(e.bonus))]):t._e()]):t._e(),t._v(" "),0!==e.damage&&null!==e.damage&&void 0!==e.damage&&e.kind?s("div",[t._v("Kind: "+t._s(e.kind.toString().toTitleCase()))]):t._e(),t._v(" "),e.targets?s("div",[t._v("Targets: "+t._s(e.targetstring.toString().toTitleCase()))]):t._e(),t._v(" "),e.result?s("div",{staticClass:"info-subsect"},[t._v("Results:")]):t._e(),t._v(" "),e.result?s("info",{attrs:{info:e.result}}):t._e(),t._v(" "),e.dot?s("div",{staticClass:"info-subsect"},[t._v("Applies")]):t._e(),t._v(" "),e.dot?s("dot",{attrs:{dot:e.dot,item:e}}):t._e()],1)})),0):t._e(),t._v(" "),e.dot?s("div",{staticClass:"info-subsect"},[t._v("Applies")]):t._e(),t._v(" "),e.dot?s("dot",{attrs:{dot:e.dot,item:e}}):t._e()],1)})),0):t._e(),t._v(" "),0!==t.damage&&null!==t.damage&&void 0!==t.damage&&"armor"!==t.itemtype||t.item.attack.targets||t.item.attack.result?s("div",[s("div",{staticClass:"info-sect"},[t._v("Attack")]),t._v(" "),t.item.attack.name?s("div",[t.item.attack.name!==t.item.name?s("div",[s("span",[t._v("Name: ")]),s("span",[t._v(t._s(t.item.attack.name.toString().toTitleCase()))])]):t._e()]):t._e(),t._v(" "),t.hitBonus&&0!==t.damage&&null!==t.damage&&void 0!==t.damage?s("div",[t._v("Hit Bonus: "+t._s(t.hitBonus))]):t._e(),t._v(" "),0!==t.damage&&null!==t.damage&&void 0!==t.damage?s("div",{staticClass:"damage"},[s("span",[t._v("Damage: "+t._s(t.damage))]),t.bonus?s("span",[t._v(t._s(t.bonus))]):t._e()]):t._e(),t._v(" "),0!==t.damage&&null!==t.damage&&void 0!==t.damage&&t.item.attack.kind?s("div",[t._v("Kind: "+t._s(t.item.attack.kind.toString().toTitleCase()))]):t._e(),t._v(" "),t.item.attack.targets?s("div",[t._v("Targets: "+t._s(t.item.attack.targetstring.toString().toTitleCase()))]):t._e(),t._v(" "),t.item.attack.result?s("div",{staticClass:"info-sect"},[t._v("Results:")]):t._e(),t._v(" "),t.item.attack.result?s("info",{attrs:{info:t.item.attack.result}}):t._e()],1):t._e(),t._v(" "),t.item.attack.hits?s("div",t._l(t.item.attack.hits,(function(e){return s("div",[s("div",{staticClass:"info-sect"},[t._v("Attack hit")]),t._v(" "),e.tohit&&0!==e.damage&&null!==e.damage&&void 0!==e.damage?s("div",[t._v("Hit Bonus: "+t._s(e.tohit))]):t._e(),t._v(" "),0!==e.damage&&null!==e.damage&&void 0!==e.damage?s("div",{staticClass:"damage"},[s("span",[t._v("Damage: "+t._s(e.damage))]),t.bonus?s("span",[t._v(t._s(e.bonus))]):t._e()]):t._e(),t._v(" "),0!==e.damage&&null!==e.damage&&void 0!==e.damage&&e.kind?s("div",[t._v("Kind: "+t._s(e.kind.toString().toTitleCase()))]):t._e(),t._v(" "),e.targets?s("div",[t._v("Targets: "+t._s(e.targetstring.toString().toTitleCase()))]):t._e(),t._v(" "),e.result?s("div",{staticClass:"info-sect"},[t._v("Results:")]):t._e(),t._v(" "),e.result?s("info",{attrs:{info:e.result}}):t._e(),t._v(" "),e.dot?s("div",{staticClass:"info-subsect"},[t._v("Applies")]):t._e(),t._v(" "),e.dot?s("dot",{attrs:{dot:e.dot,item:e}}):t._e()],1)})),0):t._e(),t._v(" "),t.item.attack.dot?s("div",{staticClass:"info-sect"},[t._v("Applies")]):t._e(),t._v(" "),t.item.attack.dot?s("dot",{attrs:{dot:t.item.attack.dot,item:t.item.attack}}):t._e()],1)};L._withStripped=!0,s(7130);var N=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dot"},[Array.isArray(t.dot)?s("div",t._l(t.dot,(function(e){return s("div",[s("div",{staticClass:"info-subsect"},[t._v("Effect")]),t._v(" "),e.name?s("div",[s("span",[t._v("Name: ")]),s("span",[t._v(t._s(e.name.toString().toTitleCase()))])]):t._e(),t._v(" "),e.effect||e.mod?s("div",[e.effect?s("info",{attrs:{info:e.effect,rate:"true"}}):t._e(),t._v(" "),e.mod?s("info",{attrs:{info:e.mod}}):t._e()],1):t._e(),t._v(" "),s("div",[e.damage||e.dmg?s("div",[s("span",[t._v("Damage: ")]),s("span",[t._v(t._s(e.damage))])]):t._e(),t._v(" "),e.kind?s("div",[s("span",[t._v("Kind: ")]),s("span",[t._v(t._s(e.kind.toString().toTitleCase()))])]):t._e(),t._v(" "),e.duration?s("div",[s("span",[t._v("Duration: ")]),s("span",[t._v(t._s(e.duration+"s"||0))])]):t._e()]),t._v(" "),s("div",[e.damage||e.dmg||e.effect||e.mod?t._e():s("div",[e.id?s("div",[s("span",[t._v("Id: ")]),s("span",[t._v(t._s(e.id.toString().toTitleCase()))])]):t._e()])])])})),0):t._e(),t._v(" "),t.item.name&&t.dot.name?s("div",[t.dot.name!==t.item.name?s("div",[s("span",[t._v("Name: ")]),s("span",[t._v(t._s(t.dot.name.toString().toTitleCase()))])]):t._e()]):t._e(),t._v(" "),t.item.name?t._e():s("div",[t.dot.name?s("div",[s("span",[t._v("Name: ")]),s("span",[t._v(t._s(t.dot.name.toString().toTitleCase()))])]):t._e()]),t._v(" "),t.dot.effect||t.dot.mod?s("div",[t.dot.effect?s("info",{attrs:{info:t.dot.effect,rate:"true"}}):t._e(),t._v(" "),t.dot.mod?s("info",{attrs:{info:t.dot.mod}}):t._e()],1):t._e(),t._v(" "),t.title?s("div",{staticClass:"note-text"},[t._v(t._s(t.title)+":")]):t._e(),t._v(" "),s("div",[t.dot.damage||t.dot.dmg?s("div",[s("span",[t._v("Damage: ")]),s("span",[t._v(t._s(t.damage))])]):t._e(),t._v(" "),t.dot.kind?s("div",[s("span",[t._v("Kind: ")]),s("span",[t._v(t._s(t.dot.kind.toString().toTitleCase()))])]):t._e(),t._v(" "),t.dot.duration?s("div",[s("span",[t._v("Duration: ")]),s("span",[t._v(t._s(t.dot.duration+"s"||0))])]):t._e()]),t._v(" "),s("div",[t.dot.damage||t.dot.dmg||t.dot.effect||t.dot.mod?t._e():s("div",[t.dot.id?s("div",[s("span",[t._v("Id: ")]),s("span",[t._v(t._s(t.dot.id.toString().toTitleCase()))])]):t._e()])])])};N._withStripped=!0;const j={props:["dot","title","item"],name:"dot",mixins:[r.Z],components:{gdata:()=>Promise.resolve().then(s.bind(s,1418)),info:M},computed:{damage(){let t=this.dot.damage||this.dot.dmg;return"number"==typeof t?t:t?"object"==typeof t&&t.toString==Object.prototype.toString&&(console.warn("raw dot object dmg"),t.min&&t.max)?t.min+"~"+t.max:t.toString():void 0}}};var D=(0,T.Z)(j,N,[],!1,null,null,null);D.options.__file="src/ui/items/dot-info.vue";const R=D.exports,$={props:["item"],name:"attack",components:{gdata:()=>Promise.resolve().then(s.bind(s,1418)),dot:R,info:M},computed:{damage(){let t=this.item.attack.damage||this.item.attack.dmg;return"number"==typeof t?t:t?t.toString():void 0},hitBonus(){return this.item.attack.tohit||0},bonus(){let t=this.item.attack.bonus;return t&&0!=t.valueOf()?t>0?" (+"+t+")":" ("+t+")":0},itemtype(){return this.item.type.toString()}}};var B=(0,T.Z)($,L,[],!1,null,null,null);B.options.__file="src/ui/items/attack.vue";const U=B.exports,q={props:["item"],name:"gdata",mixins:[r.Z],components:{info:M,attack:U,dot:R},methods:{precise:o.Yk,tagNames(t){return Array.isArray(t)?t.map(this.tagNames,this):"string"==typeof t&&"t_"===t.substring(0,2)?t.slice(2).toTitleCase():t.toTitleCase()}},beforeCreate(){this.player=n.ZP.state.player},computed:{name(){return this.item.sname||this.item.name.toTitleCase()},sellPrice(){return n.ZP.sellPrice(this.item)},nextImprove(){return this.nextAt>0?this.nextAt:this.nextEvery},nextEvery(){let t=Math.floor(this.item.value);var e,s=Number.MAX_VALUE;for(let n in this.item.every){var i=n-t%n;i<s&&(s=i,e=n)}return s!==Number.MAX_VALUE?(e-i)/e:-1},nextAt(){let t=this.item.value;var e=Number.MAX_VALUE;for(let s in this.item.at)s=Number(s),s>t&&s<e&&(e=s);return e>t&&e!==Number.MAX_VALUE?e:-1},tags(){let t=this.item.tags;for(var e=0;e<this.item.tags.length;e++)"gemimbue"==this.item.tags[e]&&(this.item.tags[e]="Imbue Gem"),"magicgems"==this.item.tags[e]&&(this.item.tags[e]="Magic Gems"),"prismaticgems"==this.item.tags[e]&&(this.item.tags[e]="Prismatic Gems"),"elementalgems"==this.item.tags[e]&&(this.item.tags[e]="Elemental Gems"),"primordialgems"==this.item.tags[e]&&(this.item.tags[e]="Primordial Gems"),"elementalrunes"==this.item.tags[e]&&(this.item.tags[e]="Elemental Runes"),"primaticrunes"==this.item.tags[e]&&(this.item.tags[e]="Prismatic Runes"),"primordialrunes"==this.item.tags[e]&&(this.item.tags[e]="Primordial Runes"),"manas"==this.item.tags[e]&&(this.item.tags[e]="Mana energies"),this.item.tags[e]=this.item.tags[e];return"string"==typeof t?this.tagNames(t):Array.isArray(t)?t.map(this.tagNames,this).join(", "):void 0}}};var F=s(800),V={};V.styleTagTransform=Z(),V.setAttributes=x(),V.insert=w().bind(null,"head"),V.domAPI=_(),V.insertStyleElement=S(),A()(F.Z,V),F.Z&&F.Z.locals&&F.Z.locals;var G=(0,T.Z)(q,i,[],!1,null,"2d591720",null);G.options.__file="src/ui/items/gdata.vue";const H=G.exports},9475:(t,e,s)=>{s.d(e,{Z:()=>a});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"upgrades"},t._l(t.items,(function(e){return s("button",{key:e.id,class:{"task-btn":!0,hidable:!0,locked:t.locked(e)||e.owned&&!e.repeat,running:e.running,runnable:e.perpetual||e.length>0,disabled:!e.canUse()},attrs:{"data-key":e.id},on:{"!mouseenter":function(s){return s.stopPropagation(),t.itemOver(s,e)},click:function(s){return t.emit("upgrade",e)}}},[t._v(t._s(e.name))])})),0)};i._withStripped=!0;const n={props:["items"],mixins:[s(9736).Z]};var r=(0,s(1900).Z)(n,i,[],!1,null,null,null);r.options.__file="src/ui/panes/upgrades.vue";const a=r.exports},976:(t,e,s)=>{s.d(e,{DG:()=>h,dh:()=>l,Rw:()=>o,ZP:()=>S});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.item,expression:"item!=null"}],staticClass:"item-popup"},[s("div",{staticClass:"popup-content"},[t.title?s("div",{staticClass:"pop-title"},[t._v(t._s(t.title))]):t._e(),t._v(" "),Array.isArray(t.item)?t._l(t.item,(function(e){return s("div",{key:e},[t._v(t._s(e.toString()))])})):[t.item?s("gdata",{attrs:{item:t.item}}):t._e()]],2)])};i._withStripped=!0;var n=s(7112),r=s(1418),a=s(1825);const o={item:null,elm:null,title:null,source:null},l=(t,e,s,i)=>{o.item=e,o.elm=t.currentTarget,o.source=s,s&&s.context?o.context=s.context:o.context=n.ZP,o.title=i},h=()=>{o.item=null,o.elm=null,o.source=null,o.title=null,o.context=null},u={data:()=>o,updated(){this.item&&(0,a.M)(this.$el,this.elm)},components:{gdata:r.default}};var c=s(3379),d=s.n(c),m=s(7795),p=s.n(m),f=s(569),v=s.n(f),g=s(3565),A=s.n(g),y=s(9216),_=s.n(y),b=s(4589),w=s.n(b),k=s(9157),x={};x.styleTagTransform=w(),x.setAttributes=A(),x.insert=v().bind(null,"head"),x.domAPI=p(),x.insertStyleElement=_(),d()(k.Z,x),k.Z&&k.Z.locals&&k.Z.locals;var C=(0,s(1900).Z)(u,i,[],!1,null,"8c4acf3a",null);C.options.__file="src/ui/popups/itemPopup.vue";const S=C.exports},1900:(t,e,s)=>{function i(t,e,s,i,n,r,a,o){var l,h="function"==typeof t?t.options:t;if(e&&(h.render=e,h.staticRenderFns=s,h._compiled=!0),i&&(h.functional=!0),r&&(h._scopeId="data-v-"+r),a?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},h._ssrRegister=l):n&&(l=o?function(){n.call(this,(h.functional?this.parent:this).$root.$options.shadowRoot)}:n),l)if(h.functional){h._injectStyles=l;var u=h.render;h.render=function(t,e){return l.call(e),u(t,e)}}else{var c=h.beforeCreate;h.beforeCreate=c?[].concat(c,l):[l]}return{exports:t,options:h}}s.d(e,{Z:()=>i})},3572:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(6802),n=s(2038),r=s(3955),a=s(157);class o{toJSON(){return{}}get dot(){return this._dot}set dot(t){this._dot=t}get id(){return this._name}set id(t){if(this._id=t,this._hits)for(let e=this._hits.length-1;e>=0;e--)this._hits[e].id||(this._hits[e].id=t)}get name(){return this._name}set name(t){if(this._name=t,this._hits)for(let e=this._hits.length-1;e>=0;e--)this._hits[e].name||(this._hits[e].name=t)}get kind(){return this._kind}set kind(t){if(this._kind=t,this.dot&&(this.dot.kind||(this.dot.kind=t)),this._hits){for(let e=this._hits.length-1;e>=0;e--)this._hits[e].kind||(this._hits[e].kind=t);if(this._hits.dot)for(let t=this._hits.length-1;t>=0;t--)this._hits[t].dot.kind||(this._hits[t].dot.kind=this._hits[t].kind)}}get state(){return this._state}set state(t){this._state="string"==typeof t?t.split(","):t}get cure(){return this._cure}set cure(t){this._cure="string"==typeof t?t.split(","):t}get targetstring(){return this._targetstring}set targetstring(t){this.targetstring=t}get targets(){return this._targets}set targets(t){if("string"==typeof t){if(this._targetstring=t,this._targets=(0,a.Fk)(t),this._hits){for(let e=this._hits.length-1;e>=0;e--)this._hits[e].targets||(this._hits[e].targets=(0,a.Fk)(t));for(let e=this._hits.length-1;e>=0;e--)this._hits[e].targetstring||(this._hits[e].targetstring=t)}}else if(this._targetstring=this._targets,this._targets=t,this._hits){for(let e=this._hits.length-1;e>=0;e--)this._hits[e].targets||(this._hits[e].targets=t);for(let e=this._hits.length-1;e>=0;e--)this._hits[e].targetstring||(this._hits[e].targetstring=t)}}get bonus(){return this._bonus}set bonus(t){this._bonus?this._bonus.set(t):this._bonus=new r.Z(t)}get dmg(){return this.damage}set dmg(t){this.damage=t}get damage(){return this._damage}set damage(t){this._damage=(0,a.Sc)(t)}get hits(){return this._hits}set hits(t){if(this._hits=t,t)for(let s=t.length-1;s>=0;s--){var e=t[s];e.id||(e.id=this.id),e.name||(e.name=this.name),e.kind||(e.kind=this.kind),e instanceof o||(t[s]=new o(e))}}get harmless(){return this._harmless}set harmless(t){this._harmless=t}canAttack(){return!0}clone(){return(0,n.vP)(this,new o)}constructor(t=null){if(t&&(this.id=t.id,this.name=t.name,this.kind=t.kind,(0,i.Y6)(this,t)),this.dot)if(Array.isArray(this.dot))for(let t of this.dot)t.id||(t.name?t.id=t.name:t.id=t.name=this.name||this.id),(t.dmg||t.damage)&&(t.damage?t.dmg=t.damage:t.damage=t.dmg);else this.dot.id||(this.dot.name?this.dot.id=this.dot.name:this.dot.id=this.dot.name=this.name||this.id),(this.dot.dmg||this.dot.damage)&&(this.dot.damage?this.dot.dmg=this.dot.damage:this.dot.damage=this.dot.dmg);null!==this._harmless&&void 0!==this._harmless||(this.harmless=this.targets===a.Ny||this.targets===a.Mf||this.targets===a.Nb),this.bonus=this.bonus||0,this.tohit=this.tohit||0}}},6128:(t,e,s)=>{s.d(e,{Z:()=>f});var i=s(9827),n=s(3955),r=s(3572),a=s(7908),o=s(157),l=s(2038),h=s(3707),u=s(9188);class c{toJSON(){if(this.id)return{id:this._id,kind:this.kind||void 0,name:this._name||void 0,dmg:this.damage||void 0,effect:this.effect||void 0,level:this._level||void 0,mod:this._mod||void 0,acc:this.acc||void 0,state:this.state||void 0,adj:this._adj||void 0,flags:0!==this._flags?this._flags:void 0,duration:this.duration,source:this.source?"string"==typeof this.source?this.source:this.source.id:void 0};console.warn("NO DOT ID: "+this)}get name(){return this._name||this._id}set name(t){this._name=t}get id(){return this._id}set id(t){this._id=t}get mod(){return this._mod}set mod(t){this._mod=t}get adj(){return this._adj||this._name||this._id}set adj(t){this._adj=t}get dmg(){return this.damage}set dmg(t){this.damage=t}get damage(){return this._damage}set damage(t){this._damage=(0,o.Sc)(t)}get flags(){return this._flags}set flags(t){this._flags=0,this._flags="number"!=typeof t?(0,h.xu)(t):t}get source(){return this._source}set source(t){this._source=t}get level(){return(this._level||this.source)&&this.source.level||0}set level(t){this._level=t}get perm(){return this._perm}set perm(t){this._perm=t}get type(){return u.$o}valueOf(){return this.perm||this.duration>0?1:0}canCast(){return 0==(this._flags&h.VD)}canAttack(){return 0==(this._flags&h.jb)}canDefend(){return 0==(this._flags&h.qF)}constructor(t,e,s){t&&(0,l.f0)(this,t),this.source=this.source||e||null,this.name=s||this.name||(e?e.name:null),this.id||console.warn("BAD DOT ID: "+this.name),this.duration||(this.duration=0,this.perm=!0),this.mod&&(this.mod=(0,a.uV)(this.mod,this.id,this)),this.flags||(this.flags=0),this.acc=this.acc||0}extend(t){0===t||this.perm?(this.perm=!0,this.duration=0):t>this.duration&&(this.duration=t)}revive(t){this.source&&"string"==typeof this.source&&(this.source=t.getData(this.source))}tick(t){return this.acc+=t,this.acc>=1?(this.acc--,this.perm||this.duration--,1):0}}var d=s(4309),m=s(4478),p=s(6802);class f{get defense(){return this._defense}set defense(t){this._defense?this._defense.set(t):this._defense=new n.Z(t,this.id+".defense")}get tohit(){return this._tohit}set tohit(t){this._tohit?this._tohit.set(t):this._tohit=new n.Z(t,this.id+".tohit")}get resist(){return this._resist}set resist(t){this._resist=t}get speed(){return this._speed}set speed(t){this._speed?this._speed.set(t):this._speed=new n.Z(t,this.id+".speed")}get team(){return this._team}set team(t){this._team=t}set immune(t){this.immunities=t}get immunities(){return this._immunities}set immunities(t){if("string"!=typeof t){for(let s in t){var e=t[s];e instanceof n.Z||(t[s]=new n.Z(e))}this._immunities=t}else{this._immunities={};var s=t.split(",");for(let t in s)this.addImmune(s[t])}}get bonuses(){return this._bonuses}set bonuses(t){this._bonuses=(0,d.fE)(t)}get attack(){return this._attack}set attack(t){if(Array.isArray(t)){let e=[];for(let s=t.length-1;s>=0;s--)e.push(t[s]instanceof r.Z?t[s]:new r.Z(t[s]));this._attack=e}else this._attack=t instanceof r.Z?t:new r.Z(t)}get dots(){return this._dots}set dots(t){let e=[];if(t)for(let s=t.length-1;s>=0;s--)e.push(t[s]instanceof c?t[s]:new c(t[s]));this._dots=e}getCause(t){return this._states.getCause(t)}hasState(t){return this._states.has(t)}canAttack(){return this._states.canAttack()}canDefend(){return this._states.canDefend()}canCast(){return this._states.canCast()}get states(){return this._states}set states(t){this._states=new h.ZP}get instanced(){return!0}get regen(){return this._regen}set regen(t){this._regen=t instanceof n.Z?t:new n.Z(t)}get alive(){return this.hp.value>0}get context(){return this._context}set context(t){this._context=t}constructor(t){t&&(this.id=t.id,(0,p.Y6)(this,t)),this.type=u.yZ,this._states=new h.ZP,this.immunities=this.immunities||{},this._resist=this._resist||{},this.bonuses||(this.bonuses={}),this.dots||(this._dots=[]),this.timer=this.timer||0}revive(t){this.reviveDots(t)}reviveDots(t){for(let e=this.dots.length-1;e>=0;e--)this.dots[e].revive(t),this._states.add(this._dots[e])}retarget(t){return this._states.retarget(t)}cure(t){if(Array.isArray(t))for(let e=t.length-1;e>=0;e--)this.cure(t[e]);else for(let e=this.dots.length-1;e>=0;e--)if(this.dots[e].id===t||this.dots[e].kind===t)return console.log("CURING: "+t),void this.rmDot(e)}tryCast(){return this.spells?this.spells.nextUsable(this.context):null}begin(){}addDot(t,e,s=0){if(Array.isArray(t))return t.forEach((t=>this.addDot(t,e,s)));let i=t;if("string"==typeof t){if(!(t=this.context.state.getData(t)))return;t=(0,l.vP)(t)}else{i=t.id,t=(0,l.vP)(t);let e=this.context.state.getData(i);e&&e.type===u._q&&this.mergeDot(t,e)}if(t[u.db]&&!t[u.db].roll())return;if(!i&&(i=t.id=e?e.name||e.id:null,!i))return;if(t.flags&&this.rollResist(t.kind||i))return void m.ZP.emit(m.G9,this,t.kind||t.name);0===s&&(s=t.duration);let n=this.dots.find((t=>t.id===i));if(void 0!==n){var r=(t.level||e)&&e.level||0;if(n.level>=r)return void n.extend(s);this.removeDot(n)}t instanceof c||((t=new c(t,e)).duration=s),this.applyDot(t)}mergeDot(t,e){(0,l.Xg)(t,e),t.flags=t.flags|e.flags,t.adj=t.adj||e.adj,console.log("dot flags: "+t.flags)}applyDot(t){this._states.add(t),this.dots.push(t),t.mod&&this.context.applyMods(t.mod),t.flags&&m.ZP.emit(m.mG,this,t)}removeDot(t){let e=t.id;this.rmDot(this.dots.findIndex((t=>t.id===e)))}rmDot(t){if(t<0)return;let e=this.dots[t];this.dots.splice(t,1),e.mod&&this.context.removeMods(e.mod),e.flags&&this._states.remove(e)}update(t){let e=this.dots;for(let i=e.length-1;i>=0;i--){var s=e[i];s.tick(t)&&(s.effect&&this.context.applyVars(s.effect,1),(s.damage||s.cure)&&(0,o.Ns)(this,s,s.source),s.duration<=t&&this.rmDot(i))}this.regen&&(this.hp+=this.regen*t)}combat(t){if(this.alive&&(this.timer-=t,this.timer<=0)){if(this.timer+=(0,u.sj)(this.speed),this.spells&&Math.random()<.8){let t=this.tryCast();t&&((t.attack||t.action)&&m.ZP.emit(m.Mz,t,this.context),t.mod&&(this.context.applyMods(this.mod),m.ZP.emit(m.tp,this.name+" uses "+t.name)),t.create&&this.context.create(t.create),t.result&&(m.ZP.emit(m.tp,this.name+" uses "+t.name),this.context.applyVars(t.result,1)),t.dot&&(m.ZP.emit(m.tp,this.name+" uses "+t.name),this.context.self.addDot(t.dot,t)))}return this.getCause(h.jb)||this.getAttack()}}getBonus(t){return this.bonuses[t]||0}getAttack(){return Array.isArray(this.attack)?this.attack[Math.floor(Math.random()*this.attack.length)]:this.attack||this}hasStatus(t){return this.states[t]>0}isImmune(t){return this.immunities[t]>0}tryResist(t){return!(!this.resist||!this.resist[t])&&100*Math.random()<this.resist[t]}getHit(t){return this.tohit.valueOf()}rollResist(t,e=null){return(this._resist[t]||0)+(e||10)>100*Math.random()}getResist(t){return(this._resist[t]||0)/100}removeResist(t,e){this._resist[t]&&(this._resist[t]-=e)}addResist(t,e){this._resist[t]?this._resist[t].base+=e:this._resist[t]=e.valueOf()}addStatus(t){this.states[t]=this.states[t]?this.states[t]+1:1}removeStatus(t){this.states[t]=this.states[t]?this.states[t]-1:0}addImmune(t){this.immunities[t]=this.immunities[t]?this.immunities[t]+1:1}removeImmune(t){this.immunities[t]=this.immunities[t]?this.immunities[t]-1:0}}(0,i.u1)(f,i.ZP)},1893:(t,e,s)=>{s.d(e,{Z:()=>b});var i=s(6128),n=s(7130),r=s(3447),a=s(2821),o=s(3572),l=s(9188),h=s(157),u=s(9827),c=s(2653),d=s(7112),m=s(3434),f=s(2038),v=s(7908);class g{constructor(t,e){this.state=t,this.self=e,this.npcItems=new Map}nextId(t){return this.state.nextId(t)}getSlot(t,e){return null}setSlot(t,e){}findInstance(t){return null}getUnique(t){return this.state.getUnique(t)}findData(t,e=!1){return this.getData(p)}hasUnique(t){return!1}getData(t){if("self"===t)return this.self;if(this.state[t])return this.state[t];let e=this.npcItems.get(t);return void 0!==e?e:(e=this.state.getData(t),e?e.isRecipe?e:this.makeNpcItem(t,e):(console.log("item not found: "+t),null))}makeNpcItem(t,e){let s;return e.template?(s=(0,f.vP)(e.template||e),s=(0,v.rl)(s,e.id)):s=(0,f.vP)(e,{}),e.constructor&&(s=new e.constructor(s)),null==s&&(console.log("NPC: Cant create: "+t),s=e),this.npcItems.set(t,s),s}}var A=s(4478);class y{get runner(){return this._runner}set runner(t){this._runner=t}get state(){return this._state}set state(t){this._state=t}get self(){return this._state.self}set self(t){this._state.self=t}constructor(t,e){this.state=new g(t,e)}getData(t){return this.state.getData(t)}tryItem(t){}tryUseOn(t,e){}tryBuy(t){return!0}unlockTest(t){return!1}craft(t){return!0}create(t,e,s=1){if("string"==typeof t)t=this.state.getData(t);else if(Array.isArray(t)){for(let e=t.length-1;e>=0;e--)this.create(t[e],!1,s);return}if(t)for(let e=s;e>0;e--)t.type===l.EN&&t.onCreate&&t.onCreate(this,this.self.team,!1)}filled(){return!1}removeMods(t,e){this.applyMods(t,-e)}remove(t,e){}disable(t){}useOn(t,e){}addTimer(t){}getLoot(){}canPay(t,e=1){if(null==t)return!0;if(Array.isArray(t))return t.every((t=>this.canPay(t,e)),this);let s;if("object"==typeof t)for(let i in t){let n=t[i];if(s=this.state.getData(i),!s)return!1;if(s.instanced||s.isRecipe)return this.state.inventory.hasCount(s,e);if(!isNaN(n)||n.isRVal){if(!s.canPay(n*e))return!1}else if(!this.canPayObj(s,n,e))return!1}return!0}canPayObj(t,e,s=1){if(!t)return!1;if(e instanceof RValue||!isNaN(e))return t.value>=e;for(let n in e){var i=e[n];if(!isNaN(i)||i instanceof RValue){if(t.value<i*s)return!1}else if("object"==typeof i&&!this.canPayObj(t[n],i,s))return!1}return!0}canEquip(t){return!0}equip(t){}unequip(t,e){}onUnequip(t){}setSlot(t){}payCost(t){}canMod(t){return!0}payInst(t,e){}setTask(t){}canRun(t){return t.canRun?t.canRun(this,d.EU):(console.error(t.id+" no canRun()"),!1)}canUse(t){return!0}applyMods(t,e=1){if(t)if(Array.isArray(t))for(let s of t)this.applyMods(s,e);else if("object"==typeof t)for(let i in t){var s=this.getData(i);null!=s&&(s.applyMods?s.applyMods(t[i],e):console.warn("no applyMods(): "+s))}else if("string"==typeof t){let e=this.getData(t);e&&(console.warn("!!!!!!!!!!ADDED NUMBER MOD: "+t),e.amount(this,1))}}applyVars(t,e){if(Array.isArray(t))for(let s of t)this.applyVars(s,e);else if("object"==typeof t){let s,i=t[l.db];if(i&&!i.roll())return;for(let n in t)s=this.getData(n),i=t[n],null==s?n===l.yn?this.self.addTitle(i):n===l.WX?A.ZP.emit(A.ij,i):console.warn(n+" no effect target: "+i):"number"==typeof i?s.amount(i*e):i.isRVal?s.amount(e*i.getApply(this.state,s)):!0===i?(s.doUnlock(this),s.onUse(this)):i.type===l.db?i.roll()&&s.amount(1):s.applyVars(i,e)}else if("string"==typeof t){let s=this.getData(t);void 0!==s&&(1===s.amount.length?s.amount(e):2===s.amount.length&&s.amount(this,e))}}}var _=s(6802);class b extends i.Z{toJSON(){let t=super.toJSON();return t.id=this.id,t.cost=void 0,t.context=void 0,t.team=this.team||void 0,t.timer=this.timer,t.attack=this.attack,this.template?(t.template=this.template.id,this._name!=this.template.name&&(t.name=this._name)):t.name=this._name,t}get keep(){return this._keep}set keep(t){this._keep=t}get hp(){return this._hp}set hp(t){void 0===this._hp||null===this._hp||"object"==typeof t?this._hp=t instanceof a.Z?t:new a.Z(t):this._hp.set(t)}get loot(){return this._loot}set loot(t){if("object"==typeof t){for(var e in t){var s=t[e];"string"==typeof s&&(r._.test(s)?t[e]=new r.Z(s):n.U.test(s)?t[e]=new n.Z(s):isNaN(s)||(t[e]=Number(s)))}this._loot=t}else this._loot=t}get damage(){return this._damage}set damage(t){this._damage=(0,h.Sc)(t)}get active(){return this._active}set active(t){this._active=t}get spells(){return this._spells}set spells(t){this._spells=(0,m.eL)(t)}constructor(t,e=null){super(t),e&&(0,_.BF)(this,e),this.dodge=this.dodge||this.level/2,this.active=void 0!==this.active&&null!==this.active&&this._active,this.context=new y(d.ZP.state,this),this._spells&&this.spells.revive(this._context.state),"string"==typeof this.hp?this.hp=new n.Z(this.hp).value:this.hp instanceof n.Z&&(this.hp=this.hp.value),this.hp||(this.hp=1),this.team||(this.team=l.IA),this.tohit||(this.tohit=0),!this.dmg||null!==this.damage&&void 0!==this.damage||(this.damage=this.dmg),this.attack||(this.attack=new o.Z(this.damage),this.damage=0)}revive(t){"string"==typeof this.template&&(this.template=t.getData(this.template)),this.template&&(this.attack=this.template.attack),super.revive(t)}onUse(t){}res(){this.hp=1}rest(t){this.hp.amount(.01*this.hp.max*t)}}(0,u.u1)(b,c.Z)},3707:(t,e,s)=>{s.d(e,{jb:()=>r,qF:()=>a,VD:()=>o,xu:()=>h,ZP:()=>d});var i=s(4152),n=s(157);const r=1,a=2,o=4,l=r+a+o,h=t=>{"string"==typeof t&&(t=t.split(","));let e=0;for(let i=t.length-1;i>=0;i--){var s=t[i];"noact"===s?e|=l:"noattack"===s?e|=r:"nodefend"===s?e|=a:"nocast"===s?e|=o:"confused"===s?e|=8:"charmed"===s&&(e|=16)}return e},u={[n.Nb]:n.fc,[n.tf]:n.fc,[n.wq]:n.h,[n.Mf]:n.h,[n.Ny]:n.h},c={[n.Nb]:n.tf,[n.tf]:n.Nb,[n.wq]:n.Mf,[n.Mf]:n.wq};class d{toJSON(){}get causes(){return this._causes}set causes(t){this._causes=t}get flags(){return this._flags}set flags(t){this._flags=t}canCast(){return 0==(this._flags&o)}canAttack(){return 0==(this._flags&r)}canDefend(){return 0==(this._flags&a)}has(t){var e=this._causes[t];return e&&e.length>0}constructor(){this._causes={},this._flags=0}retarget(t){return(8&this.flags)>0?t?u[t]:n.h:(16&this.flags)>0?t?c[t]:n.Mf:t}getCause(t){let e=this._causes[t];return e&&e.length>0?e[0]:null}add(t){t||console.warn("no cause: "+t);let e=t.flags;if(0===e)return;let s=1;for(;s<=e;)(e&s)>0&&this._addCause(s,t),s*=2;this._flags|=e}remove(t){if(!t)return;let e=t.flags,s=1;for(;s<=e;)(e&s)>0&&this._rmCause(s,t),s*=2}_rmCause(t,e){let s=this._causes[t];if(!s)return;let n=s.indexOf(e);n>=0&&((0,i.xF)(s,n),0===s.length&&(this.flags^=t))}_addCause(t,e){let s=this._causes[t];s?s.push(e):s=this._causes[t]=[e]}refresh(t){this._flags=0;for(let t in this._causes)this._causes[t]=null;for(let s=t.length-1;s>=0;s--){var e=t[s];e.flags&&this.add(e)}}}},430:(t,e,s)=>{s.d(e,{Z:()=>c});var i=s(3572),n=s(81),r=s(7908),a=s(8564),o=s(2653),l=s(9188),h=s(3955),u=s(2821);class c extends a.Z{toJSON(){let t=super.toJSON();return this.save||(t.material=t.kind=void 0),t.id=this.id,this.template?"string"==typeof this.template?t.template=this.template:t.template=this.template.id:t.type=this.type,t.name=this.sname,t.enchants=this.enchants,this.mod&&(t.mod=this.mod),this.material&&(t||(t={}),t.material=this.material.id),t||void 0}get enchants(){return this._enchants}set enchants(t){void 0===this._enchants||null===this._enchants||"object"==typeof t?this._enchants=t instanceof u.Z?t:new u.Z(t,!0):this._enchants.set(t)}get dmg(){return this.damage}get damage(){return this._attack?this._attack.damage:0}get equippable(){return!0}get material(){return this._material}set material(t){this._material=t}get armor(){return this._armor}set armor(t){this._armor?("number"==typeof this._armor&&(this._armor=new h.Z(this._armor)),this._armor.base=t):this._armor=new h.Z(t)}get attack(){return this._attack}set attack(t){t?t!==this._attack?t instanceof i.Z?this._attack=t.clone():this._attack=new i.Z(t):t instanceof i.Z||(this._attack=new i.Z(t)):this._attack=null}get worn(){return this.value>0}get slot(){return this._slot}set slot(t){this._slot=t}get kind(){return this._kind}set kind(t){this._kind=t}constructor(t=null,e=null){super(t,e),this.stack=!1,this.consume=!1,this.enchants||(this.enchants=0),this.alters||(this.alters=[]),this.value=this.val=0,this.type||(console.warn(this.id+" unknown wear type: "+this.type),this.attack?this.type=l.if:this.armor||null!=this.slot?this.type=l.rU:this.type=l.W$),this._attack&&(this.attack=this._attack,this._attack.name||(this._attack.name=this.name))}maxed(){return!1}revive(t){"string"==typeof this.material&&(this.material=t.getData(this.material)),"string"==typeof this.recipe?this.template=t.getData(this.recipe):"string"==typeof this.template&&(this.template=t.getData(this.template)),this.template?(null!==this.armor&&void 0!==this.armor||(this.armor=this.template.armor),null!==this.tohit&&void 0!==this.tohit||(this.tohit=this.template.tohit||0),null!==this.attack&&void 0!==this.attack||(this.attack=this.template.attack),this.type=this.template.type||this.type):console.log("bad template: "+this.template),(!this.level||this.template&&this.level<=this.template.level)&&(this.template&&this.template.level?this.level=this.template.level.valueOf()||1:this.level=1,this.material&&this.material.level&&(console.log("MAT WITH LEVEL: "+this.material.level),this.level+=this.material.level.valueOf()||0)),"function"==typeof this.alters.includes&&this.material&&!this.alters.includes(this.material.id)&&this.alters.push(this.material.id),this.mod&&(this.mod=(0,r.uV)(this.mod,this.id,this)),this.enchants.max||this.calcMaxEnchants()}hasEnchant(t){return this.alters&&this.alters.find((e=>e.id===t))}applyMaterial(t){t&&(this.material=t,console.log("APPLY MATERIAL: "+t.id),this.doAlter(t))}doAlter(t){t.type===l.ky&&(this.enchants+=t.level||0),console.log("APPLY ALTER: "+t.id),o.Z.doAlter.call(this,t)}calcMaxEnchants(){let t=0;this.template&&(t=this.template.enchants||0),console.log(this.id+" RECALC ENCHANT max: "+t),this.enchants.max=t}equip(t){let e=t.state.player;if(this.armor&&e.defense.add(this.armor),"weapon"===this.type&&e.addWeapon(this),this.value=1,this.mod){for(let t in this.mod)console.log("apply mod: "+t);t.applyMods(this.mod,1)}}remod(t){if(t.state.player,this.value=1,this.mod){for(let t in this.mod)console.log("apply mod: "+t);t.applyMods(this.mod,1)}}unequip(t){let e=t.state.player;this.armor&&e.defense.add(-this.armor),this.type===l.if&&e.removeWeapon(this),this.value=0,this.mod&&t.removeMods(this.mod)}convertMods(t){let e=typeof t;if(t instanceof n.ZP)return t;if("object"===e){if(t.id)return new n.ZP(t,t.id,this);for(let e in t)t[e]=this.convertMods(t[e])}else if("string"===e||"number"===e)return new n.ZP(t,this.id,this);return t}}},1:(t,e,s)=>{s.d(e,{Z:()=>l}),s(7112);var i=s(6609),n=s(9188),r=s(3955),a=s(6584),o=s(2038);class l extends i.Z{toJSON(){return{item:this.item.id,target:this.target,exp:this._exp}}get type(){return n.L0}get controller(){return n.ZG}get target(){return this._target}set target(t){this._target=t}get exp(){return this._exp}set exp(t){this._exp=t}percent(){return this._length?Math.round(100*this._exp/this._length):0}get length(){return this._length}set length(t){this._length=new r.Z(t)}canRun(t){return!this.done&&this._item&&this._target&&this._item.canAlter(this._target)}get done(){return this._exp>=this._length}constructor(t=null,e=null){super(),e?(this.target=e,this.item=t):t&&(0,o.f0)(this,t),this.length="object"==typeof this.item&&this.item.length||0,this.exp=this._exp||0}update(t){this.exp+=t,this.exp>=this.length&&this.target&&this.target.doAlter(this.item)}revive(t){super.revive(t),"string"==typeof this._target?this.target=t.findData(this._target):"object"==typeof this._target&&(this._target=(0,a.X)(t,this._target)),this.item&&(this._length=this.item.length)}}},6609:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(2038);class n{get id(){return"prox_"+(this.item?this.item.id:"")+"_"+(this.target?this.target.id:"")}get name(){return this.item?this.item.name:""}set name(t){}get instanced(){return!0}set count(t){}hasTag(t){return this.item&&this.item.hasTag(t)}hasTags(t){return this.item&&this.items.hasTag(t)}get buy(){return this.item?this.item.buy:null}get cost(){return this.item?this.item.cost:null}get run(){return this.item?this.item.run:null}get effect(){return this.item?this.item.effect:null}get level(){return this.item?this.item.level:0}get length(){return this.item?this.item.length:null}get perpetual(){return!!this._item&&this._item.perpetual}get item(){return this._item}set item(t){this._item=t}get repeat(){return this._item&&this._item.repeat||!1}get owned(){return!!this._item&&this.item.owned}set owned(t){this._item&&(this._item.owned=t)}get running(){return!!this.item&&this.item.running}set running(t){this.item&&(this.item.running=t)}isProxy(){return!0}maxed(){return!this.item||this.item.maxed()}canUse(t){return this._item&&this._item.canUse(t)}canRun(t){return this._item&&this._item.canRun(t)}constructor(t=null){t&&(0,i.f0)(this,t)}amount(t){this._item&&this._item.amount(t)}revive(t){"string"==typeof this._item&&(this._item=t.findData(this._item))}}},3967:(t,e,s)=>{s.d(e,{Z:()=>i});class i{toJSON(){}get id(){return this._id}set id(t){this._id=t}get items(){return this._items}set items(t){this._items=t}[Symbol.iterator](){return this._items[Symbol.iterator]()}get type(){return this._type}set type(t){this._type=t}get name(){return this._name}set name(t){this._name=t}get locked(){for(let t of this.items)if(!1===t.locked)return!1;return!0}set locked(t){for(let e of this.items)e.locked=t}get owned(){for(let t of this.items)if(!0===t.owned)return!0;return!1}get delta(){return 0}valueOf(){let t=0;for(let e of this.items)t+=e.valueOf();return t}constructor(t){this.id=t,this.items=new Set;let e=t.toString().indexOf("t_");this.name=e<0?t.toString():t.toString().slice(e+2)}fillsRequire(){for(let t of this.items)if(t.fillsRequire())return!0;return!0}canUse(t){return t.canPay(this.cost)}fillsRequire(){for(let t of this.items)if(t.fillsRequire())return!0;return!1}filled(t){for(let e of this.items)if(!e.filled(t))return!1;return!0}maxed(){for(let t of this.items)if(!t.maxed())return!1;return!0}remove(){console.warn("TagSet remove() not implemented")}onUse(t){console.warn("TagSet onUse() not implemented")}add(t){this.items.add(t)}random(){let t=this.items.size;if(t<=0)return null;let e=Math.floor(Math.random()*t);const s=this.items.values();for(;e-- >0;)s.next();return s.next().value}amount(t){for(let e of this.items)e.amount(t)}disable(){}applyVars(t,e=1){for(let s of this.items)s.applyVars(t,e)}applyMods(t,e=1){for(let s of this.items)s.applyMods(t,e,s)}hasTag(t){return"tagset"===t}toArray(){return Array.from(this.items)}filter(t){let e=[];for(let s of this.items)t(s)&&e.push(s);return e}forEach(t){return this.items.forEach(t)}}},4671:(t,e,s)=>{s.d(e,{ZP:()=>G,xt:()=>H,mb:()=>V});var i=s(4028),n=s(7908),r=s(4945),a=s(7899);class o extends i.Z{get current(){return this.unit?Math.floor(this.value):this._value}add(t){let e=this.value.valueOf();return this.value.base+=t,this.value.valueOf()-e}setBase(t,e){let s=this.add(e-this.value.base);this.changed(t,s)}constructor(t=null){super(t),void 0!==this.value&&null!==this.value||(this.value=0),this.repeat=!0,null!==this.unit&&void 0!==this.unit||(this.unit=!0),null!==this._rate&&void 0!==this.rate||(this.rate=0)}maxed(){return!1}filled(){return!1}}var l=s(1247),h=s(8206),u=s(1949),c=s(3572),d=s(2466),m=s(9188);class p extends d.Z{get only(){return this._only}set only(t){this._only="string"==typeof t?t.split(","):t}get silent(){return this._silent}set silent(t){this._silent=t}get attack(){return this._attack}set attack(t){null!=t&&(t instanceof c.Z||(t=new c.Z(t)),t.name||(t.name=this.name),t.kind||(t.kind=this.school)),this._attack=t}get action(){return this._action}set action(t){t&&(t instanceof c.Z||(t=new c.Z(t)),t.name||(t.name=this.name),t.kind||(t.kind=this.school)),this._action=t}toJSON(){let t=super.toJSON();return this.owned&&(t.owned=this.owned),t}constructor(t=null){super(t),this.repeat=!0,this.type="spell",this.level=this.level||1,this.owned=this.owned||!1,this.owned||(this.buy||(this.buy={}),!this.buy.arcana&&this.level>1&&(this.buy.arcana=this.level-1)),this.dot&&!this.dot.id&&(this.dot.id=this.dot.name||this.name),!1!==this.locked&&this.addRequire("spellbook")}canUseOn(t){return!(t.level&&2*this.level<t.level)&&(!this.only||(0,m.QS)(this.only,t))}}var f=s(2038),v=s(5608),g=s(9827);class A{get isRecipe(){return!0}get exclude(){return this._exclude}set exclude(t){this._exclude="string"==typeof t?t.split(","):t}get only(){return this._only}set only(t){this._only="string"==typeof t?t.split(","):t}get alter(){return this._alter}set alter(t){this._alter=t}constructor(t=null){t&&(0,f.f0)(this,t),this.alter&&(this.alter=(0,n.uV)(this.alter,this.id,1))}}(0,g.u1)(A,g.ZP);var y=s(1);class _ extends d.Z{get isRecipe(){return!0}get only(){return this._only}set only(t){this._only="string"==typeof t?t.split(","):t}get controller(){return m.ZG}constructor(t){super(t),this.verb=this.verb||"enchanting",this.level=this.level||1,this.need=this.need||"enchantsource",this.alter&&(0,g.Aw)(this.alter,1)}beginUseOn(t){return new y.Z(this,t)}complete(){}useOn(t,e){t&&t.doAlter(this)}canAlter(t){return!(t.hasEnchant(this.id)||t.enchants+this.level>t.enchants.max)&&(!this.only||(0,m.QS)(this.only,t))}}const b={level:1,repeat:!0,stack:!0};class w extends i.Z{toJSON(){let t=super.toJSON();return t.id=this.id,t.template=this.template,t.recipe=this.recipe,t||void 0}get isRecipe(){return!0}constructor(t=null){super(t,b),this.require=this.require||this.unlockTest}}var k=s(6093),x=s(4478),C=s(7112);class S extends i.Z{get rand(){return this._rand}set rand(t){this._rand=t}get cd(){return this._cd}set cd(t){this._cd=t}constructor(t=null){super(t)}doUnlock(t=C.ZP){this.disabled||this.value>0&&!this.repeat||(this.locked&&x.ZP.emit(x.tT,this),this.loot&&t.getLoot(this.loot),this.rand||super.amount(1),this.locked=!1,x.ZP.emit(x.ij,this))}amount(t){this.doUnlock()}}var O=s(3955),Z=s(4309),I=s(430),P=s(6128),T=s(3707),E=s(3037),M=s(1555),L=s(7532);const N=["hp","stamina","rage","bf","unease","weary","rage","madness"],j=new I.Z(null,{id:"baseWeapon",name:"fists",type:m.if,attack:{name:"fists",tohit:1,kind:"blunt",damage:"0~1"}});class D extends P.Z{get level(){return this._level}set level(t){this._level&&"number"==typeof t?this._level.value=t:this._level=t}get title(){return this._title}set title(t){this._title=t}get titles(){return null==this._titles&&(this._titles=[]),this._titles}set titles(t){this._titles=t}get exp(){return this._exp}set exp(t){if(void 0===this._exp)this._exp=t;else for(this._exp.value=t;this._next>0&&this._exp.value>=this._next;)this.levelUp()}get gclass(){return this._gclass}set gclass(t){this._gclass=t}get next(){return this._next}set next(t){this._next=t}get hp(){return this._hp}set hp(t){this._hp?this._hp.value=t:t instanceof i.Z?this._hp=t:console.error("Invalid Hp: "+t)}get damage(){return this._damage}set damage(t){this._damage=t instanceof O.Z?t:new O.Z(t)}get speed(){return this._speed}set speed(t){this._speed?this._speed.value=t:t instanceof i.Z&&(this._speed=t)}get weapons(){return this._weapons}set weapons(t){this._weapons=new E.ZP(t),this._weapons.saveMode=L.k2,this._weapons.removeDupes=!0}get weapon(){return this._weapons?this._weapons.curItem():null}get hits(){return this._hits?this._hits:this._hits={}}set hits(t){this._hits=(0,Z.fE)(t)}toJSON(){let t={};return t.defense=this.defense,t.tohit=this.tohit,t.name=this.name,t.titles=this.titles,t.title=this.title,t.next=this.next,t.timer=this.timer,t.alignment=this.alignment,t.damage=this.damage,t.dots=this.dots,t.bonuses=this.bonuses,t.hits=this.hits,t.immunities=this.immunities,t.resist=this.resist,t.retreat=this.retreat||void 0,t.gclass=this.gclass,t.weapons=this.weapons,t}getHit(t){return this.tohit.valueOf()+(t&&this.hits[t]||0)}constructor(t=null){super(t),this.id=this.type="player",t&&t.name||(this.name="Wizrobe"),this.weapons||(this.weapons=null),this.level||(this.level=0),this._title=this._title||"Waif",this.titles=this._titles||[],this._next=this._next||50,this.team=m.Zj,this.defeators=[],this.retreat=this.retreat||0,this.initStates(),this.tohit||(this.tohit=1),this.defense||(this.defense=0),this.alignment=this.alignment||"neutral",null!==this.damage&&void 0!==this.damage||(this.damage=1)}setClass(t){this.gclass=t,this.addTitle(t),x.ZP.emit(x.td,this)}setName(t){t&&(this.name=t,x.ZP.emit(x.tK,this))}setTitle(t){t&&(this.title=t,this.addTitle(t),x.ZP.emit(x.oc,this))}addTitle(t){this._titles.includes(t.toTitleCase())||(this.context.applyVars("hallPoints",.1),this._titles.push(t.toTitleCase()),x.ZP.emit(x.bh,t,this._titles.length))}revive(t){super.revive(t),this.weapons.revive(t,((t,e)=>{t.equip.find(e)})),0===this.weapons.count&&this.weapons.add(j);for(let s=N.length-1;s>=0;s--){var e=t.getData(N[s]);e&&this.defeators.push(e)}this.spells=t.getData("spelllist"),this.spells.max.value=0,this.stamina.max.base=10,this.tohit.base=1,this.speed.value.base=1,this.hp.max.base=5}addWeapon(t){this.weapons.add(t),this.weapons.count>1&&this.weapons.remove(j)}removeWeapon(t){this.weapons.remove(t),0===this.weapons.count&&this.weapons.add(j)}begin(){for(let t=this.dots.length-1;t>=0;t--)this.dots[t].mod&&this.context.applyMods(this.dots[t].mod,1)}rested(){for(let t=this.defeators.length-1;t>=0;t--)if(!1===this.defeators[t].maxed())return!1;return!0}defeated(){for(let t=this.defeators.length-1;t>=0;t--)if(this.defeators[t].empty())return!0;return!1}explore(t){this.timer-=t,this.timer<=0&&(this.timer+=(0,m.sj)(this.speed),this.tryCast())}combat(t){if(this.timer-=t,this.timer<=0){if(this.timer+=(0,m.sj)(this.speed),!this.tryCast())return this.nextAttack();if(!this.weapons.includes(j))return this.nextAttack()}}tryCast(){return this.spells?this.spells.onUse(this.context):null}nextAttack(){let t=this.getCause(T.jb);if(t)return t;let e=this.weapons.nextItem();return e?e.attack:null}getResources(){let t=[];for(let s in this){var e=this[s];null!==e&&"object"==typeof e&&e.type===m.YI&&t.push(e)}return t}removeResist(t,e){this._resist[t]&&(this._resist[t].base-=e)}addResist(t,e){this._resist[t]?this._resist[t].base+=e:this._resist[t]=new O.Z(e)}levelUp(){this.level.amount(1),this._exp.value-=this._next,this._next=Math.floor(1.125*this._next),M.Bc.add(this),x.ZP.emit(x.FQ,this,this._level.valueOf())}initStates(){this._resist=this._resist||{};for(let t in this._resist)this._resist[t]=new O.Z(this._resist[t]);this.regen=this.regen||0,this.immunities||(this.immunities={fire:0,water:0,air:0,earth:0,light:0,shadow:0,arcane:0,physical:0,natural:0,poison:0,disease:0}),this.bonuses||(this.bonuses={})}}var R=s(2961);class $ extends i.Z{toJSON(){let t=super.toJSON();return this.char&&(t||(t={}),t.char=this.char),t}get charlock(){return this._charlock}set charlock(t){this._charlock=t}get char(){return this._char}set char(t){this._char=t}constructor(t=null){super(t)}changed(t,e){return this.charlock&&e>0&&(this.char=t.state.player.hid),super.changed(t,e)}revive(t){let e=t.player;this.char&&e.hid!==this.char&&(this.disabled=!0,console.log(this.id+" DISABLED FOR "+e.hid))}}class B extends ${constructor(t=null){super(t),!1!==t.warn&&(this.warnMsg="Alternate Wizard classes of this tier will be locked.",this.warn=!0)}changed(t,e){super.changed(t,e),t.state.player.setClass(this.name),this.locked=!1,x.ZP.emit(x.ij,this)}}var U=s(1917);class q{get type(){return m._q}set type(t){}get id(){return this._id}set id(t){this._id=t}get name(){return this._name||this._id}set name(t){this._name=t}get value(){return this._value}set value(t){this._value=t}get mod(){return this._mod}set mod(t){this._mod=t}get effect(){return this._effect}set effect(t){this._effect=t}get flags(){return this._flags}set flags(t){this._flags="number"!=typeof t?(0,T.xu)(t):t}get stack(){return this._stack}set stack(t){this._stack=t}constructor(t){t&&(0,f.f0)(this,t)}applyTo(t,e){this.mod&&t.applyMods(this.mod,e)}remove(t,e){}}(0,g.u1)(q,g.ZP);var F=s(4152);const V=(t,e="./data/")=>new R.ZP(e,t).load(),G={main:null,loadModInfo:async t=>V([t]).then((e=>{if(!e)throw new Error("Modlist not found: "+t);return e[t]})),async loadGame(t){if(null===this.main){let t=await this.loadModInfo("modules");this.main=await(new U.Z).load(t.core),t.modules&&await this.main.load(t.modules,"./data/modules/")}return this.instance(this.main.objects,this.main.lists,t)},instance(t,e,s={}){s=s||{};for(let t in s)"items"!==t&&"drops"!==t&&(s[t]=(0,n.rl)(s[t],t));let i=s.items;if(i)for(let e in t){let s=t[e];if(s.alias&&!i[e]){var r=i[s.alias];r&&(console.warn("alias: "+s.alias+" -> "+e),i[e]=r,delete i[s.alias])}}else i={};s.items=this.mergeItems(i,t);let a=this.buildLists(s.items,e);return this.initInstance(s,a)},buildLists(t,e){let s={};for(let r in e){var i=e[r];if(i){var n=s[r]=[];for(let e=0;e<i.length;e++)n[e]=t[i[e].id]}}return s},mergeItems(t,e){for(let i in e){var s=t[i]||{};"number"==typeof s&&(s={val:s}),(0,f.Xg)(s,e[i]),t[i]=(0,n.rl)(s,i),s.template=e[i]}return t},initInstance(t,e){var s=t.items;return e.resources&&(t.resources=this.initItems(s,e.resources,r.Z)),e.stressors&&(t.stressors=this.initItems(s,e.stressors,r.Z,"stress","stress"),t.stressors.forEach((t=>t.hide=!0))),e.upgrades&&(t.upgrades=this.initItems(s,e.upgrades,i.Z,null,"upgrade")),e.homes&&(t.homes=this.initItems(s,e.homes,i.Z,m.Sd,m.Sd),t.homes.forEach((t=>t.slot=m.Sd))),e.furniture&&this.initItems(s,e.furniture,i.Z,"furniture","furniture"),e.skills&&(t.skills=this.initItems(s,e.skills,l.Z,m.HZ)),e.encounters&&(t.encounters=this.initItems(s,e.encounters,k.Z,m.$6,m.$6)),e.monsters&&(t.monsters=this.initItems(s,e.monsters,h.Z,m.EN,m.EN)),e.rares&&(t.rares=this.initItems(s,e.rares,v.Z)),e.states&&(t.states=this.initItems(s,e.states,q,"state","state")),e.reagents&&(t.reagents=this.initItems(s,e.reagents,r.Z)),e.locales&&(this.initItems(s,e.locales,u.go),e.locales.forEach((t=>t.sym=t.sym||"🌳"))),e.dungeons&&(this.initItems(s,e.dungeons,u.go,null,m.lN),e.dungeons.forEach((t=>t.sym=t.sym||"⚔"))),e.spells&&this.initItems(s,e.spells,p),e.stats&&this.initItems(s,e.stats,o,"stat","stat"),e.armors&&(t.armors=this.initItems(s,e.armors,v.Z,m.rU,m.rU),t.armors.forEach((t=>t.kind=t.kind||m.rU))),e.weapons&&(t.weapons=this.initItems(s,e.weapons,v.Z,m.if,m.if),t.weapons.forEach((t=>t.kind=t.kind||m.if))),e.potions&&(t.potions=this.initItems(s,e.potions,w,m.v4,m.v4)),e.materials&&(t.materials=this.initItems(s,e.materials,A,"material","material")),e.properties&&(t.properties=this.initItems(s,e.properties,A,"property","property")),e.events&&(t.events=this.initItems(s,e.events,S,m.Ks,m.Ks)),e.classes&&(t.classes=this.initItems(s,e.classes,B,"class","class")),e.tasks&&(t.tasks=this.initItems(s,e.tasks,d.Z,null,"task")),e.actions&&(t.tasks=this.mergeTasks(t.tasks,this.initItems(s,e.actions,d.Z,null,"task"))),e.enchants&&(t.enchants=this.initItems(s,e.enchants,_,null,"enchant")),e.sections&&(t.sections=this.initItems(s,e.sections)),e.player&&(t.player=this.initPlayer(s,e.player,t.items.player)),t},mergeTasks:(t,e)=>(0,F.ez)(t,e,(e=>void 0===t.find((t=>t.id==e.id)))),initItems(t,e,s=i.Z,n=null,r=null){if(null!=e){for(let i=e.length-1;i>=0;i--){var l=e[i];l.reverse?e[i]=l=new a.Z(l):l.stat?e[i]=l=new o(l):e[i]=l=new s(l),n&&l.addTag(n),r&&(l.type=r),t[l.id]=l}return e}},initPlayer(t,e,s=null){if(!e)return;let i,n=s||{};for(let s of e)i=n[s.id]=!0===s.stat?new o(s):!0===s.reverse?new a.Z(s):new r.Z(s),i.type=m.YI,t[s.id]=i;return t.player=new D(n)}},H=t=>{let e;for(let s in t)e=t[s],"object"==typeof e?H(e):Object.freeze(e);return Object.freeze(t)}},4478:(t,e,s)=>{s.d(e,{tp:()=>u,sA:()=>c,A_:()=>f,v9:()=>v,H7:()=>g,Nn:()=>A,Ut:()=>y,bp:()=>_,WM:()=>b,d2:()=>w,Ug:()=>k,WD:()=>x,mG:()=>C,Ry:()=>S,WK:()=>I,G9:()=>P,tK:()=>q,o:()=>G,oc:()=>B,bh:()=>U,FQ:()=>F,td:()=>V,ST:()=>N,ij:()=>d,tT:()=>m,SG:()=>p,o3:()=>L,Mz:()=>D,T4:()=>M,mN:()=>R,b0:()=>T,T0:()=>E,E9:()=>j,Qk:()=>Z,yK:()=>O,UE:()=>$,ZP:()=>H});var i=s(6729),n=s.n(i),r=s(6802),a=s(9188),o=s(5720);const l=new(n()),h=new(n()),u="combat",c="char_hit",d="event",m="unlock",p="loot",f=8,v={event:1,unlock:2,loot:4,combat:f},g="buy",A="tryuse",y="use",_="set_slot",b="char_died",w="ally_died",k="combat_won",x="slain",C="charstate",S="stateblock",O="defeat",Z="dmg_miss",I="is_immune",P="resists",T="taskrepeat",E="taskimprove",M="stopall",L="taskdone",N="halttask",j="taskblock",D="charact",R="delitem",$="encstart",B="chartitle",U="newtitle",q="charname",F="levelup",V="charclass",G="stat",H={log:null,init(t){this.log=t.log,this.game=t,this._triggers={},console.log("clearGameEvents()"),this.clearGameEvents(),l.addListener(p,this.onLoot,this),l.addListener(m,this.onUnlock,this),l.addListener(d,this.onEvent,this),l.addListener(F,this.onLevel,this),l.addListener(U,this.onNewTitle,this),l.addListener("trigger",this.doTrigger,this),l.addListener(E,this.actImproved,this),l.addListener(u,this.onCombat,this),l.addListener(c,this.onHit,this),l.addListener(C,this.onCharState,this),l.addListener(S,this.onStateBlock,this),l.addListener(x,this.npcSlain,this),l.addListener(w,this.npcSlain,this),l.addListener(O,this.onDefeat,this),l.addListener(Z,this.onMiss,this),l.addListener(I,this.onImmune,this),l.addListener(P,this.onResist,this),l.addListener($,this.onEnc,this)},clearGameEvents(){l.removeAllListeners()},clearTriggers(t){let e=t.on;if(e)for(let s in e)this.clearTrigger(s,t)},clearTrigger(t,e){let s=this._triggers.get(t);s&&s.delete(e)},addTrigger(t,e,s){let i=this._triggers.get(t);i||(i={},this._triggers.set(t,i))},doTrigger(t){this._triggers[t]},onEvent(t){t.hide||t[a.db]&&!t[a.db].roll()||this.log.log(t.name,t.desc,1)},onUnlock(t){t.hide||t.type===a.Ks||this.log.log((0,r.Pq)(t.typeName)+" Unlocked: "+t.name,null,2)},onLoot(t){let e=this.getDisplay(t);e&&!Number.isNaN(e)&&this.log.log("LOOT",e,4)},getDisplay(t){if(!t)return null;if("object"==typeof t){if(!Array.isArray(t))return t.name.toTitleCase();{let e,s=[];for(let i=t.length-1;i>=0;i--)e=this.getDisplay(t[i]),e&&s.push(e);if(s.length>0)return s.join(", ")}}else if("string"==typeof t)return t.toTitleCase();return null},onNewTitle(t,e){this.log.log("Title Earned: "+(0,r.Pq)(t),null,2),this.dispatch(G,"titles",e)},actImproved(t){this.log.log(t.name.toTitleCase()+" Improved",null,2)},onLevel(t,e){this.log.log(t.name+" Level Up!",null,1),this.dispatch(G,"level",e)},onDefeat(t){this.log.log("RETREAT","Leaving "+t.name.toTitleCase(),f)},onImmune(t,e){this.log.log("IMMUNE",t.name.toTitleCase()+" Is Immune To "+e,f)},onResist(t,e){this.log.log("RESISTS",t.name.toTitleCase()+" Resists "+e,f)},onMiss(t){this.log.log("",t.toString().toTitleCase(),f)},onEnc(t,e){this.log.log(t.toString().toTitleCase(),e,f)},onCombat(t,e){if(Array.isArray(e))for(let i=0;i<e.length;i++){var s=e[i];if(s[a.db]&&s[a.db].roll())return void this.onCombat(t,s);this.onCombat(t,s)}else"object"==typeof e?this.log.log(e.name||t,e.desc,f):this.log.log(t,e,f)},onHit(t,e,s,i,n){let r=n.toString().toTitleCase()+" Hits ";s<0?r+="Strongly ":s>0?r+="Weakly ":s>1&&(r+=" Absorbed By "),r+=t.name.toString().toTitleCase()+": "+(0,o.Yk)(e,1),this.log.log("",r,f)},onStateBlock(t,e){this.log.log(e.adj,t.name+" Is "+e.adj,f)},onCharState(t,e){this.log.log(e.adj,t.name+" Is "+e.adj,f)},onStateBlock(t,e){this.log.log(e.adj,t.name+" Is "+e.adj,f)},onCharState(t,e){this.log.log(e.adj,t.name+" Is "+e.adj,f)},npcSlain(t,e){this.log.log(t.name.toTitleCase()+" Slain",e&&e.name.toTitleCase()?" By "+e.name.toTitleCase():"",f)},emit(...t){l.emit.apply(l,t)},add(t,e,s){l.addListener(t,e,s)},listen(t,e,s){h.addListener(t,e,s)},removeListener(t,e){h.removeListener(t,e)},dispatch(...t){h.emit.apply(h,t)}}},7112:(t,e,s)=>{s.d(e,{EU:()=>g,$:()=>v,ZP:()=>A}),s(4028);var i=s(4478);class n{constructor(t="",e="",s=1,i=""){this.text=e,this.title=t,this.type=s,this.subtype=i,this.count=1}}var r,a=s(3434),o=s(6584),l=s(1555),h=s(4945),u=s(1247),c=(s(3955),s(4671)),d=s(9188),m=s(3967),p=s(4722),f=s(9827);const v=150,g=v/1e3,A={toJSON(){return this.state},state:null,get gdata(){return this._gdata},loaded:!1,log:new class{constructor(t=null){t&&Object.assign(this,t),this.items=this.items||[],this.maxItems=this.maxItems||100,this.initCounts()}initCounts(){this.counts=this.counts||{};for(let t in i.v9)this.counts[i.v9[t]]=0}clear(t){t?this.cut(t,this.items.length):(this.items.splice(0,this.items.length),this.initCounts())}log(t="",e="",s=1,i=null){this.tryMatch(t,e,s)||(this.items.push(new n(t,e,s,i)),++this.counts[s]>=this.maxItems+50&&this.cut(s))}cut(t,e=50){let s=this.items.length,i=0,n=[];for(var r=0;r<s;){var a=this.items[r++];if(a.type===t){if(++i>=e)break}else n.push(a)}this.counts[t]-=i,this.items=r<s?n.concat(this.items.slice(r)):n}tryMatch(t,e,s){for(let n=this.items.length-1;n>=0;n--){var i=this.items[n];if(0!=(s&i.type))return i.title===t&&i.text===e&&(i.count++,!0)}}logItem(t){this.tryMatch(t.title,t.text,t.type)||(this.items.push(t),++this.counts[type]>=this.maxItems+50&&this.cut(type))}},runner:null,get player(){return this.state.player},get self(){return this.state.player},addTimer(t){this.runner.addTimer(t)},reset(){this.loaded=!1,this.state=null,this._gdata=null,this.runner=null,this.log.clear()},load(t=null,e=null){return this.reset(),i.ZP.init(this),this.loader=c.ZP.loadGame(t).then((async s=>(this.state=new a.ZP(s,t),await this.state.revive(),this.player.context=this,this.itemGen=new o.Z(this),this._gdata=this.state.items,this.runner=this.state.runner,this.runner.context=this,e&&this.addData(e),await this.recalcSpace(),await this.recheckTiers(),await this.restoreMods(),r=new l.ZP(this.gdata),await r.forceCheck(),i.ZP.add(i.bp,this.setSlot,this),i.ZP.add(i.mN,this.onDelete,this),this.loaded=!0,this)),(t=>{console.error(t.message+"\n"+t.stack)}))},logStat(t){let e=this.getData(t);e?(console.dir(e),console.warn(t+" value: "+e.value+"  type: "+e.constructor.name.toString().toTitleCase())):console.warn("STAT MISSING: "+t)},recheckTiers(){let t="",e=-1;for(;++e<=5;){var s=this.state.getData("t_tier"+e),i=this.state.getData("tier"+e),n=!1;for(var r of s)if(r.value>0){t=r.name,0==i.value?i.doUnlock(this):i.locked&&(i.locked=!1),n=!0;break}n||(i.value=0)}t&&!this.state.player.gclass&&this.state.player.setClass(t)},restoreMods(){let t=this.state.items;this.state.inventory.begin(this),this.state.items.enchantslots.begin(this),this.state.drops.begin(this),this.state.equip.begin(this),this.state.player.begin(this),t[d.ZG].begin(this);for(let s in t){var e=t[s];e instanceof m.Z||e.locked||e.disabled||e.instanced||e.isRecipe||0!=e.value&&(e.mod&&this.applyMods(e.mod,e.value,e.id),e.lock&&this.lock(e.lock,e.value))}for(let t of this.state.equip)t.type===d.if&&this.player.addWeapon(t),t.mod&&t.remod(this)},recalcSpace(){let t=this.state.getData("space");t.value=0,(0,f.Aw)(t.mod,t.value)},addData(t){for(let e in t){let s=t[e];this.state.addItem(s)}},setSlot(t){let e=this.state.getSlot(t.slot);e&&this.remove(e,1),this.state.setSlot(t.slot,t),this.payCost(t.cost),t.amount(1)},update(){let t=(0,l.jn)();for(let s of t){var e=s.delta;0!==e&&(s.changed?s.changed(this,e):console.log("NO CHANGE: "+s.id))}r.updateTech(t);let s=Date.now(),i=Math.min((s-this.lastUpdate)/1e3,1);this.lastUpdate=s,this.state.player.update(i),this.state.minions.update(i),this.runner.update(i),this.doResources(this.state.resources,i),this.doResources(this.state.playerStats,i),this.doResources(this.state.stressors,i)},doResources(t,e){for(let s=t.length-1;s>=0;s--){let i=t[s];!1!==i.locked||i.disabled||(0!==i.rate.value&&i.amount(i.rate.value*e),i.effect&&this.applyVars(i.effect,e))}},toggleTask(t){this.runner.toggleAct(t)},doRest(){this.runner.tryAdd(this.state.getSlot(a.yY))},haltTask(t){this.runner.stopTask(t)},setTask(t){this.runner.setTask(t)},filled(t,e,s){if(Array.isArray(t)){for(let i=t.length-1;i>=0;i--)if(!this.filled(t[i],e,s))return!1;return!0}let i=this.getData(t);return i?!i.rate||!e.effect||i.rate>=0?i.maxed():!(s=e.effect[s||t])||i.filled(s):(console.warn("missing fill item: "+t),!0)},disable(t){if(Array.isArray(t))for(let e of t)this.disable(e);else"string"==typeof t&&(t=this.getData(t)),t&&!t.disabled&&(t.disabled=!0,t.slot&&this.state.getSlot(t.slot,t.type)===t&&this.remove(t,1),t.running&&this.runner.stopTask(t),t instanceof h.Z||t instanceof u.Z?this.remove(t,t.value):t.mod&&this.removeMods(t.mod,t.value))},removeAll(t){"object"==typeof t?this.remove(t,t.value):Array.isArray(t)?t.forEach(this.removeAll,this):this.getData(t)&&this.remove(t,t.value)},tryBuy(t,e=!0){return!1!==this.canPay(t.buy)&&(this.payCost(t.buy),t.isRecipe&&this.create(t,e),t.owned=!0,t.slot&&!this.state.getSlot(t.slot)&&this.setSlot(t),!0)},use(t,e=null){t.onUse(this,e||this.state.inventory)},tryItem(t){if(t)return!!this.canUse(t)&&(t.buy&&!t.owned?this.tryBuy(t,!1):void(t.perpetual||t.length>0?this.setTask(t):t.instanced?t.count>0&&t.onUse(this):t.isRecipe?this.craft(t):t.slot?this.setSlot(t):(this.payCost(t.cost),t.amount(1))))},onDelete(t){this.state.deleteItem(t)},instance(t){return"string"==typeof t&&(t=this.state.getData(t)),this.itemGen.instance(t)},craft(t){if(!this.canPay(t.cost))return!1;this.payCost(t.cost),this.create(t)},create(t,e=!0,s=1){if("string"==typeof t)t=this.state.getData(t);else if(Array.isArray(t)){for(let i=t.length-1;i>=0;i--)this.create(t[i],e,s);return}if(t)for(let r=s;r>0;r--)if(t.type===d.EN)t.onCreate&&t.onCreate(this,d.Zj,e);else{var n=this.itemGen.instance(t);n&&this.state.inventory.add(n),i.ZP.emit(i.SG,n)}},tryUseOn(t,e){return null!=e&&(t.buy&&!t.owned?(this.payCost(t.buy),t.owned=!0,!0):t.length?this.runner.beginUseOn(t,e):(this.payCost(t.cost),this.useOn(t,e,this),!0))},useOn(t,e){null!=e&&("function"==typeof t.useOn&&t.useOn(e,this),t.value++,t.mod&&e.permVars(t.mod),t.result&&e.permVars(t.result))},fillItem(t){let e="string"==typeof t?this.getData(t):t;if(e)if("function"==typeof e.doFill)e.doFill();else{if(!e.max)return void e.amount(1);e.max.value-e.value>0&&e.amount(e.max.value-e.value)}},doLog(t){i.ZP.emit(i.ij,t)},sellPrice(t){let e=t.sell||t.cost||5*t.level||5;return t.sell&&"object"==typeof t.sell?(e={...e},e.gold&&(e.gold=e.gold*this.state.sellRate),e):("object"==typeof e&&(e=e.gold||5*t.level||5),Math.ceil(e*this.state.sellRate))},trySell(t,e,s=1){if(t.value<1&&!t.instanced)return!1;s>t.count&&(s=t.count),s<1&&(s=1);const i=this.sellPrice(t);return i.gold||"object"==typeof i?Object.keys(i).forEach((t=>{const e=this.getData(t),n=i[t];e.amount(s*(n||1))})):this.getData("gold").amount(s*this.sellPrice(t)),t.instanced?(t.count-=s,e&&(!t.stack||t.count<=0)&&e.remove(t)):this.remove(t,s),!0},remove(t,e=1){let s="string"==typeof t?this.getData(t):t;s?(s.slot&&this.state.getSlot(s.slot)===s&&this.state.setSlot(s.slot,null),s.remove(e),s.mod&&this.applyMods(s.mod,-e),s.lock&&this.unlock(s.lock,e),l.Bc.add(s)):console.warn("missing remove id: "+t)},tryUnlock(t){if(t.disabled||t.locks>0)return!1;let e=t.require||t.need;return!(e&&!this.unlockTest(e,t)||(t.doUnlock(this),0))},unlockTest(t,e=null){if(null==t)return console.warn("test not found: "+t+" : "+e),!0;let s=typeof t;if("function"===s)return t(this._gdata,e,this.state);if("string"===s){let e=this.getData(t);return e&&e.fillsRequire(this)}if(Array.isArray(t)){for(let s=t.length-1;s>=0;s--)if(!this.unlockTest(t[s],e))return!1;return!0}if("object"===s){if(t.id)return t.fillsRequire(this);let e;for(let s in t)if(e=this.getData(s),e&&e.value<t[s])return!1;return!0}},applyVars(t,e=1){if(Array.isArray(t))for(let s of t)this.applyVars(s,e);else if("object"==typeof t){let s,n=t[d.db];if(n&&!n.roll())return;for(let r in t)s=this.getData(r),n=t[r],null==s?r===d.yn?this.self.addTitle(n):r===d.WX?i.ZP.emit(i.ij,n):console.warn(r+" no effect target: "+n):("number"==typeof n?s.amount(n*e):n.isRVal?s.amount(e*n.getApply(s)):!0===n?(s.doUnlock(this),s.onUse(this)):n.type===d.db?n.roll(this.getData("luck").valueOf())&&s.amount(1):s.applyVars(n,e),l.Bc.add(s))}else if("string"==typeof t){let s=this.getData(t);void 0!==s&&("monster"===s.type?s.amount(this,e):s.amount(e))}},removeMods(t){if(t)if(Array.isArray(t))for(let e of t)this.removeMods(e);else if("object"==typeof t)for(let s in t){var e=this.getData(s);null!=e&&(e.removeMods?e.removeMods(t[s]):console.warn("no removeMods(): "+e))}else if("string"==typeof t){let e=this.getData(t);e&&(console.warn("!!! REMOVE NUM MOD: "+t),e.amount(-1))}},applyMods(t,e=1){if(t)if(Array.isArray(t))for(let s of t)this.applyMods(s,e);else if("object"==typeof t)for(let i in t){var s=this.getData(i);null!=s&&(!0===t[i]?s.doUnlock(this):s.applyMods?s.applyMods(t[i],e):console.warn("no applyMods(): "+s))}else if("string"==typeof t){let e=this.getData(t);e&&(console.warn("!!!!!!!!!!ADDED NUMBER MOD: "+t),e.amount(1))}},canRun(t){return t.canRun?t.canRun(this,g):(console.error(t.id+" no canRun()"),!1)},canUse(t){if(t.canUse)return t.canUse(this);console.error(t.id+" no canUse()")},payCost(t,e=1){if(null==t)return;if(Array.isArray(t))return t.forEach((t=>this.payCost(t,e)),this);let s;if("object"==typeof t)for(let n in t)if(s=this.getData(n),!s||s.instanced||s.isRecipe)this.payInst(n,t[n]*e);else{var i=t[n];isNaN(i)?"object"==typeof i?s.applyVars(i,-e):"function"==typeof i&&this.remove(s,e*i(this.state,this.player)):this.remove(s,i*e)}},payInst(t,e){var s=this.state.inventory.find(t,!0);s?this.state.inventory.removeCount(s,e):console.warn("Too Low: "+t)},canMod(t,e){if("object"!=typeof t)return!0;if(Array.isArray(t))return t.every((t=>this.canMod(t)),this);let s;for(let e in t){var i=t[e];if((!isNaN(i)||i instanceof p.ZP)&&(s=this.state.getData(e),s instanceof h.Z))return s.canPay(-i)}return!0},canPay(t,e=1){if(Array.isArray(t))return t.every((t=>this.canPay(t,e)),this);let s;if("object"==typeof t)for(let n in t){var i=t[n];if(s=this.state.getData(n),!s)return!1;if(s.instanced||s.isRecipe)return this.state.inventory.hasCount(s,e);if(!isNaN(i)||i.isRVal){if(s.canPay&&!s.canPay(i*e))return!1}else if(s.canPay&&!this.canPayObj(s,i,e))return!1}return!0},canPayObj(t,e,s=1){if(!t)return!1;if(e instanceof p.ZP||!isNaN(e))return t.value>=e;for(let n in e){var i=e[n];if(!isNaN(i)||i instanceof p.ZP){if(t.value<i*s)return!1}else if("object"==typeof i&&!this.canPayObj(t[n],i,s))return!1}return!0},canEquip(t){let e=this.state.inventory.includes(t)?1:0;return this.state.equip.replaceCount(t)<=this.state.inventory.freeSpace()+e},equip(t,e=null){if(!this.canEquip(t))return console.log("equip: "+t.id+" type: "+t.type+" kind: "+t.kind),!1;let s=this.state.equip.equip(t);s&&((e||this.state.inventory).remove(t),this.onUnequip(s),t.equip(this))},onUnequip(t){if(t&&"boolean"!=typeof t)if(Array.isArray(t))for(let e=t.length-1;e>=0;e--)this.onUnequip(t[e]);else this.state.inventory.add(t),t.unequip(this)},unequip(t,e){return!this.state.inventory.full()&&(this.onUnequip(this.state.equip.remove(e,t)),!0)},take(t){return this.state.inventory.add(t)},getLoot(t,e=null){if(!t)return null;if((e=e||this.state.inventory).full()&&(e=this.state.drops),"object"==typeof t&&t.stack&&e.addStack(t))return void i.ZP.emit(i.SG,t);let s=this.itemGen.getLoot(t);null!=s&&(i.ZP.emit(i.SG,s),e.add(s))},unlock(t){this.lock(t,-1)},lock(t,e=1){if("object"==typeof t&&t[Symbol.iterator])for(let s of t)this.lock(s,e);else if("object"==typeof t)t.locks+=e;else{let s=this.getData(t);s&&this.lock(s,e)}},getData(t){return this._gdata[t]||this.state[t]}}},3434:(t,e,s)=>{s.d(e,{eL:()=>B,yY:()=>$,ZP:()=>U});var i=s(7532),n=(s(4028),s(6584));s(8564);class r{toJSON(){return{item:this.item,multi:this.multi,max:this.max}}get item(){return this._item}set item(t){this._item=t}constructor(t=null){t&&Object.assign(this,t),this.max=this.max||1,this.item=this.item||(this.max>1?[]:null),this.multi=Array.isArray(this.item)}*[Symbol.iterator](){if(Array.isArray(this.item))for(let t=0;t<this.item.length;t++)yield this.item[t];else yield this.item}getItemIds(){if(null==this.item)return[];if(Array.isArray(this.item)){let t=[];for(let e=0;e<this.item.length;e++)t.push(this.item[e].id);return t}return[this.item.id]}freeSpace(){let t=this.max;if(!this.item)return t;if(1===t)return 0;if(!Array.isArray(this.item))return 0;for(let e=this.item.length-1;e>=0;e--)t-=this.item[e].numslots||1;return t}equip(t){let e=t.numslots||1;if(e>this.max)return!1;if(!0===this.multi)return this.addMult(t,e);if(this.item){let e=this.item;return this.item=t,e}return this.item=t,!0}addMult(t,e){if(this.item.find((e=>e.id===t.id)))return!1;this.item.push(t);for(let t=this.item.length-2;t>=0;t--)if((e+=this.item[t].numslots||1)>this.max)return this.item.splice(0,t+1);return!0}find(t){return null===this.item?null:this.multi?this.item.find((e=>e.id===t)):this.item.id===t?this.item:null}match(t){return null===this.item?null:this.multi?this.item.find(t):t(this.item)?this.item:null}has(t){return!1===this.multi?this.item===t:this.item.includes(t)}remove(t){if(this.item===t)return this.item=null,t;if(null==t)return t=this.item,this.item=null,t;if(this.multi){let e=this.item.indexOf(t);return!(e<0)&&this.item.splice(e,1)[0]}return!1}begin(t){if(null!==this.item&&void 0!==this.item)if(Array.isArray(this.item))for(let e=this.item.length-1;e>=0;e--)this.item[e].begin(t);else this.item.begin(t)}revive(t){if(null!==this.item&&void 0!==this.item)if(Array.isArray(this.item)){let s={},i=this.item;for(let r=i.length-1;r>=0;r--){var e=(0,n.X)(t,i[r]);e&&!0!==s[e.id]?(i[r]=e,s[e.id]=!0):i.splice(r,1)}}else this.item=(0,n.X)(t,this.item)}hands(){return null!=this.item&&this.item.hands||0}empty(){return null===this.item||Array.isArray(this.item)&&0===this.item.length}}class a{get slots(){return this._slots}set slots(t){for(let s in t){var e=t[s];e instanceof r||(t[s]=new r(e))}this._slots=t}constructor(t=null){t&&Object.assign(this,t)}find(t){for(let s in this.slots){var e=this.slots[s].find(t);if(e)return e}return null}findAll(t){let e=[];for(let i in this.slots){var s=this.slots[i].match(t);s&&e.push(s)}return e}get(t){if(void 0!==(t=this.slots[t]))return t.item}freeSpace(t){return void 0===(t=this.slots[t])?0:t.freeSpace()}remove(t,e=null){return"string"==typeof(e=e||t.slot)&&(e=this.slots[e]),!!e&&e.remove(t)}begin(t){for(let e in this.slots)this.slots[e].begin(t)}revive(t){for(let e in this.slots)this.slots[e].revive(t)}setSlot(t,e=null){return!(null===(e=e||t.slot)||!this.slots.hasOwnProperty(e))&&this.slots[e].equip(t)}*slotNames(){for(let t in this.slots)yield t}*[Symbol.iterator](){for(let e in this.slots){var t=this.slots[e].item;if(Array.isArray(t))for(let e=t.length-1;e>=0;e--)t[e]&&(yield t[e]);else t&&(yield t)}}}class o extends a{toJSON(){return{slots:this.slots}}constructor(t=null){super(t),this.slots=this._slots||{left:new r,right:new r,head:new r,hands:new r,back:new r,waist:new r,neck:new r({max:3}),trinket:new r,fingers:new r({max:4}),chest:new r,shins:new r,feet:new r};for(let t in this._slots)this._slots[t].name=t.toString().toTitleCase()}remove(t,e=null){return"weapon"===t.type?this.removeWeap(t):super.remove(t,e)}removeWeap(t){return this.slots.right.remove(t)||this.slots.left.remove(t)}replaceCount(t){let e="weapon"===t.type?this.freeSpace("right")+this.freeSpace("left"):this.freeSpace(t.slot);return Math.max((t.numslots||1)-e,0)}equip(t,e=null){return"weapon"===t.type?this.equipWeap(t):null!==(e=e||t.slot)&&this.slots.hasOwnProperty(e)?this.slots[e].equip(t):(console.log(t.id+" bad equip slot: "+t.slot),!1)}getWeapon(){return!1===this.slots.right.empty()?this.slots.right.item:this.slots.left.item}equipWeap(t){let e=this.slots.right,s=this.slots.left;if(2===t.hands){let i=e.equip(t),n=s.remove();return i&&n?[i,n]:i||n||!0}return e.empty()?(console.log("setting right."),e.equip(t),!!s.empty()||s.remove()):s.empty()?(console.log("setting left."),s.equip(t),!!e.empty()||e.remove()):(console.log("NEITHER EMPTY. switch hands."),e.equip(s.equip(t)))}}var l=s(4478),h=s(9188),u=s(4722);class c extends i.ZP{get maxAllies(){return this._allies.max}set maxAllies(t){this._allies.max=t}get allies(){return this._allies}set allies(t){this._allies=t}get keep(){return this._keep}set keep(t){this._keep=t}get mods(){return this._mods}set mods(t){this._mods=t}constructor(t=null){super(t),this.type=this.id="minions",this.max||(this.max=0),this._allies=new i.ZP({id:"allies",spaceProp:"level",saveMode:i.k2}),this.mods=new Map,this.keep=new Set}addKeep(t){if("string"==typeof t)this.keep.add(t);else if("object"==typeof t)for(let e in t)this.keep.add(e)}shouldKeep(t){if(this.keep.has(t.id)||this.keep.has(t.kind))return!0;for(let e of t.tags)if(this.keep.has(e))return!0;return!1}update(t){for(let e=this.items.length-1;e>=0;e--){let s=this.items[e];!1===s.active&&s.alive&&s.rest(t)}}add(t){super.add(t),t.team=h.Zj,t.keep=!0,t.active&&this.setActive(t);for(let e of this.mods)t.is(e[1])&&t.applyMods(e[0])}setActive(t,e=!0){if(!0===e){if(!t.alive||!this.allies.canAdd(t))return t.active=!1,!1;this.allies.includes(t)||this.allies.add(t)}else this.allies.remove(t);t.active=e}revive(t){super.revive(t),this.allies.max||(this.allies.max=Math.floor(t.player.level/5));var e=[];for(let t=this.items.length-1;t>=0;t--){var s=this.items[t];s.type===h.yZ?s.active&&e.push(s):this.items.splice(t,1)}this.allies.items=e,this.allies.calcUsed(),this.calcUsed(),l.ZP.add(l.b0,this.resetActives,this)}applyMods(t,e){for(let i in t){var s=t[i];if(this[i])this[i]instanceof u.ZP?this[i].addMod(s):"keep"===i?this.addKeep(s):this[i].applyMods(s);else{if(this.mods.has(s))continue;this.mods.set(s,i);for(let t of this.items)t.is(i)&&t.applyMods(s,e)}}}resetActives(){let t=this.allies.items;for(let e=t.length-1;e>=0;e--)t[e].active&&t[e].alive||this.setActive(t[e],!1)}remove(t){super.remove(t),console.log("removing minion: "+t.id),this.setActive(t,!1)}died(t){}}var d=s(4152),m=s(3955),p=s(9827),f=s(7112),v=s(6609);class g extends v.Z{toJSON(){return{item:this.item?this.item.id:void 0,target:this.target?this.target.id:void 0,exp:this._exp}}get type(){return h.L0}get target(){return this._target}set target(t){this._target=t}get exp(){return this._exp}set exp(t){this._exp=t}get running(){return!!this._item&&this._item.running}set running(t){this._item&&(this._item.running=t),this._target&&(this._target.running=t)}get repeat(){return this._item&&this._item.repeat||!1}percent(){return this._length?100*this._exp/this._length:0}get length(){return this._length}set length(t){this._length=t}canRun(t){return!this.done&&this._item&&this._target&&this._item.canAlter(this._target)}get done(){return this._exp>=this._length}constructor(t=null,e=null){super(),e?(this.target=e,this.item=t):t&&Object.assign(this,t),this.length="object"==typeof this.item&&this.item.length||0,this.exp=this._exp||0}update(t){this.exp+=t,this.exp>this.length&&(this.target&&f.ZP.useOn(this.item,this.target),l.ZP.emit(l.o3,this,this.repeat),this.target=null)}onStop(){this.item.onStop&&this.item.onStop(this.target)}revive(t){super.revive(t),"string"==typeof this._target&&(this._target=t.findData(this._target)),this.item&&(this._length=this.item.length,this.item.resumeUseOn&&this.item.resumeUseOn(this.target))}}var A=s(2038),y=s(4309);class _{get size(){return this._store.length}[Symbol.iterator](){return this._store[Symbol.iterator]()}constructor(t){if(this._store=[],t)for(let e of t)this.add(e)}clear(){this._store=[]}forEach(t){return this._store.forEach(t)}values(){return this._store.slice(0)}inc(t){let e=this._store.indexOf(t);(0,d.LF)(this._store,e,e+1)}dec(t){let e=this._store.indexOf(t);(0,d.LF)(this._store,e,e-1)}add(t){this._store.push(t)}has(t){return this._store.includes(t)}delete(t){let e=this._store.indexOf(t);return!(e<0||(this._store.splice(e,1),0))}}var b=s(1555);class w{get type(){return"runner"}hasTag(){return!1}constructor(t=null){t&&(0,A.f0)(this,t),this.id=this.type,this.name="activity",this.actives=new _(this.actives||null),this.waiting=this.waiting||null,this.timers=new Set(this.timers||null)}toJSON(){return{max:this.max,waiting:this.waiting.map((t=>t.id)),actives:(0,y.Hx)(this.actives,(t=>t.id)),timers:this.timers.size>0?(0,y.Hx)(this.timers,(t=>t.id)):void 0}}get exp(){let t=(0,y.J7)(this.actives,(t=>t.type===h.HZ));return t?t.exp:0}set exp(t){let e=(0,y.J7)(this.actives,(t=>t.type===h.HZ));e&&(e.exp=t)}addTimer(t){this.timers.add(t)}autoProgress(){this.actives.forEach((t=>{t.length&&(t.exp=t.length-.001)}))}get context(){return this._context}set context(t){this._context=t}get running(){return this.actives.size}get free(){return Math.floor(this.max.valueOf())-this.actives.size}get max(){return this._max}set max(t){this._max?this._max.base=t instanceof m.Z?t.base:t:this._max=t instanceof m.Z?t:new m.Z(t,"max",!0)}revive(t){this.max=this._max||1,this.pursuits=t.getData(h.QU),this.waiting=this.reviveList(this.waiting,t,!1),this.waiting.length>this.max&&(this.waiting=this.waiting.slice(this.waiting.length-this.max)),(0,y.Au)(this.actives,this.reviveList(this.actives,t,!0)),this.timers=(0,y.J3)(this.timers,(e=>t.getData(e))),l.ZP.add(l.o3,this.actDone,this),l.ZP.add(l.ST,this.haltTask,this),l.ZP.add(l.E9,this.actBlocked,this),l.ZP.add(l.T4,this.stopAll,this)}reviveList(t,e,s=!1){let i=[];if(!t)return i;for(let n of t)n=this.reviveTask(n,e,s),n&&i.push(n);return i}reviveTask(t,e,s=!1){if(t)return"string"!=typeof t||(t=e.getData(t))&&t.hasTag?(t.running=s,t.controller?e.getData(t.controller):t):null}beginUseOn(t,e){var s;return s=t.beginUseOn?t.beginUseOn(e):new g(t,e),this.setTask(s)}toggleAct(t){this.actives.has(t)?this.stopTask(t,!1):this.setTask(t)}setTask(t){if(!t)return!1;if(t.cost&&0===t.exp.valueOf()&&this.context.payCost(t.cost),t.controller){let e=this.context.state.getData(t.controller);if(!e)return!1;e.runWith(t),t=e}return this.has(t)?l.ZP.emit(l.b0):(this.runTask(t),this.trimActives(t)),!0}trimActives(t=null){var e=this.actives.size-Math.floor(this.max.valueOf());if(!(e<=0))for(let s of this.actives)if(s!==t&&(this.stopTask(s,!1),s.type===h.L0&&this.addWait(s),--e<=0))return}actBlocked(t,e=!0){this.stopTask(t,!1),t.hasTag(h.$L)?this.tryResume():(e&&this.addWait(t),this.doRest())}stopTask(t,e=!0){t.onStop&&t.onStop(),t.running=!1,this.actives.delete(t),b.Bc.add(this),e&&this.tryResume()}canPursuit(t){return this.pursuits.max>0&&t.type!==h.L0}baseTask(t){return t.baseTask||t}togglePursuit(t){(t=this.baseTask(t))&&(this.pursuits.includes(t)?this.pursuits.remove(t):this.pursuits.cycleAdd(t))}tryPursuit(){if(this.free<=0)return!1;let t=this.pursuits.getRunnable(this.context);return!!t&&this.tryAdd(t)}tryAdd(t){return!!this.free&&(!t.fill||!this.context.filled(t.fill,t))&&!!t.canRun(this.context)&&this.setTask(t)}waitingUp(t){let e=this.waiting.indexOf(t);(0,d.LF)(this.waiting,e,e+1)}waitingDown(t){let e=this.waiting.indexOf(t);(0,d.LF)(this.waiting,e,e-1)}removeAct(t){}removeWait(t){let e=this.waiting.indexOf(t);return!(e<0||(this.waiting.splice(e,1),0))}addWait(t){if(t.hasTag(h.$L))return;this.waiting.push(t);let e=this.waiting.length-this.max.value;e>0&&this.waiting.splice(0,e)}haltTask(t){t.controller&&(t=this.context.state.getData(t.controller)),0===this.waiting.length&&t.hasTag(h.$L)?this.stopTask(t,!1):this.stopTask(t)}actDone(t,e=!0){!1!==t.running&&e?e&&(this.context.canRun(t)&&this.actives.size<=this.max.value?(this.setTask(t),t.hasTag(h.$L)||this.tryResume()):(this.stopTask(t),this.addWait(t))):this.stopTask(t)}stopAll(){for(let t of this.actives.values())this.stopTask(t,!1);this.clearWaits()}clearWaits(){this.waiting.splice(0,this.waiting.length)}tryResume(){let t=this.free;for(let s=this.waiting.length-1;s>=0;s--){var e=this.waiting[s];if(null==e)(0,d.xF)(this.waiting,s);else if(this.tryAdd(e)&&((0,d.xF)(this.waiting,s),--t<=0))return}t>0&&(this.context.state.player.rested()||this.tryAdd(this.context.state.restAction),this.tryPursuit())}update(t){for(let e of this.actives)this.doTask(e,t);for(let e of this.timers)e.tick(t)&&this.timers.delete(e)}doRest(){this.tryAdd(this.context.state.restAction)}doTask(t,e){if(t.maxed())return this.stopTask(t),void this.tryAdd(this.context.state.restAction);t.run&&(this.context.canPay(t.run,e)||(this.stopTask(t),this.addWait(t),this.tryAdd(this.context.state.restAction)),this.context.payCost(t.run,e)),t.fill&&this.context.filled(t.fill,t)?this.actBlocked(t):(t.effect&&this.context.applyVars(t.effect,e),t.update&&t.update(e))}runTask(t){b.Bc.add(this),t.running=!0,this.actives.add(t),t.onStart&&t.onStart(),this.removeWait(t)}has(t){return this.actives.has(t)}hasType(t){let e="string"==typeof t?t:t.type;return null!==(0,y.J7)(this.actives,(t=>t.type===e))}}(0,p.u1)(w,p.ZP),s(6093);var k=s(1949);class x{get id(){return h.Lo}toJSON(){let t=this.enc;return{locale:this.locale?this.locale.id:void 0,enc:t?t.id:void 0}}get name(){return this.locale?this.locale.name:""}get cost(){return this.locale?this.locale.cost:null}get run(){return this.locale?this.locale.run:null}get exp(){return this.locale?this.locale.exp:0}set exp(t){this.locale.exp.set(t),t>=this.locale.length&&this.complete()}get baseTask(){return this.locale}percent(){return this.locale?this.locale.percent():0}maxed(){return!this.locale||this.locale.maxed()}canUse(){return this.locale&&!this.locale.maxed()}canRun(t){return this.locale&&!this.player.defeated()&&this.locale.canRun(t)}get effect(){return this.locale?this.locale.effect:null}set effect(t){}get length(){return this.locale?this.locale.length:0}get enc(){return this._enc}set enc(t){this._enc=t}get combat(){return this._combat}set combat(t){this._combat=t}get running(){return this._running}set running(t){this._running=t,this.combat&&(this.combat.active=t&&this.enc===this.combat)}get done(){return this.exp===this.length}constructor(t=null){t&&(0,A.f0)(this,t),this.running=!1,this.type=h.Lo,this._enc=this._enc||null,this.locale=this.locale||null}revive(t){if(this.state=t,this.player=t.player,this.spelllist=t.getData("spelllist"),l.ZP.add(l.WD,this.enemyDied,this),l.ZP.add(l.WM,this.charDied,this),"string"==typeof this.locale){let e=t.getData(this.locale);e instanceof k.go?this.locale=e:this.locale=null}else this.locale=null;this._enc&&(this.enc=t.getData(this._enc)),this.drops=t.drops,this.combat=t.combat}runWith(t){this.player.timer=(0,h.sj)(this.player.speed),null!=t?t!=this.locale?(this.enc=null,this.combat.reset(),t.exp=0):(this.combat.reenter(),this.enc&&this.enc.done&&this.nextEnc(),t.exp>=t.length&&(t.exp=0)):(this.enc=null,this.combat.reset()),this.locale=t}charDied(t){t===this.player&&this.running&&(this.player.luck>100*Math.random()&&(this.player.hp.value=Math.ceil(.05*this.player.hp.max),l.ZP.emit(l.tp,"Lucky Recovery",this.player.name+" had a close call.")),this.emitDefeat())}emitDefeat(){l.ZP.emit(l.yK,this.locale),l.ZP.emit(l.E9,this,this.locale&&this.player.level>this.locale.level&&this.player.retreat>0)}update(t){null==this.locale||this.done||(null===this.enc?this.nextEnc():(this.enc!==this.combat&&this.player.explore(t),this.enc.update(t),this.player.defeated()?(l.ZP.emit(l.yK,this),l.ZP.emit(l.E9,this,!0)):this.enc.done&&(this.encDone(this.enc),this.exp+=1)))}nextEnc(){if(this.locale){this.player.timer=(0,h.sj)(this.player.speed);var t=this.locale.getEncounter();null!==t&&(t.type===h.$6?(this.enc=t,t.exp=0,l.ZP.emit(l.UE,t.name,t.desc)):(this.combat.setEnemies(t,this.exp/this.length),this.enc=this.combat)),this.combat.active=this.combat===this.enc}}encDone(t){t!==this.combat&&(this.player.exp+=.75+Math.max(t.level-this.player.level,0),t.value++,t.result&&f.ZP.applyVars(t.result),t.loot&&f.ZP.getLoot(t.loot,this.drops),t.exp=t.length),this.enc=null}enemyDied(t,e){if(this.player.exp+=Math.max(1.5*t.level-this.player.level,1),t.template&&t.template.id){let e=this.state.getData(t.template.id);e&&e.value++}t.result&&f.ZP.applyVars(t.result),t.loot?f.ZP.getLoot(t.loot,this.drops):f.ZP.getLoot({maxlevel:t.level,[h.db]:30},this.drops)}complete(){this.locale.amount(1);var t=Math.max(1+this.player.level-this.locale.level,1);this.player.exp+=this.locale.level*(15+this.locale.length)/(.8*t),l.ZP.emit(l.o3,this,!1),this.enc=null,this.locale=null}hasTag(t){return t===h.Lo}}var C=s(6802),S=s(3037);class O{toJSON(){return{id:this.id,items:this.items.map((t=>t.id)),name:this.name,type:this.type,val:this.value,custom:"group"}}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get items(){return this._items}set items(t){var e=[];let s=0;if(t)for(let n=t.length-1;n>=0;n--){var i=t[n];"object"==typeof i&&(s+=i.level||0),e[n]=i}this.level=s,this._items=e}get type(){return this._type}set type(t){this._type=t}get level(){return this._level}set level(t){this._level=t}get cost(){return this._cost}set cost(t){this._cost=t}get locked(){return!1}get owned(){return!0}maxed(){return!1}constructor(t=null){t&&(0,A.f0)(this,t),this.items||(this.items=null)}computeCost(){if(!this.items||0===this.items.length)return void(this.cost=null);let t={};for(let e=this.items.length-1;e>=0;e--){let s=this.items[e];s?s.cost&&(0,y.EX)(t,s.cost):this.items.splice(e,1)}this.effect=this.items.map((t=>"string"==typeof t?t:t.name)),this.cost=t}canUse(t){for(let e=this.items.length-1;e>=0;e--)if(!this.items[e].canUse(t))return!1;return t.canPay(this.cost)}onUse(t){let e=this.items.length;for(let s=0;s<e;s++)this.items[s].onUse(t)}add(t){this.items.push(t)}amount(t){let e=this.items.length;for(let s=0;s<e;s++)this.items[s].amount(t)}applyVars(t,e=1){let s=this.items.length;for(let i=0;i<s;i++)this.items[i].applyVars(t,e)}applyMods(t,e=1,s=this){let i=this.items.length;for(let n=0;n<i;n++)this.items[n].applyMods(t,e,s)}revive(t){this.items=t.toData(this.items),this.computeCost()}}(0,p.u1)(O,p.ZP);class Z extends i.ZP{constructor(t=null){super(t),this.id="userSpells",this.name="Crafted Spells",this.saveMode=i.k2}revive(t){super.revive(t),this.state=t;for(let t of this.items)t.school||(t.school="crafted")}removeAt(t){let e=this.items[t];e&&(l.ZP.emit(l.mN,e),super.removeAt(t))}create(t,e,s=null){let i=new O;return i.school="crafted",i.items=t,i.id=e.nextId("spell"),i.type="spell",i.name=s||"new spell",i.computeCost(),e.addItem(i),this.add(i),i}}class I extends v.Z{toJSON(){if(this._item||this.recipe)return this.recipe?{item:this.item.id,recipe:this.recipe}:this._item.id}get name(){return super.item?super.item.name.toTitleCase():this.recipe||""}get item(){return super.item}set item(t){super.item=t,t&&"object"==typeof t?t.id!==this.recipe&&(this.recipe=t.recipe||null):this.recipe=null}get recipe(){return this._recipe}set recipe(t){this._recipe=t}constructor(t=null){super(),t?"string"==typeof t?(this.item=t,this.recipe=null):"object"==typeof t&&(this.item=t.item,this.recipe=t.recipe):(this.item=null,this.recipe=null)}slotTarget(t){if(this.item&&!this.recipe)return this.item;if(this.item){if(this.item.value>0||this.recipe!==this.item.id)return this.item}else if(this.recipe)return t.state.findInstance(this.recipe,!0);return null}onUse(t){let e=this.slotTarget(t);null!=e&&e.value>0&&e.onUse(t)}revive(t){if(this.item){var e=t.findData(this.item,!1);if(e)return void(this.item=e)}if(this.recipe){let e=this.recipe;this.item=t.findInstance(e,!0)||t.getData(e)}}}class P{toJSON(){return{slots:this.slots}}get slots(){return this._slots}set slots(t){if(null==t)return;let e=[];for(let s=0;s<10;s++)e[s]=new I(t[s]);this._slots=e}constructor(t=null){Array.isArray(t)?this.slots=t:t?(Object.assign(this,t),t.slots||(this.slots=[])):this.slots=[]}revive(t){for(let e=this._slots.length-1;e>=0;e--)this._slots[e].revive(t)}remove(t){for(let s in this.slots){var e=this.slots[s];e&&e.item&&e.id===t&&this.clear(s)}}clear(t){this.slots[t].item=null}setSlot(t,e){if((!t||t.type!==h.YI)&&e>=0&&e<=9){let s=e>0?e-1:9;this.slots[s].item=t}}getSlot(t){return this._slots[t>0?t-1:9]}}class T{toJSON(){return{bars:this.bars,index:this.index,max:this.max}}get bars(){return this._bars}set bars(t){if(Array.isArray(t)){for(let e=t.length-1;e>=0;e--)t[e]=t[e]instanceof P?t[e]:new P(t[e]);this._bars=t}else console.warn("NONARRAY: "+t)}get active(){return this._active}get index(){return this._index}set index(t){this._index=t}constructor(t=null){t&&Object.assign(this,t),this.bars&&0!==this.bars.length||(this.bars=[{}]),this.max||(this.max=new m.Z(1,"quickbars.max"))}next(){++this._index>=this.bars.length&&(this._index=0),this._active=this._bars[this._index]}prev(){--this._index<0&&(this._index=this._bars.length-1),this._active=this._bars[this._index]}dataDeleted(t){if(t)for(let e=this.bars.length-1;e>=0;e--)this._bars[e].remove(t.id)}revive(t){for(let e=this.bars.length-1;e>=0;e--)this._bars[e].revive(t);this._index=this._index||0,this._active=this._bars[this._index],l.ZP.add(l.mN,this.dataDeleted,this)}}var E=s(3967),M=s(1);class L extends i.ZP{get exp(){return this._exp}set exp(t){this._exp=t}get length(){return this._length}set length(t){this._length=t}percent(){return this._length>0?Math.round(100*this.exp/this.length):0}constructor(t){super(t),this.id=h.ZG,this.name="enchanting",this.spaceProp="level",this.removeDupes=!0,this._exp=0,this._length=0}maxed(){for(let t=this.items.length-1;t>=0;t--)if(!this.items[t].done)return!1;return!0}revive(t){let e=0,s=0;for(let n=this.items.length-1;n>=0;n--){var i=new M.Z(this.items[n]);i?(i.revive(t),i&&null!==i.target&&null!==i.item?(e+=i.length,s+=i.exp):this.items.splice(n,1),this.items[n]=i):(console.warn("invalid enchanting: "+n),this.items.splice(n,1))}this.exp=s,this.length=e,this.calcUsed()}update(t){let e=0,s=0;for(let n=this.items.length-1;n>=0;n--){var i=this.items[n];i.done||(i.update(t),e+=i.length,s+=i.exp)}this.exp=s,this.length=e}runWith(t){!this.includes(t)&&t instanceof M.Z&&super.add(t)}add(t,e=null){if(t.type===h.L0)super.add(t);else if(t&&e){let s=new M.Z(e,t);super.add(s)}}remove(t){(t.type===h.L0||(t=this.items.find((e=>e.targ===t))))&&super.remove(t)}begin(t){for(let e=this.items.length-1;e>=0;e--)"function"==typeof this.items[e].target.begin&&this.items[e].target.begin(t)}}var N=s(3707),j=s(157),D=s(1893);class R{get id(){return"combat"}toJSON(){var t=void 0;if(this.allies.length>1){t=[];for(let s=1;s<this.allies.length;s++){var e=this.allies[s];t.push(e.keep?e.id:e)}}return{enemies:this._enemies,allies:t}}get active(){return this._active}set active(t){this._active=t}get enemies(){return this._enemies}set enemies(t){this._enemies=t}get allies(){return this._allies}set allies(t){this._allies=t}get done(){return 0===this._enemies.length}get teams(){return this._teams}constructor(t=null){t&&(0,A.f0)(this,t),this.enemies||(this.enemies=[]),this.allies||(this.allies=[]),this.active=!1,this._teams=[]}revive(t){let e;this.state=t,this.player=t.player;for(let s=this._enemies.length-1;s>=0;s--)e=this._enemies[s],e&&(e=this._enemies[s]=(0,n.X)(t,e)),e&&e instanceof D.Z||this._enemies.splice(s,1);for(let s=this._allies.length-1;s>=0;s--)e=this._allies[s],"string"==typeof e?this._allies[s]=t.minions.find(e):!e||"object"!=typeof e||e instanceof D.Z||(console.log("NEW ALLY"),this._allies[s]=(0,n.X)(t,e)),this._allies[s]||this._allies.splice(s,1);this._allies.unshift(this.player),this.resetTeamArrays(),l.ZP.add(l.Mz,this.spellAction,this),l.ZP.add(l.WM,this.charDied,this)}update(t){if(!1!==this.player.alive){var e,s;for(let i=this._allies.length-1;i>=0;i--){if(e=this._allies[i],i>0){if(!1===e.alive){e.hp-=t,e.hp<-5&&this._allies.splice(i,1);continue}e.update(t)}(s=e.combat(t))&&(s.canAttack()?this.attack(e,s):l.ZP.emit(l.Ry,e,s))}for(let i=this._enemies.length-1;i>=0;i--)(e=this._enemies[i]).update(t),!1!==e.alive?(s=e.combat(t))&&(s.canAttack()?this.attack(e,s):l.ZP.emit(l.Ry,e,s)):(this._enemies.splice(i,1),0===this._enemies.length&&l.ZP.emit(l.Ug))}}spellAction(t,e){let s=e.self.getCause(N.VD);if(s&&!t.silent)l.ZP.emit(l.Ry,e.self,s);else if(l.ZP.emit(l.tp,null,e.self.name+" Casts "+t.name.toTitleCase()),t.attack&&this.attack(e.self,t.attack),t.action){console.log("ACTION: "+t.action);let s=this.getTarget(e.self,t.action.targets);if(!s)return;if(Array.isArray(s))for(let i=s.length-1;i>=0;i--)(0,j.Ns)(s[i],t.action,e.self);else(0,j.Ns)(s,t.action,e.self)}}attack(t,e){if(e.log&&l.ZP.emit(l.tp,null,e.log),e.hits)for(let s in e.hits)this.attack(t,e.hits[s]);let s=this.getTarget(t,e.targets);if(s)if(Array.isArray(s))for(let i=s.length-1;i>=0;i--)this.doAttack(t,e,s[i]);else this.doAttack(t,e,s)}doAttack(t,e,s){s&&s.alive&&(e.harmless||!s.canDefend()||this.tryHit(t,s,e))&&(0,j.Ns)(s,e,t)}getTarget(t,e){e=t.retarget(e);var s=this.getGroup(e,t.team);if(!this.active){if(this.group===this.enemies)return null;if(this.group===this.teams[h.T2])return this.allies}return e&j.cZ?s:e&&e!==j.wq&&e!==j.Mf?e&j.Ny?t:e&j.Tp?(0,j.jK)(s):e&j.h?(0,j.YC)(s):void 0:(0,j.YC)(s)}getGroup(t,e){return!t||t&j.wq?e===h.Zj?this.enemies:this.allies:t&j.Mf+j.Ny?this.teams[e]:t&j.Nd?this.teams[h.T2]:t&j.h?Math.random()<.5?this.allies:this.enemies:null}tryHit(t,e,s){let i=t.getHit();if(s&&s!=t&&(i+=s.tohit||0),this.dodgeRoll(e.dodge,i))s.name?l.ZP.emit(l.Qk,e.name.toTitleCase()+" Dodges "+s.name.toTitleCase()):l.ZP.emit(l.Qk,e.name.toTitleCase()+" Dodges "+t.name.toTitleCase());else{if(Math.random()*(10+i)>=Math.random()*(10+.25*e.defense))return!0;s.name?l.ZP.emit(l.Qk,e.name.toTitleCase()+" Parries "+s.name.toTitleCase()):l.ZP.emit(l.Qk,e.name.toTitleCase()+" Parries "+t.name.toTitleCase())}}setEnemies(t){this.enemies.push.apply(this.enemies,t),t.length>0&&(t[0]?l.ZP.emit(l.tp,t[0].name.toTitleCase()+" Encountered"):console.warn("No valid enemy")),this.resetTeamArrays(),this.setTimers()}addNpc(t){t.timer=(0,h.sj)(t.speed),t.team===h.Zj?this._allies.push(t):this._enemies.push(t),this.teams[h.T2].push(t)}resetTeamArrays(){this.teams[h.Zj]=this.allies,this.teams[h.IA]=this.enemies,this.teams[h.T2]=this.allies.concat(this.enemies)}reenter(){this.allies=this.state.minions.allies.toArray(),this.allies.unshift(this.player),this.resetTeamArrays()}reset(){this._enemies.splice(0,this.enemies.length),this.reenter()}setTimers(){let t=this.player.timer=(0,h.sj)(this.player.speed);var e;for(let s=this.enemies.length-1;s>=0;s--)(e=this.enemies[s].timer=(0,h.sj)(this.enemies[s].speed))<t&&(t=e);for(let s=this.allies.length-1;s>=0;s--)(e=this.allies[s].timer=(0,h.sj)(this.allies[s].speed))<t&&(t=e);t-=1,this.player.timer-=t;for(let e=this.enemies.length-1;e>=0;e--)this.enemies[e].timer-=t;for(let e=this.allies.length-1;e>=0;e--)this.allies[e].timer-=t}dodgeRoll(t,e){return 1+2/Math.PI*Math.atan(t-e)>Math.random()}charDied(t,e){t!==this.player&&(t.team===h.Zj?l.ZP.emit(l.d2,t):l.ZP.emit(l.WD,t,e))}}const $="rest",B=t=>new S.ZP(t);class U{toJSON(){let t={};for(let e in this.slots)this.slots[e]&&(t[e]=this.slots[e].id);return{version:"pseudo_stable 0.10.4",pid:this.pid,name:this.player.name,items:this.saveItems,bars:this.bars,slots:t,equip:this.equip,combat:this.combat,drops:this.drops,explore:this.explore,sellRate:this.sellRate,NEXT_ID:this.NEXT_ID}}get modules(){return this._modules}set modules(t){this._modules=t}nextId(t=""){return t+"_"+this.nextIdNum()}nextIdNum(){return this.NEXT_ID++}constructor(t){Object.assign(this,t),this.saveItems={},this.inventories=new Map,this.NEXT_ID=this.NEXT_ID||0,this.pid||(this.pid=this.player.hid||(0,h.Qj)("p"),this.player.hid?console.log("USING LEGACY HID: "+this.player.hid):console.log("GENERATING NEW PLAYERID: "+this.pid)),this.initSlots(),this.bars=new T(t.bars||{bars:[t.quickbar]}),this.inventory=new i.ZP(this.items.inv||t.inventory||{max:3}),this.items.inv=this.inventory,this.inventory.removeDupes=!0,this.self=this.player,this.drops=new i.ZP(t.drops),this.items[h.ZG]=new L(this.items[h.ZG]),this.items.minions=this.minions=new c(t.items.minions||null),this.equip=new o(t.equip),this.initStats(),this.combat=new R(t.combat),this.explore=new x(t.explore),this.runner=this.items.runner=new w(this.items.runner),this.prepItems(),this.userSpells=this.items.userSpells=new Z(this.items.userSpells),this.items.spelllist=this.spelllist=new S.ZP(this.items.spelllist),this.spelllist.spaceProp="level",this.spelllist.name=this.spelllist.id="spelllist",this.items.pursuits=new S.ZP(this.items.pursuits),this.items.pursuits.id=h.QU}revive(){console.log("Reviving GameState Items"),this.reviveItems(),this.reviveSpecial(),this.bars.revive(this),this.spelllist.calcUsed(),this.playerStats=this.player.getResources(),this.tagSets=this.makeTagSets(this.items),this.items.allies=this.minions.allies,this.saveItems.allies=void 0}initStats(){this.sellRate=this.sellRate||new m.Z(.5,"sellRate")}prepItems(){for(let e in this.items){var t=this.items[e];t?"group"===t.custom?this.items[e]=new O(t):t.instanced:(console.warn("prepItems() item undefined: "+e),delete this.items[e])}}reviveSpecial(){for(let t in this.slots)"string"==typeof this.slots[t]&&(this.slots[t]=this.getData(this.slots[t]));this.restAction=this.slots[$],this.equip.revive(this),this.player.revive(this),this.minions.revive(this),this.drops.revive(this),this.combat.revive(this),this.explore.revive(this)}reviveItems(){var t=new Set(["minions","player","explore","equip","drops"]);let e=0;for(let i in this.items){var s=this.items[i];s.revive&&"function"==typeof s.revive&&!t.has(i)&&s.revive(this),s.hasTag?(this.saveItems[i]=s,s.hasTag(h.Sd)&&(s.need=this.homeTest),e++):(console.warn(i+": "+this.items[i].id+" missing hasTag(). Removing."),delete this.items[i])}console.log("Items Total: "+e)}homeTest(t,e,s){var i=s.slots.home;return t.space.valueOf()<=t.space.max.delValue(e.mod.space.max.bonus-(i?i.mod.space.max.bonus:0))}initSlots(){this.slots=this.slots||{},(0,C.zx)(this.slots,[h.Sd,"mount","bed",$]),this.slots[$]||(this.slots[$]=this.getData("rest"))}makeTagSets(t){var e=new Map;for(let a in t){var s=t[a],i=s.tags;if(i)for(var n of i){var r=e[n];r||(t[n]=e[n]=r=new E.Z(n)),r.add(s)}}return e}setQuickSlot(t,e){this.bars.active.setSlot(t,e)}getQuickSlot(t){return this.bars.active.getSlot(t)}toData(t){if(!t)return[];for(let s=t.length-1;s>=0;s--){var e=t[s];"string"==typeof e&&(t[s]=this.getData(e))}return t}getTagSet(t){return this.tagSets[t]}typeCost(t,e){return t&&t[e]||0}addMax(t,e=50){let s="string"==typeof t?this.getData(t):t;s&&(s.max.base+=e)}filterItems(t){let e=[],s=this.items;for(let i in s)t(s[i])&&e.push(s[i]);return e}addItem(t){return this.items[t.id]&&console.warn("OVERWRITE ID: "+t.id),t.hasTag?(this.items[t.id]=t,"hall"!==t.module&&(console.log("ADDING SAVE ITEM: "+t.id),this.saveItems[t.id]=t),!0):(console.log("MISSING HASTAG: "+t.id),!1)}deleteItem(t){delete this.items[t.id],delete this.saveItems[t.id]}getSlots(){return this.slots}getSlot(t,e){return e===h.W$||e===h.rU||e===h.if?null:this.slots[t]}setSlot(t,e){e&&e.type===h.W$||(this.slots[t]=e,t===$&&(this.restAction=e))}findInstance(t){return this.inventory.find(t,!0)||this.equip.find(t,!0)}exists(t){return this.items.hasOwnProperty(t)}findData(t,e=!1){return this.getData(t)||this.inventory.find(t,e)||this.equip.find(t,e)}hasUnique(t){return"string"==typeof t&&(t=this.getData(t)),!(void 0===t||!t.unique)&&(t.isRecipe||t.instanced?null!=this.inventory.find(t.id,!0)||null!=this.drops.find(t.id,!0)||null!=this.equip.find(t.id,!0):t.value>0)}getUnique(t){let e=this.items[t];return void 0!==e&&e.unique&&e.value>0?null:e}getData(t){return this.items[t]||this[t]}}},3037:(t,e,s)=>{s.d(e,{ZP:()=>a});var i=s(7532),n=s(4478);s(4028);const r="loop";class a extends i.ZP{toJSON(){let t=super.toJSON();return t.order!==r&&(t.order=this.order),t.lastInd=this.lastInd||void 0,t}get lastInd(){return this._lastInd}set lastInd(t){this._lastInd=t}get order(){return this._order}set order(t){this._order=t}constructor(t=null){super(t),this.lastInd=this.lastInd||0,this.saveMode="custom",this.saveMap=i.sQ,this.order=this.order||r}getRunnable(t){var e=this.items.length;if(0===e)return null;let s=this.nextInd(),i=s;do{if(this.items[i].canRun(t))return this.items[i];++i>=e&&(i=0)}while(i!==s);return null}canRun(t){for(let e=this.items.length-1;e>=0;e--)if(this.items[e].canRun(t))return!0;return!1}canUse(t){for(let e=this.items.length-1;e>=0;e--)if(this.items[e].canUse(t))return!0;return!1}curItem(){if(this.items.length>0)return this.items[this.nextInd()]}nextItem(){if(this.items.length>0)return this.lastInd=this.nextInd(),this.items[this.lastInd]}nextUsable(t){var e=this.items.length;if(e<=0)return null;let s=this.nextInd(),i=s;do{var n=this.items[i];if(n.canUse(t))return n.cost&&t.payCost(n.cost),this.lastInd=i,n;++i>=e&&(i=0)}while(i!==s);return null}onUse(t){var e=this.nextUsable(t);return e?(e.onUse(t),e):null}nextInd(){return this.order===r?this.lastInd+1<this.items.length?this.lastInd+1:0:"top"===this.order?0:"rand"===this.order?Math.floor(Math.random()*this.items.length):0}dataDeleted(t){this.remove(t)}revive(t,e=null){super.revive(t,e),n.ZP.add(n.mN,this.dataDeleted,this)}}},7532:(t,e,s)=>{s.d(e,{sQ:()=>o,k2:()=>h,ZP:()=>u});var i=s(3955),n=s(9827),r=(s(8564),s(6584)),a=s(1555);const o=t=>t.instanced?t:t.id,l="full",h="ids";class u{get count(){return this.items.length}valueOf(){return this.items.length}toJSON(){return{items:this.saveMode===l?this.items:this.saveMode!==h&&this.saveMap?this.items.map(this.saveMap,this):this.items.map((t=>t.id)),max:this.max}}get saveMode(){return this._saveMode}set saveMode(t){this._saveMode=t}get saveMap(){return this._saveMap}set saveMap(t){this._saveMap=t}get spaceProp(){return this._spaceProp}set spaceProp(t){this._spaceProp=t}get countProp(){return this._cProp}set countProp(t){this._cProp=t}get used(){return this._used}set used(t){this._used=t}get name(){return this._name||this.id}set name(t){this._name=t}get max(){return this._max}set max(t){this._max=t instanceof i.Z?t:new i.Z(t,"max",!0)}get removeDupes(){return this._removeDupes}set removeDupes(t){this._removeDupes=t}get items(){return this._items}set items(t){if(t)for(let e=t.length-1;e>=0;e--)null!==t[e]&&void 0!==t[e]||t.splice(e,1);this._items=t}get saveIds(){return this._saveIds}set saveIds(t){this._saveIds=t}[Symbol.iterator](){return this.items[Symbol.iterator]()}reverse(){return this._items.reverse()}toArray(){return this._items.slice(0)}constructor(t=null){t&&("string"==typeof t?this.items=t.split(","):Array.isArray(t)?this.items=t:Object.assign(this,t)),this.items||(this.items=[]),this._cProp&&(this._cProp="value"),this.saveMode||(this.saveMode=l),this.type="inventory",this.id||(this.id=this.type),this.max||(this.max=0)}begin(t){for(let e=this.items.length-1;e>=0;e--)"function"==typeof this.items[e].begin&&this.items[e].begin(t)}revive(t,e){let s=this.items.length,i=this.items.splice(0,s);for(let a=0;a<s;a++){var n=i[a];e?n=e(t,n):"object"==typeof n?n=(0,r.X)(t,n):"string"==typeof n&&(n=t.getData(n)),this.add(n)}this.calcUsed()}add(t){if(null==t||"object"!=typeof t)return!1;if(Array.isArray(t))for(let e=t.length-1;e>=0;e--)this.add(t[e]);else{if(!t.id)return!1;if(t.stack&&this.addStack(t))return;if(this.full())return!1;if(this.removeDupes&&this.find(t.id))return console.log("removing: "+t.id),!1;this._items.push(t),this.used+=this.spaceCost(t)}a.Bc.add(this)}cycleAdd(t){const e=this.spaceCost(t);if(this.max&&e>this.max)return!1;for(;this.items.length>0&&this.used+e>this.max;)this.removeAt(0);return this.add(t)}spaceCost(t){return this.spaceProp?t[this.spaceProp]||0:1}canAdd(t){return!this.max||0===this.max.value||this.used+this.spaceCost(t)<=this.max.value}includes(t){return this.items.includes(t)}freeSpace(){return this.max?this.max-this.used:Number.MAX_SAFE_INTEGER}full(){return this.max>0&&this.used>=Math.floor(this.max.value)}randItem(){return this.items.length<=0?null:this.items[Math.floor(Math.random()*this.items.length)]}removeAll(){return this.used=0,this.items.splice(0,this.items.length)}remove(t){let e=this.items.indexOf(t);e<0||this.removeAt(e)}removeAt(t){let e=this.items[t];this.used-=this.spaceCost(e),this.items.splice(t,1)}removeCount(t,e){t[this._cProp]-=e,t[this._cProp]<=0&&this.remove(t)}filter(t){return this.items.filter(t)}hasCount(t,e){return!!(t=this.findMatch(t))&&(1===e||t.stack&&t[this._cProp]>=e)}addStack(t,e=1){let s=this.findMatch(t);return s?(s.count.value<1&&(s.count.value=1),s.count++,s):null}findMatch(t){let e=t.id,s=t.recipe;return this.items.find((t=>t.id===e||s&&t.recipe===s))}find(t,e=!1){return!0===e?this.items.find((e=>e.id===t||e.recipe===t)):this.items.find((e=>e.id===t))}calcUsed(){let t=0,e=this.spaceProp;for(let i=this.items.length-1;i>=0;i--){var s=this.items[i];s?t+=e?s[e]||0:1:console.warn(this.id+" null Item in Inv: "+s)}this.used=t}}(0,n.u1)(u,n.ZP)},9827:(t,e,s)=>{s.d(e,{Aw:()=>d,u1:()=>m,ZP:()=>f});var i=s(2038),n=s(7112),r=s(3955),a=s(81),o=s(9188),l=s(4722),h=s(1555),u=s(7908),c=s(6802);const d=(t,e)=>{if(t instanceof a.ZP)t.count=e;else if("object"==typeof t)for(let s in t)d(t[s],e)},m=(t,e)=>{let s=t.prototype||t,n=Object.getOwnPropertyDescriptors(e),r=(0,i._L)(s);for(let t in n)r.has(t)||Object.defineProperty(s,t,n[t]);return t},p=new Set(["template","id","type","defaults","module","sname","sym","warn","effect","length","runmod","name","desc","running","current","warnMsg","once","context","enemies","encs","boss","spawns","targets","only","locked","locks","value","exp","delta","tags","mod","progress","need","require","action"]),f={toJSON(){if(this.save&&(this.value>0||this.owned))return this.forceSave();let t=(0,i.Ke)(this,p);return this.template&&(t=(0,i.Vu)(t,this.template)),!1===this.locked&&this.template&&!1!==this.template.locked&&(t=t||{},t.locked=this.locked),t&&t.name&&(t.name=this.sname),t||void 0},forceSave(){let t=(0,i.Ke)(this);return this.mod&&(t.mod=this.mod),this.slot&&(t.slot=this.slot),this.effect&&(t.effect=this.effect),this.use&&(t.use=this.use),t.template&&"object"==typeof t.template&&(t.template=t.template.id),t.val&&(t.value=void 0),t.name=this.sname,t},get id(){return this._id},set id(t){this._id=t},get template(){return this._template},set template(t){this._template=t},get type(){return this._type},set type(t){this._type=t},get typeName(){return this._type},toString(){return this.id},get sname(){return this._name||this.id},get name(){return this._actname&&this._value<1?this.actname:(this.sym||"")+(this._name||this.id)},set name(t){t&&this.sym?this._name=t.split(this.sym).join("").trim():this._name=t},get repeat(){return this._repeat},set repeat(t){this._repeat=t},get desc(){return this.actdesc&&this._value<1?this.actdesc:this._desc||null},set desc(t){this._desc=t},get current(){return this.value},get ex(){return this._exp},set ex(t){this._exp=t},get val(){return this._value},set val(t){this._value=t},get value(){return this._value},set value(t){this._value=t},valueOf(){return this._value},get delta(){return 0},get tags(){return this._tags},set tags(t){"string"==typeof t?this._tags=t.split(","):Array.isArray(t)?this._tags=t:this._tags=null},permVars(t,e=this){if("number"==typeof e);else if("object"==typeof t){for(let r in t){var s=t[r],n=e[r];null==n?n=e[r]=(0,i.vP)(s):"number"==typeof n?e[r]=(n||0)+t[r].valueOf():"object"==typeof s?s.constructor!==Object?n.perm(s):this.permVars(s,n):console.log(this.id+" UNKNOWN PERM VAR: "+r+" typ: "+typeof n)}e===this&&t.mod&&(0,u.uV)(this.mod,this.id,this)}},applyVars(t,e=1){if("number"==typeof t)this.value.add(t*e);else if(t.isRVal)this.amount(e*t.getApply(n.ZP.state,this));else if("object"==typeof t){t.mod&&this.changeMod(t.mod,e);for(let s in t){if("skipLocked"===s||"value"===s)continue;let i=this[s],n=t[s];i instanceof l.ZP?i.apply(n,e):"object"==typeof n?n.type===o.st?n.applyTo(this,s,e):"number"==typeof i||n.isRVal?this[s]+=Number(n)*e:this.subeffect(i,n,e):void 0!==i?this[s]+=Number(n)*e:(console.log("NEW SUB: "+s),this.newSub(this,s,n,e))}t.value&&this.amount(t.value*e)}h.Bc.add(this)},applyMods(t,e=1,s=this){h.Bc.add(this),t instanceof a.ZP?t.applyTo(s,"value",e):t.constructor===Object?(this.applyObj(t,e,s),t.mod&&this.changeMod(t.mod,0,s)):"number"==typeof t?console.warn(t+" RAW NUM MOD ON: "+this.id):console.warn(this.id+" unknown mod type: "+t)},applyObj(t,e,s,i=!1){for(let h in t){var n=t[h],o=s[h];if(null==o){if(!(0,c.fg)(s,h))continue;n.constructor===Object?this.applyObj(n,e,s[h]={},"mod"===h||i):((o=s[h]=i?new a.ZP(0):new r.Z(0)).id=(0,l.Gj)(this.id,h),o.source=this,o.addMod(n,e))}else o.applyMods?o.applyMods(n,e,o):n.constructor===Object?this.applyObj(n,e,o,"mod"===h||i):n instanceof a.ZP?o.isRVal?o.addMod(n,e):n.applyTo(s,h,e):"number"==typeof n?console.warn("RAW NUMBER MOD on: "+this.id+": "+h+": "+n):console.warn(`UNKNOWN Mod to ${this.id}.${h}: ${n}  `+typeof n)}},removeMods(t,e=this){if(e===this)h.Bc.add(this);else if(!e)return;if(t instanceof a.ZP)"object"==typeof e&&(e.isRVal?e.removeMods(t):this.removeMods(t,e.value));else if(t.constructor===Object)for(let s in t)this.removeMods(t[s],e[s]);else"number"==typeof t?console.warn(this.id+" REMOVED NUMBER MOD: "+t):console.warn(this.id+" unknown mod type: "+t)},subeffect(t,e,s){if("object"==typeof t)for(let i in e)"object"==typeof e[i]?this.subeffect(t[i],e[i],s):"object"==typeof t[i]?t[i].value=(t[i].value||0)+Number(e[i])*s:t[i]+=Number(e[i])*s},newSub(t,e,s,i=1){console.warn("ADD SUB: "+this.id+" "+e+" stat: "+i*s.value);let n=t[e]=new r.Z("number"==typeof s?s*i:0,"key");s instanceof a.ZP&&n.apply(s,i)},changeMod(t,e){n.ZP.applyMods(t,e*this.value)},addTag(t){null===this._tags||void 0===this._tags?this._tags=[t]:this._tags.includes(t)||this._tags.push(t)},hasTag(t){return this.tags&&this.tags.includes(t)},hasTags(t){if(!this._tags)return!1;for(let e=t.length-1;e>=0;e--)if(!this._tags.includes(t[e]))return!1;return!0},canUse:()=>!0}},6093:(t,e,s)=>{s.d(e,{Z:()=>o});var i=s(4028),n=s(7112),r=s(9188);const a={locked:!1};class o extends i.Z{toJSON(){return 0!=this.exp?{value:this.value,exp:this.exp}:this.value>0?{value:this.value}:void 0}get exp(){return this._exp}set exp(t){this._exp=t}get length(){return this._length}set length(t){this._length=t}get done(){return this._exp>=this.length}constructor(t=null,e=null){super(t,a),e&&Object.assign(this,e),this.type=r.$6,this._exp=this._exp||0,this.level||(this.level=1),this.length||(this.length=5*this.level)}update(t){this._exp+=t,this.effect&&n.ZP.applyVars(this.effect,t)}maxed(){return!1}}},4028:(t,e,s)=>{s.d(e,{Z:()=>p});var i=s(2038),n=s(3955),r=s(9827),a=s(4152),o=s(6802),l=s(4478),h=s(7112),u=s(9188),c=s(4722),d=s(1555);const m=new Set(["require","rate","current","need","value","buy","on","cost","id","name","warn","effect","slot","exp","delta"]);class p{get module(){return this._module}set module(t){this._module=t}get disabled(){return this._disabled}set disabled(t){this._disabled=t}get sym(){return this._sym}set sym(t){this._sym=t}get max(){return this._max}set max(t){null!=t&&(this._max?t instanceof n.Z?this._max.base=t.base:isNaN(t)||(this._max.base=t):this._max=t instanceof n.Z?t:new n.Z(t,this.id+".max",!0))}get rate(){return this._rate}set rate(t){t instanceof n.Z?(t.id=this.id+".rate",this._rate=t):this._rate?"object"==typeof t?Object.assign(this._rate,t):this._rate.base=t:this._rate=new n.Z(t,this.id+".rate")}get on(){return this._on}set on(t){this._on=t}get triggers(){return this._triggers}set triggers(t){this._triggers=t}get cost(){return this._cost}set cost(t){"object"!=typeof t||t instanceof c.ZP?this._cost={gold:t}:this._cost=t}get require(){return this._require}set require(t){this._require=t}get warn(){return this._warn}set warn(t){this._warn=t}get warnMsg(){return this._warnMsg}set warnMsg(t){this._warnMsg=t}get mod(){return this._mod}set mod(t){this._mod=t}get effect(){return this._effect}set effect(t){this._effect=t}get locks(){return this._locks||0}set locks(t){this._locks=t}get locked(){return this._locked}set locked(t){this._locked=t}get owned(){return this._owned}set owned(t){this._owned=t}get delta(){return this._delta}set delta(t){this._delta=t}get value(){return this._value}set value(t){t instanceof n.Z?null===this._value||void 0===this._value?this._value=t:t!==this._value&&(this._value.base=t.base,this._value.basePct=t.basePct):void 0!==this._value?this._value.base="object"==typeof t?t.value:t:this._value=new n.Z(t,this.id)}get val(){return this.value}set val(t){this.value=t}valueOf(){return this._value.valueOf()}constructor(t=null,e=null){t&&("object"==typeof t?(t.id&&(this.id=t.id),(0,o.BF)(this,t)):isNaN(t)||(this.val=t)),e&&this.setDefaults(e),void 0!==this._locked&&null!==this._locked||(this.locked=!0),this.locks=0,null!==this._value&&void 0!==this._value||(this.val=0),this.delta=0,(0,i.VX)(this,null,m),(0,c.Px)(this,this)}fillsRequire(){return!1===this.locked&&this.value>0}canRun(t,e=h.EU){return!(this.disabled||this.maxed()||this.locks>0||this.need&&!t.unlockTest(this.need,this))&&!(this.buy&&!this.owned&&!t.canPay(this.buy))&&!(this.cost&&0==this.exp&&!t.canPay(this.cost))&&(!this.fill||!t.filled(this.fill,this))&&(!this.run||t.canPay(this.run,e))}canPay(t){return this.value>=t}remove(t){this.value.base-=t}canUse(t=h.ZP){return this.perpetual||this.length>0?this.canRun(t,h.EU):!(this.disabled||this.locks>0||this.maxed()||this.need&&!t.unlockTest(this.need,this))&&!(this.buy&&!this.owned&&!t.canPay(this.buy))&&(!this.slot||t.state.getSlot(this.slot,this.type)!==this)&&(!this.fill||!t.filled(this.fill,this))&&!(this.mod&&!t.canMod(this.mod,this))&&(!this.cost||t.canPay(this.cost))}canBuy(t){return!(this.disabled||this.locked||this.locks>0||this.maxed())&&(!this.buy||t.canPay(this.buy))}add(t){let e=this.value.valueOf();if(t<=0){if(e<=0||0===t)return 0;if(e+t<=0)return this.value.base=0,-e}else{if(!0!==this.repeat&&!this.max&&this.value>1&&(!this.buy||!0===this.owned))return 0;this.max&&e+t>=this.max.value&&(t=this.max.value-e)}return this.value.base+=t,this.value.valueOf()-e}amount(t=1){this.delta+=t,d.Bc.add(this)}changed(t,e){if(this.delta=0,0!==(e=this.add(e))){if(this.isRecipe)return t.create(this,!0,e);this.once&&1===this.valueOf()&&t.applyVars(this.once),this.cd&&(this.timer=Number(this.cd),t.addTimer(this)),this.loot&&t.getLoot(this.loot),this.title&&t.self.setTitle(this.title),this.result&&t.applyVars(this.result,e),this.create&&t.create(this.create),this.mod&&t.applyMods(this.mod),this.lock&&t.lock(this.lock),this.dot&&t.self.addDot(this.dot,this),this.disable&&t.disable(this.disable),this.log&&l.ZP.emit(l.ij,this.log),(this.attack||this.action)&&this.type!==u.W$&&this.type!==u.if&&l.ZP.emit(l.Mz,this,t)}}doLock(t){this.locks+=t,d.Bc.add(this)}doUnlock(){this.disabled||!1===this.locked||this.locks>0||(this.locked=!1,this.start?l.ZP.emit(l.ij,this.start):l.ZP.emit(l.tT,this),d.Bc.add(this))}onUse(t){this.slot?t.setSlot(this):this.amount(1)}filled(t=0){return this._max&&this.value>=this._max.value||this.rate&&this.rate+t.valueOf()<=0}maxed(){return this._max?this.value>=Math.floor(this._max.value):!(this.repeat||this.owned)&&this.value>0}setDefaults(t){var e;for(let s in t){null==this[s]&&("function"==typeof(e=t[s])?this[s]=e(this):"object"==typeof e?(console.log("clone: "+this.id),this[s]=(0,i.vP)(e)):this[s]=e)}}blocked(){return this.locked||this.disabled||this.locks>0}addRequire(t){if(this.require){if(this.require===t||Array.isArray(this.require)&&this.require.includes(t))return;this.require=(0,a.QQ)(this.require,t)}else this.require=t}}(0,r.u1)(p,r.ZP)},2653:(t,e,s)=>{s.d(e,{Z:()=>i});const i={get instanced(){return!0},get recipe(){return this.template?this.template.id:this._id},set recipe(t){this.template||(this.template=t)},get template(){return this._template},set template(t){this._template=t},get mod(){return this._mod},set mod(t){this._mod=t},get alters(){return this._alters},set alters(t){this._alters=t},initAlters(t){let e=this.alters||[];"string"==typeof e&&(e=e.split(","));let s=e.length,i=[];for(let n=0;n<s;n++){let s=t.getData(e[n]);s&&"object"==typeof s&&(i.push(s),s.alter&&(console.log(this.id+" INIT ALTER: "+s.id),this.applyMods(s.alter,1,this)))}this.alters=i},doAlter(t){if(t){if(t.alter&&this.applyMods(t.alter,1,this),Array.isArray(this.alters)){if(this.alters.includes(t))return}else this.alters=[];this.addAdj(t.adj||t.name,t),this.alters.push(t)}else console.log("NO ALTER. NULL RETURN")},addAdj(t,e,s=null){if(t){if(t.includes("%"))return void(this.name=t.replace("%s",e.name).replace("%i",this.name));if(!this.name.includes(t))return void(this.name=t+" "+this.name)}s&&this.addAdj(s,e)},is(t){return this.type===t||this.kind===t||this.hasTag(t)||this.name===t}}},8564:(t,e,s)=>{s.d(e,{Z:()=>h});var i=s(9827),n=s(2038),r=s(7908),a=s(2653),o=s(4722);const l={stack:!0,consume:!0};class h{toJSON(){let t=i.ZP.toJSON.call(this);return this.template||this.recipe||(t.type=this.type),this.alters&&this.alters.length>0&&(this.alters=this.alters.filter((function(t){return null!=t})),t.alters=this.alters.map((t=>t.id))),t.cnt=this.count||void 0,t.id=this.id,t.recipe=this.recipe,t||void 0}get consume(){return this._consume}set consume(t){this._consume=t}get count(){return this._count}set count(t){this._count=new o.ZP(t)}get stack(){return this._stack}set stack(t){this._stack=t}get defaults(){return this._defaults||l}set defaults(t){this._defaults=t}constructor(t=null,e=null){t&&(0,n.vP)(t,this),e&&(0,n.f0)(this,e),this.count||(t&&(t.cnt?this.count=t.cnt:t.val&&(this.count=t.val)),this.count||(this.count=1)),this.value=0,null!==this.consume&&void 0!==this.consume||(this.consume=this.defaults.consume),null!==this.stack&&void 0!==this.stack||(this.stack=this.defaults.stack)}canPay(t){return this.count>=t}canUse(t){return this.consume||this.use}onUse(t,e){!0===this.consume&&(this.count--,this.count<=0&&(e||t.state.inventory).remove(this)),this.use&&(this.use.dot&&t.state.player.addDot(this.use.dot,this),t.applyVars(this.use))}amount(t){}maxed(){return!1===this.stack&&this.count>0||this.max&&this.count>=this.max}revive(t){"string"==typeof this.template&&(this.template=t.getData(this.template)),this.mod&&(this.mod=(0,r.uV)(this.mod,this.id,this))}begin(t){this.initAlters(t)}}(0,i.u1)(h,i.ZP),(0,i.u1)(h,a.Z)},1949:(t,e,s)=>{s.d(e,{go:()=>m});var i=s(2466),n=s(9188),r=s(8206),a=s(7112);const o=t=>!(t=a.ZP.getData(t))||a.ZP.state.hasUnique(t)||t.locked||t.disabled||t.locks>0?null:t.type===n.$6?t:(0,r.b)(t,a.ZP);class l{toJSON(){return 1===this._w?this.ids:{ids:this.ids,w:this._w}}get w(){return this._w}set w(t){this._w=t}get ids(){return this._ids}set ids(t){"string"==typeof t&&t.includes(",")?this._ids=t.split(","):this._ids=t}constructor(t){"string"==typeof t||Array.isArray(t)?this.ids=t:"object"==typeof t&&(this.ids=t.ids,this.w=t.weight||t.w),this.w||(this.w=1)}instantiate(t=0){let e;if("string"==typeof this.ids)return e=o(this.ids),null===e?null:e.type===n.$6?e:[e];{let t=[];if(void 0!==this.ids)for(let s=0;s<this.ids.length;s++)e=o(this.ids[s]),e&&t.push(e);return t.length>0?t:null}}}class h{get type(){return this._type}set type(t){this._type=t}get level(){return this._level}set level(t){this._level=t}get range(){return this._range}set range(t){this._range=t}constructor(t){t?(this.level=t.level,this.range=t.range):console.warn("NO SPAWN PARAMS: "+t)}instantiate(t=0){return this.random(t)}random(t=0){return this.type!==n.$6?[a.ZP.itemGen.randEnemy(this,null,t)]:a.ZP.itemGen.randEncounter(this,null,t)}}class u{get groups(){return this._groups}set groups(t){this._groups=t}get weightTot(){return this._weightTot}set weightTot(t){this._weightTot=t}constructor(t){this.initGroups(t)}random(t=0){let e=this.randGroup();return null===e?null:e.instantiate(t)}randGroup(){let t=Math.random()*this.weightTot,e=0,s=this.groups.length;for(let i=0;i<s;i++)if(e+=this.groups[i].w,t<=e)return this.groups[i];return s>0?this.groups[0]:null}initGroups(t){var e=0;for(let i=t.length-1;i>=0;i--){var s=t[i];s instanceof l||(s=t[i]=new l(s)),e+=s.w}this.weightTot=e,this.groups=t}}const c=(t,e)=>t.dist>=e.dist,d=(t,e)=>t.player.level>=e.level-1;class m extends i.Z{get once(){return this._once}set once(t){this._once=t}get encs(){return this._spawns}set encs(t){this.spawns=t}get spawns(){return this._spawns}set spawns(t){this._spawns=(t=>{if("object"==typeof t)return Array.isArray(t)?new u(t):new h(t)})(t)}get bars(){return this._bars}set bars(t){this._bars="string"==typeof t?t.split(","):t}get boss(){return this._boss}set boss(t){if(null===t||t instanceof l)this._boss=t;else if("object"==typeof t&&Array.isArray(t)){for(let e in t)"mustylibrary"===this.id&&console.log("BOSS SUB: "+e),t[e]=new l(t);this._boss=t}else this._boss=new l(t)}get controller(){return n.Lo}constructor(t=null){var e;super(t),null!==this.level&&void 0!==this.level||(this.level=1),this.type=n.MV,this.ex=this.ex||0,this.length||(this.length=20*this.level),this.require||(this.require=d),void 0!==this.dist&&null!==this.dist||(this.dist=(e=this.level,Math.ceil(4.4*Math.exp(.3*e)))),this.need||(this.need=c)}getEncounter(){let t=null;return this.hasBoss(this.boss,this.exp)&&(t=this.getBoss(this.boss),t)?t:this.spawns.random(this.percent()/100)}hasBoss(t,e){return null!=t&&(e=Math.floor(e+1),t instanceof l?e==this.length:t.hasOwnProperty(e))}getBoss(t){if(!t)return null;if(t instanceof l)return t.instantiate();{let e=Math.floor(this.exp+1);if(t.hasOwnProperty(e))return t[e].instantiate()}return null}}},8206:(t,e,s)=>{s.d(e,{b:()=>l,Z:()=>h});var i=s(4028),n=s(9188),r=s(1893),a=s(3572),o=s(2572);const l=(t,e)=>{let s=new r.Z(t);return s.value=1,s.name=t.name,s.id=e.state.nextId(t.id),s};class h extends i.Z{get isRecipe(){return!0}toJSON(){return this.value>0?{value:this.value}:void 0}get attack(){return this._attack}set attack(t){if(Array.isArray(t)){let e=[];for(let s=t.length-1;s>=0;s--)e.push(t[s]instanceof a.Z?t[s]:new a.Z(t[s]));this._attack=e}else this._attack=t instanceof a.Z?t:new a.Z(t)}constructor(t=null){super(t),this.type=n.EN,this.level||(this.level=1),this.hp=this.hp||2*this.level,this.speed=this.speed||this.level,this.tohit=this.tohit||this.level,this.defense=null===this.defense||void 0===this.defense?this.level:this.defense,this.locked=!!this.require}canUse(t){return!(this.value<10)&&(!((0,o.B2)(this.kind,t)<this.level)&&super.canUse(t))}amount(t,e){e||(e=1);let s=t.getData("minions");t.create(this,s.shouldKeep(this),e)}onCreate(t,e=n.Zj,s=!1){let i=l(this,t);i.team=e,i.active=!s,s?t.state.minions.add(i):t.state.combat?t.state.combat.addNpc(i):t.state.state&&t.state.state.combat.addNpc(i)}maxed(){return!1}}},4945:(t,e,s)=>{s.d(e,{Z:()=>r});var i=s(4028),n=s(9188);class r extends i.Z{get require(){return super.require||(this._locked?()=>this.positive():null)}set require(t){super.require=t}get group(){return this._group}set group(t){this._group=t}positive(){return super.value>0||this.rate.value>0&&(!this.max||this.max.value>0)}get current(){return this.unit?Math.floor(super.value.valueOf()):super.value.valueOf()}get val(){return super.value}set val(t){super.value=t}get value(){return super.value}set value(t){t>this.max?t<super.value.base?super.value=t:super.value=Math.max(this.max.value,super.value.valueOf()):super.value=t>=0?t:0}remove(t){t>=this.value?this.value.base=0:this.value.base-=t}get color(){return this._color}set color(t){this._color=t}constructor(t=null){super(t),!1!==this.repeat&&(this.repeat=!0),null!==this.unit&&void 0!==this.unit||(this.unit=!0),null!==this.rate&&void 0!==this.rate||(this.rate=0),this.type=this.type||n.YI}fillsRequire(){return!1===this.locked&&this.value>0}empty(){return this.value<=0}maxed(){return!!this.max&&this.value>=this.max}}},7899:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(4945);class n extends i.Z{constructor(t){super(t),this._max||(this.max=0)}free(){return this.max-this.value}empty(){return this.value>=this.max.value}canPay(t){return this.value-t<=this.max.value}remove(t){this.value.base+=t}doFill(){this.value=0}filled(t=0){return this.value<=0||this.rate&&this.rate+t>=0}maxed(){return this.value<=0}}},1247:(t,e,s)=>{s.d(e,{Z:()=>l});var i=s(2466),n=s(3955),r=s(9188),a=s(6371);const o=t=>50*Math.pow(1.35,t);class l extends i.Z{showLevel(){return Math.floor(this.value)}constructor(t=null){if(super(t),this.type=r.HZ,this.length&&0!=this.value){if(this.value>=1){let t=o(this.level+this.value);this.length>t&&(this.length=t)}}else this.length=o(this.level+this.value);this.buy||(this.buy={sp:1}),this.rate||(this.rate=new n.Z(.5,this.id+".rate")),this.rate.base||(this.rate.base=.5),this.exp instanceof a.Z||(this.ex=0),this.max||(this.max=new n.Z(5,this.id+".max",!0))}canBuy(t){return!(this.disabled||this.locked||this.locks>0||this.buy&&!t.canPay(this.buy))}changed(t,e){super.changed(t,e),this.value>Math.floor(this._max.value)?this.value=Math.floor(this.max.value):this._length+=.35*this._length}}},2466:(t,e,s)=>{s.d(e,{Z:()=>d});var i=s(4028),n=s(7112),r=s(4478),a=s(3955),o=s(6371),l=s(9188),h=s(7908),u=s(9827),c=s(1555);class d extends i.Z{valueOf(){return this.locked?0:this.value.valueOf()}toJSON(){let t=super.toJSON();return this.timer>0&&(t.timer=this.timer),t}get level(){return this._level}set level(t){this._level=t}get typeName(){return this.type===l.Cs?"action":this.type}get runmod(){return this._runmod}set runmod(t){this._runmod=t}get ex(){return this._exp}set ex(t){this._exp=t instanceof o.Z?t:new o.Z(t,this.id+" .exp",this._rate)}get exp(){return this._exp}set exp(t){this.locked||this.disabled||this.maxed()||this.buy&&!this.owned||(null!==this._exp&&void 0!==this._exp||(this.ex=t),t<0?console.warn(this.id+" exp: "+t):(this._exp.set(t),this.tryComplete()))}get rate(){return this._rate}set rate(t){this._rate=t instanceof a.Z?t:new a.Z(t,this.id+".rate"),void 0!==this.ex&&(this.ex.scale=this._rate)}get length(){return this._length}set length(t){this._length=null==t?null:t instanceof a.Z?t:new a.Z(t)}get running(){return this._running}set running(t){this._running=t}percent(){return this._exp/this._length*100}constructor(t=null){super(t),this.repeat=!1!==this.repeat,this.type="task",this.at&&("magicmissile"===this.id&&console.log("MAGIC MISSILE AT MODS"),this.at=(0,h.uV)(this.at,this.id,1)),this.every&&(this.every=(0,h.uV)(this.every,this.id,this)),(this.length||this.perpetual)&&(this.ex=this.ex||0),this.running=this.running||!1,this.applyImproves(),(0,u.Aw)(this.runmod,1)}fillsRequire(){return!1===this.locked&&this.value>0}applyImproves(){let t=this.valueOf();if(this.at)for(let e in this.at)t>=Number(e)&&this.applyMods(this.at[e]);if(this.every)for(let e in this.every)Math.floor(t/e)>0&&this.applyMods(this.every[e])}canUse(t){return!this.timer&&super.canUse(t)}canRun(t){return!this.timer&&super.canRun(t)}tryComplete(){(this._length&&this._exp>=this._length||!this._length&&this.perpetual&&this._exp>=1)&&this.complete(n.ZP)}update(t){this.exp.set(this._exp+(this.rate||1)*t),this.tryComplete()}onStart(){this.runmod&&n.ZP.applyMods(this.runmod)}onStop(){this.runmod&&n.ZP.removeMods(this.runmod)}complete(t=n.ZP){this.changed(t,1),c.Bc.add(this),this._exp.set(0),r.ZP.emit(r.o3,this)}changed(t,e){super.changed(t,e);var s=!1;if(this.at){let t=this.at[this.valueOf()];t&&(s=!0,this.applyMods(t))}else if(this.every){let t=this.valueOf();for(let e in this.every)t%e==0&&(s=!0,this.applyMods(this.every[e]))}s&&r.ZP.emit(r.T0,this)}tick(t){return this.timer-=t,this.timer<0&&(this.timer=0,!0)}}},6584:(t,e,s)=>{s.d(e,{Z:()=>g,X:()=>v});var i=s(1893),n=s(430),r=s(2038),a=s(3447),o=s(8564),l=s(4152);const h="none";class u{constructor(t){this.items=t.filter((t=>!t.unique&&!t.noproc)),this.filterBy={}}subgroup(){}randBelow(t=1,e){let s=this.filterBy.level,i=1+Math.floor(Math.random()*t),n=i;do{let i,r=s[n];if(r&&(i=e?(0,l.yb)(r,e):(0,l.Gq)(r),i))return i;--n<0&&(n=t)}while(n!==i);return null}randAt(t,e=!0){let s=this.filterBy.level[t];return s&&0!==s.length?(0,l.Gq)(s):e?this.randBelow(t-1):null}rand(){return 0===this.items.length?null:this.items[Math.floor(Math.random()*this.items.length)]}filtered(t,e,s=!1){let i=this.filterBy[t],n=i[e]||[];return s&&i.hasOwnProperty(h)?n.concat(i.none):n}getCategories(t,e,s){const i=this.filterBy[t];let n=[];if(void 0===i)return n;if(s&&i.hasOwnProperty(h)&&n.push(i.none),"string"==typeof e)i.hasOwnProperty(e)&&n.push(i[e]);else if(Array.isArray(e))for(let t=e.length-1;t>=0;t--){var r=i[e[t]];r&&n.push(r)}return n}randBy(t,e,s=!1){return void 0===this.filterBy[t]?null:Array.isArray(e)?(0,l.J)(this.getCategories(t,e,s)):(0,l.Gq)(this.filtered(t,e,s))}makeFilter(t,e,s="level"){const i=this.filterBy[t]={};e=e||t;for(let t=this.items.length-1;t>=0;t--){var n=this.items[t],r=n[e]||h,a=i[r];void 0===a?i[r]=[n]:a.push(n)}if(s&&s!==e)for(let t in i)(0,l.u2)(i[t],s)}}var c=s(4028),d=s(9188),m=s(8206),p=s(3967);s(5608);const f=(t,e)=>{let s=[],i=(void 0).length;for(let n=0;n<i;n++){let i=(void 0)[n];if(Array.isArray(i)){i=i.flatMap(t,e);for(let t=0;t<i.length;t++)s.push(i[t])}else s.push(t.call(e,i))}return s};function v(t,e){if(!e)return console.warn("Missing gen item: "+e),null;var s=e.template||e.recipe;"string"==typeof s&&(s=t.getData(s));var r=void 0!==s&&s.type||e.type;if(!r){if(!e.id)return null;console.warn(e.id+" unknown type: "+r+" -> "+e.template+" -> "+e.recipe),r="item"}return(e=r===d.rU||r===d.if||r===d.W$?new n.Z(s,e):r===d.EN||r===d.yZ?new i.Z(s,e):new o.Z(s,e)).owned=!0,e.revive(t),e}class g{constructor(t){this.game=t,this.state=t.state,this.groups={},this.luck=this.state.getData("luck"),this.initGroup(d.W$,this.state.weapons.concat(this.state.armors)),this.initGroup("materials",this.state.materials),this.initGroup("properties",this.state.properties)}randEncounter(t,e,s=1){var i=t.level||1;return"object"==typeof i&&(i=i.type===d.TQ?i.percent(s):i.value*s),t.range&&(i+=t.range*(2*Math.random()-1)),i=Math.ceil(i),this.groups.hasOwnProperty(d.$6)||this.initGroup(d.$6,this.state.encounters),this.groups[d.$6].randAt(i)}randEnemy(t,e,s=1){if(this.groups.hasOwnProperty(d.EN)||this.initGroup(d.EN,this.state.monsters,["biome","kind"]),e)return randByBiome(t,e,s);var i=t.level||1;"object"==typeof i&&(i=i.type===d.TQ?i.percent(s):i.value*s),t.range&&(i+=t.range*(2*Math.random()-1)),i=Math.ceil(i);let n=this.groups[d.EN].randAt(i);return n?(0,m.b)(n,this.game):null}randByBiome(t,e,s){}instance(t){let e;if(t.disabled||t.locked||this.state.hasUnique(t))return null;if(t.type===d.rU||t.type===d.if||t.type===d.W$)console.log("itgen wearable: "+t.id),e=this.fromProto(t);else if(t.type===d.v4)e=new o.Z(t);else if(t.type===d.BW)e=new o.Z(t);else if(t.type===d.EN||t.type===d.yZ)return(0,m.b)(t,this.game);return void 0===e?null:(e.id=this.state.nextId(e.id),e.value=1,e.owned=!0,e)}getLoot(t,e=1){if(e instanceof a.Z){if(!e.roll(this.luck.value))return null;e=1}else e.value&&(e=e.value);return Array.isArray(t)?t.flatMap?t.flatMap(this.getLoot,this):f.call(t,this.getLoot,this):("string"==typeof t&&(t=this.state.getData(t)),t?t[d.db]&&100*Math.random()>t[d.db]?null:t instanceof c.Z||t instanceof p.Z?this.getGData(t,e):t.id?this.instance(t):t.level||t.maxlevel?this.randLoot(t,e):this.objLoot(t):null)}objLoot(t){let e=[];for(let i in t){var s=this.getLoot(i,t[i]);s&&(Array.isArray(s)?e=(0,l.mJ)(e,s):e.push(s))}return e}getGData(t,e=1){if(!t)return null;if(t instanceof p.Z&&(t=t.random()),this.state.hasUnique(t))return null;if(t.instanced||t.isRecipe)return this.instance(t);if("number"==typeof e||"boolean"==typeof e){if("upgrade"===t.type||t.type===d.Cs||"furniture"===t.type||t.type===d.Ks)t.doUnlock(this.game);else if(t.amount(e),e>0)return t.name}else console.warn("bad amount: "+t+" -> "+e);return null}randLoot(t){if((100+this.luck/2)*Math.random()<50)return null;let e=t.material,s=t.type;return e&&(e=this.state.getData(e)),s&&(s=this.state.getData(s)),s||e||(s=this.groups[d.W$].randBelow(t.maxlevel||t.level)),e&&!s?s=this.getCompatible(this.groups[d.W$],e,t.maxlevel||t.level):s&&!e&&(e=this.getCompatible(this.groups.materials,s,t.maxlevel||t.level)),this.fromProto(s,e)}randAt(t=0,e=null,s=null){e=e||d.W$;let i=this.groups[e];if(i){let e=i.randBy("level",t);if(e)return this.fromProto(e,s||t)}else console.warn("No group: "+e);return null}randBelow(t=1,e=null,s=null){e=e||d.W$;let i=this.groups[e];t=Math.floor(1+Math.random()*t);let n=i.randBelow(t);return n?this.fromProto(n,s||t):null}getCompatible(t,e,s=1){let i=e.only,n=e.exclude,a=e.material?e.material.id:null;return t.randBelow(Math.max(e.level+1,s),(t=>!(i&&!(0,r.VT)(i,t.type,t.kind,t.id)||n&&(0,r.VT)(n,t.type,t.kind,t.id)||t.only&&!(0,r.VT)(t.only,e.type,e.kind,e.id,a)||t.exclude&&(0,r.VT)(t.exclude,e.type,e.kind,e.id,a))))}fromProto(t,e=null){if(null==t)return null;let s=t.material||e;return"number"==typeof s?s=this.getCompatible(this.groups.materials,t,s):"string"==typeof s&&(s=this.state.getData(s)),this.makeWearable(t,s)}genProperties(t,e){if(this.groups.properties,"object"==typeof e&&(e=Math.round(e.value)),!(e<=0))for(console.log(t.name+" props lvl: "+t.level+"  kind: "+t.kind);e>0;e--);}makeWearable(t,e){let s=new n.Z(t);return e?s.applyMaterial(e):s.name=t.name||t.id,t.properties&&this.genProperties(s,t.properties),s.id=this.state.nextId(s.id),s}initGroup(t,e,s=null){if(!e)return void console.warn("group undefined: "+t);let i=this.groups[t]=new u(e);if(i.makeFilter("level"),s)for(let t=s.length-1;t>=0;t--)i.makeFilter(s[t]);return i}}},1917:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(4671);class n{get objects(){return this._objects}set objects(t){this._objects=t}get lists(){return this._lists}set lists(t){this._lists=t}get name(){return this._name}set name(t){this._name=t}get sym(){return this._sym}set sym(t){this._sym=t}get author(){return this._author}set author(t){this._author=t}get email(){return this._email}set email(t){this._email=t}get git(){return this._git}set git(t){this._git=t}constructor(){this.objects={},this.lists={}}setData(t){this.fileLoaded(t)}load(t,e){return Array.isArray(t)?(0,i.mb)(t,e).then((t=>this.typesLoaded(t))):(this.name=t,(0,i.mb)([t],e).then((e=>this.fileLoaded(e[t]))))}typesLoaded(t){let e=[];for(let i in t){var s=t[i];if(s)if(s.module){let t=new n;t.setData(s),e.push(t)}else this.lists[i]=this.parseList(t[i]);else console.warn("no file: "+i)}for(let t=e.length-1;t>=0;t--)this.merge(e[t]);return this}fileLoaded(t){return this.lists=t.data,this.name=t.module||this.name,this.sym=t.sym,t.data&&this.parseLists(t.data),this}parseLists(t){for(let e in t)this.parseList(t[e])}parseList(t){let e=this.sym,s=this.name;for(let r=t.length-1;r>=0;r--){var n=t[r];n.id?(s&&(n.module=s),e&&(n.sym=n.sym||e),this.objects[n.id]=(0,i.xt)(n)):console.warn("missing id: "+n.name)}return t}merge(t){let e=t.objects,s=this.objects;for(let t in e)s[t]=e[t];for(let e in t.lists){let i=t.lists[e];if(s=this.lists[e],Array.isArray(s))for(let t=i.length-1;t>=0;t--)s.push(i[t]);else this.lists[e]=i.slice(0)}}instance(t={}){return i.ZP.instance(this.objects,this.lists,t)}}},7908:(t,e,s)=>{s.d(e,{uV:()=>g,wF:()=>_,rl:()=>y});var i=s(81);const n=/^(\d+\.?\d*)?\:(\d+)$/,r=t=>n.test(t);class a extends i.ZP{toJSON(){return this.value+":"+this.per}get count(){return this.source?Math.floor(this.source.value/this.per):0}get per(){return this._per}set per(t){this._per=t}toString(){return this.value+":"+this.per}constructor(t,e,s){if(super(0,e,s),"number"==typeof t)this.value=1,this.per=t;else if("string"==typeof t){let e=t.split(":");2===e.length?(this.value=Number(e[0])||1,this.per=Number(e[1])||1):(console.warn("bad PerMod: "+t),this.value=0,this.per=1)}else console.log("bad PerMod: "+t),this.value=Number(t)}getApply(t,e){return this.source&&this.source.value%this.per==0?this.count*this.value:0}}var o=s(6802),l=s(4722),h=s(3955),u=s(157),c=s(7130),d=s(3447);const m=/^([<>]=?)?(-?[0-9.]+)?\?(-?[0-9.]+)$/,p=t=>m.test(t);class f extends i.ZP{toJSON(){return this.at+"?"+this.value}get at(){return this._at}set at(t){this._at=t}get op(){return this._op}set op(t){this._op=t}get count(){if(!this.source)return 0;switch(this.op){case 3:if(this.source.value>=this.at)return 1;break;case 2:if(this.source.value>this.at)return 1;break;case 5:if(this.source.value<=this.at)return 1;break;case 4:if(this.source.value<this.at)return 1;break;case 1:if(this.source.value==this.at)return 1}return 0}toString(){return this.value+" (once)"}constructor(t,e,s){if(super(0,e,s),"string"==typeof t){let e=m.exec(t);e&&(this.op="="===(i=e[1])?1:"<"===i?4:"<="===i?5:">"===i?2:3,this.at=Number(e[2])||1,this.value=Number(e[3])||0)}else this.op=3,this.value=Number(t)||0,console.log("bad AtMod: "+t);var i;null!==this.at&&void 0!==this.at||(this.at=1)}getApply(t,e){return this.count?this.value:0}}const v=/^[A-Za-z_]+\w*$/,g=(t,e,s)=>t?(!e&&s&&"object"==typeof s&&((e=s.id)||(e="",(0,o.PC)(t,"No Mod Id: "+s+": "+e))),(t=A(t,e,s))||console.warn("mods is null: "+e),(0,o.ee)(t),t):null,A=(t,e,s)=>{if(null==t)return null;if("string"==typeof t)return((t,e,s)=>i.bd.test(t)||!isNaN(t)?new i.ZP(t,e,s):r(t)?new a(t,e,s):p(t)?new f(t,e,s):t)(t,e,s);if("number"==typeof t)return new i.ZP(t,e,s);if("object"!=typeof t)return t;if(t.id||t.base||t.str)return new i.ZP(t,e,s);for(let n in t){let r=t[n];0!==r?r&&(r instanceof i.ZP?(e&&(r.id=(0,l.Gj)(e,n)),r.source=s):t[n]=A(r,(0,l.Gj)(e,n),s)):delete t[n]}return t},y=(t,e="")=>{if(Array.isArray(t))for(let s=t.length-1;s>=0;s--)t[s]=y(t[s],e);else if("object"==typeof t)for(let n in t)if("mod"!==n&&"runmod"!==n&&"alter"!==n){if("effect"===n||"result"===n)t[n]=b(t[n],x);else if("cost"===n||"buy"===n)t[n]=b(t[n],k);else if("require"===n||"need"===n){t[n]=w(t[n]);continue}n.includes(".")&&(0,o.xf)(t,n);var s=t[n],i=typeof s;"string"===i?d._.test(s)?t[n]=new d.Z(s):c.U.test(s)?t[n]=new c.Z(s):r(s)?t[n]=new a(s,(0,l.Gj)(e,n)):isNaN(s)?"damage"!==n&&"dmg"!==n||(t[n]=(0,u.E5)(s)):(""!==s&&console.warn("string used as Number: "+n+" -> "+s),t[n]=Number(s)):"object"===i&&y(s,e)}else t[n]=g(t[n],(0,l.Gj)(e,n));else if("string"==typeof t)return _(t);return t},_=t=>c.U.test(t)?new c.Z(t):d._.test(t)?new d.Z(t):r(t)?new a(t):p(t)?new f(t):t,b=(t,e)=>{if(Array.isArray(t))for(let s=t.length-1;s>=0;s--)t[s]=b(t[s],e);else{if("string"==typeof t)return c.U.test(t)?new c.Z(t):d._.test(t)?new d.Z(t):r(t)?new a(t):p(t)?new f(t):t.includes(".")?e(t):t;if("object"==typeof t)for(let s in t)t[s]=b(t[s],e);else if("number"==typeof t)return new h.Z(t)}return t},w=t=>{if(null!=t&&!1!==t&&""!==t){if(Array.isArray(t))for(let e=t.length-1;e>=0;e--)t[e]=w(t[e]);else if("string"==typeof t&&!v.test(t))return new Function("g","i","s","return "+t);return t}};function k(t){return new Function("g,a","return "+t)}function x(t){return new Function("g,t,a","return "+t)}},2025:(t,e,s)=>{s.d(e,{Z:()=>p});class i{toJSON(){if(!this.empty)return{name:this.name,pid:this.pid,level:this.level,gclass:this.gclass,title:this.title||void 0,titles:this.titles||void 0,gender:this.gender||void 0,school:this.school||void 0,fame:this.fame||void 0,points:this.points||void 0}}get name(){return this._name}set name(t){this._name=t}get hid(){return this._pid}set hid(t){this.pid=t}get pid(){return this._pid}set pid(t){this._pid=t}get level(){return this._level}set level(t){this._level=t}get title(){return this._title}set title(t){this._title=t}get fame(){return this._fame}set fame(t){this._fame=t}get titles(){return this._titles}set titles(t){this._titles=t}get gender(){return this._gender}set gender(t){this._gender=t}get school(){return this._school}set school(t){this._school=t}get points(){return this._points}set points(t){this._points=t}constructor(t=null){t?(Object.assign(this,t),t.empty||!t.name?this.empty=!0:this.empty=!1):this.empty=!0,this.points||(this.points=0),this.fame||(this.fame=0),this.titles||(this.titles=0),this.level||(this.level=0)}update(t){t||(this.empty=!0,retur),this.name=t.name,this.level=t.level?t.level.valueOf():0,this.title=t.title,this.titles=t.titles?t.titles.length:0,this.fame=t.fame?t.fame.valueOf():0,this.points=t.points?t.points.valueOf():0,this.gclass=t.gclass,this.empty=!1}getPoints(){return this.empty?0:(isNaN(this.points)&&console.warn(this.name+"points: NaN: "+this.points),isNaN(this.fame)&&console.warn(this.name+"fame: NaN: "+this.fame),isNaN(this.titles)&&console.warn(this.name+"titles: NaN: "+this.titles),isNaN(this.level)&&(console.warn(this.name+"level: NaN: "+this.level),this.level=0),this.points+this.fame+(this.titles+this.level)/10)}}var n=s(9188);class r{toJSON(){return{id:this.id,name:this.name,chars:this.chars,curId:this.curId,items:this.items}}get id(){return this._id}set id(t){this._id=t}get name(){return this._name}set name(t){this._name=t}get curSlot(){return this._curSlot}set curSlot(t){this._curSlot=t}get curId(){return this._curId}set curId(t){this._curId=t}get chars(){return this._chars}set chars(t){for(let e=t.length-1;e>=0;e--)t[e]=new i(t[e]);this._chars=t}get prestige(){return this._prestige}set prestige(t){this._prestige=t}get points(){return this._points}set points(t){this._points=t}get items(){return this._items}set items(t){this._items=t}get max(){return this._max}set max(t){this._max=t}constructor(t=null){t&&Object.assign(this,t),this.id?console.log("HALL ID: "+this.id):(this.id=(0,n.Qj)("h"),console.log("NEW HALL ID: "+this.id)),this.chars||(this.chars=[]),this.findCur(t),this.name||(this.name="Wizard's Hall"),this.max=this.items.hallSize,this.points=this.items.hallPoints;const e=this.items.prestige&&this.items.prestige.value.value||0,s=this.items.hallPoints&&this.items.hallPoints.value.value||0;this.prestige=this.items.prestige,this.items.prestige.value.set(s+e>0?s+e:0),this.items.hallPoints.value.set(0),this.initChars()}findCur(t){if(t.active)console.log("LEGACY HALL SLOT: "+t.active),this.legacy=!0,this.setActive(t.active);else{let e=this.curId=t.curId;this.curSlot=this.chars.findIndex((t=>t.pid===e)),console.log("CUR HALL CHAR: "+e+"  AT SLOT: "+this.curSlot)}(!this.curId||this.curSlot<0)&&(this.curId=null,this.curSlot=0)}owned(){return this.items.evt_hall>0}dismiss(t){return!(t<0||t>=this.chars.length||(this.chars[t].empty=!0,this.chars[t].name=null,this.chars[t].pid=null,0))}initChars(){let t=this.max.value;for(let e=0;e<t;e++)void 0===this.chars[e]&&this.chars.push(new i)}getChars(){let t=this.max.value;for(let e=0;e<t;e++)void 0===this.chars[e]&&this.chars.push(new i);return this.chars.length>t&&(this.chars=this.chars.slice(0,Math.floor(t))),this.chars}setActive(t){if(t<0||t>=this.chars.length)return console.warn("invalid char slot: "+t),!1;this.curSlot=t;let e=this.getSlot(t);return this.curId=e.pid,!0}updateChar(t,e=null){let s=this.getSlot(this.curSlot);s||(s=this.chars[this.curSlot]=new i),s.update(t),e&&(this.curId=s.pid=e)}setLevel(t,e){let s=this.getSlot(this.curSlot);s&&(s.level=e)}setName(t,e=-1){let s=this.getSlot(e);s&&(s.name=t)}pidSlot(t){return this.chars.findIndex((e=>e.pid==t))}setTitle(t,e=-1){let s=this.getSlot(e);s&&(s.title=t)}charId(t=-1){return t>this.chars.length?null:this.chars[t].pid}getSlot(t=-1){return this.chars[t<0?this.curSlot:t]}rmChar(t){this.chars[t]=void 0}}var a=s(9899),o=s(4478),l=s(1917);const h={clearAll(){window.localStorage.clear()},deleteChar(t){window.localStorage.setItem(this.charLoc(t),null)},saveChar(t,e){console.log("LOCAL SAVE AT: "+this.charLoc(e)),window.localStorage.setItem(this.charLoc(e),t)},loadChar(t){let e=window.localStorage.getItem(this.charLoc(t));return console.log("LOCAL LOAD CHAR: "+this.charLoc(t)),e?(console.log("loading LOCAL: "+t),JSON.parse(e)):(console.log("CHAR NOT FOUND"),null)},saveHall(t,e){window.localStorage.setItem(this.hallLoc(e),t)},loadHall(t){let e=window.localStorage.getItem(this.hallLoc(t));return console.log("LOCAL LOAD HALL: "+this.hallLoc(t)),e?JSON.parse(e):(console.log("LOCAL HALL NOT FOUND"),null)},charLoc:t=>"chars/"+t,hallLoc:t=>""+t},u="hall",c={remoteFirst:!1,loggedIn:()=>d&&d.loggedIn,logout(){d&&d.loggedIn&&d.logout()},async clearAll(){if(h.clearAll(),d)return d.clearAll()},async deleteChar(t){var e=this.charFile(t);if(h.deleteChar(e),d)return d.deleteChar(e);window.localStorage.setItem(this.settingsLoc(t),null)},async saveChar(t,e){var s=this.charFile(e);if(h.saveChar(t,s),console.log("SAVING CHAR"),d)return d.saveChar(t,s)},async saveHall(t,e="hall"){if(e=u,h.saveHall(t,e),d)return d.saveHall(t,e)},async loadChar(t){var e=this.charFile(t);if(this.remoteFirst&&d){return console.log("TRY REMOTE LOAD: "+e),await d.loadChar(e)||(console.log("REMOTE LOAD FAILED"),h.loadChar(e))}{console.log("TRY LOCAL LOAD: "+e);let t=h.loadChar(e);return!t&&d&&d.loggedIn?(console.log("Returning Remote"),d.loadChar(e)):t}},async loadHall(t="hall",e=null){if(t=u,d&&("remote"===e||this.remoteFirst)){return console.log("REMOTE FIRST"),await d.loadHall(t)||h.loadHall(t)}{let e=h.loadHall(t);return e||console.log("LOCAL HALL NOT FOUND"),e||!d?e:d.loadHall(t)}},charFile:t=>t,saveSettings(t,e){window.localStorage.setItem(this.settingsLoc(e),t)},loadSettings(t){return window.localStorage.getItem(this.settingsLoc(t))},settingsLoc:t=>"settings//"+t+"/"};var d=null;const m="hall",p={VERSION:"pseudo_stable 0.10.4",CLOUD:void 0,hall:null,active:{loggedIn:!1},get loggedIn(){return this.active.loggedIn},set loggedIn(t){this.active.loggedIn=t},logout(){c.logout()},set remoteFirst(t){c.remoteFirst=t},async loadHall(t=null){var e=await c.loadHall(m,t),s=await this.loadHallData(e);this.hall=new r(s),this.hall.legacy&&await this.resaveLegacy()},async resaveLegacy(){console.log("RESAVING LEGACY FILES");let t=this.hall.max.value;for(let s=0;s<t;s++){var e=this.hall.getSlot(s);if(e.empty)continue;console.log("load (to save) legacy: "+s);let t=await c.loadChar(s);t?(console.log("save: "+s+" to: "+e.pid),await c.saveChar(JSON.stringify(t),e.pid)):console.log("NO LEGACY FOUND: "+s)}this.hall.legacy=!1},loadHallData(t){let e=new l.Z;return e.load(m).then((()=>e.instance(t)))},onCharLevel(t,e){return this.hall.setLevel(t,e),this.saveHall()},updateChar(t){return this.hall.updateChar(t),this.saveHall()},setHallName(t){return this.hall.name=t,this.saveHall()},setActive(t,e){this.hall.updateChar(e.player),this.saveActive(e)?(this.hall.setActive(t),this.saveHall()):console.error("CUR CHAR NOT SAVED")},getHallItems(){return this.hall.items},gameLoaded(t){let e=t.state,s=e.player,i=e.pid||s.hid;console.log("player id: "+i);let n=this.hall.pidSlot(i);n>=0&&this.hall.setActive(n),this.hall.updateChar(s,i),this.saveHall(),o.ZP.add(o.FQ,this.onCharLevel,this),o.ZP.add(o.tK,this.updateChar,this),o.ZP.add(o.oc,this.updateChar,this),o.ZP.add(o.td,this.updateChar,this)},dismiss(t){this.hall.dismiss(t)&&(c.deleteChar(this.hall.charId(t)),this.saveHall())},async loadActive(){try{return this.hall.curId?console.log("loading hall char: "+this.hall.curId):this.hall.curSlot&&console.log("loading slot: "+this.hall.curSlot),c.loadChar(this.hall.curId||this.hall.curSlot)}catch(t){return console.error(t.message+"\n"+t.stack),null}},async getHallSave(){let t={type:m,hall:this.hall,chars:[]},e=Math.floor(this.hall.max),s=t.chars;for(let t=0;t<e;t++){let e=await c.loadChar(this.hall.charId(t));s.push(e||null)}return t},async setHallSave(t){if(await this.setCharDatas(t.chars),console.dir(t.hall,"Hall Save"),t.hall.active){let e=t.hall.active;console.log("active: "+e);let s=t.hall.chars[e];s?(t.hall.curId=s.pid||s.hid,console.log("switching to cur: "+t.hall.curId)):console.warn("cur not found: "+s),delete t.hall.active}return c.saveHall(JSON.stringify(t.hall),t.hall.id)},async setCharDatas(t){var e;if(t)for(let n=t.length-1;n>=0;n--){var s=t[n];if(s){if(console.log(`HALL SAVE ${n}: ${s.name}`),!(e=s.pid)){var i=s.items.player;i&&(e=i.pid||i.hid)}}else console.log("EMPTY HALL SLOT: "+n);await c.saveChar(JSON.stringify(t[n]),e),e=null}},async saveActive(t){try{console.log("cur char id: "+this.hall.curId);let e=JSON.stringify(t);return e&&await c.saveChar(e,this.hall.curId),this.saveSettings(),e}catch(t){return console.error(t.message+"\n"+t.stack),null}},async clearActive(){return c.deleteChar(this.curId)},loadSettings(){try{let t=c.loadSettings(),e=JSON.parse(t);return a.Z.setSettings(e),a.Z.getAll()}catch(t){console.error(t.message+"\n"+t.stack)}},saveSettings(){try{let t=JSON.stringify(a.Z);t&&c.saveSettings(t,this.curId)}catch(t){console.error(t.message+"\n"+t.stack)}},hasHall(){return this.hall&&this.hall.owned()},clearAll(){c.clearAll()},async saveHall(){try{let t=JSON.stringify(this.hall);t&&await c.saveHall(t,this.hall.id)}catch(t){console.error(t.message+"\n"+t.stack)}}}},9899:(t,e,s)=>{s.d(e,{Z:()=>n});const i={saves:{autosave:!0,remoteFirst:!1,saveTime:30},darkMode:!1,compactMode:!1,curview:null,spells:{},skills:{hideMaxed:!1}};Object.freeze(i);const n={toJSON(){return this.vars},vars:{darkMode:!1,compactMode:!1,spells:{}},getAll(){return this.vars},setSubVar(t,e,s){let i=this.vars[t];return i||(this.vars[t]=i={}),i[e]=s,s},getSubVar(t,e){let s=this.vars[t];return s?s[e]:null},set(t,e){this.vars[t]=e},get(t){return this.vars[t]},getSubVars(t){let e=this.vars[t];return void 0===e&&(e=this.vars[t]={}),e},setSettings(t){this.vars=Object.assign({},i);for(let e in t)this.vars[e]=t[e]}}},5608:(t,e,s)=>{s.d(e,{Z:()=>l});var i=s(4028),n=s(9188),r=s(430),a=s(8564),o=s(7908);class l extends i.Z{toJSON(){return this.value>0?this.value:void 0}get hide(){return!0}get isRecipe(){return!0}get material(){return this._material}set material(t){this._material=t}get properties(){return this._properties}set properties(t){this._properties=(0,o.wF)(t)}get armor(){return this._armor}set armor(t){this._armor=t}get attack(){return this._attack}set attack(t){this._attack=t}get kind(){return this._kind}set kind(t){this._kind=t}get slot(){return this._slot}set slot(t){this._slot=t}constructor(t=null){super(t),this.level=this.level||1,this.enchants||(this.enchants=1),this.require||this.need||(this.locked=!1),this.attack&&(this.attack.damage||(this.attack.damage=this.attack.dmg))}fillsRequire(t){return null!=t.state.findInstance(this.id)}instantiate(){return this.type===n.rU||this.type===n.if||this.type===n.W$?new r.Z(this.template):new a.Z(this.template)}}},1555:(t,e,s)=>{s.d(e,{Bc:()=>l,jn:()=>h,ZP:()=>u});var i=s(7112),n=s(4152),r=s(3967);const a=/[^\.]\b\w+\.((?:\w|\.)+\b)/gi;var o=new Set,l=new Set;const h=()=>{var t=l;return o.clear(),l=o,o=t,t};class u{constructor(t){l.clear(),this.datas=t,this.unlocks={},this.needs={};for(let t in this.datas)this.mapUnlocks(this.datas[t])}forceCheck(){let t;for(let e in this.datas){let s=this.datas[e];s instanceof r.Z||s.disabled||s.locked||(t=this.unlocks[e],t&&this.changed(t))}}updateTech(t){for(let e of t){let t=this.unlocks[e.id];void 0!==t&&!1===this.changed(t)&&(this.unlocks[e.id]=void 0)}}changed(t){let e;for(let s=t.length-1;s>=0;s--)e=this.datas[t[s]],(!e||!1===e.locked||!0===e.disabled||e.locks>0||i.ZP.tryUnlock(e))&&(0,n.xF)(t,s);return t.length>0}mapUnlocks(t){!t.locked||t.disabled||t instanceof r.Z||(t.require&&this.mapRequirement(t,t.require,this.unlocks),t.need&&this.mapRequirement(t,t.need,this.unlocks))}mapRequirement(t,e,s){let i=typeof e;if("string"===i)this.mapIdRequire(t,e,s);else if("function"===i)this.mapFuncRequire(t,e,s);else{if(Array.isArray(e))return e.forEach((e=>this.mapRequirement(t,e,s)),this);"object"===i&&this.mapObjRequire(t,e,s)}}mapFuncRequire(t,e,s){let i,n=e.toString();for(;i=a.exec(n);){let e=i[1].split(".")[0];"mod"!==e&&"slot"!==e&&this.mapIdRequire(t,e,s)}(n.includes("this")||n.includes("s."))&&this.mapIdRequire(t,t.id,s)}mapObjRequire(t,e,s){for(let i in e)this.mapIdRequire(t,i,s)}mapIdRequire(t,e,s){if(!e)return;let i=this.datas[e];if(void 0===i)return;if(i instanceof r.Z)return i.forEach((e=>{this.mapIdRequire(t,e.id,s)}));let n=s[e];void 0===n&&(s[e]=n=[]),n.includes(t.id)||n.push(t.id)}}},9736:(t,e,s)=>{s.d(e,{Z:()=>r});var i=s(5720),n=s(7112);const r={methods:{floor:i.GW,slottable:t=>!(t.disabled||t.need&&!n.ZP.unlockTest(t.need,t)||t.buy&&!t.owned&&!n.ZP.canPay(t.buy)||t.slot&&n.ZP.state.getSlot(t.slot,t.type)===t),reslocked:t=>!0===t.disabled||t.locks>0||!1!==t.locked,locked:t=>!0===t.disabled||t.maxed()||t.locks>0||!1!==t.locked}}},1825:(t,e,s)=>{s.d(e,{iL:()=>i,HF:()=>n,M:()=>r});const i=t=>{t.style.left=(window.innerWidth-t.offsetWidth)/2+"px"},n=(t,e)=>{let s=t.style;s.left=(window.innerWidth-t.offsetWidth)/2+"px",s.top=(e||.5)*(window.innerHeight-t.offsetHeight)+"px"},r=(t,e,s=32)=>{let i=t.style,n=e.getBoundingClientRect(),r=n.left;r<window.innerWidth/2?i.left=r+e.offsetWidth+s+"px":i.left=r-t.offsetWidth-s+"px",i.top=((t,e)=>{let s=e.top-40;return s<20?20:s+t.offsetHeight>window.innerHeight-20?window.innerHeight-20-t.offsetHeight:s})(t,n)+"px"}},5046:(t,e,s)=>{s.d(e,{Z:()=>i});const i={data:()=>({inConfig:!1,hide:{}}),mounted(){let t=this.$refs.btnHides;t&&t.addEventListener("click",(t=>{t.preventDefault(),this.inConfig?(this.stopHides(),this.hide=this.newHides,this.newHides=null,t.target.classList.remove("inConfig")):(this.inConfig=!0,t.target.classList.add("inConfig"),this.newHides=this.hide,this.hide={},this.$nextTick((()=>this.configHides())))}))},methods:{show(t){return this.inConfig||!this.hide[t.id]},configHides(){var t=(this.$refs.hidables||this.$el).querySelectorAll(".hidable");if(t){this.onTogHide=t=>this.hideToggle(t);for(let s=t.length-1;s>=0;s--){var e=t[s];this.newHides[e.dataset.key]?e.classList.add("inConfig","configHiding"):e.classList.add("inConfig"),e.addEventListener("pointerdown",this.onTogHide,!0)}}},stopHides(){var t=(this.$refs.hidables||this.$el).querySelectorAll(".hidable");if(t){for(let s=t.length-1;s>=0;s--){var e=t[s];e.removeEventListener("pointerdown",this.onTogHide,!0),e.classList.remove("configHiding","inConfig")}this.onTogHide=null,this.inConfig=!1}},hideToggle(t){t.preventDefault(),t.stopPropagation();let e=t.currentTarget,s=e.dataset.key;if(!s)return;let i=this.newHides[s];this.newHides[s]=null==i||!i,i?e.classList.remove("configHiding"):e.classList.add("configHiding")},beforeDestroy(){this.onTogHide=null}}}},4152:(t,e,s)=>{s.d(e,{LF:()=>i,ez:()=>n,J:()=>r,mJ:()=>a,yb:()=>o,Gq:()=>l,xF:()=>h,QQ:()=>u,u2:()=>c});const i=(t,e,s)=>{if(e<0||s<0||e>=t.length||s>=t.length)return;let i=t[s];t[s]=t[e],t[e]=i},n=(t,e,s)=>{if(!e||!t)return t;for(let i=e.length-1;i>=0;i--)s(e[i])&&t.push(e[i]);return t},r=t=>{let e=0;for(let s=t.length-1;s>=0;s--)e+=t[s].length;if(0===e)return null;let s=Math.floor(Math.random()*e);for(let e=t.length-1;e>=0;e--){if(t[e].length>=s)return t[e][s];s-=t[e].length}return null},a=(t,e)=>{let s=e.length;for(let n=0;n<s;n++){var i=e[n];null!=i&&t.push(i)}return t},o=(t,e)=>{if(null==t)return null;let s=Math.floor(Math.random()*t.length),i=s;for(;!e(t[i]);)if(--i<0&&(i=t.length-1),i===s)return null;return t[i]},l=t=>null==t?null:t[Math.floor(Math.random()*t.length)],h=(t,e)=>{t[e]=t[t.length-1],t.pop()},u=(t,e)=>Array.isArray(t)?Array.isArray(e)?t.concat(e):(t.push(e),t):Array.isArray(e)?(e.push(t),e):[t,e],c=(t,e)=>{t.sort(((t,s)=>(t[e]||0)-(s[e]||0)))}},4309:(t,e,s)=>{s.d(e,{J7:()=>r,Hx:()=>a,Au:()=>o,J3:()=>l,fE:()=>h,EX:()=>c});var i=s(3955),n=s(4722);const r=(t,e)=>{for(let s of t)if(e(s))return s;return null},a=(t,e)=>{let s=[];for(let i of t)s.push(e(i));return s},o=(t,e)=>{t.clear();for(let s of e)t.add(s)},l=(t,e)=>{let s=[];for(let i of t)s.push(e(i));return new Set(s)},h=t=>{for(let s in t){var e=t[s];t[s]=e instanceof i.Z?e:new i.Z(e,s)}return t},u=(t,e,s)=>{var i=t[e];void 0===i?t[e]=new n.ZP(s.valueOf()):"object"==typeof i?i.value=(i.value||0)+s:t[e]=new n.ZP(i+s)},c=(t,e)=>{if("object"==typeof t&&t.constructor===Object||(t={value:t}),"string"==typeof e)u(t,e,1);else if("object"==typeof e)for(let s in e){let i=t[s],n=e[s];"object"==typeof n?n.constructor!==Object?u(t,s,n):t[s]=c(i||{},n):"object"==typeof i?(console.log("cur: object; src: "+typeof n),u(i,"value",n)):u(t,s,n)}return t}},5720:(t,e,s)=>{s.d(e,{S2:()=>n,Yk:()=>r,GU:()=>a,qC:()=>o,GW:()=>l});const i=["","K","M","B","T"],n=(Math.floor,t=>{let e=1;if(t<0&&(e=-1,t=-t),t<=1)return e;let s=Math.floor((Math.log10(t)-1)/3);return s<1?e*t:e*Math.round(t/Math.pow(10,3*s))+i[s]}),r=(t,e=2)=>{let s=Number(t);if(Number.isNaN(s))return t;if(s===Math.floor(s))return s;let i=Math.pow(10,e),n=Math.abs(s),r=1;for(;n<i&&n!==Math.floor(n);)n*=10,r*=10;return n=Math.round(n)/r,s>=0?n:-n},a=t=>{if(!t)return"";let e=t.name;if(!e)return t;let s=e.indexOf(" ");return s>=0&&s+1<e.length?e[0]+e[s+1]:e.slice(0,2)},o=(t,e=2)=>{let s=Math.pow(10,e);return Math.floor(t*s)/s},l=t=>null===t||isNaN(t)?0:Math.floor(t)},2961:(t,e,s)=>{s.d(e,{hq:()=>n,ZP:()=>r});const i=t=>({method:"GET",headers:new Headers,mode:"cors",credentials:t?"include":"same-origin"}),n=(t,e)=>window.fetch(t,i(e)).then((t=>200!==t.status?(console.warn("Status: "+t.status),null):t.json()),(t=>null));class r{get results(){return this._results}get promise(){return this._promise}constructor(t,e){t&&t.length>0&&"/"!==t[t.length-1]&&(t+="/"),this._dir=t||"/",e&&this.setFiles(e)}setFiles(t){this._files=t;let e={};for(let s=t.length-1;s>=0;s--)e[t[s]]=null;this._loads=e}load(t=null){t&&this.setFiles(t);let e=this._loads,s=i(),n=[];for(let t in e)n.push(window.fetch(this._dir+t+".json",s).then((s=>200!==s.status?(console.warn("Bad Status: "+s.status),e[t]=null,e[t]):s.json().then((s=>e[t]=s))),(s=>e[t]=null)));return this._promise=Promise.all(n).then((()=>e),(t=>{console.error(t.message+"\n"+t.stack)}))}}},6802:(t,e,s)=>{s.d(e,{dy:()=>n,Gn:()=>r,zx:()=>a,fg:()=>o,BF:()=>l,Y6:()=>h,ee:()=>u,xf:()=>c,PC:()=>m,Pq:()=>p});var i=s(2038);const n=(t,e)=>t.name<e.name?-1:1,r=(t,e)=>{let s=t.level-e.level;return 0===s?t.name<e.name?-1:1:s},a=(t,e)=>{for(let i=e.length-1;i>=0;i--){var s=e[i];t.hasOwnProperty(s)||(t[s]=null)}},o=(t,e)=>{let s=(0,i.$x)(t,e);return!s||s.set||s.writable},l=(t,e)=>{for(let n of Object.getOwnPropertyNames(e))if("_"!==n[0]){var s=(0,i.$x)(t,n);if(s)if(s.set)"function"==typeof t[n]&&console.log("OVERWRITE: "+n);else{if(!s.writable)continue;if("function"==typeof t[n])continue}t[n]=e[n]}return t},h=(t,e)=>{for(var s=e;s!==Object.prototype;){for(let r of Object.getOwnPropertyNames(s))if("_"!==r[0]){var n=(0,i.$x)(t,r);if(n)if(n.set)"function"==typeof t[r]&&console.log("OVERWRITE: "+r);else{if(!n.writable)continue;if("function"==typeof t[r])continue}t[r]=e[r]}s=Object.getPrototypeOf(s)}return t},u=t=>{if(t&&"object"==typeof t)for(let s in t){var e=t[s];s.includes(".")&&c(t,s),e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype&&u(e)}},c=(t,e)=>{let s=t[e];delete t[e];let i=e.split("."),n=i.length-1;for(let e=0;e<n;e++){var r=t[i[e]];null==r?r={}:"object"==typeof r&&Object.getPrototypeOf(r)===Object.prototype||(r={value:r}),t=t[i[e]]=r}t[i[n]]=s},d=t=>{if(Array.isArray(t))return"[ \n"+t.map((t=>d(t))).join(", ")+"\n ]";if("object"==typeof t){let e="{ ";for(let s in t)e+=`\n${s}: `+d(t[s]);return e+="\n}",e}return""+t},m=(t,e="")=>{console.log((e?e+": ":"")+d(t))},p=t=>t?t.length>1?t[0].toUpperCase()+t.slice(1):t[0].toUpperCase():"";String.prototype.toTitleCase=function(){let t=this.trim().toLowerCase().replace(/\w\S*/g,(t=>t.replace(/^\w/,(t=>t.toUpperCase())))),e=t.substr(0,t.lastIndexOf(" ")),s=t.substr(t.lastIndexOf(" ")+1);return"ii"==s.toLowerCase()?s="II":"iii"==s.toLowerCase()?s="III":"iv"==s.toLowerCase()?s="IV":"v"==s.toLowerCase()&&(s="V"),t=e+" "+s,t=t.replace(" Of "," of "),t=t.replace(" The "," the "),e+" "+s}},157:(t,e,s)=>{s.d(e,{Ns:()=>C,E5:()=>k,Sc:()=>x,Fk:()=>w,jK:()=>b,YC:()=>_,Nb:()=>g,Mf:()=>c,Nd:()=>p,tf:()=>v,wq:()=>u,cZ:()=>m,Tp:()=>f,h:()=>d,fc:()=>A,Ny:()=>h});var i=s(4722),n=s(9188),r=s(7112);class a extends i.ZP{toJSON(){}get fn(){return this._fn}set fn(t){this._fn=t}get type(){return n.tT}toString(){return r.ZP.state.player.hp.value}constructor(t,e,s){super(0,s),this._src=e,this._fn=new Function(t,"return "+e)}apply(t){return this._fn.apply(null,t)}getApply(t,e){return this._fn(t,e)}}var o=s(7130),l=s(4478);const h=1,u=2,c=4,d=8,m=16,p=32,f=64,v=m+u,g=m+c,A=d+m,y={all:p+m,self:h,enemy:u,enemies:v,allies:g,randomgroup:A,random:d,randomenemy:d+u,enemyleader:f,leader:c+f,ally:c},_=t=>t[Math.floor(Math.random()*t.length)],b=t=>{for(let e=0;e<t.length;e++)if(t[e].alive)return t[e]},w=t=>{let e=t.split(","),s=0;for(let t=e.length-1;t>=0;t--)s|=y[e[t]]||0;return s||y.enemy},k=t=>new a("a,t,g",t),x=t=>null==t||""===t?null:"string"==typeof t&&!o.U.test(t)&&isNaN(t)?k(t):t instanceof i.ZP?t:new o.Z(t),C=(t,e,s=null)=>{if(t&&t.alive)return t.isImmune(e.kind)?(l.ZP.emit(l.WK,t,e.kind),!1):(e.damage&&S(t,e,s),e.cure&&t.cure(e.cure),e.state&&t.addDot(e.state,e),e.result&&t.applyVars(e.result),e.dot&&t.addDot(e.dot,e),!0)},S=(t,e,s)=>{let i=e.damage;if(!i)return;i=i.type===n.tT?i.fn(s,t,t.context):i.value,s&&s.getBonus&&(i+=s.getBonus(e.kind)),e.bonus&&(i+=e.bonus);let r=t.getResist(e.kind);0!==r&&(i*=1-r);let a=0;if((0===r||r<1)&&!e.nodefense&&(a=t.defense/(t.defense+10/3*i*(e.duration||1)),i*=1-a),t.hp-=i,l.ZP.emit(l.sA,t,i,r,a,e.name||(s?s.name:"")),t.hp<=0&&l.ZP.emit(l.WM,t,e),e.leech&&s&&i>0){let t=Math.floor(100*e.leech*i)/100;s.hp+=t,l.ZP.emit(l.tp,null,s.name.toTitleCase()+" Steals "+t+" Life")}}},9188:(t,e,s)=>{s.d(e,{Qj:()=>n,db:()=>r,TQ:()=>a,jV:()=>o,st:()=>l,sF:()=>h,tT:()=>u,$o:()=>c,L0:()=>d,_q:()=>m,ZG:()=>p,yn:()=>f,WX:()=>v,v4:()=>g,BW:()=>A,ky:()=>C,$L:()=>T,Cs:()=>E,Zj:()=>j,IA:()=>D,T2:()=>R,lN:()=>M,Lo:()=>N,MV:()=>L,Sd:()=>S,YI:()=>_,yZ:()=>y,HZ:()=>b,$6:()=>w,W$:()=>x,EN:()=>k,rU:()=>I,if:()=>P,QU:()=>Z,Ks:()=>O,sj:()=>$,QS:()=>B});const i={mana:{id:"lore",reqs:2}};i.arcane=i.lore=i.mana;const n=t=>t+Date.now().toString(36).slice(3)+(4096*Math.random()).toString(36),r="%",a="range",o="stat",l="mod",h="rval",u="func",c="dot",d="runnable",m="state",p="enchantslots",f="title",v="log",g="potion",A="item",y="npc",_="resource",b="skill",w="enc",k="monster",x="wearable",C="enchant",S="home",O="event",Z="pursuits",I="armor",P="weapon",T="t_rest",E="task",M="dungeon",L="locale",N="explore",j=1,D=0,R=2;function $(t){return.5+3.5*Math.exp(-t/8)}const B=(t,e)=>{if(Array.isArray(t)){for(let i=t.length-1;i>=0;i--){var s=t[i];if(s&&s==e.type||s===e.kind||s===e.slot||e.hasTag(s))return!0}return!1}return t===e.type||t===e.kind||t===e.slot||e.hasTag(targ)}},2572:(t,e,s)=>{s.d(e,{Lm:()=>o,kR:()=>l,B2:()=>h,Ku:()=>u,AQ:()=>c});const i={beast:["animals","naturelore","summoning"],magicbeast:["magicbeasts","naturelore","summoning"],demon:["demonology","bloodlore","summoning","languages"],humanoid:["charms","languages","history"],undead:["necromancy","reanimation"],kell:["naturelore","runelore"],celestial:["lightlore","astrallore","divination"],construct:"crafting",elemental:["waterlore","firelore","earthlore","airlore","summoning"],giant:["charms","summoning","trickery"],ghost:["spiritlore","conjuration"],spirit:["spiritlore","divination","summoning"],deity:["spiritlore","divination"]},n={mana:{id:"lore",reqs:2}};n.arcane=n.lore=n.mana;const r=[0,3,6,11,20],a={arcane:"mana",swamp:["shadow","water"],plains:"light",woods:"nature",holy:"light",mountains:["fire","earth","air"],hills:["earth","air"],cave:["shadow","earth"],sea:"water",town:["blood","mana"],humanoid:"blood",undead:"shadow",ghost:"spirit",construct:"craft",dragon:"fire",beast:"nature",magicbeast:["mana","nature"]},o=t=>{for(let e=r.length-1;e>=0;e--)if(t>=r[e])return t-r[e]},l=(t=1)=>{for(let e=r.length-1;e>=0;e--)if(t>=r[e])return e},h=(t,e)=>((t,e,s)=>{let i=t[e];if(void 0===i)return 0;if("string"==typeof i){let t=s.getData(i);return t?t.value:0}{let t=0;for(let e=i.length-1;e>=0;e--){let n=s.getData(i[e]);n&&(t+=n.value)}return t}})(i,t,e),u=t=>a[t]||t,c=(t,e)=>{e=l(e);let s=d[t];return s&&(s=s[e],s)?s:(s=d.other,s[e]||"gems")},d={shadow:{0:"bonedust",1:"bones",2:"shadowgem",3:"bodies"},nature:{0:"herbs",1:"naturegem"},fire:{1:"firegem",5:"firerune"},earth:{1:"earthgem",5:"earthrune"},water:{1:"watergem",5:"waterrune"},air:{1:"airgem",5:"airrune"},spirit:{1:"bonedust",2:"spiritgem",3:"souls"},light:{1:"lightgem",4:"sindel"},blood:{2:"bloodgem",3:"souls",5:"ichor"},other:{0:"gold",1:"gems",2:"managem",3:"runestones"}}},2821:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(3955);class n{toJSON(){let t=this._value.toJSON();return t===this.max.toJSON()?t:{v:this._value,max:this.max}}get base(){return this._value.base}set base(t){this._value.base=t&&"object"==typeof t?t.base||t.value:t}get value(){return this._value.value}set value(t){t>this._max.value&&(t=this._max.value),this._value?this._value.set(t):this.v=t}set v(t){this._value=new i.Z(t,this.path+".value")}get max(){return this._max}set max(t){this._max=t instanceof i.Z?t:new i.Z(t,this.path+".max",!0)}valueOf(){return this._value.value}set(t){t>this.max.value&&(t=this.max.value),this._value.set(t)}amount(t){this._value.base+=t,this._value.value>this.max.value&&(this._value.base=this.max.value)}maxed(){return this._value>=this.max}constructor(t=null,e=!1){t&&"object"==typeof t?t.isRVal?(this.max=t.value,this.v=e?0:this.max.value):(t.max?this.max=t.max:t.v?this.max=t.v:this.max=0,t.v?this.v=t.v:this.v=e||!t.max?0:t.max):"number"==typeof t?(this.max=t,this.v=e?0:t):(this.max=0,this.v=0)}}},81:(t,e,s)=>{s.d(e,{bd:()=>u,ZP:()=>c});var i=s(3447),n=s(3955),r=s(5720),a=s(9188),o=s(2038),l=s(4722),h=s(6802);const u=/^([\+\-]?\d+\.?\d*\b)?(?:([\+\-]?\d+\.?\d*)\%)?$/;class c extends n.Z{toJSON(){return 0===this._basePct?this.base:(this.base||"")+(this._basePct>0?"+":"")+100*this.basePct+"%"}toString(){let t=0!==this.bonus?(0,r.Yk)(this.bonus.toString()):"";return 0!==this.pctTot&&(0!==this.bonus&&(t+=", "),t+=(this.pctTot>0?"+":"")+(0,r.Yk)(100*this.pctTot)+"%"),t}get count(){return null!==this._count&&void 0!==this._count?this._count:(null!==this.source&&void 0!==this.source||console.warn(this.id+" No Source"),this.source)}set count(t){t&&"object"==typeof t&&t.str?this.count=t.str:this._count=t}get basePct(){return this._basePct}set basePct(t){this._basePct=t}get bonus(){return(this.base+this.mBase)*(1+this.mPct)}get pctTot(){return this.basePct*(1+this.mPct)}get countPct(){return this.pctTot*this.count}get countBonus(){return this.bonus*this.count}get str(){return this.value}set str(t){if("string"==typeof t){let e=u.exec(t);e?3===e.length?(this.base=Number(e[1])||0,this.basePct=Number(e[2])/100||0):2===e.length&&(console.log("RES LEN IS 2: "+t),this.base=e[1]||0,this.basePct=0):console.error(this.id+" no mod regex: "+t)}else t instanceof i.Z?this.basePct=t.pct:isNaN(t)?"object"==typeof t&&t&&"object"==typeof t&&t.str&&(this.str=t.str):this.base=t}get type(){return a.st}constructor(t=null,e=null,s=null){super(null,e),"number"==typeof s?this.count=s:this.source=s,"number"==typeof t?this.base=t:"string"==typeof t?this.str=t:t&&(t.value?this.str=t.value:(0,o.f0)(this,t)),this.base=this.base||0,this.basePct=this.basePct||0,this.id||(this.id="all")}clone(){return new c({base:this.base,basePct:this.basePct},this.id,this.source)}applyTo(t,e,s,i=!1){let r=t[e];if(r instanceof l.ZP)r.addMod(this,s);else if("number"==typeof r){if(!(0,h.fg)(t,e))return void console.log("NOT WRITABLE: "+e);console.log(e+": STAT FROM NUMBER: "+t[e]),(t[e]=new n.Z(r||0,(t.id?t.id+".":"")+e)).addMod(this,s)}else if(null==r)console.error("DEPRECATED: MOD.applyTo() NEW MOD AT TARGET: "+e);else if("object"==typeof r)if(Array.isArray(r))for(let t=r.length-1;t>=0;t--)this.applyTo(r[t],e,s);else r.value?this.applyTo(r,"value",s):(console.warn(this.id+": "+r.id+" !!Mod Targ: "+r.constructor.name),r.value=s*this.bonus*(1+s*this.pctTot))}}},3447:(t,e,s)=>{s.d(e,{_:()=>r,Z:()=>a});var i=s(5720),n=s(9188);const r=/^(\d+(?:\.\d+)?)\%$/i;class a{toJSON(){return 100*this.pct+"%"}get value(){return Math.random()<this.pct?1:0}roll(t=0){return 100*Math.random()<this.pct*(100+t)}get type(){return n.db}toString(){return(0,i.Yk)(100*this.pct)+"%"}constructor(t){if("string"==typeof t){let e=r.exec(t);this.pct=e?e[1]:Number(t)}else isNaN(t)||(this.pct=t);this.pct=(this.pct||0)/100}clone(){return new a(100*this.pct)}}},7130:(t,e,s)=>{s.d(e,{U:()=>o,Z:()=>l});var i=s(9188),n=s(5720),r=s(3955),a=s(4722);const o=/^\-?\d+\.?\d*\~\-?\d+\.?\d*$/i;class l{toJSON(){return("number"==typeof this.min?this.min:this.min.base)+"~"+("number"==typeof this.max?this.max:this.max.base)}toString(){return this.min==this.max?(0,n.Yk)(this.min):(0,n.Yk)(this.min)+" ~ "+(0,n.Yk)(this.max)}get id(){return this._id}set id(t){this._id=t}get type(){return i.TQ}get min(){return this._min}set min(t){this._min=t}get max(){return this._max}set max(t){this._max=t}get value(){return this.min+Math.random()*(this.max-this.min)}set value(t){this.min=this.max=t}get isRVal(){return!0}valueOf(){return this.value}constructor(t,e){if("string"==typeof t){let e=t.split("~");this.min=Number(e[0]),this.max=Number(e[1])}else"object"==typeof t?Object.assign(this,t):(this.min=Number(t),this.max=Number(void 0===e?t:e));"number"!=typeof this.min&&console.log("min: "+this.min+" -> "+this.max)}contains(t){return t>=this.min&&t<=this.max}percent(t){return this.min+t*(this.max-this.min)}addMod(t,e){this.min instanceof r.Z||(this.min=new r.Z(this.min,(0,a.Gj)(this.id,"min"))),this.max instanceof r.Z||(this.max=new r.Z(this.max,(0,a.Gj)(this.id,"max"))),this.min.addMod(t,e),this.max.addMod(t,e)}removeMods(t){this.min instanceof r.Z&&this.min.removeMods(t),this.max instanceof r.Z&&this.max.removeMods(t)}add(t){"number"==typeof t?(this.min+=t,this.max+=t):t&&"object"==typeof t&&(t.type===i.TQ?(this.min+=t.min,this.max+=t.max):t.value&&(this.min+=t.value,this.max+=t.value))}getApply(){return this.valueOf()}}},4722:(t,e,s)=>{s.d(e,{Px:()=>r,Gj:()=>a,ZP:()=>o});var i=s(9188),n=s(5720);const r=(t,e,s=new Set)=>{s.add(t);for(let a in t){var i=t[a];if(null!=i)if(Array.isArray(i))for(let t=i.length-1;t>=0;t--){var n=i[t];"object"!=typeof n||s.has(n)||r(n,e,s)}else"object"!=typeof i||s.has(i)||(i instanceof o&&!i.source?i.source=e:r(i,e,s))}},a=(t,e)=>t+"."+e;class o{toJSON(){return this._value}clone(){let t=new o(this._value,this._id);return t.source=this.source,t}get source(){return this._source}set source(t){this._source=t}get isRVal(){return!0}get id(){return this._id}set id(t){this._id=t}get value(){return this._value}set value(t){this._value=t}get type(){return i.sF}toString(){return(0,n.Yk)(this.value)}valueOf(){return this._value}constructor(t=0,e=null){this.id=e,this._value=t||0}add(t){this.value+=t}set(t){this.value=Number(t)}apply(t,e=1){this.add(t.value*e)}addMod(t,e){console.warn("ATTEMPT TO MOD RVAL: "+this.id+" mod: "+t.id)}getApply(){return this.valueOf()}apply(t,e){}delValue(t=0){return this._value+t}removeMods(t){}}},6371:(t,e,s)=>{s.d(e,{Z:()=>n});var i=s(4722);class n extends i.ZP{get value(){return super.value}set value(t){super.value=super.value+(t-super.value)*(1+this.scale.pctTot)}get scale(){return this._scale}set scale(t){this._scale=t}constructor(t=0,e,s=null){super(Number(t),e),this.scale=s||new i.ZP(0,this.id+".scale")}set(t){super.value="number"==typeof t?t:t.valueOf()}addUnscaled(t){super.value+=t}apply(t){this.value=this.value+t}}},3955:(t,e,s)=>{s.d(e,{Z:()=>a});var i=s(9188),n=s(4722),r=s(5720);class a extends n.ZP{toJSON(){return this._value}toString(){return(0,r.Yk)(this.value)}set value(t){this._value=t}get value(){let t=this._value+this._mBase;return!0===this._pos?Math.max(t+Math.abs(t)*this._mPct,0):t+Math.abs(t)*this._mPct}valueOf(){let t=this._value+this._mBase;return!0===this._pos?Math.max(t+Math.abs(t)*this._mPct,0):t+Math.abs(t)*this._mPct}get base(){return this._value}set base(t){this._value=t}get mBase(){return this._mBase}set mBase(t){this._mBase=t}get mPct(){return this._mPct}get pctTot(){return this._mPct}get mods(){return this._mods}set mods(t){let e={};for(let i in t){var s=t[i];e[i]=s instanceof Mod?s:new Mod(t[i])}this._mods=e}get pos(){return this._pos}set pos(t){this._pos=t}get type(){return i.jV}constructor(t=null,e,s){super(0,e),t&&("object"==typeof t?t.type===i.sF?this.base=t.value:this.base=t.base:isNaN(t)||(this.base=Number(t))),s&&(this.pos=s),this.base||(this.base=0),this._mBase=this._mPct=0,this.mods||(this.mods={}),this.recalc()}set(t){this.base="number"==typeof t?t:t.base}add(t){super.value+=t}apply(t,e=1){return t instanceof a&&t.id?this.addMod(t,e):(t instanceof a&&(console.log("STAT WITHOUT ID: "+t),t=t._value+t._mBase),"number"==typeof t?(this.base+=e*t,void console.warn(this.id+" adding: "+t+"  DEPRECATED NEW base: "+this.value)):void("object"==typeof t?(this.base+=e*(t.bonus||t.value||0),console.warn(this.id+" DEPRECATED APPLY: "+t+"  type: "+t.constructor.name)):console.dir(t,"unknown mod: "+typeof t)))}perm(t){console.warn(this.id+" PERM MOD: "+t),t.countBonus?this.base+=t.countBonus:"number"==typeof t&&(this.base+=t)}addMod(t,e=1){if(!t.id)return console.dir(t,"NO MOD ID"),void this.apply(t,e);0!=e&&(this.mods[t.id]=t),this.recalc()}removeMods(t){console.log("REMOVE MOD: "+t.id),void 0!==this.mods[t.id]&&(this.mods[t.id]=void 0,this.recalc())}delValue(t=0,e=0){return(this._value+this._mBase+t)*(1+this._mPct+e)}recalc(){let t=0,e=0;for(let i in this._mods){var s=this._mods[i];void 0!==s&&(e+=s.countPct||0,t+=s.countBonus||0)}this._mPct=e,this._mBase=t}}}},i={};function n(t){var e=i[t];if(void 0!==e)return e.exports;var r=i[t]={id:t,exports:{}};return s[t](r,r.exports,n),r.exports}n.m=s,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var s in e)n.o(e,s)&&!n.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},n.f={},n.e=t=>Promise.all(Object.keys(n.f).reduce(((e,s)=>(n.f[s](t,e),e)),[])),n.u=t=>(({102:"hall-ui",123:"scraft-ui",125:"minions-ui",215:"bestiary-ui",225:"raid-ui",398:"bars-ui",532:"spells-ui",765:"skills-ui",767:"inv-ui",797:"remote",811:"popups-ui",812:"player-ui",841:"home-ui",887:"enchant-ui",902:"potions-ui",971:"equip-ui"}[t]||t)+".bundle.js"),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="[name]:",n.l=(s,i,r,a)=>{if(t[s])t[s].push(i);else{var o,l;if(void 0!==r)for(var h=document.getElementsByTagName("script"),u=0;u<h.length;u++){var c=h[u];if(c.getAttribute("src")==s||c.getAttribute("data-webpack")==e+r){o=c;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",e+r),o.src=s),t[s]=[i];var d=(e,i)=>{o.onerror=o.onload=null,clearTimeout(m);var n=t[s];if(delete t[s],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((t=>t(i))),e)return e(i)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}},n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="js/",(()=>{var t={543:0};n.f.j=(e,s)=>{var i=n.o(t,e)?t[e]:void 0;if(0!==i)if(i)s.push(i[2]);else{var r=new Promise(((s,n)=>i=t[e]=[s,n]));s.push(i[2]=r);var a=n.p+n.u(e),o=new Error;n.l(a,(s=>{if(n.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var r=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;o.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",o.name="ChunkLoadError",o.type=r,o.request=a,i[1](o)}}),"chunk-"+e,e)}};var e=(e,s)=>{var i,r,[a,o,l]=s,h=0;if(a.some((e=>0!==t[e]))){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);l&&l(n)}for(e&&e(s);h<a.length;h++)r=a[h],n.o(t,r)&&t[r]&&t[r][0](),t[a[h]]=0},s=self.webpackChunk_name_=self.webpackChunk_name_||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var r={};(()=>{n.r(r);var t=n(7112),e=n(4478),s=n(2025),i=Object.freeze({});function a(t){return null==t}function o(t){return null!=t}function l(t){return!0===t}function h(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function u(t){return null!==t&&"object"==typeof t}var c=Object.prototype.toString;function d(t){return"[object Object]"===c.call(t)}function m(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return o(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function f(t){return null==t?"":Array.isArray(t)||d(t)&&t.toString===c?JSON.stringify(t,null,2):String(t)}function v(t){var e=parseFloat(t);return isNaN(e)?t:e}function g(t,e){for(var s=Object.create(null),i=t.split(","),n=0;n<i.length;n++)s[i[n]]=!0;return e?function(t){return s[t.toLowerCase()]}:function(t){return s[t]}}g("slot,component",!0);var A=g("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var s=t.indexOf(e);if(s>-1)return t.splice(s,1)}}var _=Object.prototype.hasOwnProperty;function b(t,e){return _.call(t,e)}function w(t){var e=Object.create(null);return function(s){return e[s]||(e[s]=t(s))}}var k=/-(\w)/g,x=w((function(t){return t.replace(k,(function(t,e){return e?e.toUpperCase():""}))})),C=w((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),S=/\B([A-Z])/g,O=w((function(t){return t.replace(S,"-$1").toLowerCase()})),Z=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function s(s){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,s):t.call(e)}return s._length=t.length,s};function I(t,e){e=e||0;for(var s=t.length-e,i=new Array(s);s--;)i[s]=t[s+e];return i}function P(t,e){for(var s in e)t[s]=e[s];return t}function T(t){for(var e={},s=0;s<t.length;s++)t[s]&&P(e,t[s]);return e}function E(t,e,s){}var M=function(t,e,s){return!1},L=function(t){return t};function N(t,e){if(t===e)return!0;var s=u(t),i=u(e);if(!s||!i)return!s&&!i&&String(t)===String(e);try{var n=Array.isArray(t),r=Array.isArray(e);if(n&&r)return t.length===e.length&&t.every((function(t,s){return N(t,e[s])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(n||r)return!1;var a=Object.keys(t),o=Object.keys(e);return a.length===o.length&&a.every((function(s){return N(t[s],e[s])}))}catch(t){return!1}}function j(t,e){for(var s=0;s<t.length;s++)if(N(t[s],e))return s;return-1}function D(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var R="data-server-rendered",$=["component","directive","filter"],B=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:M,isReservedAttr:M,isUnknownElement:M,getTagNamespace:E,parsePlatformTagName:L,mustUseProp:M,async:!0,_lifecycleHooks:B};function q(t,e,s,i){Object.defineProperty(t,e,{value:s,enumerable:!!i,writable:!0,configurable:!0})}var F,V=new RegExp("[^"+/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/.source+".$_\\d]"),G="__proto__"in{},H="undefined"!=typeof window,W="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,J=W&&WXEnvironment.platform.toLowerCase(),z=H&&window.navigator.userAgent.toLowerCase(),Y=z&&/msie|trident/.test(z),K=z&&z.indexOf("msie 9.0")>0,Q=z&&z.indexOf("edge/")>0,X=(z&&z.indexOf("android"),z&&/iphone|ipad|ipod|ios/.test(z)||"ios"===J),tt=(z&&/chrome\/\d+/.test(z),z&&/phantomjs/.test(z),z&&z.match(/firefox\/(\d+)/)),et={}.watch,st=!1;if(H)try{var it={};Object.defineProperty(it,"passive",{get:function(){st=!0}}),window.addEventListener("test-passive",null,it)}catch(t){}var nt=function(){return void 0===F&&(F=!H&&!W&&void 0!==n.g&&n.g.process&&"server"===n.g.process.env.VUE_ENV),F},rt=H&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function at(t){return"function"==typeof t&&/native code/.test(t.toString())}var ot,lt="undefined"!=typeof Symbol&&at(Symbol)&&"undefined"!=typeof Reflect&&at(Reflect.ownKeys);ot="undefined"!=typeof Set&&at(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var ht=E,ut=0,ct=function(){this.id=ut++,this.subs=[]};ct.prototype.addSub=function(t){this.subs.push(t)},ct.prototype.removeSub=function(t){y(this.subs,t)},ct.prototype.depend=function(){ct.target&&ct.target.addDep(this)},ct.prototype.notify=function(){for(var t=this.subs.slice(),e=0,s=t.length;e<s;e++)t[e].update()},ct.target=null;var dt=[];function mt(t){dt.push(t),ct.target=t}function pt(){dt.pop(),ct.target=dt[dt.length-1]}var ft=function(t,e,s,i,n,r,a,o){this.tag=t,this.data=e,this.children=s,this.text=i,this.elm=n,this.ns=void 0,this.context=r,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=o,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},vt={child:{configurable:!0}};vt.child.get=function(){return this.componentInstance},Object.defineProperties(ft.prototype,vt);var gt=function(t){void 0===t&&(t="");var e=new ft;return e.text=t,e.isComment=!0,e};function At(t){return new ft(void 0,void 0,void 0,String(t))}function yt(t){var e=new ft(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var _t=Array.prototype,bt=Object.create(_t);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(t){var e=_t[t];q(bt,t,(function(){for(var s=[],i=arguments.length;i--;)s[i]=arguments[i];var n,r=e.apply(this,s),a=this.__ob__;switch(t){case"push":case"unshift":n=s;break;case"splice":n=s.slice(2)}return n&&a.observeArray(n),a.dep.notify(),r}))}));var wt=Object.getOwnPropertyNames(bt),kt=!0;function xt(t){kt=t}var Ct=function(t){this.value=t,this.dep=new ct,this.vmCount=0,q(t,"__ob__",this),Array.isArray(t)?(G?function(t,e){t.__proto__=e}(t,bt):function(t,e,s){for(var i=0,n=s.length;i<n;i++){var r=s[i];q(t,r,e[r])}}(t,bt,wt),this.observeArray(t)):this.walk(t)};function St(t,e){var s;if(u(t)&&!(t instanceof ft))return b(t,"__ob__")&&t.__ob__ instanceof Ct?s=t.__ob__:kt&&!nt()&&(Array.isArray(t)||d(t))&&Object.isExtensible(t)&&!t._isVue&&(s=new Ct(t)),e&&s&&s.vmCount++,s}function Ot(t,e,s,i,n){var r=new ct,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var o=a&&a.get,l=a&&a.set;o&&!l||2!==arguments.length||(s=t[e]);var h=!n&&St(s);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=o?o.call(t):s;return ct.target&&(r.depend(),h&&(h.dep.depend(),Array.isArray(e)&&Pt(e))),e},set:function(e){var i=o?o.call(t):s;e===i||e!=e&&i!=i||o&&!l||(l?l.call(t,e):s=e,h=!n&&St(e),r.notify())}})}}function Zt(t,e,s){if(Array.isArray(t)&&m(e))return t.length=Math.max(t.length,e),t.splice(e,1,s),s;if(e in t&&!(e in Object.prototype))return t[e]=s,s;var i=t.__ob__;return t._isVue||i&&i.vmCount?s:i?(Ot(i.value,e,s),i.dep.notify(),s):(t[e]=s,s)}function It(t,e){if(Array.isArray(t)&&m(e))t.splice(e,1);else{var s=t.__ob__;t._isVue||s&&s.vmCount||b(t,e)&&(delete t[e],s&&s.dep.notify())}}function Pt(t){for(var e=void 0,s=0,i=t.length;s<i;s++)(e=t[s])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Pt(e)}Ct.prototype.walk=function(t){for(var e=Object.keys(t),s=0;s<e.length;s++)Ot(t,e[s])},Ct.prototype.observeArray=function(t){for(var e=0,s=t.length;e<s;e++)St(t[e])};var Tt=U.optionMergeStrategies;function Et(t,e){if(!e)return t;for(var s,i,n,r=lt?Reflect.ownKeys(e):Object.keys(e),a=0;a<r.length;a++)"__ob__"!==(s=r[a])&&(i=t[s],n=e[s],b(t,s)?i!==n&&d(i)&&d(n)&&Et(i,n):Zt(t,s,n));return t}function Mt(t,e,s){return s?function(){var i="function"==typeof e?e.call(s,s):e,n="function"==typeof t?t.call(s,s):t;return i?Et(i,n):n}:e?t?function(){return Et("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Lt(t,e){var s=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return s?function(t){for(var e=[],s=0;s<t.length;s++)-1===e.indexOf(t[s])&&e.push(t[s]);return e}(s):s}function Nt(t,e,s,i){var n=Object.create(t||null);return e?P(n,e):n}Tt.data=function(t,e,s){return s?Mt(t,e,s):e&&"function"!=typeof e?t:Mt(t,e)},B.forEach((function(t){Tt[t]=Lt})),$.forEach((function(t){Tt[t+"s"]=Nt})),Tt.watch=function(t,e,s,i){if(t===et&&(t=void 0),e===et&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var n={};for(var r in P(n,t),e){var a=n[r],o=e[r];a&&!Array.isArray(a)&&(a=[a]),n[r]=a?a.concat(o):Array.isArray(o)?o:[o]}return n},Tt.props=Tt.methods=Tt.inject=Tt.computed=function(t,e,s,i){if(!t)return e;var n=Object.create(null);return P(n,t),e&&P(n,e),n},Tt.provide=Mt;var jt=function(t,e){return void 0===e?t:e};function Dt(t,e,s){if("function"==typeof e&&(e=e.options),function(t,e){var s=t.props;if(s){var i,n,r={};if(Array.isArray(s))for(i=s.length;i--;)"string"==typeof(n=s[i])&&(r[x(n)]={type:null});else if(d(s))for(var a in s)n=s[a],r[x(a)]=d(n)?n:{type:n};t.props=r}}(e),function(t,e){var s=t.inject;if(s){var i=t.inject={};if(Array.isArray(s))for(var n=0;n<s.length;n++)i[s[n]]={from:s[n]};else if(d(s))for(var r in s){var a=s[r];i[r]=d(a)?P({from:r},a):{from:a}}}}(e),function(t){var e=t.directives;if(e)for(var s in e){var i=e[s];"function"==typeof i&&(e[s]={bind:i,update:i})}}(e),!e._base&&(e.extends&&(t=Dt(t,e.extends,s)),e.mixins))for(var i=0,n=e.mixins.length;i<n;i++)t=Dt(t,e.mixins[i],s);var r,a={};for(r in t)o(r);for(r in e)b(t,r)||o(r);function o(i){var n=Tt[i]||jt;a[i]=n(t[i],e[i],s,i)}return a}function Rt(t,e,s,i){if("string"==typeof s){var n=t[e];if(b(n,s))return n[s];var r=x(s);if(b(n,r))return n[r];var a=C(r);return b(n,a)?n[a]:n[s]||n[r]||n[a]}}function $t(t,e,s,i){var n=e[t],r=!b(s,t),a=s[t],o=Ft(Boolean,n.type);if(o>-1)if(r&&!b(n,"default"))a=!1;else if(""===a||a===O(t)){var l=Ft(String,n.type);(l<0||o<l)&&(a=!0)}if(void 0===a){a=function(t,e,s){if(b(e,"default")){var i=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[s]&&void 0!==t._props[s]?t._props[s]:"function"==typeof i&&"Function"!==Ut(e.type)?i.call(t):i}}(i,n,t);var h=kt;xt(!0),St(a),xt(h)}return a}var Bt=/^\s*function (\w+)/;function Ut(t){var e=t&&t.toString().match(Bt);return e?e[1]:""}function qt(t,e){return Ut(t)===Ut(e)}function Ft(t,e){if(!Array.isArray(e))return qt(e,t)?0:-1;for(var s=0,i=e.length;s<i;s++)if(qt(e[s],t))return s;return-1}function Vt(t,e,s){mt();try{if(e)for(var i=e;i=i.$parent;){var n=i.$options.errorCaptured;if(n)for(var r=0;r<n.length;r++)try{if(!1===n[r].call(i,t,e,s))return}catch(t){Ht(t,i,"errorCaptured hook")}}Ht(t,e,s)}finally{pt()}}function Gt(t,e,s,i,n){var r;try{(r=s?t.apply(e,s):t.call(e))&&!r._isVue&&p(r)&&!r._handled&&(r.catch((function(t){return Vt(t,i,n+" (Promise/async)")})),r._handled=!0)}catch(t){Vt(t,i,n)}return r}function Ht(t,e,s){if(U.errorHandler)try{return U.errorHandler.call(null,t,e,s)}catch(e){e!==t&&Wt(e)}Wt(t)}function Wt(t,e,s){if(!H&&!W||"undefined"==typeof console)throw t;console.error(t)}var Jt,zt=!1,Yt=[],Kt=!1;function Qt(){Kt=!1;var t=Yt.slice(0);Yt.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&at(Promise)){var Xt=Promise.resolve();Jt=function(){Xt.then(Qt),X&&setTimeout(E)},zt=!0}else if(Y||"undefined"==typeof MutationObserver||!at(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Jt="undefined"!=typeof setImmediate&&at(setImmediate)?function(){setImmediate(Qt)}:function(){setTimeout(Qt,0)};else{var te=1,ee=new MutationObserver(Qt),se=document.createTextNode(String(te));ee.observe(se,{characterData:!0}),Jt=function(){te=(te+1)%2,se.data=String(te)},zt=!0}function ie(t,e){var s;if(Yt.push((function(){if(t)try{t.call(e)}catch(t){Vt(t,e,"nextTick")}else s&&s(e)})),Kt||(Kt=!0,Jt()),!t&&"undefined"!=typeof Promise)return new Promise((function(t){s=t}))}var ne=new ot;function re(t){ae(t,ne),ne.clear()}function ae(t,e){var s,i,n=Array.isArray(t);if(!(!n&&!u(t)||Object.isFrozen(t)||t instanceof ft)){if(t.__ob__){var r=t.__ob__.dep.id;if(e.has(r))return;e.add(r)}if(n)for(s=t.length;s--;)ae(t[s],e);else for(s=(i=Object.keys(t)).length;s--;)ae(t[i[s]],e)}}var oe=w((function(t){var e="&"===t.charAt(0),s="~"===(t=e?t.slice(1):t).charAt(0),i="!"===(t=s?t.slice(1):t).charAt(0);return{name:t=i?t.slice(1):t,once:s,capture:i,passive:e}}));function le(t,e){function s(){var t=arguments,i=s.fns;if(!Array.isArray(i))return Gt(i,null,arguments,e,"v-on handler");for(var n=i.slice(),r=0;r<n.length;r++)Gt(n[r],null,t,e,"v-on handler")}return s.fns=t,s}function he(t,e,s,i,n,r){var o,h,u,c;for(o in t)h=t[o],u=e[o],c=oe(o),a(h)||(a(u)?(a(h.fns)&&(h=t[o]=le(h,r)),l(c.once)&&(h=t[o]=n(c.name,h,c.capture)),s(c.name,h,c.capture,c.passive,c.params)):h!==u&&(u.fns=h,t[o]=u));for(o in e)a(t[o])&&i((c=oe(o)).name,e[o],c.capture)}function ue(t,e,s){var i;t instanceof ft&&(t=t.data.hook||(t.data.hook={}));var n=t[e];function r(){s.apply(this,arguments),y(i.fns,r)}a(n)?i=le([r]):o(n.fns)&&l(n.merged)?(i=n).fns.push(r):i=le([n,r]),i.merged=!0,t[e]=i}function ce(t,e,s,i,n){if(o(e)){if(b(e,s))return t[s]=e[s],n||delete e[s],!0;if(b(e,i))return t[s]=e[i],n||delete e[i],!0}return!1}function de(t){return h(t)?[At(t)]:Array.isArray(t)?pe(t):void 0}function me(t){return o(t)&&o(t.text)&&!1===t.isComment}function pe(t,e){var s,i,n,r,u=[];for(s=0;s<t.length;s++)a(i=t[s])||"boolean"==typeof i||(r=u[n=u.length-1],Array.isArray(i)?i.length>0&&(me((i=pe(i,(e||"")+"_"+s))[0])&&me(r)&&(u[n]=At(r.text+i[0].text),i.shift()),u.push.apply(u,i)):h(i)?me(r)?u[n]=At(r.text+i):""!==i&&u.push(At(i)):me(i)&&me(r)?u[n]=At(r.text+i.text):(l(t._isVList)&&o(i.tag)&&a(i.key)&&o(e)&&(i.key="__vlist"+e+"_"+s+"__"),u.push(i)));return u}function fe(t,e){if(t){for(var s=Object.create(null),i=lt?Reflect.ownKeys(t):Object.keys(t),n=0;n<i.length;n++){var r=i[n];if("__ob__"!==r){for(var a=t[r].from,o=e;o;){if(o._provided&&b(o._provided,a)){s[r]=o._provided[a];break}o=o.$parent}if(!o&&"default"in t[r]){var l=t[r].default;s[r]="function"==typeof l?l.call(e):l}}}return s}}function ve(t,e){if(!t||!t.length)return{};for(var s={},i=0,n=t.length;i<n;i++){var r=t[i],a=r.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,r.context!==e&&r.fnContext!==e||!a||null==a.slot)(s.default||(s.default=[])).push(r);else{var o=a.slot,l=s[o]||(s[o]=[]);"template"===r.tag?l.push.apply(l,r.children||[]):l.push(r)}}for(var h in s)s[h].every(ge)&&delete s[h];return s}function ge(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Ae(t){return t.isComment&&t.asyncFactory}function ye(t,e,s){var n,r=Object.keys(e).length>0,a=t?!!t.$stable:!r,o=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(a&&s&&s!==i&&o===s.$key&&!r&&!s.$hasNormal)return s;for(var l in n={},t)t[l]&&"$"!==l[0]&&(n[l]=_e(e,l,t[l]))}else n={};for(var h in e)h in n||(n[h]=be(e,h));return t&&Object.isExtensible(t)&&(t._normalized=n),q(n,"$stable",a),q(n,"$key",o),q(n,"$hasNormal",r),n}function _e(t,e,s){var i=function(){var t=arguments.length?s.apply(null,arguments):s({}),e=(t=t&&"object"==typeof t&&!Array.isArray(t)?[t]:de(t))&&t[0];return t&&(!e||1===t.length&&e.isComment&&!Ae(e))?void 0:t};return s.proxy&&Object.defineProperty(t,e,{get:i,enumerable:!0,configurable:!0}),i}function be(t,e){return function(){return t[e]}}function we(t,e){var s,i,n,r,a;if(Array.isArray(t)||"string"==typeof t)for(s=new Array(t.length),i=0,n=t.length;i<n;i++)s[i]=e(t[i],i);else if("number"==typeof t)for(s=new Array(t),i=0;i<t;i++)s[i]=e(i+1,i);else if(u(t))if(lt&&t[Symbol.iterator]){s=[];for(var l=t[Symbol.iterator](),h=l.next();!h.done;)s.push(e(h.value,s.length)),h=l.next()}else for(r=Object.keys(t),s=new Array(r.length),i=0,n=r.length;i<n;i++)a=r[i],s[i]=e(t[a],a,i);return o(s)||(s=[]),s._isVList=!0,s}function ke(t,e,s,i){var n,r=this.$scopedSlots[t];r?(s=s||{},i&&(s=P(P({},i),s)),n=r(s)||("function"==typeof e?e():e)):n=this.$slots[t]||("function"==typeof e?e():e);var a=s&&s.slot;return a?this.$createElement("template",{slot:a},n):n}function xe(t){return Rt(this.$options,"filters",t)||L}function Ce(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function Se(t,e,s,i,n){var r=U.keyCodes[e]||s;return n&&i&&!U.keyCodes[e]?Ce(n,i):r?Ce(r,t):i?O(i)!==e:void 0===t}function Oe(t,e,s,i,n){if(s&&u(s)){var r;Array.isArray(s)&&(s=T(s));var a=function(a){if("class"===a||"style"===a||A(a))r=t;else{var o=t.attrs&&t.attrs.type;r=i||U.mustUseProp(e,o,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var l=x(a),h=O(a);l in r||h in r||(r[a]=s[a],n&&((t.on||(t.on={}))["update:"+a]=function(t){s[a]=t}))};for(var o in s)a(o)}return t}function Ze(t,e){var s=this._staticTrees||(this._staticTrees=[]),i=s[t];return i&&!e||Pe(i=s[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),i}function Ie(t,e,s){return Pe(t,"__once__"+e+(s?"_"+s:""),!0),t}function Pe(t,e,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]&&"string"!=typeof t[i]&&Te(t[i],e+"_"+i,s);else Te(t,e,s)}function Te(t,e,s){t.isStatic=!0,t.key=e,t.isOnce=s}function Ee(t,e){if(e&&d(e)){var s=t.on=t.on?P({},t.on):{};for(var i in e){var n=s[i],r=e[i];s[i]=n?[].concat(n,r):r}}return t}function Me(t,e,s,i){e=e||{$stable:!s};for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?Me(r,e,s):r&&(r.proxy&&(r.fn.proxy=!0),e[r.key]=r.fn)}return i&&(e.$key=i),e}function Le(t,e){for(var s=0;s<e.length;s+=2){var i=e[s];"string"==typeof i&&i&&(t[e[s]]=e[s+1])}return t}function Ne(t,e){return"string"==typeof t?e+t:t}function je(t){t._o=Ie,t._n=v,t._s=f,t._l=we,t._t=ke,t._q=N,t._i=j,t._m=Ze,t._f=xe,t._k=Se,t._b=Oe,t._v=At,t._e=gt,t._u=Me,t._g=Ee,t._d=Le,t._p=Ne}function De(t,e,s,n,r){var a,o=this,h=r.options;b(n,"_uid")?(a=Object.create(n))._original=n:(a=n,n=n._original);var u=l(h._compiled),c=!u;this.data=t,this.props=e,this.children=s,this.parent=n,this.listeners=t.on||i,this.injections=fe(h.inject,n),this.slots=function(){return o.$slots||ye(t.scopedSlots,o.$slots=ve(s,n)),o.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ye(t.scopedSlots,this.slots())}}),u&&(this.$options=h,this.$slots=this.slots(),this.$scopedSlots=ye(t.scopedSlots,this.$slots)),h._scopeId?this._c=function(t,e,s,i){var r=Ve(a,t,e,s,i,c);return r&&!Array.isArray(r)&&(r.fnScopeId=h._scopeId,r.fnContext=n),r}:this._c=function(t,e,s,i){return Ve(a,t,e,s,i,c)}}function Re(t,e,s,i,n){var r=yt(t);return r.fnContext=s,r.fnOptions=i,e.slot&&((r.data||(r.data={})).slot=e.slot),r}function $e(t,e){for(var s in e)t[x(s)]=e[s]}je(De.prototype);var Be={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var s=t;Be.prepatch(s,s)}else(t.componentInstance=function(t,e){var s={_isComponent:!0,_parentVnode:t,parent:e},i=t.data.inlineTemplate;return o(i)&&(s.render=i.render,s.staticRenderFns=i.staticRenderFns),new t.componentOptions.Ctor(s)}(t,ts)).$mount(e?t.elm:void 0,e)},prepatch:function(t,e){var s=e.componentOptions;!function(t,e,s,n,r){var a=n.data.scopedSlots,o=t.$scopedSlots,l=!!(a&&!a.$stable||o!==i&&!o.$stable||a&&t.$scopedSlots.$key!==a.$key||!a&&t.$scopedSlots.$key),h=!!(r||t.$options._renderChildren||l);if(t.$options._parentVnode=n,t.$vnode=n,t._vnode&&(t._vnode.parent=n),t.$options._renderChildren=r,t.$attrs=n.data.attrs||i,t.$listeners=s||i,e&&t.$options.props){xt(!1);for(var u=t._props,c=t.$options._propKeys||[],d=0;d<c.length;d++){var m=c[d],p=t.$options.props;u[m]=$t(m,p,e,t)}xt(!0),t.$options.propsData=e}s=s||i;var f=t.$options._parentListeners;t.$options._parentListeners=s,Xe(t,s,f),h&&(t.$slots=ve(r,n.context),t.$forceUpdate())}(e.componentInstance=t.componentInstance,s.propsData,s.listeners,e,s.children)},insert:function(t){var e,s=t.context,i=t.componentInstance;i._isMounted||(i._isMounted=!0,rs(i,"mounted")),t.data.keepAlive&&(s._isMounted?((e=i)._inactive=!1,os.push(e)):is(i,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?ns(e,!0):e.$destroy())}},Ue=Object.keys(Be);function qe(t,e,s,n,r){if(!a(t)){var h=s.$options._base;if(u(t)&&(t=h.extend(t)),"function"==typeof t){var c;if(a(t.cid)&&void 0===(t=function(t,e){if(l(t.error)&&o(t.errorComp))return t.errorComp;if(o(t.resolved))return t.resolved;var s=We;if(s&&o(t.owners)&&-1===t.owners.indexOf(s)&&t.owners.push(s),l(t.loading)&&o(t.loadingComp))return t.loadingComp;if(s&&!o(t.owners)){var i=t.owners=[s],n=!0,r=null,h=null;s.$on("hook:destroyed",(function(){return y(i,s)}));var c=function(t){for(var e=0,s=i.length;e<s;e++)i[e].$forceUpdate();t&&(i.length=0,null!==r&&(clearTimeout(r),r=null),null!==h&&(clearTimeout(h),h=null))},d=D((function(s){t.resolved=Je(s,e),n?i.length=0:c(!0)})),m=D((function(e){o(t.errorComp)&&(t.error=!0,c(!0))})),f=t(d,m);return u(f)&&(p(f)?a(t.resolved)&&f.then(d,m):p(f.component)&&(f.component.then(d,m),o(f.error)&&(t.errorComp=Je(f.error,e)),o(f.loading)&&(t.loadingComp=Je(f.loading,e),0===f.delay?t.loading=!0:r=setTimeout((function(){r=null,a(t.resolved)&&a(t.error)&&(t.loading=!0,c(!1))}),f.delay||200)),o(f.timeout)&&(h=setTimeout((function(){h=null,a(t.resolved)&&m(null)}),f.timeout)))),n=!1,t.loading?t.loadingComp:t.resolved}}(c=t,h)))return function(t,e,s,i,n){var r=gt();return r.asyncFactory=t,r.asyncMeta={data:e,context:s,children:i,tag:n},r}(c,e,s,n,r);e=e||{},Ss(t),o(e.model)&&function(t,e){var s=t.model&&t.model.prop||"value",i=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[s]=e.model.value;var n=e.on||(e.on={}),r=n[i],a=e.model.callback;o(r)?(Array.isArray(r)?-1===r.indexOf(a):r!==a)&&(n[i]=[a].concat(r)):n[i]=a}(t.options,e);var d=function(t,e,s){var i=e.options.props;if(!a(i)){var n={},r=t.attrs,l=t.props;if(o(r)||o(l))for(var h in i){var u=O(h);ce(n,l,h,u,!0)||ce(n,r,h,u,!1)}return n}}(e,t);if(l(t.options.functional))return function(t,e,s,n,r){var a=t.options,l={},h=a.props;if(o(h))for(var u in h)l[u]=$t(u,h,e||i);else o(s.attrs)&&$e(l,s.attrs),o(s.props)&&$e(l,s.props);var c=new De(s,l,r,n,t),d=a.render.call(null,c._c,c);if(d instanceof ft)return Re(d,s,c.parent,a);if(Array.isArray(d)){for(var m=de(d)||[],p=new Array(m.length),f=0;f<m.length;f++)p[f]=Re(m[f],s,c.parent,a);return p}}(t,d,e,s,n);var m=e.on;if(e.on=e.nativeOn,l(t.options.abstract)){var f=e.slot;e={},f&&(e.slot=f)}!function(t){for(var e=t.hook||(t.hook={}),s=0;s<Ue.length;s++){var i=Ue[s],n=e[i],r=Be[i];n===r||n&&n._merged||(e[i]=n?Fe(r,n):r)}}(e);var v=t.options.name||r;return new ft("vue-component-"+t.cid+(v?"-"+v:""),e,void 0,void 0,void 0,s,{Ctor:t,propsData:d,listeners:m,tag:r,children:n},c)}}}function Fe(t,e){var s=function(s,i){t(s,i),e(s,i)};return s._merged=!0,s}function Ve(t,e,s,i,n,r){return(Array.isArray(s)||h(s))&&(n=i,i=s,s=void 0),l(r)&&(n=2),function(t,e,s,i,n){if(o(s)&&o(s.__ob__))return gt();if(o(s)&&o(s.is)&&(e=s.is),!e)return gt();var r,a,l;(Array.isArray(i)&&"function"==typeof i[0]&&((s=s||{}).scopedSlots={default:i[0]},i.length=0),2===n?i=de(i):1===n&&(i=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(i)),"string"==typeof e)?(a=t.$vnode&&t.$vnode.ns||U.getTagNamespace(e),r=U.isReservedTag(e)?new ft(U.parsePlatformTagName(e),s,i,void 0,void 0,t):s&&s.pre||!o(l=Rt(t.$options,"components",e))?new ft(e,s,i,void 0,void 0,t):qe(l,s,t,i,e)):r=qe(e,s,t,i);return Array.isArray(r)?r:o(r)?(o(a)&&Ge(r,a),o(s)&&function(t){u(t.style)&&re(t.style),u(t.class)&&re(t.class)}(s),r):gt()}(t,e,s,i,n)}function Ge(t,e,s){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,s=!0),o(t.children))for(var i=0,n=t.children.length;i<n;i++){var r=t.children[i];o(r.tag)&&(a(r.ns)||l(s)&&"svg"!==r.tag)&&Ge(r,e,s)}}var He,We=null;function Je(t,e){return(t.__esModule||lt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),u(t)?e.extend(t):t}function ze(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var s=t[e];if(o(s)&&(o(s.componentOptions)||Ae(s)))return s}}function Ye(t,e){He.$on(t,e)}function Ke(t,e){He.$off(t,e)}function Qe(t,e){var s=He;return function i(){var n=e.apply(null,arguments);null!==n&&s.$off(t,i)}}function Xe(t,e,s){He=t,he(e,s||{},Ye,Ke,Qe,t),He=void 0}var ts=null;function es(t){var e=ts;return ts=t,function(){ts=e}}function ss(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function is(t,e){if(e){if(t._directInactive=!1,ss(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var s=0;s<t.$children.length;s++)is(t.$children[s]);rs(t,"activated")}}function ns(t,e){if(!(e&&(t._directInactive=!0,ss(t))||t._inactive)){t._inactive=!0;for(var s=0;s<t.$children.length;s++)ns(t.$children[s]);rs(t,"deactivated")}}function rs(t,e){mt();var s=t.$options[e],i=e+" hook";if(s)for(var n=0,r=s.length;n<r;n++)Gt(s[n],t,null,t,i);t._hasHookEvent&&t.$emit("hook:"+e),pt()}var as=[],os=[],ls={},hs=!1,us=!1,cs=0,ds=0,ms=Date.now;if(H&&!Y){var ps=window.performance;ps&&"function"==typeof ps.now&&ms()>document.createEvent("Event").timeStamp&&(ms=function(){return ps.now()})}function fs(){var t,e;for(ds=ms(),us=!0,as.sort((function(t,e){return t.id-e.id})),cs=0;cs<as.length;cs++)(t=as[cs]).before&&t.before(),e=t.id,ls[e]=null,t.run();var s=os.slice(),i=as.slice();cs=as.length=os.length=0,ls={},hs=us=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,is(t[e],!0)}(s),function(t){for(var e=t.length;e--;){var s=t[e],i=s.vm;i._watcher===s&&i._isMounted&&!i._isDestroyed&&rs(i,"updated")}}(i),rt&&U.devtools&&rt.emit("flush")}var vs=0,gs=function(t,e,s,i,n){this.vm=t,n&&(t._watcher=this),t._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=s,this.id=++vs,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ot,this.newDepIds=new ot,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!V.test(t)){var e=t.split(".");return function(t){for(var s=0;s<e.length;s++){if(!t)return;t=t[e[s]]}return t}}}(e),this.getter||(this.getter=E)),this.value=this.lazy?void 0:this.get()};gs.prototype.get=function(){var t;mt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Vt(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&re(t),pt(),this.cleanupDeps()}return t},gs.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},gs.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var s=this.depIds;this.depIds=this.newDepIds,this.newDepIds=s,this.newDepIds.clear(),s=this.deps,this.deps=this.newDeps,this.newDeps=s,this.newDeps.length=0},gs.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==ls[e]){if(ls[e]=!0,us){for(var s=as.length-1;s>cs&&as[s].id>t.id;)s--;as.splice(s+1,0,t)}else as.push(t);hs||(hs=!0,ie(fs))}}(this)},gs.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||u(t)||this.deep){var e=this.value;if(this.value=t,this.user){var s='callback for watcher "'+this.expression+'"';Gt(this.cb,this.vm,[t,e],this.vm,s)}else this.cb.call(this.vm,t,e)}}},gs.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},gs.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},gs.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var As={enumerable:!0,configurable:!0,get:E,set:E};function ys(t,e,s){As.get=function(){return this[e][s]},As.set=function(t){this[e][s]=t},Object.defineProperty(t,s,As)}var _s={lazy:!0};function bs(t,e,s){var i=!nt();"function"==typeof s?(As.get=i?ws(e):ks(s),As.set=E):(As.get=s.get?i&&!1!==s.cache?ws(e):ks(s.get):E,As.set=s.set||E),Object.defineProperty(t,e,As)}function ws(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),ct.target&&e.depend(),e.value}}function ks(t){return function(){return t.call(this,this)}}function xs(t,e,s,i){return d(s)&&(i=s,s=s.handler),"string"==typeof s&&(s=t[s]),t.$watch(e,s,i)}var Cs=0;function Ss(t){var e=t.options;if(t.super){var s=Ss(t.super);if(s!==t.superOptions){t.superOptions=s;var i=function(t){var e,s=t.options,i=t.sealedOptions;for(var n in s)s[n]!==i[n]&&(e||(e={}),e[n]=s[n]);return e}(t);i&&P(t.extendOptions,i),(e=t.options=Dt(s,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function Os(t){this._init(t)}function Zs(t){return t&&(t.Ctor.options.name||t.tag)}function Is(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:(s=t,!("[object RegExp]"!==c.call(s))&&t.test(e));var s}function Ps(t,e){var s=t.cache,i=t.keys,n=t._vnode;for(var r in s){var a=s[r];if(a){var o=a.name;o&&!e(o)&&Ts(s,r,i,n)}}}function Ts(t,e,s,i){var n=t[e];!n||i&&n.tag===i.tag||n.componentInstance.$destroy(),t[e]=null,y(s,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=Cs++,e._isVue=!0,t&&t._isComponent?function(t,e){var s=t.$options=Object.create(t.constructor.options),i=e._parentVnode;s.parent=e.parent,s._parentVnode=i;var n=i.componentOptions;s.propsData=n.propsData,s._parentListeners=n.listeners,s._renderChildren=n.children,s._componentTag=n.tag,e.render&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=Dt(Ss(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,s=e.parent;if(s&&!e.abstract){for(;s.$options.abstract&&s.$parent;)s=s.$parent;s.$children.push(t)}t.$parent=s,t.$root=s?s.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Xe(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,s=t.$vnode=e._parentVnode,n=s&&s.context;t.$slots=ve(e._renderChildren,n),t.$scopedSlots=i,t._c=function(e,s,i,n){return Ve(t,e,s,i,n,!1)},t.$createElement=function(e,s,i,n){return Ve(t,e,s,i,n,!0)};var r=s&&s.data;Ot(t,"$attrs",r&&r.attrs||i,null,!0),Ot(t,"$listeners",e._parentListeners||i,null,!0)}(e),rs(e,"beforeCreate"),function(t){var e=fe(t.$options.inject,t);e&&(xt(!1),Object.keys(e).forEach((function(s){Ot(t,s,e[s])})),xt(!0))}(e),function(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var s=t.$options.propsData||{},i=t._props={},n=t.$options._propKeys=[];t.$parent&&xt(!1);var r=function(r){n.push(r);var a=$t(r,e,s,t);Ot(i,r,a),r in t||ys(t,"_props",r)};for(var a in e)r(a);xt(!0)}(t,e.props),e.methods&&function(t,e){for(var s in t.$options.props,e)t[s]="function"!=typeof e[s]?E:Z(e[s],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;d(e=t._data="function"==typeof e?function(t,e){mt();try{return t.call(e,e)}catch(t){return Vt(t,e,"data()"),{}}finally{pt()}}(e,t):e||{})||(e={});for(var s,i=Object.keys(e),n=t.$options.props,r=(t.$options.methods,i.length);r--;){var a=i[r];n&&b(n,a)||(s=void 0,36===(s=(a+"").charCodeAt(0))||95===s)||ys(t,"_data",a)}St(e,!0)}(t):St(t._data={},!0),e.computed&&function(t,e){var s=t._computedWatchers=Object.create(null),i=nt();for(var n in e){var r=e[n],a="function"==typeof r?r:r.get;i||(s[n]=new gs(t,a||E,E,_s)),n in t||bs(t,n,r)}}(t,e.computed),e.watch&&e.watch!==et&&function(t,e){for(var s in e){var i=e[s];if(Array.isArray(i))for(var n=0;n<i.length;n++)xs(t,s,i[n]);else xs(t,s,i)}}(t,e.watch)}(e),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(e),rs(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Os),function(t){Object.defineProperty(t.prototype,"$data",{get:function(){return this._data}}),Object.defineProperty(t.prototype,"$props",{get:function(){return this._props}}),t.prototype.$set=Zt,t.prototype.$delete=It,t.prototype.$watch=function(t,e,s){var i=this;if(d(e))return xs(i,t,e,s);(s=s||{}).user=!0;var n=new gs(i,t,e,s);if(s.immediate){var r='callback for immediate watcher "'+n.expression+'"';mt(),Gt(e,i,[n.value],i,r),pt()}return function(){n.teardown()}}}(Os),function(t){var e=/^hook:/;t.prototype.$on=function(t,s){var i=this;if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++)i.$on(t[n],s);else(i._events[t]||(i._events[t]=[])).push(s),e.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){var s=this;function i(){s.$off(t,i),e.apply(s,arguments)}return i.fn=e,s.$on(t,i),s},t.prototype.$off=function(t,e){var s=this;if(!arguments.length)return s._events=Object.create(null),s;if(Array.isArray(t)){for(var i=0,n=t.length;i<n;i++)s.$off(t[i],e);return s}var r,a=s._events[t];if(!a)return s;if(!e)return s._events[t]=null,s;for(var o=a.length;o--;)if((r=a[o])===e||r.fn===e){a.splice(o,1);break}return s},t.prototype.$emit=function(t){var e=this,s=e._events[t];if(s){s=s.length>1?I(s):s;for(var i=I(arguments,1),n='event handler for "'+t+'"',r=0,a=s.length;r<a;r++)Gt(s[r],e,i,e,n)}return e}}(Os),function(t){t.prototype._update=function(t,e){var s=this,i=s.$el,n=s._vnode,r=es(s);s._vnode=t,s.$el=n?s.__patch__(n,t):s.__patch__(s.$el,t,e,!1),r(),i&&(i.__vue__=null),s.$el&&(s.$el.__vue__=s),s.$vnode&&s.$parent&&s.$vnode===s.$parent._vnode&&(s.$parent.$el=s.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){rs(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();for(var s=t._watchers.length;s--;)t._watchers[s].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),rs(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(Os),function(t){je(t.prototype),t.prototype.$nextTick=function(t){return ie(t,this)},t.prototype._render=function(){var t,e=this,s=e.$options,i=s.render,n=s._parentVnode;n&&(e.$scopedSlots=ye(n.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=n;try{We=e,t=i.call(e._renderProxy,e.$createElement)}catch(s){Vt(s,e,"render"),t=e._vnode}finally{We=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof ft||(t=gt()),t.parent=n,t}}(Os);var Es=[String,RegExp,Array],Ms={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:Es,exclude:Es,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,s=t.keys,i=t.vnodeToCache,n=t.keyToCache;if(i){var r=i.tag,a=i.componentInstance,o=i.componentOptions;e[n]={name:Zs(o),tag:r,componentInstance:a},s.push(n),this.max&&s.length>parseInt(this.max)&&Ts(e,s[0],s,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Ts(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){Ps(t,(function(t){return Is(e,t)}))})),this.$watch("exclude",(function(e){Ps(t,(function(t){return!Is(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=ze(t),s=e&&e.componentOptions;if(s){var i=Zs(s),n=this.include,r=this.exclude;if(n&&(!i||!Is(n,i))||r&&i&&Is(r,i))return e;var a=this.cache,o=this.keys,l=null==e.key?s.Ctor.cid+(s.tag?"::"+s.tag:""):e.key;a[l]?(e.componentInstance=a[l].componentInstance,y(o,l),o.push(l)):(this.vnodeToCache=e,this.keyToCache=l),e.data.keepAlive=!0}return e||t&&t[0]}}};!function(t){var e={get:function(){return U}};Object.defineProperty(t,"config",e),t.util={warn:ht,extend:P,mergeOptions:Dt,defineReactive:Ot},t.set=Zt,t.delete=It,t.nextTick=ie,t.observable=function(t){return St(t),t},t.options=Object.create(null),$.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,P(t.options.components,Ms),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var s=I(arguments,1);return s.unshift(this),"function"==typeof t.install?t.install.apply(t,s):"function"==typeof t&&t.apply(null,s),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=Dt(this.options,t),this}}(t),function(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var s=this,i=s.cid,n=t._Ctor||(t._Ctor={});if(n[i])return n[i];var r=t.name||s.options.name,a=function(t){this._init(t)};return(a.prototype=Object.create(s.prototype)).constructor=a,a.cid=e++,a.options=Dt(s.options,t),a.super=s,a.options.props&&function(t){var e=t.options.props;for(var s in e)ys(t.prototype,"_props",s)}(a),a.options.computed&&function(t){var e=t.options.computed;for(var s in e)bs(t.prototype,s,e[s])}(a),a.extend=s.extend,a.mixin=s.mixin,a.use=s.use,$.forEach((function(t){a[t]=s[t]})),r&&(a.options.components[r]=a),a.superOptions=s.options,a.extendOptions=t,a.sealedOptions=P({},a.options),n[i]=a,a}}(t),function(t){$.forEach((function(e){t[e]=function(t,s){return s?("component"===e&&d(s)&&(s.name=s.name||t,s=this.options._base.extend(s)),"directive"===e&&"function"==typeof s&&(s={bind:s,update:s}),this.options[e+"s"][t]=s,s):this.options[e+"s"][t]}}))}(t)}(Os),Object.defineProperty(Os.prototype,"$isServer",{get:nt}),Object.defineProperty(Os.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Os,"FunctionalRenderContext",{value:De}),Os.version="2.6.14";var Ls=g("style,class"),Ns=g("input,textarea,option,select,progress"),js=g("contenteditable,draggable,spellcheck"),Ds=g("events,caret,typing,plaintext-only"),Rs=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),$s="http://www.w3.org/1999/xlink",Bs=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Us=function(t){return Bs(t)?t.slice(6,t.length):""},qs=function(t){return null==t||!1===t};function Fs(t,e){return{staticClass:Vs(t.staticClass,e.staticClass),class:o(t.class)?[t.class,e.class]:e.class}}function Vs(t,e){return t?e?t+" "+e:t:e||""}function Gs(t){return Array.isArray(t)?function(t){for(var e,s="",i=0,n=t.length;i<n;i++)o(e=Gs(t[i]))&&""!==e&&(s&&(s+=" "),s+=e);return s}(t):u(t)?function(t){var e="";for(var s in t)t[s]&&(e&&(e+=" "),e+=s);return e}(t):"string"==typeof t?t:""}var Hs={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ws=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Js=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),zs=function(t){return Ws(t)||Js(t)},Ys=Object.create(null),Ks=g("text,number,password,search,email,tel,url"),Qs=Object.freeze({createElement:function(t,e){var s=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&s.setAttribute("multiple","multiple"),s},createElementNS:function(t,e){return document.createElementNS(Hs[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,s){t.insertBefore(e,s)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),Xs={create:function(t,e){ti(e)},update:function(t,e){t.data.ref!==e.data.ref&&(ti(t,!0),ti(e))},destroy:function(t){ti(t,!0)}};function ti(t,e){var s=t.data.ref;if(o(s)){var i=t.context,n=t.componentInstance||t.elm,r=i.$refs;e?Array.isArray(r[s])?y(r[s],n):r[s]===n&&(r[s]=void 0):t.data.refInFor?Array.isArray(r[s])?r[s].indexOf(n)<0&&r[s].push(n):r[s]=[n]:r[s]=n}}var ei=new ft("",{},[]),si=["create","activate","update","remove","destroy"];function ii(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&o(t.data)===o(e.data)&&function(t,e){if("input"!==t.tag)return!0;var s,i=o(s=t.data)&&o(s=s.attrs)&&s.type,n=o(s=e.data)&&o(s=s.attrs)&&s.type;return i===n||Ks(i)&&Ks(n)}(t,e)||l(t.isAsyncPlaceholder)&&a(e.asyncFactory.error))}function ni(t,e,s){var i,n,r={};for(i=e;i<=s;++i)o(n=t[i].key)&&(r[n]=i);return r}var ri={create:ai,update:ai,destroy:function(t){ai(t,ei)}};function ai(t,e){(t.data.directives||e.data.directives)&&function(t,e){var s,i,n,r=t===ei,a=e===ei,o=li(t.data.directives,t.context),l=li(e.data.directives,e.context),h=[],u=[];for(s in l)i=o[s],n=l[s],i?(n.oldValue=i.value,n.oldArg=i.arg,ui(n,"update",e,t),n.def&&n.def.componentUpdated&&u.push(n)):(ui(n,"bind",e,t),n.def&&n.def.inserted&&h.push(n));if(h.length){var c=function(){for(var s=0;s<h.length;s++)ui(h[s],"inserted",e,t)};r?ue(e,"insert",c):c()}if(u.length&&ue(e,"postpatch",(function(){for(var s=0;s<u.length;s++)ui(u[s],"componentUpdated",e,t)})),!r)for(s in o)l[s]||ui(o[s],"unbind",t,t,a)}(t,e)}var oi=Object.create(null);function li(t,e){var s,i,n=Object.create(null);if(!t)return n;for(s=0;s<t.length;s++)(i=t[s]).modifiers||(i.modifiers=oi),n[hi(i)]=i,i.def=Rt(e.$options,"directives",i.name);return n}function hi(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function ui(t,e,s,i,n){var r=t.def&&t.def[e];if(r)try{r(s.elm,t,s,i,n)}catch(i){Vt(i,s.context,"directive "+t.name+" "+e+" hook")}}var ci=[Xs,ri];function di(t,e){var s=e.componentOptions;if(!(o(s)&&!1===s.Ctor.options.inheritAttrs||a(t.data.attrs)&&a(e.data.attrs))){var i,n,r=e.elm,l=t.data.attrs||{},h=e.data.attrs||{};for(i in o(h.__ob__)&&(h=e.data.attrs=P({},h)),h)n=h[i],l[i]!==n&&mi(r,i,n,e.data.pre);for(i in(Y||Q)&&h.value!==l.value&&mi(r,"value",h.value),l)a(h[i])&&(Bs(i)?r.removeAttributeNS($s,Us(i)):js(i)||r.removeAttribute(i))}}function mi(t,e,s,i){i||t.tagName.indexOf("-")>-1?pi(t,e,s):Rs(e)?qs(s)?t.removeAttribute(e):(s="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,s)):js(e)?t.setAttribute(e,function(t,e){return qs(e)||"false"===e?"false":"contenteditable"===t&&Ds(e)?e:"true"}(e,s)):Bs(e)?qs(s)?t.removeAttributeNS($s,Us(e)):t.setAttributeNS($s,e,s):pi(t,e,s)}function pi(t,e,s){if(qs(s))t.removeAttribute(e);else{if(Y&&!K&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==s&&!t.__ieph){var i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)};t.addEventListener("input",i),t.__ieph=!0}t.setAttribute(e,s)}}var fi={create:di,update:di};function vi(t,e){var s=e.elm,i=e.data,n=t.data;if(!(a(i.staticClass)&&a(i.class)&&(a(n)||a(n.staticClass)&&a(n.class)))){var r=function(t){for(var e=t.data,s=t,i=t;o(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(e=Fs(i.data,e));for(;o(s=s.parent);)s&&s.data&&(e=Fs(e,s.data));return n=e.staticClass,r=e.class,o(n)||o(r)?Vs(n,Gs(r)):"";var n,r}(e),l=s._transitionClasses;o(l)&&(r=Vs(r,Gs(l))),r!==s._prevClass&&(s.setAttribute("class",r),s._prevClass=r)}}var gi,Ai={create:vi,update:vi};function yi(t,e,s){var i=gi;return function n(){var r=e.apply(null,arguments);null!==r&&wi(t,n,s,i)}}var _i=zt&&!(tt&&Number(tt[1])<=53);function bi(t,e,s,i){if(_i){var n=ds,r=e;e=r._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=n||t.timeStamp<=0||t.target.ownerDocument!==document)return r.apply(this,arguments)}}gi.addEventListener(t,e,st?{capture:s,passive:i}:s)}function wi(t,e,s,i){(i||gi).removeEventListener(t,e._wrapper||e,s)}function ki(t,e){if(!a(t.data.on)||!a(e.data.on)){var s=e.data.on||{},i=t.data.on||{};gi=e.elm,function(t){if(o(t.__r)){var e=Y?"change":"input";t[e]=[].concat(t.__r,t[e]||[]),delete t.__r}o(t.__c)&&(t.change=[].concat(t.__c,t.change||[]),delete t.__c)}(s),he(s,i,bi,wi,yi,e.context),gi=void 0}}var xi,Ci={create:ki,update:ki};function Si(t,e){if(!a(t.data.domProps)||!a(e.data.domProps)){var s,i,n=e.elm,r=t.data.domProps||{},l=e.data.domProps||{};for(s in o(l.__ob__)&&(l=e.data.domProps=P({},l)),r)s in l||(n[s]="");for(s in l){if(i=l[s],"textContent"===s||"innerHTML"===s){if(e.children&&(e.children.length=0),i===r[s])continue;1===n.childNodes.length&&n.removeChild(n.childNodes[0])}if("value"===s&&"PROGRESS"!==n.tagName){n._value=i;var h=a(i)?"":String(i);Oi(n,h)&&(n.value=h)}else if("innerHTML"===s&&Js(n.tagName)&&a(n.innerHTML)){(xi=xi||document.createElement("div")).innerHTML="<svg>"+i+"</svg>";for(var u=xi.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;u.firstChild;)n.appendChild(u.firstChild)}else if(i!==r[s])try{n[s]=i}catch(t){}}}}function Oi(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var s=!0;try{s=document.activeElement!==t}catch(t){}return s&&t.value!==e}(t,e)||function(t,e){var s=t.value,i=t._vModifiers;if(o(i)){if(i.number)return v(s)!==v(e);if(i.trim)return s.trim()!==e.trim()}return s!==e}(t,e))}var Zi={create:Si,update:Si},Ii=w((function(t){var e={},s=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach((function(t){if(t){var i=t.split(s);i.length>1&&(e[i[0].trim()]=i[1].trim())}})),e}));function Pi(t){var e=Ti(t.style);return t.staticStyle?P(t.staticStyle,e):e}function Ti(t){return Array.isArray(t)?T(t):"string"==typeof t?Ii(t):t}var Ei,Mi=/^--/,Li=/\s*!important$/,Ni=function(t,e,s){if(Mi.test(e))t.style.setProperty(e,s);else if(Li.test(s))t.style.setProperty(O(e),s.replace(Li,""),"important");else{var i=Di(e);if(Array.isArray(s))for(var n=0,r=s.length;n<r;n++)t.style[i]=s[n];else t.style[i]=s}},ji=["Webkit","Moz","ms"],Di=w((function(t){if(Ei=Ei||document.createElement("div").style,"filter"!==(t=x(t))&&t in Ei)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),s=0;s<ji.length;s++){var i=ji[s]+e;if(i in Ei)return i}}));function Ri(t,e){var s=e.data,i=t.data;if(!(a(s.staticStyle)&&a(s.style)&&a(i.staticStyle)&&a(i.style))){var n,r,l=e.elm,h=i.staticStyle,u=i.normalizedStyle||i.style||{},c=h||u,d=Ti(e.data.style)||{};e.data.normalizedStyle=o(d.__ob__)?P({},d):d;var m=function(t,e){for(var s,i={},n=t;n.componentInstance;)(n=n.componentInstance._vnode)&&n.data&&(s=Pi(n.data))&&P(i,s);(s=Pi(t.data))&&P(i,s);for(var r=t;r=r.parent;)r.data&&(s=Pi(r.data))&&P(i,s);return i}(e);for(r in c)a(m[r])&&Ni(l,r,"");for(r in m)(n=m[r])!==c[r]&&Ni(l,r,null==n?"":n)}}var $i={create:Ri,update:Ri},Bi=/\s+/;function Ui(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Bi).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var s=" "+(t.getAttribute("class")||"")+" ";s.indexOf(" "+e+" ")<0&&t.setAttribute("class",(s+e).trim())}}function qi(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Bi).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var s=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";s.indexOf(i)>=0;)s=s.replace(i," ");(s=s.trim())?t.setAttribute("class",s):t.removeAttribute("class")}}function Fi(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&P(e,Vi(t.name||"v")),P(e,t),e}return"string"==typeof t?Vi(t):void 0}}var Vi=w((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),Gi=H&&!K,Hi="transition",Wi="animation",Ji="transition",zi="transitionend",Yi="animation",Ki="animationend";Gi&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ji="WebkitTransition",zi="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Yi="WebkitAnimation",Ki="webkitAnimationEnd"));var Qi=H?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Xi(t){Qi((function(){Qi(t)}))}function tn(t,e){var s=t._transitionClasses||(t._transitionClasses=[]);s.indexOf(e)<0&&(s.push(e),Ui(t,e))}function en(t,e){t._transitionClasses&&y(t._transitionClasses,e),qi(t,e)}function sn(t,e,s){var i=rn(t,e),n=i.type,r=i.timeout,a=i.propCount;if(!n)return s();var o=n===Hi?zi:Ki,l=0,h=function(){t.removeEventListener(o,u),s()},u=function(e){e.target===t&&++l>=a&&h()};setTimeout((function(){l<a&&h()}),r+1),t.addEventListener(o,u)}var nn=/\b(transform|all)(,|$)/;function rn(t,e){var s,i=window.getComputedStyle(t),n=(i[Ji+"Delay"]||"").split(", "),r=(i[Ji+"Duration"]||"").split(", "),a=an(n,r),o=(i[Yi+"Delay"]||"").split(", "),l=(i[Yi+"Duration"]||"").split(", "),h=an(o,l),u=0,c=0;return e===Hi?a>0&&(s=Hi,u=a,c=r.length):e===Wi?h>0&&(s=Wi,u=h,c=l.length):c=(s=(u=Math.max(a,h))>0?a>h?Hi:Wi:null)?s===Hi?r.length:l.length:0,{type:s,timeout:u,propCount:c,hasTransform:s===Hi&&nn.test(i[Ji+"Property"])}}function an(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,s){return on(e)+on(t[s])})))}function on(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function ln(t,e){var s=t.elm;o(s._leaveCb)&&(s._leaveCb.cancelled=!0,s._leaveCb());var i=Fi(t.data.transition);if(!a(i)&&!o(s._enterCb)&&1===s.nodeType){for(var n=i.css,r=i.type,l=i.enterClass,h=i.enterToClass,c=i.enterActiveClass,d=i.appearClass,m=i.appearToClass,p=i.appearActiveClass,f=i.beforeEnter,g=i.enter,A=i.afterEnter,y=i.enterCancelled,_=i.beforeAppear,b=i.appear,w=i.afterAppear,k=i.appearCancelled,x=i.duration,C=ts,S=ts.$vnode;S&&S.parent;)C=S.context,S=S.parent;var O=!C._isMounted||!t.isRootInsert;if(!O||b||""===b){var Z=O&&d?d:l,I=O&&p?p:c,P=O&&m?m:h,T=O&&_||f,E=O&&"function"==typeof b?b:g,M=O&&w||A,L=O&&k||y,N=v(u(x)?x.enter:x),j=!1!==n&&!K,R=cn(E),$=s._enterCb=D((function(){j&&(en(s,P),en(s,I)),$.cancelled?(j&&en(s,Z),L&&L(s)):M&&M(s),s._enterCb=null}));t.data.show||ue(t,"insert",(function(){var e=s.parentNode,i=e&&e._pending&&e._pending[t.key];i&&i.tag===t.tag&&i.elm._leaveCb&&i.elm._leaveCb(),E&&E(s,$)})),T&&T(s),j&&(tn(s,Z),tn(s,I),Xi((function(){en(s,Z),$.cancelled||(tn(s,P),R||(un(N)?setTimeout($,N):sn(s,r,$)))}))),t.data.show&&(e&&e(),E&&E(s,$)),j||R||$()}}}function hn(t,e){var s=t.elm;o(s._enterCb)&&(s._enterCb.cancelled=!0,s._enterCb());var i=Fi(t.data.transition);if(a(i)||1!==s.nodeType)return e();if(!o(s._leaveCb)){var n=i.css,r=i.type,l=i.leaveClass,h=i.leaveToClass,c=i.leaveActiveClass,d=i.beforeLeave,m=i.leave,p=i.afterLeave,f=i.leaveCancelled,g=i.delayLeave,A=i.duration,y=!1!==n&&!K,_=cn(m),b=v(u(A)?A.leave:A),w=s._leaveCb=D((function(){s.parentNode&&s.parentNode._pending&&(s.parentNode._pending[t.key]=null),y&&(en(s,h),en(s,c)),w.cancelled?(y&&en(s,l),f&&f(s)):(e(),p&&p(s)),s._leaveCb=null}));g?g(k):k()}function k(){w.cancelled||(!t.data.show&&s.parentNode&&((s.parentNode._pending||(s.parentNode._pending={}))[t.key]=t),d&&d(s),y&&(tn(s,l),tn(s,c),Xi((function(){en(s,l),w.cancelled||(tn(s,h),_||(un(b)?setTimeout(w,b):sn(s,r,w)))}))),m&&m(s,w),y||_||w())}}function un(t){return"number"==typeof t&&!isNaN(t)}function cn(t){if(a(t))return!1;var e=t.fns;return o(e)?cn(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function dn(t,e){!0!==e.data.show&&ln(e)}var mn=function(t){var e,s,i={},n=t.modules,r=t.nodeOps;for(e=0;e<si.length;++e)for(i[si[e]]=[],s=0;s<n.length;++s)o(n[s][si[e]])&&i[si[e]].push(n[s][si[e]]);function u(t){var e=r.parentNode(t);o(e)&&r.removeChild(e,t)}function c(t,e,s,n,a,h,u){if(o(t.elm)&&o(h)&&(t=h[u]=yt(t)),t.isRootInsert=!a,!function(t,e,s,n){var r=t.data;if(o(r)){var a=o(t.componentInstance)&&r.keepAlive;if(o(r=r.hook)&&o(r=r.init)&&r(t,!1),o(t.componentInstance))return d(t,e),m(s,t.elm,n),l(a)&&function(t,e,s,n){for(var r,a=t;a.componentInstance;)if(o(r=(a=a.componentInstance._vnode).data)&&o(r=r.transition)){for(r=0;r<i.activate.length;++r)i.activate[r](ei,a);e.push(a);break}m(s,t.elm,n)}(t,e,s,n),!0}}(t,e,s,n)){var c=t.data,f=t.children,g=t.tag;o(g)?(t.elm=t.ns?r.createElementNS(t.ns,g):r.createElement(g,t),A(t),p(t,f,e),o(c)&&v(t,e),m(s,t.elm,n)):l(t.isComment)?(t.elm=r.createComment(t.text),m(s,t.elm,n)):(t.elm=r.createTextNode(t.text),m(s,t.elm,n))}}function d(t,e){o(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,f(t)?(v(t,e),A(t)):(ti(t),e.push(t))}function m(t,e,s){o(t)&&(o(s)?r.parentNode(s)===t&&r.insertBefore(t,e,s):r.appendChild(t,e))}function p(t,e,s){if(Array.isArray(e))for(var i=0;i<e.length;++i)c(e[i],s,t.elm,null,!0,e,i);else h(t.text)&&r.appendChild(t.elm,r.createTextNode(String(t.text)))}function f(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return o(t.tag)}function v(t,s){for(var n=0;n<i.create.length;++n)i.create[n](ei,t);o(e=t.data.hook)&&(o(e.create)&&e.create(ei,t),o(e.insert)&&s.push(t))}function A(t){var e;if(o(e=t.fnScopeId))r.setStyleScope(t.elm,e);else for(var s=t;s;)o(e=s.context)&&o(e=e.$options._scopeId)&&r.setStyleScope(t.elm,e),s=s.parent;o(e=ts)&&e!==t.context&&e!==t.fnContext&&o(e=e.$options._scopeId)&&r.setStyleScope(t.elm,e)}function y(t,e,s,i,n,r){for(;i<=n;++i)c(s[i],r,t,e,!1,s,i)}function _(t){var e,s,n=t.data;if(o(n))for(o(e=n.hook)&&o(e=e.destroy)&&e(t),e=0;e<i.destroy.length;++e)i.destroy[e](t);if(o(e=t.children))for(s=0;s<t.children.length;++s)_(t.children[s])}function b(t,e,s){for(;e<=s;++e){var i=t[e];o(i)&&(o(i.tag)?(w(i),_(i)):u(i.elm))}}function w(t,e){if(o(e)||o(t.data)){var s,n=i.remove.length+1;for(o(e)?e.listeners+=n:e=function(t,e){function s(){0==--s.listeners&&u(t)}return s.listeners=e,s}(t.elm,n),o(s=t.componentInstance)&&o(s=s._vnode)&&o(s.data)&&w(s,e),s=0;s<i.remove.length;++s)i.remove[s](t,e);o(s=t.data.hook)&&o(s=s.remove)?s(t,e):e()}else u(t.elm)}function k(t,e,s,i){for(var n=s;n<i;n++){var r=e[n];if(o(r)&&ii(t,r))return n}}function x(t,e,s,n,h,u){if(t!==e){o(e.elm)&&o(n)&&(e=n[h]=yt(e));var d=e.elm=t.elm;if(l(t.isAsyncPlaceholder))o(e.asyncFactory.resolved)?O(t.elm,e,s):e.isAsyncPlaceholder=!0;else if(l(e.isStatic)&&l(t.isStatic)&&e.key===t.key&&(l(e.isCloned)||l(e.isOnce)))e.componentInstance=t.componentInstance;else{var m,p=e.data;o(p)&&o(m=p.hook)&&o(m=m.prepatch)&&m(t,e);var v=t.children,g=e.children;if(o(p)&&f(e)){for(m=0;m<i.update.length;++m)i.update[m](t,e);o(m=p.hook)&&o(m=m.update)&&m(t,e)}a(e.text)?o(v)&&o(g)?v!==g&&function(t,e,s,i,n){for(var l,h,u,d=0,m=0,p=e.length-1,f=e[0],v=e[p],g=s.length-1,A=s[0],_=s[g],w=!n;d<=p&&m<=g;)a(f)?f=e[++d]:a(v)?v=e[--p]:ii(f,A)?(x(f,A,i,s,m),f=e[++d],A=s[++m]):ii(v,_)?(x(v,_,i,s,g),v=e[--p],_=s[--g]):ii(f,_)?(x(f,_,i,s,g),w&&r.insertBefore(t,f.elm,r.nextSibling(v.elm)),f=e[++d],_=s[--g]):ii(v,A)?(x(v,A,i,s,m),w&&r.insertBefore(t,v.elm,f.elm),v=e[--p],A=s[++m]):(a(l)&&(l=ni(e,d,p)),a(h=o(A.key)?l[A.key]:k(A,e,d,p))?c(A,i,t,f.elm,!1,s,m):ii(u=e[h],A)?(x(u,A,i,s,m),e[h]=void 0,w&&r.insertBefore(t,u.elm,f.elm)):c(A,i,t,f.elm,!1,s,m),A=s[++m]);d>p?y(t,a(s[g+1])?null:s[g+1].elm,s,m,g,i):m>g&&b(e,d,p)}(d,v,g,s,u):o(g)?(o(t.text)&&r.setTextContent(d,""),y(d,null,g,0,g.length-1,s)):o(v)?b(v,0,v.length-1):o(t.text)&&r.setTextContent(d,""):t.text!==e.text&&r.setTextContent(d,e.text),o(p)&&o(m=p.hook)&&o(m=m.postpatch)&&m(t,e)}}}function C(t,e,s){if(l(s)&&o(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var S=g("attrs,class,staticClass,staticStyle,key");function O(t,e,s,i){var n,r=e.tag,a=e.data,h=e.children;if(i=i||a&&a.pre,e.elm=t,l(e.isComment)&&o(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(o(a)&&(o(n=a.hook)&&o(n=n.init)&&n(e,!0),o(n=e.componentInstance)))return d(e,s),!0;if(o(r)){if(o(h))if(t.hasChildNodes())if(o(n=a)&&o(n=n.domProps)&&o(n=n.innerHTML)){if(n!==t.innerHTML)return!1}else{for(var u=!0,c=t.firstChild,m=0;m<h.length;m++){if(!c||!O(c,h[m],s,i)){u=!1;break}c=c.nextSibling}if(!u||c)return!1}else p(e,h,s);if(o(a)){var f=!1;for(var g in a)if(!S(g)){f=!0,v(e,s);break}!f&&a.class&&re(a.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,s,n){if(!a(e)){var h,u=!1,d=[];if(a(t))u=!0,c(e,d);else{var m=o(t.nodeType);if(!m&&ii(t,e))x(t,e,d,null,null,n);else{if(m){if(1===t.nodeType&&t.hasAttribute(R)&&(t.removeAttribute(R),s=!0),l(s)&&O(t,e,d))return C(e,d,!0),t;h=t,t=new ft(r.tagName(h).toLowerCase(),{},[],void 0,h)}var p=t.elm,v=r.parentNode(p);if(c(e,d,p._leaveCb?null:v,r.nextSibling(p)),o(e.parent))for(var g=e.parent,A=f(e);g;){for(var y=0;y<i.destroy.length;++y)i.destroy[y](g);if(g.elm=e.elm,A){for(var w=0;w<i.create.length;++w)i.create[w](ei,g);var k=g.data.hook.insert;if(k.merged)for(var S=1;S<k.fns.length;S++)k.fns[S]()}else ti(g);g=g.parent}o(v)?b([t],0,0):o(t.tag)&&_(t)}}return C(e,d,u),e.elm}o(t)&&_(t)}}({nodeOps:Qs,modules:[fi,Ai,Ci,Zi,$i,H?{create:dn,activate:dn,remove:function(t,e){!0!==t.data.show?hn(t,e):e()}}:{}].concat(ci)});K&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&bn(t,"input")}));var pn={inserted:function(t,e,s,i){"select"===s.tag?(i.elm&&!i.elm._vOptions?ue(s,"postpatch",(function(){pn.componentUpdated(t,e,s)})):fn(t,e,s.context),t._vOptions=[].map.call(t.options,An)):("textarea"===s.tag||Ks(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",yn),t.addEventListener("compositionend",_n),t.addEventListener("change",_n),K&&(t.vmodel=!0)))},componentUpdated:function(t,e,s){if("select"===s.tag){fn(t,e,s.context);var i=t._vOptions,n=t._vOptions=[].map.call(t.options,An);n.some((function(t,e){return!N(t,i[e])}))&&(t.multiple?e.value.some((function(t){return gn(t,n)})):e.value!==e.oldValue&&gn(e.value,n))&&bn(t,"change")}}};function fn(t,e,s){vn(t,e),(Y||Q)&&setTimeout((function(){vn(t,e)}),0)}function vn(t,e,s){var i=e.value,n=t.multiple;if(!n||Array.isArray(i)){for(var r,a,o=0,l=t.options.length;o<l;o++)if(a=t.options[o],n)r=j(i,An(a))>-1,a.selected!==r&&(a.selected=r);else if(N(An(a),i))return void(t.selectedIndex!==o&&(t.selectedIndex=o));n||(t.selectedIndex=-1)}}function gn(t,e){return e.every((function(e){return!N(e,t)}))}function An(t){return"_value"in t?t._value:t.value}function yn(t){t.target.composing=!0}function _n(t){t.target.composing&&(t.target.composing=!1,bn(t.target,"input"))}function bn(t,e){var s=document.createEvent("HTMLEvents");s.initEvent(e,!0,!0),t.dispatchEvent(s)}function wn(t){return!t.componentInstance||t.data&&t.data.transition?t:wn(t.componentInstance._vnode)}var kn={model:pn,show:{bind:function(t,e,s){var i=e.value,n=(s=wn(s)).data&&s.data.transition,r=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&n?(s.data.show=!0,ln(s,(function(){t.style.display=r}))):t.style.display=i?r:"none"},update:function(t,e,s){var i=e.value;!i!=!e.oldValue&&((s=wn(s)).data&&s.data.transition?(s.data.show=!0,i?ln(s,(function(){t.style.display=t.__vOriginalDisplay})):hn(s,(function(){t.style.display="none"}))):t.style.display=i?t.__vOriginalDisplay:"none")},unbind:function(t,e,s,i,n){n||(t.style.display=t.__vOriginalDisplay)}}},xn={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Cn(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Cn(ze(e.children)):t}function Sn(t){var e={},s=t.$options;for(var i in s.propsData)e[i]=t[i];var n=s._parentListeners;for(var r in n)e[x(r)]=n[r];return e}function On(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var Zn=function(t){return t.tag||Ae(t)},In=function(t){return"show"===t.name},Pn={name:"transition",props:xn,abstract:!0,render:function(t){var e=this,s=this.$slots.default;if(s&&(s=s.filter(Zn)).length){var i=this.mode,n=s[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return n;var r=Cn(n);if(!r)return n;if(this._leaving)return On(t,n);var a="__transition-"+this._uid+"-";r.key=null==r.key?r.isComment?a+"comment":a+r.tag:h(r.key)?0===String(r.key).indexOf(a)?r.key:a+r.key:r.key;var o=(r.data||(r.data={})).transition=Sn(this),l=this._vnode,u=Cn(l);if(r.data.directives&&r.data.directives.some(In)&&(r.data.show=!0),u&&u.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(r,u)&&!Ae(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var c=u.data.transition=P({},o);if("out-in"===i)return this._leaving=!0,ue(c,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),On(t,n);if("in-out"===i){if(Ae(r))return l;var d,m=function(){d()};ue(o,"afterEnter",m),ue(o,"enterCancelled",m),ue(c,"delayLeave",(function(t){d=t}))}}return n}}},Tn=P({tag:String,moveClass:String},xn);function En(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Mn(t){t.data.newPos=t.elm.getBoundingClientRect()}function Ln(t){var e=t.data.pos,s=t.data.newPos,i=e.left-s.left,n=e.top-s.top;if(i||n){t.data.moved=!0;var r=t.elm.style;r.transform=r.WebkitTransform="translate("+i+"px,"+n+"px)",r.transitionDuration="0s"}}delete Tn.mode;var Nn={Transition:Pn,TransitionGroup:{props:Tn,beforeMount:function(){var t=this,e=this._update;this._update=function(s,i){var n=es(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,n(),e.call(t,s,i)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",s=Object.create(null),i=this.prevChildren=this.children,n=this.$slots.default||[],r=this.children=[],a=Sn(this),o=0;o<n.length;o++){var l=n[o];l.tag&&null!=l.key&&0!==String(l.key).indexOf("__vlist")&&(r.push(l),s[l.key]=l,(l.data||(l.data={})).transition=a)}if(i){for(var h=[],u=[],c=0;c<i.length;c++){var d=i[c];d.data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),s[d.key]?h.push(d):u.push(d)}this.kept=t(e,null,h),this.removed=u}return t(e,null,r)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(En),t.forEach(Mn),t.forEach(Ln),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var s=t.elm,i=s.style;tn(s,e),i.transform=i.WebkitTransform=i.transitionDuration="",s.addEventListener(zi,s._moveCb=function t(i){i&&i.target!==s||i&&!/transform$/.test(i.propertyName)||(s.removeEventListener(zi,t),s._moveCb=null,en(s,e))})}})))},methods:{hasMove:function(t,e){if(!Gi)return!1;if(this._hasMove)return this._hasMove;var s=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){qi(s,t)})),Ui(s,e),s.style.display="none",this.$el.appendChild(s);var i=rn(s);return this.$el.removeChild(s),this._hasMove=i.hasTransform}}}};Os.config.mustUseProp=function(t,e,s){return"value"===s&&Ns(t)&&"button"!==e||"selected"===s&&"option"===t||"checked"===s&&"input"===t||"muted"===s&&"video"===t},Os.config.isReservedTag=zs,Os.config.isReservedAttr=Ls,Os.config.getTagNamespace=function(t){return Js(t)?"svg":"math"===t?"math":void 0},Os.config.isUnknownElement=function(t){if(!H)return!0;if(zs(t))return!1;if(t=t.toLowerCase(),null!=Ys[t])return Ys[t];var e=document.createElement(t);return t.indexOf("-")>-1?Ys[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Ys[t]=/HTMLUnknownElement/.test(e.toString())},P(Os.options.directives,kn),P(Os.options.components,Nn),Os.prototype.__patch__=H?mn:E,Os.prototype.$mount=function(t,e){return function(t,e,s){var i;return t.$el=e,t.$options.render||(t.$options.render=gt),rs(t,"beforeMount"),i=function(){t._update(t._render(),s)},new gs(t,i,E,{before:function(){t._isMounted&&!t._isDestroyed&&rs(t,"beforeUpdate")}},!0),s=!1,null==t.$vnode&&(t._isMounted=!0,rs(t,"mounted")),t}(this,t=t&&H?function(t){return"string"==typeof t?document.querySelector(t)||document.createElement("div"):t}(t):void 0,e)},H&&setTimeout((function(){U.devtools&&rt&&rt.emit("init",Os)}),0);const jn=Os;var Dn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"full",on:{"!mouseover":function(e){return e.stopPropagation(),t.itemOut.apply(null,arguments)}}},[s("devconsole"),t._v(" "),s("topbar",{on:{"open-settings":function(e){t.togSettings=!0}}},[s("template",{slot:"center"},[t.state?t._e():s("span",{staticClass:"load-message"},[t._v("LOADING DATA...")]),t._v(" "),t.state?s("dots",{attrs:{dots:t.state.player.dots}}):t._e()],1)],2),t._v(" "),s("itempopup"),t._v(" "),s("warn",{ref:"warn",on:{confirmed:t.onConfirmed}}),t._v(" "),s("choice"),t._v(" "),t.Profile.CLOUD&&t.togRegister?s("register",{on:{close:function(e){t.togRegister=!1}}}):t._e(),t._v(" "),t.Profile.CLOUD&&t.showLogin?s("login",{on:{close:function(e){t.showLogin=!1}}}):t._e(),t._v(" "),t.togSettings?s("settings",{on:{"close-settings":function(e){t.togSettings=!1}}}):t._e(),t._v(" "),t.togActivities?s("activities",{on:{close:function(e){t.togActivities=!1}}}):t._e(),t._v(" "),t.state?s("div",{staticClass:"game-main"},[s("resources",{attrs:{items:t.state.resources}}),t._v(" "),s("vue-menu",{staticClass:"game-mid",attrs:{items:t.menuItems},model:{value:t.section,callback:function(e){t.section=e},expression:"section"}},[s("template",{slot:"sect_main"},[s("tasks",{staticClass:"main-tasks"})],1),t._v(" "),s("template",{slot:"sect_skills"},[s("skills",{attrs:{state:t.state}})],1),t._v(" "),s("template",{slot:"sect_player"},[s("player")],1),t._v(" "),s("template",{slot:"sect_home"},[s("home",{attrs:{state:t.state}})],1),t._v(" "),s("template",{slot:"sect_raid"},[s("adventure",{attrs:{state:t.state}})],1),t._v(" "),s("template",{slot:"sect_equip"},[s("div",{staticClass:"inv-equip"},[s("equip",{attrs:{equip:t.state.equip}}),t._v(" "),s("inventory",{attrs:{inv:t.state.inventory}})],1)]),t._v(" "),s("template",{slot:"sect_spells"},[s("spells")],1),t._v(" "),s("template",{slot:"sect_scraft"},[s("scraft")],1),t._v(" "),s("template",{slot:"sect_potions"},[s("potions")],1),t._v(" "),s("template",{slot:"sect_bestiary"},[s("bestiary")],1),t._v(" "),s("template",{slot:"sect_minions"},[s("minions",{attrs:{minions:t.state.minions}})],1),t._v(" "),s("template",{slot:"sect_enchant"},[s("enchanting")],1)],2),t._v(" "),s("vitals",{attrs:{state:t.state}}),t._v(" "),s("log")],1):t._e(),t._v(" "),t.state?s("quickbar",{staticClass:"bot-bar",attrs:{bars:t.state.bars}}):t._e()],1)};Dn._withStripped=!0;var Rn=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"menu"},[s("div",{staticClass:"menu-items"},t._l(t.items,(function(e){return s("div",{key:e.id,staticClass:"menu-item"},[e!=t.value?s("span",{key:t.itemTitle(e),on:{click:function(s){return t.setActive(e)}}},[s("u",[t._v(" "+t._s(t.itemTitle(e))+" ")])]):s("span",{key:t.itemTitle(e)},[t._v(" "+t._s(t.itemTitle(e))+" ")])])})),0),t._v(" "),s("span",{staticClass:"menu-content"},[t._t(t.itemId(t.value))],2)])};Rn._withStripped=!0;const $n={props:["value","items"],methods:{itemTitle:t=>t instanceof Object?t.name||t.desc||t.id:t,itemId:t=>t instanceof Object?t.id:t,setActive(t){this.$emit("input",t),this.$emit("changed",t)}}};var Bn=n(3379),Un=n.n(Bn),qn=n(7795),Fn=n.n(qn),Vn=n(569),Gn=n.n(Vn),Hn=n(3565),Wn=n.n(Hn),Jn=n(9216),zn=n.n(Jn),Yn=n(4589),Kn=n.n(Yn),Qn=n(7876),Xn={};Xn.styleTagTransform=Kn(),Xn.setAttributes=Wn(),Xn.insert=Gn().bind(null,"head"),Xn.domAPI=Fn(),Xn.insertStyleElement=zn(),Un()(Qn.Z,Xn),Qn.Z&&Qn.Z.locals&&Qn.Z.locals;var tr=n(1900),er=(0,tr.Z)($n,Rn,[],!1,null,"636f3856",null);er.options.__file="src/ui/components/menu.vue";const sr=er.exports;var ir=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"res-list"},[s("div",{staticClass:"config"},[s("button",{ref:"btnHides",staticClass:"btnConfig"})]),t._v(" "),t._l(t.groups,(function(e,i){return s("group",{key:i,staticClass:"res-group",attrs:{items:e,group:i,hide:t.hide}})}))],2)};ir._withStripped=!0;var nr=n(5046),rr=n(9899),ar=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.shown.length>0?s("div",[s("div",{staticClass:"groupTitle separate",on:{click:function(e){t.isOpen=!t.isOpen}}},[s("span",[t._v(t._s(t.group))]),s("span",{staticClass:"arrows"},[t._v(t._s(t.isOpen?"▼":"▲"))])]),t._v(" "),t.isOpen?s("div",t._l(t.shown,(function(e){return s("div",{key:e.id,staticClass:"rsrc separate hidable",attrs:{"data-key":e.id},on:{"!mouseenter":function(s){return s.stopPropagation(),t.itemOver(s,e)}}},[s("span",{staticClass:"item-name"},[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"num-align"},[t._v(t._s(Math.floor(e.value)+(e.max&&e.max.value>0?"/"+Math.floor(e.max.value):"")))])])})),0):t._e()]):t._e()};ar._withStripped=!0;var or=n(9736);const lr={props:["items","group","hide"],mixins:[or.Z],data:()=>({isOpen:!0}),computed:{shown(){let t=[],e=this.items.length;for(let s=0;s<e;s++){let e=this.items[s];this.reslocked(e)||this.hide[e.id]||t.push(e)}return t}}};var hr=n(9417),ur={};ur.styleTagTransform=Kn(),ur.setAttributes=Wn(),ur.insert=Gn().bind(null,"head"),ur.domAPI=Fn(),ur.insertStyleElement=zn(),Un()(hr.Z,ur),hr.Z&&hr.Z.locals&&hr.Z.locals;var cr=(0,tr.Z)(lr,ar,[],!1,null,"05eb1bc6",null);cr.options.__file="src/ui/panes/itemGroup.vue";const dr=cr.exports,mr={props:["items"],mixins:[nr.Z],data(){let t=rr.Z.getSubVars("resview");return t.hide||(t.hide={}),{groups:null,hide:t.hide}},components:{group:dr},created(){let t,e=this.items,s={other:[]},i=e.length;for(let n=0;n<i;n++){let i=e[n];if(i.hide)continue;let r=i.group||(i.tags?i.tags[0]:"other");"manas"!==r&&(t=s[r]||(s[r]=[]),t.push(i))}this.groups=s}};var pr=n(3090),fr={};fr.styleTagTransform=Kn(),fr.setAttributes=Wn(),fr.insert=Gn().bind(null,"head"),fr.domAPI=Fn(),fr.insertStyleElement=zn(),Un()(pr.Z,fr),pr.Z&&pr.Z.locals&&pr.Z.locals;var vr=(0,tr.Z)(mr,ir,[],!1,null,"1090363f",null);vr.options.__file="src/ui/panes/resources.vue";const gr=vr.exports;var Ar=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"hidables",staticClass:"main-tasks"},[s("div",{staticClass:"config"},[s("button",{ref:"btnHides",staticClass:"btnConfig"})]),t._v(" "),0!=t.visActs.length?s("div",{staticClass:"div-hs"},[t._v("Actions")]):t._e(),t._v(" "),s("upgrades",{staticClass:"task-list",attrs:{items:t.visActs}}),t._v(" "),0!=t.visRuns.length?s("div",{staticClass:"div-hs"},[t._v("Tasks")]):t._e(),t._v(" "),s("upgrades",{staticClass:"task-list",attrs:{items:t.visRuns}}),t._v(" "),0!=t.ups.length?s("div",{staticClass:"div-hs"},[t._v("Upgrades")]):t._e(),t._v(" "),s("upgrades",{staticClass:"upgrade-list",attrs:{items:t.ups}}),t._v(" "),0!=t.classes.length?s("div",{staticClass:"div-hs"},[t._v("Classes")]):t._e(),t._v(" "),s("upgrades",{staticClass:"upgrade-list",attrs:{items:t.classes}})],1)};Ar._withStripped=!0;var yr=n(9475);const _r={mixins:[or.Z,nr.Z],components:{upgrades:yr.Z},data(){let t=rr.Z.getSubVars("main");return t.hide||(t.hide={}),{hide:t.hide}},computed:{tasks:()=>t.ZP.state.tasks.filter((t=>!t.perpetual&&!t.length)),runnables:()=>t.ZP.state.tasks.filter((t=>t.perpetual||t.length>0)),visActs(){return this.tasks.filter((t=>this.show(t)))},visRuns(){return this.runnables.filter((t=>this.show(t)))},ups(){return t.ZP.state.upgrades.filter((t=>!this.locked(t)&&this.show(t)))},classes(){return t.ZP.state.classes.filter((t=>!this.locked(t)&&this.show(t)))}}};var br=n(864),wr={};wr.styleTagTransform=Kn(),wr.setAttributes=Wn(),wr.insert=Gn().bind(null,"head"),wr.domAPI=Fn(),wr.insertStyleElement=zn(),Un()(br.Z,wr),br.Z&&br.Z.locals&&br.Z.locals;var kr=(0,tr.Z)(_r,Ar,[],!1,null,"0e3bfebf",null);kr.options.__file="src/ui/sections/tasks.vue";const xr=kr.exports;var Cr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.hasItems?s("div",{staticClass:"quickbar"},t._l(t.slots,(function(e,i){return s("div",{key:i,staticClass:"quickslot"},[null!=e.item?s("div",{class:e.item.school?e.item.school:"",on:{click:function(s){return t.emit("quickslot",e)},"!mouseenter":function(s){return s.stopPropagation(),t.itemOver(s,e.item||e)}}},[s("div",[t._v(t._s(t.abbr(e)))]),t._v(" "),s("div",{staticClass:"remove",on:{click:function(e){return t.bar.clear(i)}}}),t._v(" "),e.item.school?s("div",{staticClass:"bgfill"},[t._v(" ")]):t._e()]):s("div",[t._v(t._s(9!=i?i+1:0))])])})),0):s("div",{staticClass:"quickbar"},[t._m(0)])};Cr._withStripped=!0;const Sr={props:["bars"],methods:{abbr:n(5720).GU},computed:{bar(){return this.bars.active},slots(){return this.bar.slots},hasItems(){return this.slots.some((t=>null!=t.item))}}};var Or=n(4469),Zr={};Zr.styleTagTransform=Kn(),Zr.setAttributes=Wn(),Zr.insert=Gn().bind(null,"head"),Zr.domAPI=Fn(),Zr.insertStyleElement=zn(),Un()(Or.Z,Zr),Or.Z&&Or.Z.locals&&Or.Z.locals;var Ir=(0,tr.Z)(Sr,Cr,[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"use-msg"},[t._v("\n\t\tRoll-over Item and hold {Shift} + {Number} to assign quickslot."),s("br"),t._v("\n\t\tPress {Number} again to use quickslot Item.\n\t")])}],!1,null,"3473ec58",null);Ir.options.__file="src/ui/quickbar.vue";const Pr=Ir.exports;var Tr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"vitals"},[s("running",{attrs:{runner:t.state.runner}}),t._v(" "),s("div",{staticClass:"config"},[s("button",{ref:"btnHides",staticClass:"btnConfig"})]),t._v(" "),s("div",{staticClass:"statbars"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.show(t.stamina),expression:"show(stamina)"}],staticClass:"hidable statbar",attrs:{"data-key":"stamina"}},[s("span",{staticClass:"name"},[t._v("stamina")]),s("span",{staticClass:"barspan"},[s("progbar",{staticClass:"stamina",attrs:{value:t.stamina.valueOf(),max:t.stamina.max.value},nativeOn:{"!mouseenter":function(e){return e.stopPropagation(),t.itemOver(e,t.stamina)}}})],1)]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.show(t.hp),expression:"show(hp)"}],staticClass:"hidable statbar",attrs:{"data-key":"hp"}},[s("span",{staticClass:"name"},[t._v("life")]),s("span",{staticClass:"barspan"},[s("progbar",{staticClass:"hp",attrs:{value:t.hp.valueOf(),max:t.hp.max.value},nativeOn:{"!mouseenter":function(e){return e.stopPropagation(),t.itemOver(e,t.hp)}}})],1)]),t._v(" "),t._l(t.visMana,(function(e){return s("div",{key:e.key,staticClass:"hidable statbar",attrs:{"data-key":e.id}},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),s("span",{staticClass:"barspan"},[s("progbar",{class:e.id,attrs:{value:e.valueOf(),max:e.max.value,color:e.color},nativeOn:{"!mouseenter":function(s){return s.stopPropagation(),t.itemOver(s,e)}}})],1)])}))],2)],1)};Tr._withStripped=!0;var Er=n(2475),Mr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"separate"},[s("button",{staticClass:"btn-sm",on:{click:function(e){return t.emit(t.STOP_ALL)}}},[t._v("Stop All")]),t._v(" "),s("button",{staticClass:"btn-sm",attrs:{disabled:t.resting},on:{click:function(e){return t.emit(t.TASK,t.restAction)},"!mouseenter":function(e){return e.stopPropagation(),t.itemOver(e,t.restAction)}}},[t._v(t._s(t.restAction.name.toTitleCase()))]),t._v(" "),t.focus.locked?t._e():s("button",{staticClass:"btn-sm",attrs:{disabled:!t.focus.canUse(t.game)},on:{"!mouseenter":function(e){return e.stopPropagation(),t.itemOver(e,t.focus)},click:function(e){return t.emit(t.TASK,t.focus)},mousedown:function(e){return t.emit("repeater",t.focus)}}},[t._v("Focus")]),t._v(" "),s("button",{staticClass:"btnMenu",on:{click:function(e){return t.emit("showActivities")}}})]),t._v(" "),s("div",{staticClass:"running"},t._l(t.runner.actives,(function(e){return s("div",{key:e.id,staticClass:"relative"},[s("button",{staticClass:"stop",on:{click:function(s){return t.halt(e)}}},[t._v(" X ")]),s("span",[t._v(t._s(t.taskStr(e)))]),"skill"===e.type?s("span",[t._v(t._s(t.levelStr(e)))]):t._e(),t._v(" "),t.runner.canPursuit(e)?s("button",{class:["pursuit",t.pursuits.includes(t.runner.baseTask(e))?"current":""],on:{click:function(s){return t.runner.togglePursuit(e)}}},[t._v(" F ")]):t._e()])})),0)])};Mr._withStripped=!0;var Lr=n(9188);const Nr={props:["runner"],created(){this.game=t.ZP,this.STOP_ALL=e.T4,this.TASK=Lr.Cs},computed:{focus:()=>t.ZP.state.getData("focus"),restAction:()=>t.ZP.state.restAction,resting(){return this.restAction.running},pursuits:()=>t.ZP.state.getData(Lr.QU)},methods:{taskStr:t=>(t.verb||t.name.toTitleCase())+(t.length?" "+Math.floor(t.percent())+"%":""),levelStr:t=>" ("+Math.floor(t.valueOf())+"/"+Math.floor(t.max.valueOf())+")",halt(t){this.emit(e.ST,t)}}};var jr=n(8349),Dr={};Dr.styleTagTransform=Kn(),Dr.setAttributes=Wn(),Dr.insert=Gn().bind(null,"head"),Dr.domAPI=Fn(),Dr.insertStyleElement=zn(),Un()(jr.Z,Dr),jr.Z&&jr.Z.locals&&jr.Z.locals;var Rr=(0,tr.Z)(Nr,Mr,[],!1,null,"d3356d4e",null);Rr.options.__file="src/ui/panes/running.vue";const $r=Rr.exports,Br={props:["state"],mixins:[or.Z,nr.Z],components:{progbar:Er.Z,running:$r},data(){let t=rr.Z.getSubVars("vitals");return t.hide||(t.hide={}),{hide:t.hide}},computed:{hp(){return this.state.getData("hp")},manaList(){return this.state.filterItems((t=>(t.hasTag("manas")||t.hasTag("Mana energies"))&&!t.locked))},visMana(){return this.manaList.filter((t=>this.show(t)))},stamina(){return this.state.getData("stamina")}}};var Ur=n(7664),qr={};qr.styleTagTransform=Kn(),qr.setAttributes=Wn(),qr.insert=Gn().bind(null,"head"),qr.domAPI=Fn(),qr.insertStyleElement=zn(),Un()(Ur.Z,qr),Ur.Z&&Ur.Z.locals&&Ur.Z.locals;var Fr=(0,tr.Z)(Br,Tr,[],!1,null,"e232ef86",null);Fr.options.__file="src/ui/panes/vitals.vue";const Vr=Fr.exports;var Gr=n(9450),Hr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"top-bar"},[s("span",{staticClass:"load-opts"},[t.Profile.CLOUD?s("login"):t._e(),t._v(" "),s("button",{on:{click:function(e){return t.dispatch("save")}}},[t._v("Save")]),t._v(" "),s("button",{on:{click:function(e){return t.dispatch("load")}}},[t._v("Load")]),t._v(" "),s("div",{staticClass:"text-button"},[s("a",{attrs:{href:"",type:"text/json"},on:{click:function(e){return e.target!==e.currentTarget?null:t.dispatch("save-file",e)}}},[t._v("Get Save")])]),t._v(" "),t.hasHall?s("div",{staticClass:"text-button"},[s("a",{attrs:{href:"",type:"text/json"},on:{click:function(e){return e.target!==e.currentTarget?null:t.dispatch("hall-file",e)}}},[t._v("Hall Save")])]):t._e(),t._v(" "),s("button",{attrs:{id:"drop-file",name:"[Load Save]"},on:{click:function(e){return t.$refs.fileInput.click()},drop:t.fileDrop,dragover:t.fileDrag,"!dragleave":function(e){return e.stopPropagation(),t.dragOut.apply(null,arguments)}}},[t._v("[Load Save]")]),t._v(" "),s("input",{ref:"fileInput",attrs:{type:"file",accept:"text/json text/*"},on:{change:t.fileSelect}}),t._v(" "),s("confirm",{on:{confirm:function(e){return t.dispatch("reset")}}},[t._v("Wipe Wizard")])],1),t._v(" "),s("span",{staticClass:"items"},[t._t("center")],2),t._v(" "),s("span",{staticClass:"link-bar"},[s("a",{attrs:{href:"https://discord.gg/bCABC96",target:"_blank"}},[t._v("Discord")]),t._v(" "),s("a",{attrs:{href:"http://wiki.lerpinglemur.com/dhrune",target:"_blank"}},[t._v("Wiki")]),t._v(" "),s("a",{attrs:{href:"https://www.reddit.com/r/wizrobe/",target:"_blank"}},[t._v("Reddit")]),t._v(" "),s("span",{staticClass:"vers"},[t._v("Version: "+t._s(t.VERSION))]),t._v(" "),s("button",{staticClass:"text-button",on:{click:function(e){return t.$emit("open-settings")}}},[t._v("⚙")])])])};Hr._withStripped=!0;var Wr=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.active.loggedIn?s("span",[s("button",{attrs:{type:"button"},on:{click:function(e){return t.dispatch("logout")}}},[t._v("Logout")])]):s("span",[s("button",{attrs:{type:"button"},on:{click:function(e){return t.dispatch("show-login")}}},[t._v("Login")])])};Wr._withStripped=!0;const Jr={data:()=>({active:s.Z.active})};var zr=(0,tr.Z)(Jr,Wr,[],!1,null,null,null);zr.options.__file="src/ui/components/loginStatus.vue";const Yr={computed:{hasHall:()=>s.Z.hasHall(),VERSION:()=>"pseudo_stable 0.10.4"},created(){this.Profile=s.Z},components:{login:zr.exports},methods:{fileSelect(t){t.stopPropagation(),t.preventDefault(),this.dispatch("load-file",t.target.files)},fileDrop(t){t.stopPropagation(),t.preventDefault(),t.target.classList.remove("hilite");const e=t.dataTransfer;this.dispatch("load-file",e.files)},fileDrag(t){t.stopPropagation(),t.preventDefault(),t.currentTarget.classList.add("hilite")},dragOut(t){t.stopPropagation(),t.preventDefault(),t.currentTarget.classList.remove("hilite")}}};var Kr=n(4549),Qr={};Qr.styleTagTransform=Kn(),Qr.setAttributes=Wn(),Qr.insert=Gn().bind(null,"head"),Qr.domAPI=Fn(),Qr.insertStyleElement=zn(),Un()(Kr.Z,Qr),Kr.Z&&Kr.Z.locals&&Kr.Z.locals;var Xr=(0,tr.Z)(Yr,Hr,[],!1,null,"5e8f13b9",null);Xr.options.__file="src/ui/top-bar.vue";const ta=Xr.exports;var ea=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.item?s("div",{staticClass:"popup"},["string"==typeof t.item?s("div",[s("div",[t._v(t._s(t.item))]),t._v(" "),s("div",[t._v(t._s(t.msg))])]):s("div",[s("div",{staticClass:"log-title"},[t._v(t._s(t.item.name.toString().toTitleCase()))]),t._v(" "),s("div",[t._v(t._s(t.item.desc))]),t._v(" "),s("div",[t._v(t._s(t.msg))]),t._v(" "),s("div",{staticClass:"skip"},[s("label",{attrs:{for:t.elmId("nowarn")}},[t._v("Skip Warning")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.nowarn,expression:"nowarn"}],attrs:{type:"checkbox",id:t.elmId("nowarn")},domProps:{checked:Array.isArray(t.nowarn)?t._i(t.nowarn,null)>-1:t.nowarn},on:{change:function(e){var s=t.nowarn,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=t._i(s,null);i.checked?r<0&&(t.nowarn=s.concat([null])):r>-1&&(t.nowarn=s.slice(0,r).concat(s.slice(r+1)))}else t.nowarn=n}}})])]),t._v(" "),s("div",[s("button",{on:{click:t.confirm}},[t._v("Confirm")]),t._v(" "),s("button",{on:{click:t.cancel}},[t._v("Cancel")])])]):t._e()};ea._withStripped=!0;var sa=n(1825);const ia="This action is not reversible. Continue?",na={data:()=>({item:null,cb:null,nowarn:!1}),updated(){this.item&&(0,sa.iL)(this.$el)},computed:{msg(){return"string"==typeof this.item?ia:this.item.warnMsg||ia}},methods:{show(t,e=null){this.item=t,this.cb=e,this.nowarn=!1},confirm(){let t=this.item,e=this.cb,s=this.nowarn;this.item=null,this.cb=null,this.nowarn=!1,t&&this.$emit("confirmed",t,s),e&&e()},cancel(){this.cb=null,this.nowarn=!1,this.item=null}}};var ra=n(2574),aa={};aa.styleTagTransform=Kn(),aa.setAttributes=Wn(),aa.insert=Gn().bind(null,"head"),aa.domAPI=Fn(),aa.insertStyleElement=zn(),Un()(ra.Z,aa),ra.Z&&ra.Z.locals&&ra.Z.locals;var oa=(0,tr.Z)(na,ea,[],!1,null,"1f1201ec",null);oa.options.__file="src/ui/popups/warn.vue";const la=oa.exports;var ha=n(976),ua=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:["settings","popup"]},[s("div",[s("label",{attrs:{for:t.elmId("dark-mode")}},[t._v("Dark Mode")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.darkMode,expression:"darkMode"}],attrs:{type:"checkbox",id:t.elmId("dark-mode")},domProps:{checked:Array.isArray(t.darkMode)?t._i(t.darkMode,null)>-1:t.darkMode},on:{change:function(e){var s=t.darkMode,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=t._i(s,null);i.checked?r<0&&(t.darkMode=s.concat([null])):r>-1&&(t.darkMode=s.slice(0,r).concat(s.slice(r+1)))}else t.darkMode=n}}})]),t._v(" "),s("div",[s("label",{attrs:{for:t.elmId("compact-mode")}},[t._v("Compact Mode")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.compactMode,expression:"compactMode"}],attrs:{type:"checkbox",id:t.elmId("compact-mode")},domProps:{checked:Array.isArray(t.compactMode)?t._i(t.compactMode,null)>-1:t.compactMode},on:{change:function(e){var s=t.compactMode,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=t._i(s,null);i.checked?r<0&&(t.compactMode=s.concat([null])):r>-1&&(t.compactMode=s.slice(0,r).concat(s.slice(r+1)))}else t.compactMode=n}}})]),t._v(" "),s("div",[s("label",{attrs:{for:t.elmId("auto-save"),title:"Periodically save current game."}},[t._v("Auto-Save")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.autosave,expression:"autosave"}],attrs:{type:"checkbox",id:t.elmId("auto-save")},domProps:{checked:Array.isArray(t.autosave)?t._i(t.autosave,null)>-1:t.autosave},on:{change:function(e){var s=t.autosave,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=t._i(s,null);i.checked?r<0&&(t.autosave=s.concat([null])):r>-1&&(t.autosave=s.slice(0,r).concat(s.slice(r+1)))}else t.autosave=n}}}),t._v(" "),s("h6",[t._v("Periodically save game to storage. Game is saved to Browser storage by default. Only saved to Remote storage if logged in and server is available.")])]),t._v(" "),s("div",[s("label",{attrs:{for:t.elmId("remote-first"),title:"Attempt to load saves from Remote Storage before Local Storage."}},[t._v("Try Remote Load First")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.remoteFirst,expression:"remoteFirst"}],attrs:{type:"checkbox",id:t.elmId("remote-first")},domProps:{checked:Array.isArray(t.remoteFirst)?t._i(t.remoteFirst,null)>-1:t.remoteFirst},on:{change:function(e){var s=t.remoteFirst,i=e.target,n=!!i.checked;if(Array.isArray(s)){var r=t._i(s,null);i.checked?r<0&&(t.remoteFirst=s.concat([null])):r>-1&&(t.remoteFirst=s.slice(0,r).concat(s.slice(r+1)))}else t.remoteFirst=n}}}),t._v(" "),s("h6",[t._v("Attempt to load game from Remote host before loading from browser Storage.")])]),t._v(" "),s("button",{staticClass:"close",on:{click:t.close}},[t._v("Close")])])};ua._withStripped=!0;const ca={data(){let t=rr.Z.vars;return{sCompactMode:t.compactMode,sDarkMode:t.darkMode,saves:Object.assign({},rr.Z.getSubVars("saves"))}},updated(){(0,sa.iL)(this.$el)},created(){for(let t in rr.Z.vars)this.dispatch("setting",t,rr.Z.vars[t])},methods:{clear(){},close(){this.dispatch("save-settings"),this.$emit("close-settings")}},computed:{compactMode:{get(){return this.sCompactMode},set(t){rr.Z.set("compactMode",t),this.sCompactMode=t,this.dispatch("setting","compactMode",t)}},remoteFirst:{get(){return this.saves.remoteFirst},set(t){this.saves.remoteFirst=rr.Z.setSubVar("saves","remoteFirst",t),this.dispatch("setting","remoteFirst",t)}},autosave:{get(){return this.saves.autosave},set(t){this.saves.autoSave=rr.Z.setSubVar("saves","autosave",t),this.dispatch("setting","autosave",t)}},darkMode:{get(){return this.sDarkMode},set(t){rr.Z.set("darkMode",t),this.sDarkMode=t,this.dispatch("setting","darkMode",t)}}}};var da=n(6728),ma={};ma.styleTagTransform=Kn(),ma.setAttributes=Wn(),ma.insert=Gn().bind(null,"head"),ma.domAPI=Fn(),ma.insertStyleElement=zn(),Un()(da.Z,ma),da.Z&&da.Z.locals&&da.Z.locals;var pa=(0,tr.Z)(ca,ua,[],!1,null,"2acc7e09",null);pa.options.__file="src/ui/popups/settings.vue";const fa=pa.exports;var va=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"log-view"},[s("div",{staticClass:"top-span"},[s("button",{staticClass:"inline btn-sm",attrs:{type:"button"},on:{click:t.clearLog}},[t._v("Clear")]),t._v(" "),s("span",{staticClass:"checks"},t._l(t.LogTypes,(function(e,i){return s("span",{key:i},[s("input",{attrs:{type:"checkbox",id:t.elmId(i)},domProps:{value:e,checked:t.filter&e},on:{change:function(e){return t.changed(e.target)}}}),t._v(" "),s("label",{attrs:{for:t.elmId(i)}},[t._v(t._s(i.toString().toTitleCase()))])])})),0),t._v(" "),t.showOptions?s("div",{staticClass:"options"}):t._e()]),t._v(" "),s("div",{staticClass:"outlog"},t._l(t.visItems,(function(e,i){return s("div",{key:i,staticClass:"log-item"},[s("div",[e.title?s("span",{staticClass:"log-title item-name"},[t._v(t._s(e.title))]):t._e()]),t._v(" "),s("span",{staticClass:"log-text"},[t._v(t._s(e.text))]),t._v(" "),e.count>1?s("span",{staticClass:"num-align"},[t._v("(x"+t._s(e.count)+")")]):t._e()])})),0)])};va._withStripped=!0;const ga={data(){var s=0;for(let t in e.v9)s|=e.v9[t];return{log:t.ZP.log,LogTypes:e.v9,filter:s,showOptions:!1}},methods:{changed(t){t.checked?this.filter=this.filter|t.value:this.filter=~t.value&this.filter},doOptions(){this.showOptions=!this.showOptions},clearLog(){this.log.clear()}},computed:{visItems(){let t=this.log.items,e=[];for(let i=t.length-1;i>=0;i--){var s=t[i];(!s.type||(this.filter&s.type)>0)&&e.push(s)}return e}}};var Aa=n(3718),ya={};ya.styleTagTransform=Kn(),ya.setAttributes=Wn(),ya.insert=Gn().bind(null,"head"),ya.domAPI=Fn(),ya.insertStyleElement=zn(),Un()(Aa.Z,ya),Aa.Z&&Aa.Z.locals&&Aa.Z.locals;var _a=(0,tr.Z)(ga,va,[],!1,null,"c9d4ddf0",null);_a.options.__file="src/ui/outlog.vue";const ba=_a.exports;var wa=n(4945);const ka="all";class xa{get resources(){return this.game.state.resources}get state(){return this.game.state}get items(){return this.game.state.items}constructor(t){this.game=window.game=t,window.debug=this}max(t,e){this.addmax(t,e)}addmax(t,e){if(t!==ka&&"*"!==t)this.unlock(t),this.state.addMax(t,e);else for(let t in this.items)this.addmax(t,e)}ids(t){if(t){var e=this.state[t];return e?e.map((t=>t.id)).join(", "):"no such list"}{let t=[];for(let e in this.items)t.push(e);return t.join(", ")}}apply(t,e){if(t===ka||"*"===t)for(let t in this.items)e(this.items[t]);else{let s=this.state.getData(t);if(s)return e(s),!0}return!1}emptyall(){for(let t in this.items){let e=this.items[t];e&&"function"==typeof e.amount&&e.amount(-e.value)}}empty(t){this.apply(t,(t=>{"function"==typeof t.amount&&t.amount(-t.value)}))}removeall(){for(let t in this.items){let e=this.items[t];e&&e instanceof wa.Z&&this.game.remove(e,Number(e.value))}}remove(t,e){return this.apply(t,(t=>{this.game.remove(t,Number(e))}))}fillall(){let t=this.resources;for(let s in t){var e=t[s];e.locked||this.game.fillItem(e)}}fill(t){return this.apply(t,(t=>{t.locked=!1,this.game.fillItem(t)}))}addall(t){this.getall(t)}add(t,e){return this.get(t,e)}getall(t){let e=this.resources;for(let i in e){var s=e[i];!s.locked&&s instanceof wa.Z&&this.get(s.id,t)}}get(t,e){if(!isNaN(t)){let s=t;t=e,e=s}if(!t)return;if(t===ka||"*"===t)return void this.getall(e);let s=this.state.getData(t);if(!s)return;if(s.isRecipe)return s.locked=!1,s.disabled=!1,void this.game.create(s,!0);let i=s.value+e;i>s.max&&(s.max=i),s.amount(Number(e)||1)}lock(t){return this.apply(t,(t=>this.game.lock(t)))}unlockall(){for(let t in this.items)this.unlock(t)}unlock(t){return this.apply(t,(t=>{try{t.locked=!1}catch(t){return!1}return!0}))}}var Ca;{const e={b:"herbs",g:"gold",s:"scrolls",e:"exp",t:"stamina",h:"hp",k:"sp",m:"mana",c:"codices",a:"arcana",r:"research",w:"wizardhall"};Ca={created(){this.debug=window.debug||new xa(t.ZP),window.addEventListener("keydown",(t=>{t.repeat||this.cheatKey(t)}),!1),this.enabled=!1,this.code="bodias",this.input=""},methods:{cheatKey(t){if(!this.interval)return;let s=document.activeElement;if(s&&"input"===s.tagName.toLowerCase())return;let i=t.key.toLowerCase();if(!this.enabled)return void this.testUnlock(i);let n=e[i];"p"===i?(this.state.getData("runner").autoProgress(),t.stopPropagation()):"f"===i?(this.debug.fillall(),t.stopPropagation()):n&&(t.shiftKey?this.state.addMax(n):this.debug.doFill(n),t.stopPropagation())},testUnlock(t){this.input+=t,this.input===this.code?(console.warn("CHEATS ON"),this.enabled=!0):this.input.length>=this.code.length&&(this.input=this.input.slice(1+this.input.length-this.code.length))}}}}const Sa=Ca;var Oa=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.open?s("input",{ref:"cmdInput",attrs:{type:"text"},on:{keydown:t.onpress}}):t._e()};Oa._withStripped=!0;class Za{constructor(t){this.context=t,this.history=[],this.hIndex=-1}prevLine(){return++this.hIndex>=this.history.length&&(this.hIndex=this.history.length-1),this.hIndex>=0?this.history[this.hIndex]:""}nextLine(){return--this.hIndex<0?this.hIndex=-1:this.hIndex>=this.history.length&&(this.hIndex=this.history.length-1),this.hIndex>=0?this.history[this.hIndex]:""}parse(t){if(null==t)return!1;this.history.unshift(t),this.history.length>=100&&this.history.pop(),this.hIndex=-1;let e=(t=t.toLowerCase()).split(" ");console.log(this.exec(e,t))}exec(t,e=""){var s=this.context;let i=t.length;for(let a=0;a<i;a++){var n=t[a];if(null==n)return"Invalid Command: "+e;var r=this.getValue(n,s);if(null==r)return"Not found: "+e;if("function"==typeof r)return this.callFunc(s,r,t.slice(a+1));if("object"!=typeof r)return r;s=r}return r}callFunc(t,e,s){return e.apply(t,s?s.map(this.getValue,this):null)}getValue(t,e=this.context){if(!isNaN(t))return Number(t);let s=t.split("."),i=s.length;for(let r=0;r<i;r++){var n=e[s[r]];if(void 0===n)return t;if("object"!=typeof n)return n;e=n}return e}}const Ia={data:()=>({open:!1}),created(){window.game=t.ZP;let e=window.debug||new xa(t.ZP);this.cmdLine=new Za(e),window.addEventListener("keydown",this.onkey)},updated(){this.$refs.cmdInput&&this.$refs.cmdInput.focus()},methods:{toggleView(){this.open=!this.open},onkey(t){192!==t.keyCode&&222!==t.keyCode||(this.toggleView(),t.preventDefault())},doCmd(t){this.cmdLine.parse(t)},onpress(t){if(38===t.keyCode)this.$refs.cmdInput.value=this.cmdLine.prevLine();else if(40===t.keyCode)this.$refs.cmdInput.value=this.cmdLine.nextLine();else if(13===t.keyCode){let e=t.target.value;t.target.value="",this.doCmd(e)}}}};var Pa=(0,tr.Z)(Ia,Oa,[],!1,null,null,null);Pa.options.__file="src/debug/devconsole.vue";const Ta=Pa.exports;n(2466);const Ea={mixins:[or.Z,Sa],components:{devconsole:Ta,resources:gr,tasks:xr,itempopup:ha.ZP,vitals:Vr,log:ba,quickbar:Pr,dots:Gr.Z,warn:la,topbar:ta,settings:fa,login:()=>Promise.all([n.e(14),n.e(797)]).then(n.bind(n,7907)),register:()=>Promise.all([n.e(14),n.e(797)]).then(n.bind(n,5359)),activities:()=>n.e(811).then(n.bind(n,1861)),choice:()=>n.e(811).then(n.bind(n,5181)),skills:()=>n.e(765).then(n.bind(n,7120)),equip:()=>n.e(971).then(n.bind(n,6271)),inventory:()=>n.e(767).then(n.bind(n,6962)),potions:()=>n.e(902).then(n.bind(n,7420)),home:()=>n.e(841).then(n.bind(n,4545)),player:()=>n.e(812).then(n.bind(n,1832)),bestiary:()=>n.e(215).then(n.bind(n,597)),spells:()=>n.e(532).then(n.bind(n,8242)),adventure:()=>n.e(225).then(n.bind(n,2280)),enchanting:()=>n.e(887).then(n.bind(n,4158)),minions:()=>n.e(125).then(n.bind(n,8996)),scraft:()=>n.e(123).then(n.bind(n,4943)),"vue-menu":sr},data:()=>({state:null,psection:null,togRegister:!1,showLogin:!1,togSettings:!1,togActivities:!1}),beforeCreate(){this.loopId=0,this.repeaterId=0,this.repeatEndFunc=null},created(){this.Profile=s.Z,this.listen("game-loaded",this.gameLoaded),this.listen("setting",this.onSetting),this.listen("pause",this.pause),this.listen("unpause",this.unpause),this.listen("show-register",this.onShowRegister,this),this.listen("show-login",this.onShowLogin,this)},beforeDestroy(){(0,ha.DG)(),this.endRepeater(),this.removeListener("game-loaded",this.gameLoaded),this.removeListener("setting",this.onSetting),this.removeListener("pause",this.pause),this.removeListener("unpause",this.unpause),this.removeListener("show-register",this.onShowRegister),this.removeListener("show-login",this.onShowLogin)},methods:{gameLoaded(){this.state=t.ZP.state;let e=rr.Z.get("curview")||"sect_main";this.section=this.state.sections.find((t=>t.id===e)),this.initEvents()},initEvents(){this.add("sell",this.onSell),this.add("take",this.onTake),this.add("upgrade",this.onItem),this.add(Lr.Cs,this.onItem),this.add("spell",this.onItem),this.add("equip",this.onEquip),this.add("unequip",this.onUnequip),this.add("enchant",this.onEnchant),this.add("craft",this.onCraft),this.add("warn",this.onWarn),this.add("showActivities",(()=>{this.togActivities=!0})),this.add("repeater",this.makeRepeater,this),this.add("endrepeater",this.endRepeater,this),this.add(e.Nn,this.tryUse),this.add(e.Ut,this.onUse),this.add("quickslot",this.doQuickslot),this.add(e.H7,this.onBuy),this.dispatch(e.o,"titles",this.state.player.titles.length),this.dispatch(e.o,"level",this.state.getData("level").valueOf()),this.dispatch(e.o,"prestige",this.state.getData("prestige").valueOf())},onSetting(t,e){"autosave"===t&&(e?this.startAutoSave():this.stopAutoSave())},onShowLogin(){this.showLogin=!0},onShowRegister(){this.togRegister=!0},stopAutoSave(){if(this.saver){let t=this.saver;this.saver=null,clearInterval(t)}},startAutoSave(){this.loopId&&(rr.Z.get("autosave"),this.saver||(this.saver=setInterval((()=>this.dispatch("autosave")),3e4)))},pause(){if(this.loopId){let t=this.loopId;this.loopId=0,clearInterval(t)}this.stopAutoSave(),this.endRepeater(),this.keyListen&&window.removeEventListener("keydown",this.keyListen,!1)},makeRepeater(e){this.repeaterId&&(clearInterval(this.repeaterId),this.repeaterId=0),this.repeaterId=setInterval((e=>t.ZP.tryItem(e)),50,e),this.repeatEndFunc||(this.repeatEndFunc=()=>this.endRepeater()),document.addEventListener("mouseup",this.repeatEndFunc)},endRepeater(){this.repeaterId&&(clearInterval(this.repeaterId),this.repeaterId=0),this.repeatEndFunc&&(document.removeEventListener("mouseup",this.repeatEndFunc),this.repeatEndFunc=null)},unpause(){t.ZP.loaded&&(t.ZP.lastUpdate=Date.now(),this.loopId||(this.loopId=setInterval((()=>t.ZP.update()),t.$)),this.keyListen=t=>{t.repeat||(this.keyDown(t),t.stopPropagation())},window.addEventListener("keydown",this.keyListen,!1),this.startAutoSave())},keyDown(t){if(!this.loopId)return;let e=t.code.slice(0,-1);if("Digit"===e||"Numpad"===e){let e=Number(t.code.slice(-1));if(t.shiftKey&&ha.Rw.item)ha.Rw.item,this.state.setQuickSlot(ha.Rw.item,e);else{let t=this.state.getQuickSlot(e);t&&this.doQuickslot(t)}}},doQuickslot(e){t.ZP.tryItem(e.slotTarget(t.ZP))},onEquip(e,s){t.ZP.equip(e,s)},onUnequip(e,s){t.ZP.unequip(e,s)},onTake(e){t.ZP.take(e)},onCraft(e){t.ZP.craft(e)},onUse(e,s){t.ZP.use(e,s)},onEnchant(e,s){t.ZP.tryUseOn(e,s)},onSell(e,s,i){t.ZP.trySell(e,s,i)},itemOut:ha.DG,onItem(e){e.warn?this.$refs.warn.show(e):t.ZP.tryItem(e)},onConfirmed(e,s){"string"!=typeof e&&(e.warn=!s,t.ZP.tryItem(e))},onWarn(t,e){this.$refs.warn.show(t,e)},tryUse(e){t.ZP.tryItem(e)},onBuy(e){t.ZP.tryBuy(e)}},computed:{section:{get(){return this.psection},set(t){this.psection=t,t&&rr.Z.set("curview",t.id)}},menuItems(){return this.state.sections.filter((t=>!this.locked(t)))}}};var Ma=n(9974),La={};La.styleTagTransform=Kn(),La.setAttributes=Wn(),La.insert=Gn().bind(null,"head"),La.domAPI=Fn(),La.insertStyleElement=zn(),Un()(Ma.Z,La),Ma.Z&&Ma.Z.locals&&Ma.Z.locals;var Na=(0,tr.Z)(Ea,Dn,[],!1,null,"6f034aea",null);Na.options.__file="src/ui/main.vue";const ja=Na.exports;var Da=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.confirming?s("span",{staticClass:"my-span"},[s("button",{attrs:{type:"button"},on:{click:t.confirmClick}},[t._v(t._s(t.btnConfirm))]),t._v(" "),s("button",{attrs:{type:"button"},on:{click:t.cancelClick}},[t._v(t._s(t.btnCancel))])]):s("span",{staticClass:"my-span"},[s("button",{attrs:{type:"button"},on:{click:t.mainClick}},[t._t("default",(function(){return[t._v("Delete")]}))],2)])};Da._withStripped=!0;const Ra={props:["confirm","cancel"],data(){return{btnConfirm:this.confirm||"Confirm",btnCancel:this.cancel||"Cancel",confirming:!1}},methods:{reset(){this.confirming=!1},mainClick(){this.confirming=!0,this.$emit("click")},confirmClick(){this.confirming=!1,this.$emit("confirm")},cancelClick(){this.confirming=!1,this.$emit("cancel")}}};var $a=n(6638),Ba={};Ba.styleTagTransform=Kn(),Ba.setAttributes=Wn(),Ba.insert=Gn().bind(null,"head"),Ba.domAPI=Fn(),Ba.insertStyleElement=zn(),Un()($a.Z,Ba),$a.Z&&$a.Z.locals&&$a.Z.locals;var Ua=(0,tr.Z)(Ra,Da,[],!1,null,"193f0119",null);Ua.options.__file="src/ui/components/confirm.vue";const qa=Ua.exports;jn.mixin({components:{confirm:qa},methods:{listen:e.ZP.listen,dispatch:e.ZP.dispatch,removeListener:e.ZP.removeListener,itemOver:ha.dh,emit:e.ZP.emit,add:e.ZP.add,elmId(t){return t+this._uid}}}),new jn({el:"#vueRoot",components:{Main:ja},data:()=>({active:s.Z.active,renderKey:1}),created(){this.saveLink=null,this.game=t.ZP,this.listen("save-file",this.saveFile,this),this.listen("hall-file",this.hallFile,this),this.listen("load-file",this.loadFile,this),this.listen("load",this.loadSave,this),this.listen("reset",this.reset,this),this.listen("resetHall",this.resetHall,this),this.listen("stat",this.doStat,this),this.listen("save-settings",s.Z.saveSettings,s.Z),this.listen("set-char",this.setChar,this),this.listen("dismiss-char",this.dismissChar,this),this.listen("save",this.manualSave,this),this.listen("autosave",this.save,this),this.listen("setting",this.onSetting,this),this.listen("logout",this.logout,this),this.listen("login-changed",this.onLoginChanged,this),this.loadHall()},methods:{onLoginChanged(t){console.log("LOGGED IN: "+t),s.Z.loggedIn=t,t&&this.loadHall("remote")},logout(){s.Z.logout()},tryLogin(t,e){},loadHall(t=null){console.log("loading hall type: "+t),this.dispatch("pause"),s.Z.loadHall(t).then((()=>this.loadSave()))},doStat(t,e){window.kong&&window.kong.stats.submit(t,e)},setChar(t){s.Z.setActive(t,this.game.state),this.loadSave()},dismissChar(t){s.Z.dismiss(t)},async loadSave(){try{this.dispatch("pause");let t=await s.Z.loadActive();this.setStateJSON(t)}catch(t){console.error(t.message+"\n"+t.stack)}},gameLoaded(t){t||console.warn("gameloaded(): NULL"),this.settingsLoaded(s.Z.loadSettings()),this.dispatch("game-loaded"),console.log("Begin player id: "+t.state.pid),s.Z.gameLoaded(t),this.dispatch("unpause")},settingsLoaded(t){t&&(this.onSetting("darkMode",t.darkMode),this.onSetting("compactMode",t.compactMode))},onSetting(t,e){"darkMode"===t?e?document.body.classList.add("darkmode"):document.body.classList.remove("darkmode"):"compactMode"===t?e?document.body.classList.add("compact"):document.body.classList.remove("compact"):"remoteFirst"===t&&(s.Z.remoteFirst=!0)},saveFile(t){if(t)try{t.preventDefault();let e=this.game.state;this.makeLink(e,e.player.name)}catch(t){console.error(t.message+"\n"+t.stack)}},async hallFile(t){if(t){this.save();try{t.preventDefault(),this.hallLink&&URL.revokeObjectURL(this.hallLink);let e=await s.Z.getHallSave();this.makeLink(e,"hall")}catch(t){console.error(t.message+"\n"+t.stack)}}},makeLink(t,e){this.saveLink&&URL.revokeObjectURL(this.saveLink);let s=JSON.stringify(t),i=new Blob([s],{type:"text/json;charset=utf-8"});var n=document.createElement("a");n.download=n.title=e+".json",this.saveLink=URL.createObjectURL(i),n.href=this.saveLink,n.click()},loadFile(t){const e=t[0];if(!e)return;this.dispatch("pause");const s=new FileReader;s.onload=t=>{try{let e=JSON.parse(t.target.result);"hall"===e.type?this.setHallJSON(e):this.setStateJSON(e)}catch(t){console.error(t.message+"\n"+t.stack)}},s.readAsText(e)},async setHallJSON(t){await s.Z.setHallSave(t),this.loadHall()},setStateJSON(t=null){try{this.renderKey++,this.game.load(t,s.Z.getHallItems()).then(this.gameLoaded,(t=>console.error(t.message+"\n"+t.stack)))}catch(t){console.error(t.message+"\n"+t.stack)}},manualSave(){this.save()},async save(){if(!this.game.loaded)return;console.log("Saving...");let t=await s.Z.saveActive(this.game.state);console.log("Saving Hall..: "+t),t?s.Z.saveHall():(console.warn("ERR ON SAVE. NO SAVE."),alert("ERR ON SAVE. NO SAVE."))},reset(){this.dispatch("pause"),s.Z.clearActive(),this.setStateJSON(null)},async resetHall(){this.dispatch("pause"),await s.Z.clearAll(),this.loadHall()}},render(t){return t(ja,{key:this.renderKey})}})})(),wizrobe=r})();
//# sourceMappingURL=wizrobe.js.map