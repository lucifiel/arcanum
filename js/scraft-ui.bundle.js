"use strict";(self.webpackChunk_name_=self.webpackChunk_name_||[]).push([[123],{1363:(t,e,n)=>{n.d(e,{Z:()=>i});var s=n(4015),l=n.n(s),a=n(3645),r=n.n(a)()(l());r.push([t.id,"\ndiv.spellcraft[data-v-622e812c] {\n\tdisplay:flex;\n\tflex-direction: column;\n}\ndiv.spellcraft .userspells[data-v-622e812c] {\n\tdisplay:flex;\n\tflex-direction: column;\n\tpadding: var(--md-gap);\n\tborder-bottom: 1pt solid var( --separator-color );\n}\ndiv.userspells .spells[data-v-622e812c] {\n\tdisplay:flex;\n\tflex-flow: row wrap;\n}\ndiv.spells .custom[data-v-622e812c] {\n\tmargin-right:1.2rem;\n}\n.crafting .options[data-v-622e812c] {\n\tpadding-bottom: var(--tiny-gap);\n}\ndiv.spellcraft .bottom[data-v-622e812c] {\n\tdisplay:flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tpadding-top:var(--md-gap);\n\tpadding-left:var(--md-gap);\n}\ndiv.spellcraft .crafting[data-v-622e812c], div.spellcraft .allspells[data-v-622e812c] {\n\tdisplay:flex;\n\tflex-direction: column;\n}\n\n","",{version:3,sources:["webpack://./src/ui/sections/scraft.vue"],names:[],mappings:";AA8LA;CACA,YAAA;CACA,sBAAA;AACA;AAEA;CACA,YAAA;CACA,sBAAA;CACA,sBAAA;CACA,iDAAA;AACA;AAEA;CACA,YAAA;CACA,mBAAA;AACA;AAEA;CACA,mBAAA;AACA;AAEA;CACA,+BAAA;AACA;AAEA;CACA,YAAA;CACA,mBAAA;CACA,8BAAA;CACA,yBAAA;CACA,0BAAA;AACA;AAEA;CACA,YAAA;CACA,sBAAA;AACA",sourcesContent:['<script>\nimport ItemBase from \'../itemsBase\';\n\nimport {spellCost} from \'modules/craft\';\nimport Game from \'../../game\';\nimport { alphasort } from \'../../util/util\';\n\nexport default {\n\n\tmixins:[ItemBase],\n\tdata(){\n\n\t\treturn {\n\n\t\t\tuserSpells:Game.state.userSpells,\n\n\t\t\t/**\n\t\t\t * List of spells in current crafting.\n\t\t\t */\n\t\t\tlist:[],\n\n\t\t\t/**\n\t\t\t * Craft info object.\n\t\t\t */\n\t\t\tcraft:{\n\n\t\t\t\tname:\'Crafted Spell\',\n\t\t\t\tlevel:0,\n\t\t\t\tbuy:null\n\t\t\t}\n\n\t\t};\n\n\t},\n\tmethods:{\n\n\t\t/**\n\t\t * Remove user spell from UserSpells\n\t\t */\n\t\tremoveSpell(s){\n\t\t\tthis.userSpells.remove(s);\n\t\t},\n\n\t\tcanAdd(s) {\n\t\t\treturn s.level + this.craft.level <= this.maxLevels;\n\t\t},\n\n\t\t/**\n\t\t * @function create - create the new spell combination.\n\t\t */\n\t\tcreate() {\n\n\t\t\tif (!this.list || this.list.length === 0 ) return;\n\n\t\t\tGame.payCost( this.craft.buy );\n\n\t\t\tthis.userSpells.create( this.list, Game.state, this.craft.name );\n\t\t\tthis.list = [];\n\n\t\t\tthis.craft.level = 0;\n\t\t\tthis.craft.buy = null;\n\n\t\t},\n\n\t\t/**\n\t\t * Add spell to the current crafting group.\n\t\t * Crafted level = list total levels + list.length - 1\n\t\t */\n\t\tadd(s) {\n\n\t\t\tthis.list.push(s);\n\t\t\tthis.craft.level += s.level;\n\n\t\t\tthis.craft.buy = spellCost( this.list );\n\n\t\t},\n\n\t\t/**\n\t\t * Remove spell from building list.\n\t\t */\n\t\tremoveAt(i) {\n\n\t\t\tlet s = this.list[i];\n\n\t\t\tif ( s ) {\n\t\t\t\tthis.craft.level -= s.level;\n\t\t\t}\n\n\t\t\tthis.list.splice(i,1);\n\t\t\tthis.craft.buy = spellCost( this.list );\n\n\t\t}\n\n\t},\n\tcomputed:{\n\n\t\t/**\n\t\t * Determine if the group being created can be crafted.\n\t\t * cost+length + user slots available.\n\t\t * @returns {boolean}\n\t\t */\n\t\tcanCraft() {\n\n\t\t\treturn !this.userSpells.full() && this.list.length>0\n\t\t\t\t&& Game.canPay( this.craft.buy );\n\n\t\t},\n\n\t\t/**\n\t\t * @property {Spell[]} spells - all spells in game, except bloodshot.\n\t\t */\n\t\tspells() {\n\t\t\treturn Game.state.filterItems( v=>v.type === \'spell\'&&!this.locked(v)&&v.owned&&v.id!=\'bloodshot\').sort( alphasort );\n\t\t},\n\n\t\t/**\n\t\t * Spellcraft power.\n\t\t */\n\t\tscraft(){\n\t\t\treturn Game.state.getData(\'scraft\');\n\t\t},\n\n\t\tmaxLevels() {\n\t\t\treturn Math.floor( this.scraft.valueOf() );\n\t\t}\n\n\t}\n\n}\n\n<\/script>\n\n<template>\n\n<div class="spellcraft">\n\n<div class="userspells">\n\n\t<div>\n\t\tCustom Spells: {{ Math.floor( userSpells.used) + \' / \' + Math.floor( userSpells.max.value ) }}\n\t</div>\n\t<div class="spells">\n\t<div class="custom" v-for="c in userSpells.items" :key="c.id" @mouseenter.capture.stop="itemOver($event,c)">\n\t\t<span class="text-entry">\n\t\t\t<input class="fld-name" type="text" v-model="c.name">\n\t\t</span>\n\t\t<button class="stop" @click="removeSpell(c)">X</button>\n\t</div>\n\t</div>\n\n</div>\n\n<div class="bottom">\n<div class="crafting">\n\n\t<div class="options">\n\t\t<span class="warn-text" v-if="craft.level>=maxLevels">You are at your power limit.</span>\n\n\t\t<div class="text-entry"><label :for="elmId(\'spName\')">Spell</label>\n\t\t<input class="fld-name" :id="elmId(\'spName\')" type="text" v-model="craft.name">\n\t\t</div>\n\n\t\t\x3c!--chrome wrap--\x3e\n\t\t<span @mouseenter.capture.stop="itemOver($event,craft)">\n\t\t<span>Power: {{ craft.level + \' / \' + Math.floor(maxLevels) }}</span>\n\t\t<button @click="create" :disabled="!canCraft">Craft</button>\n\t\t</span>\n\n\t</div>\n\n\t<div v-for="(s,ind) in list" class="separate" :key="ind" @mouseenter.capture.stop="itemOver($event,s)">\n\t\t<span>{{s.name.toTitleCase()}}</span><button class="remove" @click="removeAt(ind)">X</button>\n\t</div>\n\n</div>\n<div class="allspells">\n\n\t<div class="separate" v-for="(s) in spells" :key="s.id"  @mouseenter.capture.stop="itemOver($event,s)">\n\t\t<span>{{s.name.toTitleCase()}}</span><button class="add" @click="add(s)" :disabled="!canAdd(s)">+</button>\n\t</div>\n\n</div>\n</div>\n\n</div>\n\n</template>\n\n<style scoped>\n\ndiv.spellcraft {\n\tdisplay:flex;\n\tflex-direction: column;\n}\n\ndiv.spellcraft .userspells {\n\tdisplay:flex;\n\tflex-direction: column;\n\tpadding: var(--md-gap);\n\tborder-bottom: 1pt solid var( --separator-color );\n}\n\ndiv.userspells .spells {\n\tdisplay:flex;\n\tflex-flow: row wrap;\n}\n\ndiv.spells .custom {\n\tmargin-right:1.2rem;\n}\n\n.crafting .options {\n\tpadding-bottom: var(--tiny-gap);\n}\n\ndiv.spellcraft .bottom {\n\tdisplay:flex;\n\tflex-direction: row;\n\tjustify-content: space-between;\n\tpadding-top:var(--md-gap);\n\tpadding-left:var(--md-gap);\n}\n\ndiv.spellcraft .crafting, div.spellcraft .allspells {\n\tdisplay:flex;\n\tflex-direction: column;\n}\n\n</style>'],sourceRoot:""}]);const i=r},4943:(t,e,n)=>{n.r(e),n.d(e,{default:()=>S});var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spellcraft"},[n("div",{staticClass:"userspells"},[n("div",[t._v("\n\t\tCustom Spells: "+t._s(Math.floor(t.userSpells.used)+" / "+Math.floor(t.userSpells.max.value))+"\n\t")]),t._v(" "),n("div",{staticClass:"spells"},t._l(t.userSpells.items,(function(e){return n("div",{key:e.id,staticClass:"custom",on:{"!mouseenter":function(n){return n.stopPropagation(),t.itemOver(n,e)}}},[n("span",{staticClass:"text-entry"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"c.name"}],staticClass:"fld-name",attrs:{type:"text"},domProps:{value:e.name},on:{input:function(n){n.target.composing||t.$set(e,"name",n.target.value)}}})]),t._v(" "),n("button",{staticClass:"stop",on:{click:function(n){return t.removeSpell(e)}}},[t._v("X")])])})),0)]),t._v(" "),n("div",{staticClass:"bottom"},[n("div",{staticClass:"crafting"},[n("div",{staticClass:"options"},[t.craft.level>=t.maxLevels?n("span",{staticClass:"warn-text"},[t._v("You are at your power limit.")]):t._e(),t._v(" "),n("div",{staticClass:"text-entry"},[n("label",{attrs:{for:t.elmId("spName")}},[t._v("Spell")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.craft.name,expression:"craft.name"}],staticClass:"fld-name",attrs:{id:t.elmId("spName"),type:"text"},domProps:{value:t.craft.name},on:{input:function(e){e.target.composing||t.$set(t.craft,"name",e.target.value)}}})]),t._v(" "),n("span",{on:{"!mouseenter":function(e){return e.stopPropagation(),t.itemOver(e,t.craft)}}},[n("span",[t._v("Power: "+t._s(t.craft.level+" / "+Math.floor(t.maxLevels)))]),t._v(" "),n("button",{attrs:{disabled:!t.canCraft},on:{click:t.create}},[t._v("Craft")])])]),t._v(" "),t._l(t.list,(function(e,s){return n("div",{key:s,staticClass:"separate",on:{"!mouseenter":function(n){return n.stopPropagation(),t.itemOver(n,e)}}},[n("span",[t._v(t._s(e.name.toTitleCase()))]),n("button",{staticClass:"remove",on:{click:function(e){return t.removeAt(s)}}},[t._v("X")])])}))],2),t._v(" "),n("div",{staticClass:"allspells"},t._l(t.spells,(function(e){return n("div",{key:e.id,staticClass:"separate",on:{"!mouseenter":function(n){return n.stopPropagation(),t.itemOver(n,e)}}},[n("span",[t._v(t._s(e.name.toTitleCase()))]),n("button",{staticClass:"add",attrs:{disabled:!t.canAdd(e)},on:{click:function(n){return t.add(e)}}},[t._v("+")])])})),0)])])};s._withStripped=!0;var l=n(9736),a=n(7826),r=n(7112),i=n(6802);const o={mixins:[l.Z],data:()=>({userSpells:r.ZP.state.userSpells,list:[],craft:{name:"Crafted Spell",level:0,buy:null}}),methods:{removeSpell(t){this.userSpells.remove(t)},canAdd(t){return t.level+this.craft.level<=this.maxLevels},create(){this.list&&0!==this.list.length&&(r.ZP.payCost(this.craft.buy),this.userSpells.create(this.list,r.ZP.state,this.craft.name),this.list=[],this.craft.level=0,this.craft.buy=null)},add(t){this.list.push(t),this.craft.level+=t.level,this.craft.buy=(0,a.e3)(this.list)},removeAt(t){let e=this.list[t];e&&(this.craft.level-=e.level),this.list.splice(t,1),this.craft.buy=(0,a.e3)(this.list)}},computed:{canCraft(){return!this.userSpells.full()&&this.list.length>0&&r.ZP.canPay(this.craft.buy)},spells(){return r.ZP.state.filterItems((t=>"spell"===t.type&&!this.locked(t)&&t.owned&&"bloodshot"!=t.id)).sort(i.dy)},scraft:()=>r.ZP.state.getData("scraft"),maxLevels(){return Math.floor(this.scraft.valueOf())}}};var c=n(3379),p=n.n(c),d=n(7795),v=n.n(d),u=n(569),m=n.n(u),f=n(3565),A=n.n(f),h=n(9216),C=n.n(h),g=n(4589),b=n.n(g),y=n(1363),x={};x.styleTagTransform=b(),x.setAttributes=A(),x.insert=m().bind(null,"head"),x.domAPI=v(),x.insertStyleElement=C(),p()(y.Z,x),y.Z&&y.Z.locals&&y.Z.locals;var _=(0,n(1900).Z)(o,s,[],!1,null,"622e812c",null);_.options.__file="src/ui/sections/scraft.vue";const S=_.exports},7826:(t,e,n)=>{n.d(e,{fr:()=>r,e3:()=>o});var s=n(7112),l=n(2572);const a=(t,e,n)=>{if(!s.ZP.state.exists(e))return;let l=t[e];t[e]=l?l+n:n},r=t=>{let e=t.level,n={gold:100*Math.ceil(Math.pow(e,1.7))};return t.kind&&i(t.kind,n,e),t.biome&&i(t.biome,n,e),t.regen&&a(n,"bloodgem",5*(0,l.kR)(e)),n},i=(t,e={},n=1)=>{if(t){t=(0,l.Ku)(t);let s=(0,l.AQ)(t,n);a(e,s,n-(0,l.Lm)(n)+1)}else if(Array.isArray(t))for(let s=t.length-1;s>=0;s--)t[s]&&i(t[s],e,n);return e},o=t=>{var e={};for(let s=t.length-1;s>=0;s--){var n=t[s];e.gold=(e.gold||0)+300*n.level,c(n.school,n.level,e)}return e},c=(t,e=1,n={})=>{if(Array.isArray(t))for(let s=t.length-1;s>=0;s--)c(t[s],e,n);else null!=t&&(a(n,t+"gem",Math.min(e,5)*e),e<=5?a(n,"codices",e):a(n,"tomes",e=5));return n}}}]);
//# sourceMappingURL=scraft-ui.bundle.js.map