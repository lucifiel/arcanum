let AE=function(e){"use strict";return new class{log(e){console.log("ATM: "+e)}}}(window.jQuery);!function(e){"use strict";AE.interval=new class{constructor(){this.intervalFunctions=[],this.intervalFunctionTimers={},this.intervalFunctionRemaining={}}add(e,t,a){let i=this.intervalFunctions.length;this.intervalFunctionRemaining[i]=!0===a?t:0,this.intervalFunctionTimers[i]=t,this.intervalFunctions.push(e)}remove(e){let t=this.intervalFunctions.indexOf(e);-1!==t&&(delete this.intervalFunctionTimers[t],delete this.intervalFunctionRemaining[t],this.intervalFunctions.splice(t,1))}update(e){for(let t=0;t<this.intervalFunctions.length;t++){let a=this.intervalFunctions[t],i=this.intervalFunctionTimers[t];this.intervalFunctionRemaining[t]-=e,this.intervalFunctionRemaining[t]<=0&&(a(i),this.intervalFunctionRemaining[t]=i)}}}}(window.jQuery),function(e){"use strict";AE.utils=new class{processTemplate(e,t){for(let a in t)e=e.split("{{"+a+"}}").join(t[a]);return e}arrayEquals(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(let a=0;a<e.length;++a)if(e[a]!==t[a])return!1;return!0}createOptionsToggle(t,a,i,n){let s=e('<span class="opt"></span>'),o=e('<input id="'+t+'" type="checkbox"><label for="'+t+'">'+a+"</label></input>");return!0===n&&o.prop("checked",!0),s.append(o),o[0].addEventListener("change",(e=>{i(e.target.checked)}),!1),o}}}(window.jQuery),function(e){"use strict";AE.config={enableDebugMode:!1,arcanumAutomationPresent:!1,quickSlotCount:10,quickSlotPresetCount:3,minUpdateInterval:50,uiUpdateInterval:250}}(window.jQuery),function(e){"use strict";AE.data=new class{constructor(){}getTaskGroup(e){for(let t in this.TaskGroups)if(this.TaskGroups[t].includes(e))return t}},AE.data.GameTabs={Main:"main",Skills:"skills",Home:"home",Adventure:"adventure",Player:"player",Spells:"spells",Spellcraft:"spellcraft",Equip:"equip",Bestiary:"bestiary",Enchanting:"enchanting",Potions:"potions"},AE.data.ItemType={Unknown:"unknown",Armor:"armor",Weapon:"weapon",Accessory:"accessory",Consumable:"consumable"},AE.data.ConsumableSubType={Unknown:"unknown",Potion:"potion"},AE.data.WeaponSubType={Unknown:"unknown",Orb:"orb",Sword1H:"sword1h",Sword2H:"sword2h",Mace1H:"mace1h",Mace2H:"mace2h",Axe1H:"axe1h",Axe2H:"axe2h",Dagger:"dagger",Staff:"staff",Spear:"spear"},AE.data.ArmorSubType={Unknown:"unknown",Head:"head",Hands:"hands",Back:"back",Waist:"waist",Chest:"chest",Shins:"shins",Feet:"feet"},AE.data.ItemSlot={WeaponLeft:"left",WeaponRight:"right",Head:"head",Hands:"hands",Back:"back",Waist:"waist",Neck:"neck",Finger:"finger",Chest:"chest",Shins:"shins",Feet:"feet"},AE.data.AccessorySubType={Unknown:"unknown",Ring:"ring",Neck:"neck"},AE.data.Armor={Gloves:{name:"gloves",lvl:1,subType:AE.data.ArmorSubType.Hands},Boots:{name:"boots",lvl:1,subType:AE.data.ArmorSubType.Feet},Greaves:{name:"greaves",lvl:1,subType:AE.data.ArmorSubType.Shins},Hat:{name:"hat",lvl:1,subType:AE.data.ArmorSubType.Head},Cap:{name:"cap",lvl:1,subType:AE.data.ArmorSubType.Head},Helm:{name:"helm",lvl:3,subType:AE.data.ArmorSubType.Head},ConicalHelm:{name:"conical helm",lvl:1,subType:AE.data.ArmorSubType.Head},Jerkin:{name:"jerkin",lvl:2,subType:AE.data.ArmorSubType.Chest},PaddedArmor:{name:"padded armor",lvl:4,subType:AE.data.ArmorSubType.Chest},ChainMail:{name:"chainmail",lvl:5,subType:AE.data.ArmorSubType.Chest},PlateMail:{name:"plate mail",lvl:9,subType:AE.data.ArmorSubType.Chest},Belt:{name:"belt",lvl:1,subType:AE.data.ArmorSubType.Waist},Girdle:{name:"girdle",lvl:1,subType:AE.data.ArmorSubType.Waist},Cincture:{name:"cincture",lvl:1,subType:AE.data.ArmorSubType.Waist},Sash:{name:"sash",lvl:1,subType:AE.data.ArmorSubType.Waist},Cape:{name:"cape",lvl:1,subType:AE.data.ArmorSubType.Back},Robe:{name:"robe",lvl:1,subType:AE.data.ArmorSubType.Back},Cloak:{name:"cloak",lvl:1,subType:AE.data.ArmorSubType.Back},Wings:{name:"wings",lvl:20,subType:AE.data.ArmorSubType.Back}},AE.data.Accessories={Ring:{name:"ring",lvl:5,subType:AE.data.AccessorySubType.Ring},Band:{name:"band",lvl:3,subType:AE.data.AccessorySubType.Ring},Loop:{name:"loop",lvl:1,subType:AE.data.AccessorySubType.Ring},Pendant:{name:"pendant",lvl:1,subType:AE.data.AccessorySubType.Neck},Collar:{name:"collar",lvl:1,subType:AE.data.AccessorySubType.Neck},Amulet:{name:"amulet",lvl:1,subType:AE.data.AccessorySubType.Neck},Necklace:{name:"necklace",lvl:1,subType:AE.data.AccessorySubType.Neck}},AE.data.Weapons={ShortSword:{name:"shortsword",lvl:1,subType:AE.data.WeaponSubType.Sword1H},Club:{name:"club",lvl:0,subType:AE.data.WeaponSubType.Mace1H},Cane:{name:"cane",lvl:1,subType:AE.data.WeaponSubType.Mace1H},Knife:{name:"knife",lvl:0,subType:AE.data.WeaponSubType.Dagger},Staff:{name:"staff",lvl:1,subType:AE.data.WeaponSubType.Staff},BroomStick:{name:"broomstick",lvl:0,subType:AE.data.WeaponSubType.Mace1H},Dagger:{name:"dagger",lvl:1,subType:AE.data.WeaponSubType.Dagger},LongSword:{name:"longsword",lvl:3,subType:AE.data.WeaponSubType.Sword2H},Axe:{name:"axe",lvl:1,subType:AE.data.WeaponSubType.Axe1H},BattleAxe:{name:"battleaxe",lvl:2,subType:AE.data.WeaponSubType.Axe2H},Mace:{name:"mace",lvl:3,subType:AE.data.WeaponSubType.Mace1H},WarHammer:{name:"warhammer",lvl:3,subType:AE.data.WeaponSubType.Mace2H},Spear:{name:"spear",lvl:2,subType:AE.data.WeaponSubType.Spear},HomingDart:{name:"homing dart",lvl:0,subType:AE.data.WeaponSubType.Dagger}},AE.data.SpecialItems={"orb of winters":{type:AE.data.ItemType.Weapon,subType:AE.data.WeaponSubType.Orb},"titan's hammer":{type:AE.data.ItemType.Weapon,subType:AE.data.WeaponSubType.Mace2H}},AE.data.GemImbueTaskIds=["imbuelifegem","imbuemanagem","imbuebloodgem","imbuefiregem","imbueairgem","imbueearthgem","imbuewatergem","imbuelightgem","imbueshadowgem","imbuespiritgem"],AE.data.ClassUpgradeTasks=["apprentice","falconer","herbalist","scribe","neophyte","adept","blueadept","savant","magician","darkmagician","reanimator","witch","trickster","madcap","bonemonger","thanophage","battlemage","bladeweaver","arcanedervish","eldritchknight","spellblade","dreadlord","warlock","bloodmage","summoner","warden","alchemist","enchanter","geomancer","earthshaker","titan","pyromancer","hydromancer","windmage","stormcaller","elementalist","sorcerer","druid","highelemental","oracle","seer","mage","highmage","doomsayer","fey","thaumaturge","necromancer","wizard","wizard2","kell","greynecromancer","archlock","heresiarch","highkell","necro3","deathlock","wizard3","astralseer","c_avatar","leavemaster","slaymaster","puppeteer"],AE.data.TaskGroups={Rest:["rest","slumber","naturecamp","chant","eatchildren"],Gold:["cleanstables","sellscroll","sellherbs","sellgem","pouch","thievery","readpalms","service","spingold","embalm","paidseance","heist","magicadvice","chores","treatailments","errands","prestidigitation","act_mine","purse","restless"],Research:["buyscroll","scribescroll","sublimate","bindcodex","compiletome","pace","act_element","mapstars","grind","study","spellbook","act_garden","act_scry","act_concoct","bestiary","sylvansyllabary","dwarfbook","lemurlexicon","demondict","malleus","fazbitfixate","coporisfabrica","unendingtome","almagest","prism","breviary"],"Bones, Bodies and Evil things":["bloodsiphon","graverob","murder","vileexperiment","dissect","dissect cadaver","grindbones","trapsoul","urn","gathersouls"],Gems:["buygem","gembox","craftgem","gemcraft","terraform","artificialmountain","advgems","gembag"].concat(AE.data.GemImbueTaskIds),Skills:["focus","tendanimals","mythicanvil","geas","sabbat","a_travel","sombercandle","phylactory","animalfriend","summonfamiliar","voidtouch","a_oppress","alkahest","dreamcatcher","windchime","ball","threesidecoin"],Dreams:["dreamweaver","starwish"],Puppeteer:["assemblemachina","assembleautomata","assemblepuppet","futurecouncil","machinalabor","puppetshow","strongstrings","ebonwoodsupply"],Home:["fireplane","airplane","waterplane","earthplane","cellar","clockworkexpansion","innersanctum"],Runes:["up_runecrafter","craftrune","craftfirerune","craftearthrune","craftairrune","craftwaterrune","craftspiritrune"],Misc:["wizardhall","hattrick","craftschematic","indulge","timesiphon","wishingwells","mendicant","siegeperilous"],"Alchemy and Potions":["gatherherbs","alembic","herbbag","crucible","mortar","cauldron"],"Mounts and Travel":["flyingcarpet","mule","oldnag","gelding","bayhorse","firecharger","fly","gryffonmount","firechariot","magicbroomstick","ebonwoodbroomstick","pegasusmount","up_pack","up_ten_map","magichorseshoe","up_map1","tent"],Stats:["crystalmind","arcanebody","occultendure","carddeck","waxcandle","pot","proxies","celerity","puppetspies","fourleaf"],"Combat and Spells":["codexannih","markhulcodex","maketitanhammer","up_lich","proxies2"],Class:AE.data.ClassUpgradeTasks,"‚ùÑ Winter":["meltsnowman","makesnowman","restincottage","winteraward","winterchill","warmpotion","hearthexpansion","icystudy","w_fazbit1","w_fazbit2","w_fazbit3","winterhowl","preparetree","good_sacrifice","w_scholar","w_fame","w_multitask","w_fazbit4"]},AE.data.UpgradeTasks=["pouch","purse","gembox","gemcraft","artificialmountain","mythicanvil","up_runecrafter","wizardhall","winteraward","fireplane","airplane","waterplane","warmpotion","winterchill","advgems","sombercandle","hearthexpansion","flyingcarpet","mule","oldnag","gelding","bayhorse","firecharger","fly","gryffonmount","spellbook","bestiary","codexannih","markhulcodex","sylvansyllabary","dwarfbook","lemurlexicon","demondict","malleus","maketitanhammer","fazbitfixate","coporisfabrica","unendingtome","almagest","phylactory","up_lich","animalfriend","summonfamiliar","icystudy","firechariot","earthplane","voidtouch","w_fazbit1","w_fazbit2","w_fazbit3","magicbroomstick","ebonwoodbroomstick","pegasusmount","winterhowl","preparetree","good_sacrifice","w_scholar","w_fame","w_multitask","w_fazbit4","alkahest","restless","dreamcatcher","herbbag","prism","gembag","up_pack","windchime","urn","ball","crystalmind","arcanebody","occultendure","carddeck","mortar","waxcandle","wishingwells","breviary","pot","strongstrings","proxies","up_ten_map","alembic","crucible","celerity","mendicant","cauldron","cellar","puppetspies","clockworkexpansion","magichorseshoe","up_map1","proxies2","ebonwoodsupply","threesidecoin","tent","siegeperilous","innersanctum","fourleaf"]}(window.jQuery),function(e){"use strict";AE.data.ResourceData={gold:{max:5},research:{max:10},arcana:{max:0},scrolls:{max:10},starcharts:{max:10},tapestries:{max:3,name:"tapestries"},runestones:{max:10,name:"rune stones"},firerune:{max:10,name:"flame runes"},waterrune:{max:10,name:"water runes"},spiritrune:{max:10,name:"spirit runes"},airrune:{max:10,name:"air runes"},earthrune:{max:10,name:"earth runes"},timerune:{max:3,name:"time runes"},bodies:{max:1},bones:{max:10},skulls:{max:5},bonedust:{max:10,name:"bone dust"},souls:{max:1},schematic:{max:3,name:"schematics"},codices:{max:10,name:"codices"},tomes:{max:5,name:"tomes"},gems:{max:5},managem:{max:2,name:"arcane gem"},firegem:{max:2,name:"fire gem"},watergem:{max:2,name:"water gem"},naturegem:{max:2,name:"nature gem"},earthgem:{max:2,name:"earth gem"},airgem:{max:2,name:"air gem"},shadowgem:{max:2,name:"shadow gem"},lightgem:{max:2,name:"light gem"},spiritgem:{max:2,name:"spirit gem"},bloodgem:{max:2,name:"blood gem"},timegem:{max:3},voidgem:{max:3},ichor:{max:5},sindel:{max:3,name:"star shard"},dreams:{max:3},herbs:{max:10},space:{max:0,name:"floor space"},mana:{max:5,name:"mana"},fire:{max:0},air:{max:0},earth:{max:0},water:{max:0},nature:{max:0},shadow:{max:0,name:"shadow"},light:{max:0},spirit:{max:0},tempus:{max:0},chaos:{max:0},void:{max:0},w_fazbitknowledge:{max:1e5,name:"fazbit's knowledge"},snowman:{max:5,name:"snomunculus"},livingsnow:{max:20},frost:{max:80},winteressence:{max:1e4,name:"essence of winter"},emblemofice:{max:1,name:"emblem of ice"},ice:{max:0},snowdrop:{max:5,name:"snowdrop"},puppets:{max:20},machinae:{max:20,name:"machinae"},automatas:{max:20,name:"automata"}},AE.data.PotionData={pot_poisonward:{name:"poison ward"},pot_breath1:{name:"portion of waterbreathing"},pot_mana1:{name:"draught of mana"},pot_cparalysis:{name:"cure paralysis"},pot_csilence:{name:"cure silence"},pot_heal1:{name:"minor healing"},pot_stam1:{name:"draught of stamina"},pot_stam2:{name:"potion of stamina"},pot_ironskin:{name:"ironskin salve"},pot_adamant:{name:"adamant salve"},hestiabrew:{name:"hestia's homebrew"},pot_waterward:{name:"water ward"},pot_fireward:{name:"fire ward"},pot_heal3:{name:"healing potion"},pot_truestrike:{name:"true striking"},pot_serenity:{name:"serenity"},pot_godspeed:{name:"godspeed"},pot_godsblood:{name:"god's blood"}},AE.data.EnchantItemNotations=["lucky","%i of %s","%i of %s","%i of life","%i of %s","%i of biting","%i of biting","%i of biting","%i of speed","of Pyromancy","of Hydromancy","of Geomancy","of Aeromancy","%i of the salamander","of the Ifrit","of the Sun Dog","%i of the crab","%i of the otter","%i of the Pisces","%i of the vole","of the Welver","of the Delver","%i of the sparrow","of the Eagle","of the Albatross","%i of speed","%i of speed","%i of speed","%i of %s","%i of spells","%i of %s","%i of %s","%i of %s","%i of %s","%i of spells","%i of spells","%i of spells","%i of %s","of the light","of darkness","%i of colors"],AE.data.EnchantNameLookup={"sturdy armor":"en_armor1",luck:"en_luck1",mana:"en_mana1",energy:"en_energy1","life pool":"en_hp1",regeneration:"en_regen1","biting edge":"en_dmg3","quick boots":"en_speed1",pyromancy:"en_firelore1",hydromancy:"en_waterlore1",geomancy:"en_earthlore1",aeromancy:"en_airlore1","fire ring":"en_fire1","ifrit's ring":"en_fire2","sun dog's ring":"en_fire3","crabs's ring":"en_water1","otters's ring":"en_water2","pisces' ring":"en_water3","vole's ring":"en_earth1","worms's ring":"en_earth2","delver's ring":"en_earth3","sparrow's ring":"en_air1","eagle's ring":"en_air2","albatross's ring":"en_air3","quick boots ii":"en_speed2","quick boots iii":"en_speed3","quick boots iv":"en_speed4",clarity:"en_clarity2",spellcraft:"en_scraft",courage:"en_courage",sanity:"en_sanity",refreshment:"en_stam1","keen weapon":"en_tohit2","spellcraft ii":"en_scraft2","spellcraft iii":"en_scraft3","spellcraft iv":"en_scraft4",deception:"en_decep",lumos:"en_lightcloak",shadow:"en_shadowcloak","prismatic ring":"en_prisma"},AE.data.EnchantData={en_armor1:{level:1,name:"sturdy armor",target:["armor"],mods:{}},en_luck1:{level:1,name:"luck",target:["ring"],mods:{}},en_mana1:{level:1,name:"mana",target:["ring"],mods:{}},en_energy1:{level:1,name:"energy",target:["ring"],mods:{}},en_hp1:{level:1,name:"life pool",target:["neck"],mods:{}},en_regen1:{level:2,name:"regeneration",target:["neck"],mods:{}},en_dmg1:{level:1,name:"biting edge",target:["weapon"],mods:{}},en_dmg2:{level:3,name:"biting edge",target:["weapon"],mods:{}},en_dmg3:{level:5,name:"biting edge",target:["weapon"],mods:{}},en_speed1:{level:1,name:"quick boots",target:["feet"],mods:{}},en_firelore1:{level:8,name:"Pyromancy",target:["ring"],mods:{}},en_waterlore1:{level:8,name:"Hydromancy",target:["ring"],mods:{}},en_earthlore1:{level:8,name:"Geomancy",target:["ring"],mods:{}},en_airlore1:{level:8,name:"Aeromancy",target:["ring"],mods:{}},en_fire1:{level:3,name:"fire ring",target:["ring"],mods:{}},en_fire2:{level:2,name:"Ifrit's ring",target:["ring"],mods:{}},en_fire3:{level:3,name:"Sun Dog's ring",target:["ring"],mods:{}},en_water1:{level:3,name:"crabs's ring",target:["ring"],mods:{}},en_water2:{level:2,name:"otters's ring",target:["ring"],mods:{}},en_water3:{level:3,name:"Pisces' ring",target:["ring"],mods:{}},en_earth1:{level:3,name:"vole's ring",target:["ring"],mods:{}},en_earth2:{level:5,name:"Worms's Ring",target:["ring"],mods:{}},en_earth3:{level:3,name:"Delver's ring",target:["ring"],mods:{}},en_air1:{level:1,name:"Sparrow's ring",target:["ring"],mods:{}},en_air2:{level:2,name:"Eagle's ring",target:["ring"],mods:{}},en_air3:{level:3,name:"Albatross's ring",target:["ring"],mods:{}},en_speed2:{level:3,name:"quick boots II",target:["feet"],mods:{}},en_speed3:{level:5,name:"quick boots III",target:["feet"],mods:{}},en_speed4:{level:7,name:"quick boots IV",target:["feet"],mods:{}},en_clarity:{level:3,name:"clarity",target:["head"],mods:{}},en_scraft:{level:3,name:"spellcraft",target:["armor","weapon"],mods:{}},en_courage:{level:5,name:"courage",target:["waist"],mods:{}},en_sanity:{level:6,name:"sanity",target:["head"],mods:{}},en_clarity2:{level:7,name:"clarity",target:["head"],mods:{}},en_stam1:{level:7,name:"refreshment",target:["ring"],mods:{}},en_tohit1:{level:1,name:"keen weapon",target:["weapon"],mods:{}},en_scraft2:{level:6,name:"spellcraft II",target:["armor","weapon"],mods:{}},en_tohit2:{level:2,name:"keen weapon",target:["weapon"],mods:{}},en_scraft3:{level:8,name:"spellcraft III",target:["armor","weapon"],mods:{}},en_scraft4:{level:10,name:"spellcraft IV",target:["armor","weapon"],mods:{}},en_decep:{level:9,name:"deception",target:["back"],mods:{}},en_lightcloak:{level:9,name:"Lumos",target:["back"],mods:{}},en_shadowcloak:{level:9,name:"Shadow",target:["back"],mods:{}},en_prisma:{level:8,name:"prismatic ring",target:["ring"],mods:{}}},AE.data.MaterialData={silk:{level:1},cotton:{level:0},stone:{level:0},glass:{level:2},leather:{level:0},wood:{level:0,adj:"wooden"},bone:{level:2},ivory:{level:4},mat_gold:{level:4,adj:"golden"},mat_ruby:{level:6},bronze:{level:2},iron:{level:3},steel:{level:4},dragonscale:{level:7},basiliskhide:{level:6},quicksteel:{level:5},mithril:{level:7},ebonwood:{level:8},idrasil:{level:8},ethereal:{level:8},adamant:{level:9,adj:"adamantine"},crimsonice:{level:5},coldsteel:{level:5},permafrost:{level:7}},AE.data.HomeData={alcove:{name:"alcove",size:5},earthspire:{name:"earthen spire",size:300},atticbedroom:{name:"Attic Bedroom",size:10},innroom:{name:"Lodge at Inn",size:12},hut:{name:"hut",size:15},camp:{name:"camp",size:14},wagon:{name:"tinker's wagon",size:12},cottage:{name:"cottage",size:20},house:{name:"house",size:30},shop:{name:"shop",size:25},inn:{name:"inn",size:50},lodge:{name:"lodge",size:30},gabledhouse:{name:"gabled mansion",size:65},halftimber:{name:"half-timber house",size:75},cave:{name:"cave",size:25},pavilion:{name:"pavilion",size:50},hauntedmanse:{name:"haunted manse",size:75},ancientruins:{name:"ancient ruins",size:110},tower:{name:"tower",size:55},lighthouse:{name:"lighthouse",size:80},cataract:{name:"cataract",size:70},citadel:{name:"citadel",size:200},academy:{name:"academy",size:300},temple:{name:"temple",size:200},magetower:{name:"mage tower",size:420},sm_idrasil:{name:"idrasil seedling",size:300},palace:{name:"palace",size:400},castle:{name:"castle",size:400},cove:{name:"cove",size:350},volcano:{name:"volcanic lair",size:200},cavern:{name:"cavern",size:200},grove:{name:"Enchanted Grove",size:420},island:{name:"Shrouded Isle",size:420},wildcamp:{name:"wild's encampment",size:40},shianpagoda:{name:"elegant pagoda",size:550},clockworkhome:{name:"clockwork home",size:50}},AE.data.HomeNameLookup={alcove:"alcove","earthen spire":"earthspire","attic bedroom":"atticbedroom","lodge at inn":"innroom",hut:"hut",camp:"camp","tinker's wagon":"wagon",cottage:"cottage",house:"house",shop:"shop",inn:"inn",lodge:"lodge","gabled mansion":"gabledhouse","half-timber house":"halftimber",cave:"cave",pavilion:"pavilion","haunted manse":"hauntedmanse","ancient ruins":"ancientruins",tower:"tower",lighthouse:"lighthouse",cataract:"cataract",citadel:"citadel",academy:"academy",temple:"temple","mage tower":"magetower","idrasil seedling":"sm_idrasil",palace:"palace",castle:"castle",cove:"cove","volcanic lair":"volcano",cavern:"cavern","enchanted grove":"grove","shrouded isle":"island","wild's encampment":"wildcamp","elegant pagoda":"shianpagoda","clockwork home":"clockworkhome"},AE.data.MountData={magicbroomstick:{name:"magic broomstick",distance:115},ebonwoodbroomstick:{name:"ebonwood broomstick",distance:355},flyingcarpet:{name:"flying carpet",distance:300},mule:{name:"mule",distance:15},oldnag:{name:"old nag",distance:30},gelding:{name:"demure gelding",distance:55},bayhorse:{name:"fine bay",distance:100},skelcharger:{name:"skeletal charger",distance:270},firecharger:{name:"fire charger",distance:275},fly:{name:"fly",distance:525},firechariot:{name:"chariot of fire",distance:550},pegasusmount:{name:"pegasus",distance:320},gryffonmount:{name:"gryffon",distance:325}},AE.data.MountNameLookup={"magic broomstick":"magicbroomstick","ebonwood broomstick":"ebonwoodbroomstick","flying carpet":"flyingcarpet",mule:"mule","old nag":"oldnag","demure gelding":"gelding","fine bay":"bayhorse","skeletal charger":"skelcharger","fire charger":"firecharger",fly:"fly","chariot of fire":"firechariot",pegasus:"pegasusmount",gryffon:"gryffonmount"}}(window.jQuery),function(e){"use strict";AE.data.ResourceData.stamina={},AE.data.ResourceData.hp={}}(window.jQuery),function(e){"use strict";const t=/(.*?)\s?\(([0-9]+)\)/,a=/\[[0-9]+\](.*)/,i=["üîª","üëç"];AE.itemUtils=new class{constructor(){this.invalidItemNames={}}determineItemProperties(e){for(let t=0;t<i.length;t++)e=e.replace(i[t],"").trim();let n={fullName:e.trim(),name:e.trim(),count:1,type:AE.data.ItemType.Unknown,subType:void 0,isKnown:!1,enchantNotations:[]},s=a.exec(n.name);null!==s&&(n.name=s[1].trim(),n.fullName=n.name);let o=t.exec(n.name);null!==o&&(n.name=o[1].trim(),n.count=parseInt(o[2]));for(let e in AE.data.PotionData){let t=AE.data.PotionData[e];if(n.name.toLowerCase()===t.name){n.type=AE.data.ItemType.Consumable,n.subType=AE.data.ConsumableSubType.Potion,n.isKnown=!0;break}}if(!1===n.isKnown){(n.name.startsWith("Enchanted")||n.name.startsWith("enchanted"))&&(n.name=n.name.replace(/enchanted/gi,"").trim(),n.fullName=n.fullName.replace(/enchanted/gi,"").trim(),n.isEnchanted=!0);for(let e=0;e<AE.data.EnchantItemNotations.length;e++){let t=AE.data.EnchantItemNotations[e];n.name.includes(t)&&(n.name=n.name.replace(t,"").trim(),n.isEnchanted=!0,n.enchantNotations.push(t))}}if(!1===n.isKnown)for(let e in AE.data.SpecialItems)if(n.name.toLowerCase().includes(e)){n.type=AE.data.SpecialItems[e].type,n.subType=AE.data.SpecialItems[e].subType,n.isSpecialItem=!0,n.isKnown=!0;break}if(!1===n.isKnown)for(let e in AE.data.MaterialData){let t=e+" ";if(void 0!==AE.data.MaterialData[e].adj&&(t=AE.data.MaterialData[e].adj+" "),n.name.toLowerCase().startsWith(t)){n.name=n.name.substr(t.length).trim(),n.material=e,n.level=AE.data.MaterialData[e].level;break}}if(!1===n.isKnown)for(let e in AE.data.Accessories)if(n.name.toLowerCase()===AE.data.Accessories[e].name){n.type=AE.data.ItemType.Accessory,n.subType=AE.data.Accessories[e].subType,void 0===n.level&&(n.level=0),n.level+=AE.data.Accessories[e].lvl,n.isKnown=!0;break}if(!1===n.isKnown)for(let e in AE.data.Armor)if(n.name.toLowerCase()===AE.data.Armor[e].name){n.type=AE.data.ItemType.Armor,n.subType=AE.data.Armor[e].subType,void 0===n.level&&(n.level=0),n.level+=AE.data.Armor[e].lvl,n.isKnown=!0;break}if(!1===n.isKnown)for(let e in AE.data.Weapons)if(n.name.toLowerCase()===AE.data.Weapons[e].name){n.type=AE.data.ItemType.Weapon,n.subType=AE.data.Weapons[e].subType,void 0===n.level&&(n.level=0),n.level+=AE.data.Weapons[e].lvl,n.isKnown=!0;break}return!0===n.isKnown&&(n.itemSlot=this.determineItemSlot(n.type,n.subType)),n}determineItemSlot(e,t){switch(e){case AE.data.ItemType.Armor:switch(t){case AE.data.ArmorSubType.Back:return[AE.data.ItemSlot.Back];case AE.data.ArmorSubType.Chest:return[AE.data.ItemSlot.Chest];case AE.data.ArmorSubType.Feet:return[AE.data.ItemSlot.Feet];case AE.data.ArmorSubType.Hands:return[AE.data.ItemSlot.Hands];case AE.data.ArmorSubType.Head:return[AE.data.ItemSlot.Head];case AE.data.ArmorSubType.Shins:return[AE.data.ItemSlot.Shins];case AE.data.ArmorSubType.Waist:return[AE.data.ItemSlot.Waist];default:return}case AE.data.ItemType.Accessory:switch(t){case AE.data.AccessorySubType.Neck:return[AE.data.ItemSlot.Neck];case AE.data.AccessorySubType.Ring:return[AE.data.ItemSlot.Finger];default:return}case AE.data.ItemType.Weapon:switch(t){case AE.data.WeaponSubType.Axe2H:case AE.data.WeaponSubType.Mace2H:case AE.data.WeaponSubType.Spear:case AE.data.WeaponSubType.Staff:case AE.data.WeaponSubType.Sword2H:return[AE.data.ItemSlot.WeaponRight];case AE.data.WeaponSubType.Axe1H:case AE.data.WeaponSubType.Orb:case AE.data.WeaponSubType.Mace1H:case AE.data.WeaponSubType.Sword1H:case AE.data.WeaponSubType.Dagger:return[AE.data.ItemSlot.WeaponLeft,AE.data.ItemSlot.WeaponRight];default:return}default:return}}determineEnchantProperties(e){if(null==e||""===e||!isNaN(e))return;let t={level:0,mods:{},unknown:[]},a=e.split(",");for(let e=0;e<a.length;e++){let i=a[e].trim();void 0!==AE.data.EnchantData[i]?(t.level+=AE.data.EnchantData[i].level,void 0!==AE.data.EnchantData[i].mods&&this.mergeMods(t.mods,AE.data.EnchantData[i].mods)):(console.warn("Unknown Enchant: "+i),t.unknown.push(i))}return t}mergeMods(e,t){for(let a in t){let i=t[a];if(isNaN(i)){void 0===e[a]&&(e[a]={});for(let t in i)void 0===e[a][t]&&(e[a][t]=0),e[a][t]+=i[t]}else void 0===e[a]&&(e[a]=0),e[a]+=i}}modifyItemElement(t,a,i){if(!0===t.isSpecialItem?e(a).css("color","#FF8000").css("font-weight","bold"):t.type===AE.data.ItemType.Consumable?e(a).css("color","#3955cb"):!0===t.isEnchanted&&e(a).css("color","#b60083").css("font-style","italic"),void 0!==t.level){let n=t.fullName;if(!1!==i.showLevelInName&&(n="["+t.level+"] "+n),!0===i.compareEquip&&void 0!==t.itemSlot){let e=AE.playerState.getEquippedItemToCompareFor(t);if(void 0!==e){let a;for(let t=0;t<e.length;t++){let i=e[t];void 0!==i.level&&(void 0===a||a.level>i.level)&&(a=i)}void 0!==a&&(a.level>t.level?n+=" üîª":a.level<t.level&&(n+=" üëç"))}else n+=" üëç"}e(a).text(n)}}processItemEntry(e,t,a,i){if(void 0===i&&(i={}),!0===this.invalidItemNames[t])return;let n=this.determineItemProperties(t);return n.type===AE.data.ItemType.Unknown?(console.warn("Unknown Item:"),console.warn(n),void(this.invalidItemNames[t]=!0)):!0===i.hideConsumables&&n.type===AE.data.ItemType.Consumable?(e.hide(),n):(this.modifyItemElement(n,a,i),n)}}}(window.jQuery),function(e){"use strict";const t='\n<div id="at_item_popup_compare_div">\n    <div class="note-text"><hr>equipped</div>    \n</div>\n',a=/(max )*(.*)?:\s+([0-9\.]+)/i;AE.pageUtils=new class{getVitalValues(t){let a=e(".bars").find('tr[data-key="'+t+'"');if(0===a.length)return;let i=a.find(".bar-text").text().split("/");return this.getValues(i)}getResourceValues(t){let a=e('.rsrc[data-key="'+t+'"]').find(".num-align").text().split("/");return this.getValues(a)}getValues(e){let t={current:0,max:0};if(2!==e.length)return t;let a=parseFloat(e[0]),i=parseFloat(e[1]);if(isNaN(a)||isNaN(i))return t;a>i&&(a=i);let n=0;return i>0&&(n=a/i),{current:a,max:i,pct:n}}getResourceDiv(t){let a;return t=t.trim().toLowerCase(),e("div.res-list").find("div.rsrc").each((function(){void 0===a&&e(this).data("key").trim().toLowerCase()===t&&(a=e(this))})),a}getVitalsRow(t){let a;return t=t.trim().toLowerCase(),e("table.bars").find("tr").each((function(){void 0===a&&e(this).data("key").trim().toLowerCase()===t&&(a=e(this))})),a}checkData(){let t=[];e("div.res-list").find("div.rsrc").each((function(){let a=e(this).data("key");!1==(void 0!==AE.data.ResourceData[a])&&t.push(a)})),t.length>0&&AE.log("Unknown Resources: "+t);let a=[];e("table.bars").find("tr").each((function(){let t=e(this).data("key");!1==(void 0!==AE.data.ResourceData[t])&&a.push(t)})),a.length>0&&AE.log("Unknown Vitals: "+a)}fixTableLayout(t){t.css("grid-template-columns","repeat( auto-fit, minmax(18rem, 0.5fr))"),t.find(".separate").each((function(){e(this).find("button").each((function(){e(this).css("width","60px").css("flex-shrink","0")}))}))}sellInventoryJunk(){let t=e("div.inventory");if(0===t.length)return;let a=t.find("div.item-table");0!==a.length&&a.find(".separate").each((function(){let t,a=e(this).children()[0],i=e(this).find("button");for(let e=0;e<i.length;e++)if("Sell"===i[e].innerText){t=i[e];break}void 0!==t&&a.innerText.includes("üîª")&&t.click()}))}updateInventorySubContent(t){void 0===t&&(t={});let a=e("div.inventory");if(0===a.length)return;let i=a.find("div.item-table");if(0!==i.length){if(!0===t.addSellJunkButton){let t=a.find("#at_inv_sell_junk_btn");if(0===t.length){let i=a.find("span.top");if(0!==i.find("button").length){let a=e('<span id="at_inv_sell_junk_btn"></span>');t=e("<button>Sell Low Level Items</button>"),t[0].addEventListener("click",(e=>{AE.pageUtils.sellInventoryJunk()}),!1),a.append(t),i.append(a)}}}this.fixTableLayout(i),i.find(".separate").each((function(){let a=e(this).children()[0];!0===t.removeEquip&&e(this).find("button").each((function(){"Equip"===e(this).text()&&e(this).remove()}));let i=a.innerText;AE.itemUtils.processItemEntry(e(this),i,a,t)}))}}getPopupSection(t,a){let i;return t.find("div.note-text").each((function(){if(void 0!==i)return;let t=e(this).text().trim().toLowerCase();for(let n=0;n<a.length;n++)if(t===a[n].toLowerCase())return void(i=e(this).parent())})),i}updatePopupCost(){let t=e("div.item-popup");if(0===t.length)return;let i=t.find("div.item-info");if(0===i.length)return;let n=this.getPopupSection(i,["cost","progress cost","purchase cost"]);void 0!==n&&n.find("span").each((function(){let t=e(this).text(),i=a.exec(t);if(null===i)return void console.warn("Unknown Cost Value: "+t);let n=i[2].toLowerCase().trim();if(parseFloat(i[3]),void 0===AE.playerState.resources[n])return void console.warn("Unknown Cost Resource: "+n);let s=AE.pageUtils.getResourceDiv(n);if(void 0!==s&&s.length>0)return void s.find("span.item-name").css("color","red");let o=AE.pageUtils.getVitalsRow(n);void 0!==o&&o.length>0&&e(o.children()[0]).css("color","red")}))}updateItemPopup(){let a=e("div.item-popup");if(0===a.length)return;let i=a.find("div.item-info");if(0===i.length)return;let n=i.find("span.item-name"),s=n.text(),o=AE.itemUtils.determineItemProperties(s);if(void 0===o)return;AE.itemUtils.modifyItemElement(o,n,{showLevelInName:!1,compareEquip:!0});let r=a.find("#at_item_popup_compare_div"),l=AE.playerState.getEquippedItemToCompareFor(o);if(0===r.length){if(r=e(t),void 0!==l)for(let t=0;t<l.length;t++){let a=e('<span id="at_item_popup_compare_text" class="separate"></span>');AE.itemUtils.modifyItemElement(l[t],a,{}),r.append(a)}else{let a=e(t);a.text("None"),r.append(a)}i.append(r)}}}}(window.jQuery),function(e){"use strict";AE.playerState=new class{constructor(){this.activeTab=void 0,this.resources={},this.resourceState={},this.equippedItems={},this.timeSinceResourceCompute=0}initialize(){for(let e in AE.data.ResourceData)this.resources[e]={current:0,max:0},this.resourceState[e]={initialized:!1,diff:0,perSecond:0,lastUpdateState:{current:0,max:0}}}update(e){this.updateResources(),this.timeSinceResourceCompute+=e,this.timeSinceResourceCompute>=1e3&&(this.timeSinceResourceCompute=0,this.updateResourceState()),this.updateActiveTab()}getResourcePerSecond(e){return void 0===this.resourceState[e]?0:this.resourceState[e].perSecond}updateResourceState(){for(let e in AE.data.ResourceData){let t=this.resourceState[e],a=this.resources[e];!0===t.initialized&&(this.resourceState[e].perSecond=a.current-t.lastUpdateState.current),this.resourceState[e].lastUpdateState=a,t.initialized=!0}}updateResources(){for(let e in AE.data.ResourceData){let t=AE.pageUtils.getVitalValues(e);this.resources[e]=void 0!==t?t:AE.pageUtils.getResourceValues(e)}}clearEquippedItems(){this.equippedItems={}}registerEquippedItem(e,t){void 0===this.equippedItems[e]&&(this.equippedItems[e]=[]),this.equippedItems[e].push(t)}getEquippedItems(e){let t=[];for(let a=0;a<e.length;a++){let i=this.equippedItems[e[a]];if(void 0!==i)for(let e=0;e<i.length;e++)t.push(i[e])}return t}getEquippedItemToCompareFor(e){if(void 0===e.itemSlot)return;let t=this.getEquippedItems(e.itemSlot);return void 0!==t&&0!==t.length?t:void 0}updateActiveTab(){e("div.menu").find("div.menu-items").find("div.menu-item").each((function(){let t=e(this.children[0]);if(0===t.children().length){let e,a=t.text().trim();for(let t in AE.data.GameTabs)if(AE.data.GameTabs[t]===a){e=t;break}if(void 0===e)return void console.error("Unknown Tab: "+a);AE.playerState.activeTab!==a&&(AE.playerState.activeTab=a)}}))}}}(window.jQuery),function(e){"use strict";const t="at_settings";AE.settings=new class{constructor(){this.data={version:3,quickSlotTimes:[],quickSlotEnabled:[],quickSlotPresets:{},quickSlotPresetNames:{},mainScreenAlternateDisplay:!1,enchantScreenGroupedDisplay:!1,sanctum:{}}}initializeSettings(e){void 0===e.quickSlotEnabled&&(e.quickSlotEnabled=[]),void 0===e.quickSlotTimes&&(e.quickSlotTimes=[]),void 0===this.data.quickSlotPresets&&(this.data.quickSlotPresets={}),void 0===this.data.quickSlotPresetNames&&(this.data.quickSlotPresetNames={});for(let t=0;t<AE.config.quickSlotCount;t++)t===e.quickSlotTimes.length&&e.quickSlotTimes.push(void 0),null===e.quickSlotTimes[t]&&(e.quickSlotTimes[t]=void 0),t===e.quickSlotEnabled.length&&e.quickSlotEnabled.push(!0);void 0===e.mainScreenAlternateDisplay&&(e.mainScreenAlternateDisplay=!1),void 0===e.sanctum&&(e.sanctum={}),e.version=3}save(){localStorage.setItem(t,JSON.stringify(this.data))}load(){let e=localStorage.getItem(t);if(null==e)return;AE.log("Loading Settings...");let a=JSON.parse(e);null!=a&&(this.initializeSettings(a),this.data=a,AE.log("Done"))}}}(window.jQuery),function(e){"use strict";const t=/(.*)\shits\s(strongly )*(.*?):\s*([0-9\.]+)\s*(\(absorb: ([0-9\.]+)%\))*/i,a=/(.*)\s(parries|dodges)\s(.*)/i,i=/(.*)\ssteals\s([0-9\.]+)\slife/i;AE.damageMeter=new class{constructor(){this.combatStats={},this.mode=0,this.lastCombatLogLine=void 0,this.hasChanged=!0}load(){this.resetCombatStats();let t=e("div.log-view"),a=e('\n    <div id="at_dmg_meter" style="height: 200px;">\n        <div id="at_dmg_meter_header" style="background-color: lightgrey; display: flex;">\n            <span id="at_dmg_meter_header_title" style="margin-top: 6px">Damage</span>\n            <div style="margin-left: auto;">\n                <button id="at_dmg_meter_change_mode">M</button>\n                <button id="at_dmg_meter_reset">R</button>\n            </div>            \n        </div>\n        <table id="at_dmg_meter_values" style="width: 100%">\n            <thead>\n                <tr style="display: block">\n                    <th style="width: 80px">Name</th>\n                    <th style="width: 70px">Value</th>\n                    <th>/s</th>\n                </tr>            \n            </thead>\n            <tbody style="display:block;overflow:auto;height:130px;width:100%;">\n                            \n            </tbody>\n        </table>\n    </div>\n    ');t.append(a),e("#at_dmg_meter_change_mode").click(this.toggleMode.bind(this)),e("#at_dmg_meter_reset").click(this.resetCombatStats.bind(this))}hide(){let t=e("#at_dmg_meter");0!==t.length&&t.hide()}updateUI(t){if(!1===this.hasChanged)return;let a=e("#at_dmg_meter");if(0!==a.length)if(0!==e("div.adventure").length)switch(this.hasChanged=!1,a.show(),this.mode){case 0:this.refreshValuesSource(this.combatStats.damage);break;case 1:this.refreshValuesSource(this.combatStats.damageDoneBySource);break;case 2:this.refreshValuesSource(this.combatStats.damageTakenBySource);break;case 3:this.refreshValuesSource(this.combatStats.otherFriend);break;case 4:this.refreshValuesSource(this.combatStats.otherFoe)}else this.hide()}update(t){0!==e("#at_dmg_meter").length&&(this.parseCombatants(),this.parseCombatLog(),this.combatStats.combatTime+=t/1e3)}refreshValuesSource(t){let a=e("#at_dmg_meter_values").find("tbody");a.empty();let i=[];for(let e in t)i.push([e,t[e]]);i.sort((function(e,t){return t[1]-e[1]}));for(let n=0;n<i.length;n++){let s=i[n],o=t[s[0]],r=o/this.combatStats.combatTime,l={id:s[0].replace(" ",""),name:s[0],damage:Math.floor(o),dps:r.toFixed(2)},d=e(AE.utils.processTemplate('\n    <tr id="at_dmg_meter_entry_{{id}}">\n        <td >{{name}}</td>\n        <td style="width: 50px">{{damage}}</td>\n        <td style="width: 50px">{{dps}}</td>\n    </tr>\n    ',l));a.append(d)}}syncCombatants(e,t){let a=!1;for(let i=0;i<t.length;i++){let n=t[i];void 0===e[n]&&(e[n]=0,a=!0)}return a}parseCombatants(){let t=e("div.combat");if(0===t.length)return;let a=t.find("div.npc-group");if(2!==a.length)return;let i=[];e(a[0]).find("span.name-span").each((function(){let t=e(this).children()[0].innerText.trim();""!==t&&i.push(t)})),!0===this.syncCombatants(this.combatStats.friend,i)&&(this.hasChanged=!0),i=[],e(a[1]).find("span.name-span").each((function(){let t=e(this).children()[0].innerText.trim();""!==t&&i.push(t)})),!0===this.syncCombatants(this.combatStats.foe,i)&&(this.hasChanged=!0)}parseCombatLog(){let t=e("div.raid-bottom").find("div.outlog");if(0===t.length)return;let a=!1,i=[];if(t.find("div.log-item").each((function(){if(!0===a)return;if(e(this).find("span.log-title").length>0)return;let t=e(this).find("span.log-text").text();void 0===AE.damageMeter.lastCombatLogLine||t!==AE.damageMeter.lastCombatLogLine?i.push(t):a=!0})),0!==i.length){for(let e=0;e<i.length;e++)!0===this.parseCombatLogLine(i[e])&&(this.hasChanged=!0);AE.damageMeter.lastCombatLogLine=i[0]}}toggleMode(){switch(this.mode){case 0:e("#at_dmg_meter_header_title").text("Damage by Spell"),this.mode=1;break;case 1:e("#at_dmg_meter_header_title").text("Received by Source"),this.mode=2;break;case 2:e("#at_dmg_meter_header_title").text("Other (You)"),this.mode=3;break;case 3:e("#at_dmg_meter_header_title").text("Other (Enemy)"),this.mode=4;break;case 4:e("#at_dmg_meter_header_title").text("Damage"),this.mode=0}this.update(0)}resetCombatStats(){this.combatStats={damage:{dealt:0,received:0},combatTime:0,friend:{},foe:{},damageDoneBySource:{},damageTakenBySource:{},otherFriend:{},otherFoe:{},unhandledLines:[]},this.update(0)}combatRegisterDamageTaken(e,t){void 0===this.combatStats.damageTakenBySource[e]&&(this.combatStats.damageTakenBySource[e]=0),this.combatStats.damageTakenBySource[e]+=t}combatRegisterDamageDone(e,t){void 0===this.combatStats.damageDoneBySource[e]&&(this.combatStats.damageDoneBySource[e]=0),this.combatStats.damageDoneBySource[e]+=t}combatRegisterOtherFriendly(e,t=1){void 0===this.combatStats.otherFriend[e]&&(this.combatStats.otherFriend[e]=0),this.combatStats.otherFriend[e]+=t}combatRegisterOtherFoe(e,t=1){void 0===this.combatStats.otherFoe[e]&&(this.combatStats.otherFoe[e]=0),this.combatStats.otherFoe[e]+=t}parseCombatLogLine(e){if(""===e)return!1;let n={ln:e,f:Object.keys(this.combatStats.foe)},s=t.exec(e);if(null!==s){n.hit=!0;let e,t=s[1].trim(),a=void 0!==s[2],i=s[3].trim(),o=parseFloat(s[4]);void 0!==s[6]&&(e=parseFloat(s[6]));let r=!1;for(let n in this.combatStats.friend)n===i&&(this.combatStats.damage.received+=o,this.combatRegisterDamageTaken(t,o),!0===a&&this.combatRegisterOtherFoe("crits"),void 0!==e&&this.combatRegisterOtherFriendly("absorb",e),r=!0);for(let n in this.combatStats.foe)n===i&&(this.combatStats.damage.dealt+=o,this.combatRegisterDamageDone(t,o),!0===a&&this.combatRegisterOtherFriendly("crits"),void 0!==e&&this.combatRegisterOtherFoe("absorb",e),r=!0);if(!0===r)return!0}let o=a.exec(e);if(null!==o){n.parry=!0;let e=o[1].trim(),t=o[2].trim(),a=(o[3].trim(),!1);for(let i in this.combatStats.friend)i===e&&(this.combatRegisterOtherFriendly(t),a=!0);for(let i in this.combatStats.foe)i===e&&(this.combatRegisterOtherFoe(t),a=!0);if(!0===a)return!0}let r=i.exec(e);if(null!==r){n.leech=!0;let e=r[1].trim(),t=parseFloat(r[2].trim()),a=!1;for(let i in this.combatStats.friend)i===e&&(this.combatStats.damage.dealt+=t,this.combatRegisterDamageDone("lifesteal",t),a=!0);for(let i in this.combatStats.foe)i===e&&(this.combatStats.damage.received+=t,this.combatRegisterDamageTaken("lifesteel",t),a=!0);if(!0===a)return!0}return!0===AE.config.enableDebugMode&&this.combatStats.unhandledLines.push(n),!1}}}(window.jQuery),function(e){"use strict";AE.quickSlots=new class{constructor(){this.suspendAutomation=!1,this.target=[],this.cooldown=[]}load(){let t=0;this.resetCooldown(),e(".quickslot").each((function(){let a=e('<div id="at_qs_div_'+t+'" style="position:absolute; bottom:0px; left:0px; width:100%; opacity:0.75;height:20px;">'),i=e('<input id="at_qs_'+t+'" type="text" class="timeset" style="position: absolute; bottom: 0px; left: 0px; width:100%; font-weight:bold; opacity:0.75; text-align:center;">');a.append(i),i.change({id:t},(function(t){let a=parseFloat(e(this).val());isNaN(a)||null==a?a=void 0:a*=1e3,AE.log("Setting QS "+t.data.id+" Time to "+a+" ms"),AE.settings.data.quickSlotTimes[t.data.id]=a,AE.settings.save()})),AE.quickSlots.target[t]=e(this);let n=e('<input id="at_qs_e_'+t+'" type="checkbox" style="position: absolute; bottom: 0px; right: -5px; width:20px; opacity:0.75;">');n.change({id:t},(function(e){AE.settings.data.quickSlotEnabled[e.data.id]=!AE.settings.data.quickSlotEnabled[e.data.id],AE.settings.save()})),a.append(n),e(this).append(a),t++}));let a=e("div.quickbar"),i=e('<div id"at_qs_btn_area" style="margin-left: auto; display: flex; flex-direction: row;">');for(let t=0;t<AE.config.quickSlotPresetCount;t++){let a=e('<div id="at_qs_preset'+t+'" style="display: flex; flex-direction: column; margin-right: 15px;">');i.append(a);let n=e('<input id="at_qs_preset_name_'+t+'" type="text" class="timeset" style="width: 80px; font-weight:bold; text-align:center;"></input>');n.change({id:t},(function(t){void 0===AE.settings.data.quickSlotPresetNames&&(AE.settings.data.quickSlotPresetNames={}),AE.settings.data.quickSlotPresetNames[t.data.id]=e(this).val(),AE.settings.save()})),a.append(n);let s=e('<button id="at_qs_presetbtn_save"'+t+">Save</button>");s.click({id:t},(function(e){AE.quickSlots.savePreset(e.data.id)})),a.append(s);let o=e('<button id="at_qs_presetbtn_load"'+t+">Load</button>");o.click({id:t},(function(e){AE.quickSlots.loadPreset(e.data.id)})),a.append(o)}let n=e('<button id="at_qs_suspend" style="margin-left: auto;">Suspend</button>');n.click((function(){AE.quickSlots.suspendAutomation=!AE.quickSlots.suspendAutomation,AE.log("Quickslot Disabled: "+AE.quickSlots.suspendAutomation),e(this).text(!0===AE.quickSlots.suspendAutomation?"Resume":"Suspend"),AE.quickSlots.resetCooldown()})),i.append(n),a.append(i),this.updateDisplay()}resetCooldown(){for(let e=0;e<AE.config.quickSlotCount;e++)this.cooldown[e]=0}savePreset(e){void 0===AE.settings.data.quickSlotPresets&&(AE.settings.data.quickSlotPresets={}),AE.settings.data.quickSlotPresets[e]=JSON.stringify({n:AE.settings.data.quickSlotPresetNames[e],t:AE.settings.data.quickSlotTimes,e:AE.settings.data.quickSlotEnabled}),AE.log("Saving Preset "+e),AE.settings.save()}loadPreset(e){if(void 0===AE.settings.data.quickSlotPresets)return;let t=AE.settings.data.quickSlotPresets[e];if(void 0===t)return;let a=JSON.parse(t);if(void 0!==a){if(AE.log("Loading Preset "+e),void 0!==a.n&&(AE.settings.data.quickSlotPresetNames[e]=a.n),void 0!==a.t&&a.t.length===AE.settings.data.quickSlotTimes.length){for(let e=0;e<a.t.length;e++)null===a.t[e]&&(a.t[e]=void 0);AE.settings.data.quickSlotTimes=a.t}void 0!==a.e&&a.e.length===AE.settings.data.quickSlotEnabled.length&&(AE.settings.data.quickSlotEnabled=a.e),AE.settings.save(),this.updateDisplay()}}updateDisplay(){for(let t=0;t<AE.config.quickSlotCount;t++){let a=e("#at_qs_"+t),i=e("#at_qs_e_"+t),n=AE.settings.data.quickSlotTimes[t],s=AE.settings.data.quickSlotEnabled[t];void 0===n?a.val(""):a.val(n/1e3),i.prop("checked",s)}for(let t=0;t<AE.config.quickSlotPresetCount;t++){let a=e("#at_qs_preset_name_"+t);void 0!==AE.settings.data.quickSlotPresetNames&&void 0!==AE.settings.data.quickSlotPresetNames[t]?a.val(AE.settings.data.quickSlotPresetNames[t]):a.val("Preset "+(t+1))}}update(e){if(!0!==this.suspendAutomation)for(let t=0;t<AE.config.quickSlotCount;t++){let a=this.target[t],i=AE.settings.data.quickSlotTimes[t],n=AE.settings.data.quickSlotEnabled[t];if(void 0===a||void 0===i||!1===n)continue;let s=a.find("div");this.cooldown[t]-=e,this.cooldown[t]<0&&(s[0].click(),this.cooldown[t]=i)}}}}(window.jQuery),function(e){"use strict";AE.saveUtils=new class{load(){this.loadCheckSaveButton(),this.loadFixSaveButton()}loadCheckSaveButton(){let t=e("#drop-file"),a=e('<button id="at_check_save_btn" style="border: var(--tiny-gap) dashed var(--quiet-text-color);">[Check Save]</button>');a.on("dragenter",(function(t){t.stopPropagation(),t.preventDefault(),e(this).addClass("hilite")})),a.on("dragleave",(function(t){t.stopPropagation(),t.preventDefault(),e(this).removeClass("hilite")})),a.on("dragover",(function(t){t.stopPropagation(),t.preventDefault(),e(this).addClass("hilite")})),a.on("drop",(function(t){if(t.preventDefault(),t.stopPropagation(),e(this).removeClass("hilite"),t.originalEvent.dataTransfer&&1===t.originalEvent.dataTransfer.files.length){let e=t.originalEvent.dataTransfer.files[0],a=new FileReader;a.onload=function(e){AE.saveUtils.fixSave(JSON.parse(a.result))},a.readAsText(e)}})),t.after(a)}loadFixSaveButton(){let t=e("#drop-file"),a=e('<button id="at_fix_save_btn" style="border: var(--tiny-gap) dashed var(--quiet-text-color);">[Fix Save]</button>');a.on("dragenter",(function(t){t.stopPropagation(),t.preventDefault(),e(this).addClass("hilite")})),a.on("dragleave",(function(t){t.stopPropagation(),t.preventDefault(),e(this).removeClass("hilite")})),a.on("dragover",(function(t){t.stopPropagation(),t.preventDefault(),e(this).addClass("hilite")})),a.on("drop",(function(t){if(t.preventDefault(),t.stopPropagation(),e(this).removeClass("hilite"),t.originalEvent.dataTransfer&&1===t.originalEvent.dataTransfer.files.length){let a=t.originalEvent.dataTransfer.files[0],i=new FileReader;i.onload=function(t){let n=AE.saveUtils.fixSave(JSON.parse(i.result));if(void 0!==n){let t=a.name.replace(".json",".fixed.json");e("<a />",{download:t,href:"data:application/json,"+encodeURIComponent(JSON.stringify(n))}).appendTo("body").click((function(){e(this).remove()}))[0].click()}},i.readAsText(a)}})),t.after(a)}fixSave(e){if(void 0!==e){if(AE.log("Attempting to Fix Save Issues..."),void 0===e.chars){let t=this.fixSaveCharacter(e);return void 0!==t?t:void 0}{let t=e.hall.items.hallPoints.val||0,a=0,i=[];for(let t=0;t<e.chars.length;t++){let n=e.chars[t];if(null==n){i.push(n);continue}a+=this.getSaveCharPrestige(n);let s=this.fixSaveCharacter(n);if(void 0===s)return;i.push(s)}return AE.log("Prestige Check: "+a+" == "+t),e.chars=i,e}}}getSaveCharPrestige(e){let t=0,a=0,i=0,n=0;void 0!==e.items.player.points&&(t=e.items.player.points),void 0!==e.items.fame&&(a=e.items.fame.val),void 0!==e.items.level&&(i=e.items.level.val),void 0!==e.items.player&&void 0!==e.items.player.titles&&(n=e.items.player.titles.length);let s=t+a+(i+n)/10;return AE.log("Prestige for "+e.name+" == "+s+" (L:"+i+", F: "+a+", T:"+n+")"),s}fixSaveCharacter(e){if(null!=e){AE.log("Checking Character "+e.name);for(let t=0;t<e.items.inv.items.length;t++){let a=e.items.inv.items[t],i=this.fixSaveItem(a);void 0!==i&&(e.items.inv.items[t]=i)}for(let t in e.equip.slots){let a=e.equip.slots[t];if("neck"===t||"fingers"===t)for(let e=0;e<a.item.length;e++){let t=this.fixSaveItem(a.item[e]);void 0!==t&&(a.item[e]=t)}else{let e=this.fixSaveItem(a.item);void 0!==e&&(a.item=e)}e.equip.slots[t]=a}return void 0!==e.raid&&(void 0!==e.raid.combat&&void 0!==e.raid.combat.enemies&&e.raid.combat.enemies.length>0&&(AE.log("Resetting Combat Enemies"),e.raid.combat.enemies=[]),void 0!==e.raid.combat&&void 0!==e.raid.combat.allies&&e.raid.combat.allies.length>0&&(AE.log("Resetting Combat Allies"),e.raid.combat.allies=[])),e}}fixSaveItem(e){if(null==e||void 0===e.name)return;AE.log(" -- Checking item `"+e.name+"`");let t=AE.itemUtils.determineItemProperties(e.name);if(!1===t.isKnown)return AE.log("Unknown Item!"),void console.log(t);let a=e.name;if(e.name=t.fullName,!0===t.isEnchanted&&(e.name="enchanted "+e.name),a!==e.name&&AE.log("Renaming to `"+e.name+"`"),void 0!==e.enchants&&""!==e.enchants){let t=AE.itemUtils.determineEnchantProperties(e.enchants);if(void 0!==t){e.enchantTot!==t.level&&(AE.log("Fixing Enchanting level, was "+e.enchantTot+" should be "+t.level),e.enchantTot=t.level),void 0!==e.mod&&"string"!=typeof e.mod||(AE.log("Item has no mod info, adding"),e.mod={});for(let a in t.mods){let i=JSON.stringify(e.mod[a]),n=JSON.stringify(t.mods[a]);void 0!==i&&i===n||(AE.log("Fixing Enchanting Mod for "+a+", was "+i+" should be "+n),e.mod[a]=t.mods[a])}}}return e}}}(window.jQuery),function(e){"use strict";AE.pageStyle=new class{update(e){this.updateDarkModeState(),this.updateTopBarBuffView(),this.updateResourceList()}updateDarkModeState(){AE.pageStyle.darkModeActive=e("body").hasClass("darkmode")}updateTopBarBuffView(){let t=e("div.top-bar");if(0===t.length)return;let a=t.find("div.dot-view");0!==a.length&&a.find("div.dot").each((function(){let t=e(this).children()[0],a=e(this).children()[1];parseInt(t.innerText)<10?e(t).css("color","red"):e(t).css("color",""),e(a).css("white-space","normal"),e(this).css("width","60px").css("height","60px")}))}updateResourceList(){let t=e("div.res-list");t.css("min-width","18rem"),t.find("div.rsrc").each((function(){let t=e(this).find(".num-align"),a=AE.pageUtils.getValues(t.text().split("/"));a.current===a.max?t.css("color","#00b800"):0===a.current?t.css("color","#FF0000"):a.pct>=.9?t.css("color","#80b800"):a.pct<=.1?t.css("color","#ff8000"):t.css("color","#999")}))}}}(window.jQuery),function(e){"use strict";AE.tabStyle=new class{update(e){switch(AE.playerState.activeTab){case AE.data.GameTabs.Skills:this.updateSkillsTab();break;case AE.data.GameTabs.Home:this.updateHomeTab();break;case AE.data.GameTabs.Player:this.updatePlayerTab();break;case AE.data.GameTabs.Bestiary:this.updateBestiaryTab();break;case AE.data.GameTabs.Potions:this.updatePotionsTab()}}updateHomeTab(){this.updateHomeSelectionPopup()}updateHomeSelectionPopup(){let t=e("div.popup");0!==t.length&&t.find("button.task-btn").each((function(){let t,a=e(this),i=a.text().toLowerCase();if(!i.includes("(")){for(let e in AE.data.HomeNameLookup)if(i.toLowerCase().includes(e)){t=AE.data.HomeNameLookup[e];break}void 0!==t&&a.text(i+" ("+AE.data.HomeData[t].size+")")}}))}updatePlayerTab(){this.updateMountSelectionPopup()}updateMountSelectionPopup(){let t=e("div.popup");0!==t.length&&t.find("button.task-btn").each((function(){let t,a=e(this),i=a.text().toLowerCase();if(!i.includes("(")){for(let e in AE.data.MountNameLookup)if(i.toLowerCase().includes(e)){t=AE.data.MountNameLookup[e];break}void 0!==t&&a.text(i+" ("+AE.data.MountData[t].distance+")")}}))}updateSkillsTab(){e("div.skills").find("div.subs").css("grid-template-columns","repeat( auto-fit, minmax( 16rem, 1fr) )")}updateBestiaryTab(){e("table.bestiary").find("tr").each((function(){e(this).find("th.sm-name").css("text-decoration","none").css("cursor","default")}))}updatePotionsTab(){let t=e("div.potions").find("div.potion-col");0!==t.length&&(AE.pageUtils.fixTableLayout(t),t.find("div.separate").each((function(){e(this).find("button").each((function(){"Unlock"===e(this).text()?e(this).css("background-color","#ffa50050"):"Brew"===e(this).text()&&e(this).css("background-color","#90ee9050")}))})))}}}(window.jQuery),function(e){"use strict";AE.tabStyleMain=new class{constructor(){this.taskButtons={},this.taskButtonOriginalParents={},this.pinnedButtons={},this.activeButtonRoot=void 0,this.imbueGemCraftButtonPinned=!1,this.defaultGroup="Unsorted",this.upgradeActiveColor="#ff5757AA",this.upgradeInactiveColor="#feb3b3AA",this.classUpgradeInactiveColor="#8fff57AA",this.classUpgradeActiveColor="#c4ffa6AA",this.pinnedColor="#5698ffAA"}clearState(){this.taskButtons={},this.taskButtonOriginalParents={},this.pinnedButtons={},this.activeButtonRoot=void 0,this.imbueGemCraftButtonPinned=!1}updateUI(t){AE.playerState.activeTab===AE.data.GameTabs.Main?0!==e("div.main-tasks").length&&(this.updateMainTabAlternativeTaskDisplay(),this.updateMainTabCustomBar(),this.updateTaskButtonDisplay()):this.clearState()}updateAutomation(t){0!==e("div.main-tasks").length&&(this.updateImbueAllButton(),this.updatePinnedButtons())}updateImbueAllButton(){let t=e("#at_imbue_gems_btn");0!==t.length&&(!0===this.imbueGemCraftButtonPinned?(t.css("background-color",this.pinnedColor),t.click()):t.css("background-color",""))}updatePinnedButtons(){for(let t in this.pinnedButtons){if(!0!==this.pinnedButtons[t])continue;let a=this.taskButtons[t];void 0!==a&&(e(a.btn).css("background-color",this.pinnedColor),this.clickTaskButton(t))}}updateTaskButtonDisplay(){for(let t in this.taskButtons){let a=this.taskButtons[t],i=e(a.btn);a.isDisabled=i.prop("disabled"),!0===a.isUpgrade?!1===a.isDisabled?i.css("background-color",this.upgradeInactiveColor):i.css("background-color",this.upgradeActiveColor):!0===a.isClassUpgrade&&(!1===a.isDisabled?i.css("background-color",this.classUpgradeInactiveColor):i.css("background-color",this.classUpgradeActiveColor))}}onToggleMainBarTaskDisplay(e){AE.settings.data.mainScreenAlternateDisplay!==e&&(AE.settings.data.mainScreenAlternateDisplay=e,AE.settings.save()),this.rebuildTaskButtonDisplay()}rebuildTaskButtonDisplay(){let t=e("#vanilla_task_display"),a=e("#at_main_alternative_task_display");this.refreshTaskButtonState(),!0===AE.settings.data.mainScreenAlternateDisplay?(t.hide(),a.show(),this.moveTaskButtonsToGroupedDisplay(a),this.activeButtonRoot=a,this.createImbueAllButton()):(t.show(),a.hide(),this.moveTaskButtonsToOriginalParents(),this.activeButtonRoot=t,this.createImbueAllButton())}createImbueAllButton(){let t=e("#at_imbue_gems_btn");0!==t.length&&t.remove();let a=[];for(let e in this.taskButtons){let t=this.taskButtons[e];!0!==t.isLocked&&!0!==t.isRunnable&&AE.data.GemImbueTaskIds.includes(e)&&a.push(e)}if(0===a.length)return!1;this.imbueGemCraftButtonPinned=!1;let i=e('<button id="at_imbue_gems_btn" class="wrapped-btn">Imbue All Gems</button>');i.click({keys:a},(function(e){if(void 0===e||void 0===e.originalEvent||!0!==e.originalEvent.ctrlKey)for(let t=0;t<e.data.keys.length;t++)AE.tabStyleMain.clickTaskButton(e.data.keys[t]);else AE.tabStyleMain.imbueGemCraftButtonPinned=!AE.tabStyleMain.imbueGemCraftButtonPinned}));let n=this.taskButtons[a[0]].btn;e(n).parent().before(i)}clickTaskButton(t){let a=this.taskButtons[t];void 0!==a&&e(a.btn).click()}moveTaskButtonsToOriginalParents(){for(let t in this.taskButtons){let a=e(this.taskButtons[t].btn),i=this.taskButtonOriginalParents[t];a.detach(),i.append(a)}}createTaskGroup(t,a){let i=AE.utils.processTemplate('\n<div id="{{id}}">\n    <span style="margin-left: 5px; margin-top: 2px;">{{title}}</span>\n    <div id="{{id}}_content" style="margin: 0;padding:var(--md-gap);display:grid;grid-template-columns: repeat( auto-fit, var(--task-button-width) );"/>\n</div>',{id:t,title:a}),n=e(i);return n.hide(),n}moveTaskButtonsToGroupedDisplay(t){t.empty();let a={};for(let t in this.taskButtons){let i=this.taskButtons[t],n=e(i.btn);n.detach();let s=AE.data.getTaskGroup(t);void 0===s&&(console.warn("No Group for "+t),s=this.defaultGroup);let o="at_main_alternative_display_group_"+s.replace(/[\s\,\.]/g,"").toLowerCase();void 0===a[o]&&(a[o]=this.createTaskGroup(o,s)),a[o].find("#"+o+"_content").append(n),!0!==i.isLocked&&a[o].show()}let i=Object.keys(a);i.sort();for(let e=0;e<i.length;e++)t.append(a[i[e]])}updateMainTabCustomBar(){if(0!==e("#at_main_top_bar").length)return;let t=e("div.main-tasks");if(0===t.length)return;let a=e('<div id="at_main_top_bar" class="top separate"></div>'),i=e("<span></span>"),n=AE.utils.createOptionsToggle("at_main_task_toggle_view","Alternative Display",this.onToggleMainBarTaskDisplay.bind(this),AE.settings.data.mainScreenAlternateDisplay);i.append(n),a.append(i);let s=e("<div></div>"),o=e("<button>Reset Pinned Buttons</button>");o[0].addEventListener("click",(e=>{AE.tabStyleMain.resetPinnedButtons()}),!1),s.append(o),a.append(s),e(t[0]).prepend(a)}resetPinnedButtons(){for(let t in this.pinnedButtons)!0===this.pinnedButtons[t]&&(this.pinnedButtons[t]=!1,e(this.taskButtons[t].btn).css("background-color",""))}refreshTaskButtonState(){AE.tabStyleMain.taskButtons={},void 0!==this.activeButtonRoot&&this.activeButtonRoot.find("button.task-btn").each((function(){let t=e(this),a=t.data("key");if(void 0===a)return;let i={btn:t,isLocked:t.hasClass("locked"),isRunnable:t.hasClass("runnable"),isUpgrade:AE.data.UpgradeTasks.includes(a),isClassUpgrade:AE.data.ClassUpgradeTasks.includes(a)};AE.tabStyleMain.taskButtons[a]=i,void 0===AE.tabStyleMain.taskButtonOriginalParents[a]&&(AE.tabStyleMain.taskButtonOriginalParents[a]=t.parent()),!1===i.isLocked&&!1===i.isUpgrade&&!1===i.isRunnable&&void 0===AE.tabStyleMain.pinnedButtons[a]&&(AE.tabStyleMain.pinnedButtons[a]=!1,e(i.btn).click({key:a},AE.tabStyleMain.pinTaskButtonCallback.bind(AE.tabStyleMain)))}))}pinTaskButtonCallback(t){if(void 0!==t&&void 0!==t.originalEvent&&!0===t.originalEvent.ctrlKey){let a=t.data.key;!0===AE.tabStyleMain.pinnedButtons[a]?(AE.tabStyleMain.pinnedButtons[a]=!1,e(t.currentTarget).css("background-color","")):AE.tabStyleMain.pinnedButtons[a]=!0}}updateMainTabAlternativeTaskDisplay(){if(0!==e("#at_main_alternative_task_display").length)return;let t=e("div.main-tasks");if(1!==t.length)return;let a=e('<div id="vanilla_task_display" class="main-tasks"></div>');t.children().each((function(){e(this).detach(),a.append(e(this))})),t.append(a);let i=e('<div id="at_main_alternative_task_display" class="main-tasks"></div>');t.append(i),this.activeButtonRoot=a,this.onToggleMainBarTaskDisplay(AE.settings.data.mainScreenAlternateDisplay)}}}(window.jQuery),function(e){"use strict";const t=/\s*([0-9]+)\s*\/\s*([0-9]+)\s*slot-levels/i;AE.tabStyleEnchant=new class{constructor(){this.resetState()}resetState(){this.slotsRemaining=0,this.slotsUsed=0,this.slotsMax=0,this.enchantElements={}}updateUI(){AE.playerState.activeTab===AE.data.GameTabs.Enchanting&&0!==e("div.enchants").length?(AE.pageUtils.updateInventorySubContent({hideConsumables:!0,compareEquip:!0}),AE.pageUtils.updateItemPopup(),this.updateEnchantList(),this.updateEnchantTabCustomBar(),this.updateGroupedList(),this.updateEnchantState()):this.resetState()}onToggleEnchantBarTaskDisplay(e){AE.settings.data.enchantScreenGroupedDisplay!==e&&(AE.settings.data.enchantScreenGroupedDisplay=e,AE.settings.save()),this.rebuildEnchantsDisplay()}updateEnchantTabCustomBar(){if(0!==e("#at_enchant_top_bar").length)return;let t=e("div.enchants");if(0===t.length)return;let a=e('<div id="at_enchant_top_bar" class="top separate"></div>'),i=e("<span></span>"),n=AE.utils.createOptionsToggle("at_enchants_toggle_view","Grouped Display",this.onToggleEnchantBarTaskDisplay.bind(this),AE.settings.data.enchantScreenGroupedDisplay);i.append(n),a.append(i),e(t[0]).prepend(a)}updateEnchantState(){let a=e("div.enchants").find("div.enchant-slots");if(0===a.length)return;let i=t.exec(a.children()[0].innerText);if(null!==i){this.slotsUsed=parseInt(i[1]),this.slotsMax=parseInt(i[2]),this.slotsRemaining=this.slotsMax-this.slotsUsed;for(let t in AE.data.EnchantData){let a=AE.data.EnchantData[t],i=e("#at_ench_div_"+t);if(0===i.length)continue;let n=i.find("span.ench-name");this.slotsRemaining<a.level?n.css("color","red"):n.css("color","")}}}refreshEnchantListElements(t){t.find("div.enchant").each((function(){let t=e(this);if(void 0!==t.attr("id"))return;let a=t.find("span.ench-name"),i=a.text().toLowerCase(),n=AE.data.EnchantNameLookup[i];if(void 0===n)return;let s=AE.data.EnchantData[n];t.attr("id","at_ench_div_"+n),a.text("["+s.level+"] "+i),AE.tabStyleEnchant.enchantElements[n]=[this,i]}))}updateGroupedList(){let t=e("#at_enchant_list_vanilla");if(0===t.length)return;if(0!==e("#at_enchant_list_grouped").length)return;let a=e('<div id="at_enchant_list_grouped" style="min-width: 250px"/>');t.after(a),this.rebuildEnchantsDisplay()}updateEnchantList(){let t=e("#at_enchant_list_vanilla");if(0!==t.length)return void(t.is(":visible")&&this.refreshEnchantListElements(t));let a=e("div.enchants"),i=a.find("div.enchant-list");0!==i.length&&(i.css("min-width","250px"),i.attr("id","at_enchant_list_vanilla"),this.refreshEnchantListElements(i));let n=a.find("div.filter-box");0!==n.length&&n.attr("id","at_enchant_filter_vanilla")}rebuildEnchantsDisplay(){let t=e("#at_enchant_list_vanilla"),a=e("#at_enchant_list_grouped"),i=e("#at_enchant_filter_vanilla");!0===AE.settings.data.enchantScreenGroupedDisplay?(t.hide(),i.hide(),a.show(),this.moveEnchantsToGroupedDisplay()):(this.moveEnchantsToVanillaDisplay(),a.hide(),t.show(),i.show())}moveEnchantsToGroupedDisplay(){let t=e("#at_enchant_list_grouped");if(0===t.length)return;t.empty();let a={};for(let e in this.enchantElements){let t=this.enchantElements[e][0],i=this.enchantElements[e][1],n="any";void 0!==e&&void 0!==AE.data.EnchantData[e].target&&(n=AE.data.EnchantData[e].target),void 0===a[n]&&(a[n]=[]),a[n][i]=t}let i=Object.keys(a);i.sort();for(let n=0;n<i.length;n++){let s=i[n],o=e('<div id="at_enchant_list_group_'+s+'" class="enchant-list" style="margin-bottom: 5px;"/>');o.append('<span style="font-weight: bold">'+s+"</span>");let r=Object.keys(a[s]);r.sort();for(let t=0;t<r.length;t++){let i=e(a[s][r[t]]);i.detach(),o.append(i)}t.append(o)}}moveEnchantsToVanillaDisplay(){let t=e("#at_enchant_list_vanilla");for(let a in this.enchantElements){let i=e(this.enchantElements[a][0]);i.detach(),t.append(i)}}}}(window.jQuery),function(e){"use strict";AE.tabStyleEquip=new class{constructor(){this.resetState()}resetState(){}updateUI(){AE.playerState.activeTab===AE.data.GameTabs.Equip?(AE.pageUtils.updateInventorySubContent({compareEquip:!0}),AE.pageUtils.updateItemPopup(),e("div.equip").css("grid-template-columns","repeat( auto-fill, minmax(18rem,1fr))"),AE.playerState.clearEquippedItems(),e("div.equip").find("div.equip-slot").each((function(){let t=e(this).find(".slot-name").text().replace(":","").trim().toLowerCase();e(this).find(".slot-item").each((function(){let a=e(this).find("span.item-name");if(0===a.length)return;let i=a.text(),n=AE.itemUtils.processItemEntry(e(this),i,a);if(void 0!==n&&void 0!==n.itemSlot){let e=n.itemSlot[0];if(n.itemSlot.length>1)for(let a=0;a<n.itemSlot.length;a++)if(n.itemSlot[a]===t){e=n.itemSlot[a];break}AE.playerState.registerEquippedItem(e,n)}}))}))):this.resetState()}}}(window.jQuery),function(e){"use strict";AE.tabStyleAdventure=new class{constructor(){this.resetState()}resetState(){}updateUI(){if(AE.playerState.activeTab!==AE.data.GameTabs.Adventure)return void this.resetState();let t=e("div.adventure");0!==t.length&&0!==t.find("div.raid-bottom").length&&(AE.pageUtils.updateInventorySubContent({removeEquip:!0,compareEquip:!0,addSellJunkButton:!0}),AE.pageUtils.updateItemPopup(),this.updateDotsLists())}updateDotsLists(){let t=e("div.dot-view");0!==t.length&&t.find("div.mini").each((function(){e(this).css("width","26px").css("height","26"),e(this).hasClass("curse")&&e(this).css("background-color","violet")}))}}}(window.jQuery),function(e){"use strict";AE.sanctum=new class{constructor(){this.isInitialized=!1,this.activeContent=void 0}update(e){!0===this.isInitialized&&(AE.sanctumConjure.update(e),AE.sanctumResearch.update(e))}updateUI(e){!0!==this.isInitialized&&(this.checkSettings(),this.updateMenuItem(),this.updateSanctumScreen(),this.isInitialized=!0),void 0!==this.activeContent&&this.activeContent.updateUI(e)}checkSettings(){let e=AE.settings.data.sanctum;void 0===e&&(e={},AE.settings.data.sanctum=e),void 0===e.unlocks&&(e.unlocks={}),void 0===e.conjure&&(e.conjure={resource:{},producers:{}}),void 0===e.research&&(e.research={complete:{},inProgress:{}}),AE.settings.save()}addTab(t,a,i){let n=t.find("#at_sanctum_tab_root"),s=t.find("#at_sanctum_content");if(0===n.length||0===s.length)return;let o=e(AE.utils.processTemplate('\n<li style="border-top-width: thin;border-left-width: thin;border-right-width: thin;border-bottom-width: 0px;border-style: solid;padding: 10px;margin: 2px;min-width:100px;">\n    <a href="#at_sanctum_tab_{{id}}" style="text-decoration: none;">{{title}}</a>\n</li>',{id:a,title:i}));n.append(o);let r=e(AE.utils.processTemplate('\n<div id="at_sanctum_tab_{{id}}">\n    <p>This is Tab: {{id}}</p>\n</div>',{id:a}));return s.append(r),[o,r]}activateTab(t){if(void 0===t)return;void 0!==this.activeContent&&(this.activeContent.deactivate(),this.activeContent=void 0),AE.log("Activating Sanctum Tab: "+t.title);let a=e("#at_sanctum_tab_"+t.id);switch(t){case AE.sanctumData.Tabs.Conjure:AE.sanctumConjure.activate(a),this.activeContent=AE.sanctumConjure;break;case AE.sanctumData.Tabs.Research:AE.sanctumResearch.activate(a),this.activeContent=AE.sanctumResearch}}updateSanctumScreen(){if(0!==e("#at_sanctum_screen").length)return;let t=e("div.game-mid");if(0===t.length)return;t.css("position","relative");let a=e('\n<div id="at_sanctum_screen" style="position: absolute;width:100%;height:100%;background-color: white;">\n    <div id="at_sanctum_top" class="menu-items">\n       <div id="at_sanctum_leave_btn" class="menu-item">\n            <span><u>Leave Sanctum</u></span>\n       </div>\n    </div>\n    <div id="at_sanctum_content">\n        <ul id="at_sanctum_tab_root" style="display: flex; flex-direction: row;">\n        </ul>\n    </div>  \n</div>');a.find("#at_sanctum_leave_btn").click((function(){AE.sanctum.hideSanctumScreen()}));for(let e in AE.sanctumData.Tabs){let t=AE.sanctumData.Tabs[e];this.addTab(a,t.id,t.title)}a.tabs({activate:function(t,a){let i=e(t.currentTarget).attr("href").replace("#at_sanctum_tab_","");for(let e in AE.sanctumData.Tabs)if(AE.sanctumData.Tabs[e].id===i){AE.sanctum.activateTab(AE.sanctumData.Tabs[e]);break}}}),a.hide(),t.append(a),this.activateTab(AE.sanctumData.Tabs.Conjure)}showSanctumScreen(){e("#at_sanctum_screen").show()}hideSanctumScreen(){e("#at_sanctum_screen").hide()}updateMenuItem(){if(0!==e("#at_sanctum_menu").length)return;let t=e("div.menu-items");if(0===t.length)return;let a=e('<div class="menu-item" id="at_sanctum_menu" data-v-636f3856=""><span><u id="at_sanctum_menu_text">Enter Sanctum</u></span></div>');a.click((function(){AE.sanctum.showSanctumScreen()})),t.append(a)}}}(window.jQuery),function(e){"use strict";AE.sanctumData=new class{},AE.sanctumData.Tabs={Conjure:{id:"conjure",title:"Conjure"},Research:{id:"research",title:"Research"}},AE.sanctumData.resources={essence:{id:"essence",symbol:"‚öóÔ∏è",producers:{click:{}}}}}(window.jQuery),function(e){"use strict";AE.sanctumConjure=new class{constructor(){this.isActive=!1,this.activeRoot=void 0}update(e){}updateUI(e){this.isActive}activate(t){void 0!==t&&0!==t.length&&(t.empty(),this.activePage=e('\n<div>\n    <div id="at_s_conjure_resources" style="width:350px;">\n        <table>\n            <tbody>        \n            </tbody>\n        </table>\n    </div>\n    <div id="at_s_conjure_producers">\n    \n    </div>\n</div>'),t.append(this.activePage),console.log("ACT: conjure"),this.isActive=!0)}deactivate(){console.log("DEACT: conjure"),this.activePage=void 0,this.isActive=!1}}}(window.jQuery),function(e){"use strict";AE.sanctumResearch=new class{constructor(){this.isActive=!1,this.activeRoot=void 0}update(e){}updateUI(e){this.isActive}activate(t){void 0!==t&&0!==t.length&&(t.empty(),this.activePage=e("\n<div>\n</div>"),t.append(this.activePage),this.isActive=!0)}deactivate(){this.activePage=void 0,this.isActive=!1}}}(window.jQuery),function(e){"use strict";AE.debug=new class{constructor(){}load(){let t=e("div.quickbar");if(0===t.length)return;let a=e('<button id="at_Debug_btn" style="margin-left: auto;">Debug</button>');a.click(this.printDebugInfo),t.append(a)}printDebugInfo(){console.log(AE.damageMeter.combatStats)}}}(window.jQuery),function(e){"use strict";const t=["vers pseudo_stable 0.8.1","vers 0.8.0"];AE.loader=new class{load(){this.checkForOtherScripts(),AE.settings.load(),AE.pageUtils.checkData(),AE.playerState.initialize(),this.checkVersion(),this.loadHtmlModifications(),AE.interval.add(this.reloadCheck.bind(this),2e3),AE.interval.add(AE.pageStyle.update.bind(AE.pageStyle),AE.config.uiUpdateInterval),AE.interval.add(AE.playerState.update.bind(AE.playerState),AE.config.minUpdateInterval),AE.interval.add(AE.tabStyle.update.bind(AE.tabStyle),AE.config.uiUpdateInterval),AE.interval.add(AE.tabStyleMain.updateUI.bind(AE.tabStyleMain),AE.config.uiUpdateInterval),AE.interval.add(AE.tabStyleMain.updateAutomation.bind(AE.tabStyleMain),125),AE.interval.add(AE.tabStyleEnchant.updateUI.bind(AE.tabStyleEnchant),AE.config.uiUpdateInterval),AE.interval.add(AE.tabStyleEquip.updateUI.bind(AE.tabStyleEquip),AE.config.uiUpdateInterval),AE.interval.add(AE.tabStyleAdventure.updateUI.bind(AE.tabStyleAdventure),AE.config.uiUpdateInterval),!0!==AE.config.arcanumAutomationPresent&&AE.interval.add(AE.quickSlots.update.bind(AE.quickSlots),AE.config.minUpdateInterval),AE.interval.add(AE.damageMeter.update.bind(AE.damageMeter),AE.config.minUpdateInterval),AE.interval.add(AE.damageMeter.updateUI.bind(AE.damageMeter),1e3)}checkVersion(){let a=e("span.vers");if(0===a.length)return void console.warn("Missing Version Tag");let i=a.text().trim();for(let e=0;e<t.length;e++)if(i===t[e])return void console.log("Detected Game Version: '"+i+"'");console.warn("Unknown Version: "+i)}checkForOtherScripts(){1===e("#automate_config").length&&(AE.log("Arcanum Automation Script Detected, disabling some features!"),AE.config.arcanumAutomationPresent=!0)}loadHtmlModifications(){!0!==AE.config.arcanumAutomationPresent&&AE.quickSlots.load(),AE.damageMeter.load(),AE.saveUtils.load(),!0===AE.config.enableDebugMode&&AE.debug.load();let t=e('<div id="at_reload_check" style="display: none"/>');e("div.top-bar").append(t)}reloadCheck(){0===e("#at_reload_check").length&&(AE.log("Reload Required, page state changed"),AE.playerState.initialize(),this.loadHtmlModifications())}}}(window.jQuery),function(e){"use strict";let t=3e3,a=!1,i=0;!function n(s){!function(n){if(0===e(".quickbar").length)return;0===i&&(i=n);let s=n-i;i=n,t>0?t-=s:(!1===a&&(AE.log("Loading..."),AE.loader.load(),a=!0,AE.log("Loading Done!")),AE.interval.update(s))}(s),window.requestAnimationFrame(n)}()}(window.jQuery);